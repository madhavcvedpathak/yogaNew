function zx(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var rU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Um={exports:{}},th={};var ty;function Ux(){if(ty)return th;ty=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return th.Fragment=t,th.jsx=e,th.jsxs=e,th}var ey;function $x(){return ey||(ey=1,Um.exports=Ux()),Um.exports}var Ut=$x(),$m={exports:{}},He={};var ny;function jx(){if(ny)return He;ny=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function y(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,A={};function _(q,T,j){this.props=q,this.context=T,this.refs=A,this.updater=j||S}_.prototype.isReactComponent={},_.prototype.setState=function(q,T){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,T,"setState")},_.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function I(){}I.prototype=_.prototype;function D(q,T,j){this.props=q,this.context=T,this.refs=A,this.updater=j||S}var M=D.prototype=new I;M.constructor=D,N(M,_.prototype),M.isPureReactComponent=!0;var Y=Array.isArray;function ct(){}var it={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function F(q,T,j){var V=j.ref;return{$$typeof:n,type:q,key:T,ref:V!==void 0?V:null,props:j}}function G(q,T){return F(q.type,T,q.props)}function E(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var T={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(j){return T[j]})}var tt=/\/+/g;function et(q,T){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):T.toString(36)}function ht(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ct,ct):(q.status="pending",q.then(function(T){q.status==="pending"&&(q.status="fulfilled",q.value=T)},function(T){q.status==="pending"&&(q.status="rejected",q.reason=T)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,T,j,V,rt){var ot=typeof q;(ot==="undefined"||ot==="boolean")&&(q=null);var mt=!1;if(q===null)mt=!0;else switch(ot){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(q.$$typeof){case n:case t:mt=!0;break;case p:return mt=q._init,X(mt(q._payload),T,j,V,rt)}}if(mt)return rt=rt(q),mt=V===""?"."+et(q,0):V,Y(rt)?(j="",mt!=null&&(j=mt.replace(tt,"$&/")+"/"),X(rt,T,j,"",function(Mt){return Mt})):rt!=null&&(E(rt)&&(rt=G(rt,j+(rt.key==null||q&&q.key===rt.key?"":(""+rt.key).replace(tt,"$&/")+"/")+mt)),T.push(rt)),1;mt=0;var kt=V===""?".":V+":";if(Y(q))for(var At=0;At<q.length;At++)V=q[At],ot=kt+et(V,At),mt+=X(V,T,j,ot,rt);else if(At=y(q),typeof At=="function")for(q=At.call(q),At=0;!(V=q.next()).done;)V=V.value,ot=kt+et(V,At++),mt+=X(V,T,j,ot,rt);else if(ot==="object"){if(typeof q.then=="function")return X(ht(q),T,j,V,rt);throw T=String(q),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return mt}function lt(q,T,j){if(q==null)return q;var V=[],rt=0;return X(q,V,"","",function(ot){return T.call(j,ot,rt++)}),V}function st(q){if(q._status===-1){var T=q._result;T=T(),T.then(function(j){(q._status===0||q._status===-1)&&(q._status=1,q._result=j)},function(j){(q._status===0||q._status===-1)&&(q._status=2,q._result=j)}),q._status===-1&&(q._status=0,q._result=T)}if(q._status===1)return q._result.default;throw q._result}var vt=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Et={map:lt,forEach:function(q,T,j){lt(q,function(){T.apply(this,arguments)},j)},count:function(q){var T=0;return lt(q,function(){T++}),T},toArray:function(q){return lt(q,function(T){return T})||[]},only:function(q){if(!E(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return He.Activity=m,He.Children=Et,He.Component=_,He.Fragment=e,He.Profiler=a,He.PureComponent=D,He.StrictMode=i,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=it,He.__COMPILER_RUNTIME={__proto__:null,c:function(q){return it.H.useMemoCache(q)}},He.cache=function(q){return function(){return q.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(q,T,j){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var V=N({},q.props),rt=q.key;if(T!=null)for(ot in T.key!==void 0&&(rt=""+T.key),T)!nt.call(T,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&T.ref===void 0||(V[ot]=T[ot]);var ot=arguments.length-2;if(ot===1)V.children=j;else if(1<ot){for(var mt=Array(ot),kt=0;kt<ot;kt++)mt[kt]=arguments[kt+2];V.children=mt}return F(q.type,rt,V)},He.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},He.createElement=function(q,T,j){var V,rt={},ot=null;if(T!=null)for(V in T.key!==void 0&&(ot=""+T.key),T)nt.call(T,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(rt[V]=T[V]);var mt=arguments.length-2;if(mt===1)rt.children=j;else if(1<mt){for(var kt=Array(mt),At=0;At<mt;At++)kt[At]=arguments[At+2];rt.children=kt}if(q&&q.defaultProps)for(V in mt=q.defaultProps,mt)rt[V]===void 0&&(rt[V]=mt[V]);return F(q,ot,rt)},He.createRef=function(){return{current:null}},He.forwardRef=function(q){return{$$typeof:c,render:q}},He.isValidElement=E,He.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:st}},He.memo=function(q,T){return{$$typeof:h,type:q,compare:T===void 0?null:T}},He.startTransition=function(q){var T=it.T,j={};it.T=j;try{var V=q(),rt=it.S;rt!==null&&rt(j,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(ct,vt)}catch(ot){vt(ot)}finally{T!==null&&j.types!==null&&(T.types=j.types),it.T=T}},He.unstable_useCacheRefresh=function(){return it.H.useCacheRefresh()},He.use=function(q){return it.H.use(q)},He.useActionState=function(q,T,j){return it.H.useActionState(q,T,j)},He.useCallback=function(q,T){return it.H.useCallback(q,T)},He.useContext=function(q){return it.H.useContext(q)},He.useDebugValue=function(){},He.useDeferredValue=function(q,T){return it.H.useDeferredValue(q,T)},He.useEffect=function(q,T){return it.H.useEffect(q,T)},He.useEffectEvent=function(q){return it.H.useEffectEvent(q)},He.useId=function(){return it.H.useId()},He.useImperativeHandle=function(q,T,j){return it.H.useImperativeHandle(q,T,j)},He.useInsertionEffect=function(q,T){return it.H.useInsertionEffect(q,T)},He.useLayoutEffect=function(q,T){return it.H.useLayoutEffect(q,T)},He.useMemo=function(q,T){return it.H.useMemo(q,T)},He.useOptimistic=function(q,T){return it.H.useOptimistic(q,T)},He.useReducer=function(q,T,j){return it.H.useReducer(q,T,j)},He.useRef=function(q){return it.H.useRef(q)},He.useState=function(q){return it.H.useState(q)},He.useSyncExternalStore=function(q,T,j){return it.H.useSyncExternalStore(q,T,j)},He.useTransition=function(){return it.H.useTransition()},He.version="19.2.0",He}var iy;function fg(){return iy||(iy=1,$m.exports=jx()),$m.exports}var Nt=fg();const Hx=cg(Nt);var jm={exports:{}},eh={},Hm={exports:{}},qm={};var ry;function qx(){return ry||(ry=1,(function(n){function t(X,lt){var st=X.length;X.push(lt);t:for(;0<st;){var vt=st-1>>>1,Et=X[vt];if(0<a(Et,lt))X[vt]=lt,X[st]=Et,st=vt;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var lt=X[0],st=X.pop();if(st!==lt){X[0]=st;t:for(var vt=0,Et=X.length,q=Et>>>1;vt<q;){var T=2*(vt+1)-1,j=X[T],V=T+1,rt=X[V];if(0>a(j,st))V<Et&&0>a(rt,j)?(X[vt]=rt,X[V]=st,vt=V):(X[vt]=j,X[T]=st,vt=T);else if(V<Et&&0>a(rt,st))X[vt]=rt,X[V]=st,vt=V;else break t}}return lt}function a(X,lt){var st=X.sortIndex-lt.sortIndex;return st!==0?st:X.id-lt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var f=[],h=[],p=1,m=null,v=3,y=!1,S=!1,N=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function M(X){for(var lt=e(h);lt!==null;){if(lt.callback===null)i(h);else if(lt.startTime<=X)i(h),lt.sortIndex=lt.expirationTime,t(f,lt);else break;lt=e(h)}}function Y(X){if(N=!1,M(X),!S)if(e(f)!==null)S=!0,ct||(ct=!0,B());else{var lt=e(h);lt!==null&&ht(Y,lt.startTime-X)}}var ct=!1,it=-1,nt=5,F=-1;function G(){return A?!0:!(n.unstable_now()-F<nt)}function E(){if(A=!1,ct){var X=n.unstable_now();F=X;var lt=!0;try{t:{S=!1,N&&(N=!1,I(it),it=-1),y=!0;var st=v;try{e:{for(M(X),m=e(f);m!==null&&!(m.expirationTime>X&&G());){var vt=m.callback;if(typeof vt=="function"){m.callback=null,v=m.priorityLevel;var Et=vt(m.expirationTime<=X);if(X=n.unstable_now(),typeof Et=="function"){m.callback=Et,M(X),lt=!0;break e}m===e(f)&&i(f),M(X)}else i(f);m=e(f)}if(m!==null)lt=!0;else{var q=e(h);q!==null&&ht(Y,q.startTime-X),lt=!1}}break t}finally{m=null,v=st,y=!1}lt=void 0}}finally{lt?B():ct=!1}}}var B;if(typeof D=="function")B=function(){D(E)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,et=tt.port2;tt.port1.onmessage=E,B=function(){et.postMessage(null)}}else B=function(){_(E,0)};function ht(X,lt){it=_(function(){X(n.unstable_now())},lt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(X){switch(v){case 1:case 2:case 3:var lt=3;break;default:lt=v}var st=v;v=lt;try{return X()}finally{v=st}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(X,lt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var st=v;v=X;try{return lt()}finally{v=st}},n.unstable_scheduleCallback=function(X,lt,st){var vt=n.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?vt+st:vt):st=vt,X){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=st+Et,X={id:p++,callback:lt,priorityLevel:X,startTime:st,expirationTime:Et,sortIndex:-1},st>vt?(X.sortIndex=st,t(h,X),e(f)===null&&X===e(h)&&(N?(I(it),it=-1):N=!0,ht(Y,st-vt))):(X.sortIndex=Et,t(f,X),S||y||(S=!0,ct||(ct=!0,B()))),X},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(X){var lt=v;return function(){var st=v;v=lt;try{return X.apply(this,arguments)}finally{v=st}}}})(qm)),qm}var ay;function Wx(){return ay||(ay=1,Hm.exports=qx()),Hm.exports}var Wm={exports:{}},br={};var sy;function Vx(){if(sy)return br;sy=1;var n=fg();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,br.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(f,h,null,p)},br.flushSync=function(f){var h=u.T,p=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=h,i.p=p,i.d.f()}},br.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},br.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},br.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):p==="script"&&i.d.X(f,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},br.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},br.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);i.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},br.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},br.requestFormReset=function(f){i.d.r(f)},br.unstable_batchedUpdates=function(f,h){return f(h)},br.useFormState=function(f,h,p){return u.H.useFormState(f,h,p)},br.useFormStatus=function(){return u.H.useHostTransitionStatus()},br.version="19.2.0",br}var oy;function Gx(){if(oy)return Wm.exports;oy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Wm.exports=Vx(),Wm.exports}var ly;function Yx(){if(ly)return eh;ly=1;var n=Wx(),t=fg(),e=Gx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function c(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,d=s;;){var b=l.return;if(b===null)break;var x=b.alternate;if(x===null){if(d=b.return,d!==null){l=d;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===l)return f(b),r;if(x===d)return f(b),s;x=x.sibling}throw Error(i(188))}if(l.return!==d.return)l=b,d=x;else{for(var R=!1,$=b.child;$;){if($===l){R=!0,l=b,d=x;break}if($===d){R=!0,d=b,l=x;break}$=$.sibling}if(!R){for($=x.child;$;){if($===l){R=!0,l=x,d=b;break}if($===d){R=!0,d=x,l=b;break}$=$.sibling}if(!R)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=E&&r[E]||r["@@iterator"],typeof r=="function"?r:null)}var tt=Symbol.for("react.client.reference");function et(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===tt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case _:return"Profiler";case A:return"StrictMode";case Y:return"Suspense";case ct:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case D:return r.displayName||"Context";case I:return(r._context.displayName||"Context")+".Consumer";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case it:return s=r.displayName||null,s!==null?s:et(r.type)||"Memo";case nt:s=r._payload,r=r._init;try{return et(r(s))}catch{}}return null}var ht=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},vt=[],Et=-1;function q(r){return{current:r}}function T(r){0>Et||(r.current=vt[Et],vt[Et]=null,Et--)}function j(r,s){Et++,vt[Et]=r.current,r.current=s}var V=q(null),rt=q(null),ot=q(null),mt=q(null);function kt(r,s){switch(j(ot,s),j(rt,r),j(V,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?C0(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=C0(s),r=A0(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}T(V),j(V,r)}function At(){T(V),T(rt),T(ot)}function Mt(r){r.memoizedState!==null&&j(mt,r);var s=V.current,l=A0(s,r.type);s!==l&&(j(rt,r),j(V,l))}function Ht(r){rt.current===r&&(T(V),T(rt)),mt.current===r&&(T(mt),Kf._currentValue=st)}var Kt,Qt;function ue(r){if(Kt===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Kt=s&&s[1]||"",Qt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kt+r+Qt}var K=!1;function Yt(r,s){if(!r||K)return"";K=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(Lt){var _t=Lt}Reflect.construct(r,[],Ft)}else{try{Ft.call()}catch(Lt){_t=Lt}r.call(Ft.prototype)}}else{try{throw Error()}catch(Lt){_t=Lt}(Ft=r())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(Lt){if(Lt&&_t&&typeof Lt.stack=="string")return[Lt.stack,_t.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),R=x[0],$=x[1];if(R&&$){var at=R.split(`
`),Ct=$.split(`
`);for(b=d=0;d<at.length&&!at[d].includes("DetermineComponentFrameRoot");)d++;for(;b<Ct.length&&!Ct[b].includes("DetermineComponentFrameRoot");)b++;if(d===at.length||b===Ct.length)for(d=at.length-1,b=Ct.length-1;1<=d&&0<=b&&at[d]!==Ct[b];)b--;for(;1<=d&&0<=b;d--,b--)if(at[d]!==Ct[b]){if(d!==1||b!==1)do if(d--,b--,0>b||at[d]!==Ct[b]){var Tt=`
`+at[d].replace(" at new "," at ");return r.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",r.displayName)),Tt}while(1<=d&&0<=b);break}}}finally{K=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?ue(l):""}function Ge(r,s){switch(r.tag){case 26:case 27:case 5:return ue(r.type);case 16:return ue("Lazy");case 13:return r.child!==s&&s!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return Yt(r.type,!1);case 11:return Yt(r.type.render,!1);case 1:return Yt(r.type,!0);case 31:return ue("Activity");default:return""}}function Ce(r){try{var s="",l=null;do s+=Ge(r,l),l=r,r=r.return;while(r);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var $t=Object.prototype.hasOwnProperty,be=n.unstable_scheduleCallback,ne=n.unstable_cancelCallback,Ae=n.unstable_shouldYield,ge=n.unstable_requestPaint,Ue=n.unstable_now,Je=n.unstable_getCurrentPriorityLevel,Be=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,Xe=n.unstable_NormalPriority,ce=n.unstable_LowPriority,ze=n.unstable_IdlePriority,de=n.log,si=n.unstable_setDisableYieldValue,Ze=null,Ne=null;function Te(r){if(typeof de=="function"&&si(r),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ze,r)}catch{}}var en=Math.clz32?Math.clz32:Ee,we=Math.log,Dn=Math.LN2;function Ee(r){return r>>>=0,r===0?32:31-(we(r)/Dn|0)|0}var De=256,_n=262144,We=4194304;function pe(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function un(r,s,l){var d=r.pendingLanes;if(d===0)return 0;var b=0,x=r.suspendedLanes,R=r.pingedLanes;r=r.warmLanes;var $=d&134217727;return $!==0?(d=$&~x,d!==0?b=pe(d):(R&=$,R!==0?b=pe(R):l||(l=$&~r,l!==0&&(b=pe(l))))):($=d&~x,$!==0?b=pe($):R!==0?b=pe(R):l||(l=d&~r,l!==0&&(b=pe(l)))),b===0?0:s!==0&&s!==b&&(s&x)===0&&(x=b&-b,l=s&-s,x>=l||x===32&&(l&4194048)!==0)?s:b}function ua(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ki(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ia(){var r=We;return We<<=1,(We&62914560)===0&&(We=4194304),r}function $r(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function ye(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ns(r,s,l,d,b,x){var R=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var $=r.entanglements,at=r.expirationTimes,Ct=r.hiddenUpdates;for(l=R&~l;0<l;){var Tt=31-en(l),Ft=1<<Tt;$[Tt]=0,at[Tt]=-1;var _t=Ct[Tt];if(_t!==null)for(Ct[Tt]=null,Tt=0;Tt<_t.length;Tt++){var Lt=_t[Tt];Lt!==null&&(Lt.lane&=-536870913)}l&=~Ft}d!==0&&Ta(r,d,0),x!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=x&~(R&~s))}function Ta(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var d=31-en(s);r.entangledLanes|=s,r.entanglements[d]=r.entanglements[d]|1073741824|l&261930}function _r(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var d=31-en(l),b=1<<d;b&s|r[d]&s&&(r[d]|=s),l&=~b}}function kr(r,s){var l=s&-s;return l=(l&42)!==0?1:Wn(l),(l&(r.suspendedLanes|s))!==0?0:l}function Wn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function di(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ii(){var r=lt.p;return r!==0?r:(r=window.event,r===void 0?32:G0(r.type))}function Os(r,s){var l=lt.p;try{return lt.p=r,s()}finally{lt.p=l}}var sr=Math.random().toString(36).slice(2),kn="__reactFiber$"+sr,Vn="__reactProps$"+sr,Qi="__reactContainer$"+sr,Er="__reactEvents$"+sr,jr="__reactListeners$"+sr,go="__reactHandles$"+sr,ca="__reactResources$"+sr,fa="__reactMarker$"+sr;function Fs(r){delete r[kn],delete r[Vn],delete r[Er],delete r[jr],delete r[go]}function ha(r){var s=r[kn];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Qi]||l[kn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=I0(r);r!==null;){if(l=r[kn])return l;r=I0(r)}return s}r=l,l=r.parentNode}return null}function da(r){if(r=r[kn]||r[Qi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function yo(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Da(r){var s=r[ca];return s||(s=r[ca]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function oi(r){r[fa]=!0}var Xl=new Set,Lr={};function pa(r,s){is(r,s),is(r+"Capture",s)}function is(r,s){for(Lr[r]=s,r=0;r<s.length;r++)Xl.add(s[r])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Zl={};function Ju(r){return $t.call(Zl,r)?!0:$t.call(Ql,r)?!1:Kl.test(r)?Zl[r]=!0:(Ql[r]=!0,!1)}function Rr(r,s,l){if(Ju(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function rs(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function ma(r,s,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+d)}}function vn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Jl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Pa(r,s,l){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,x=d.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return b.call(this)},set:function(R){l=""+R,x.call(this,R)}}),Object.defineProperty(r,s,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(R){l=""+R},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Bs(r){if(!r._valueTracker){var s=Jl(r)?"checked":"value";r._valueTracker=Pa(r,s,""+r[s])}}function tu(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return r&&(d=Jl(r)?r.checked?"true":"false":r.value),r=d,r!==l?(s.setValue(r),!0):!1}function or(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ai=/[\n"\\]/g;function pi(r){return r.replace(Ai,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function rl(r,s,l,d,b,x,R,$){r.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.type=R:r.removeAttribute("type"),s!=null?R==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+vn(s)):r.value!==""+vn(s)&&(r.value=""+vn(s)):R!=="submit"&&R!=="reset"||r.removeAttribute("value"),s!=null?eu(r,R,vn(s)):l!=null?eu(r,R,vn(l)):d!=null&&r.removeAttribute("value"),b==null&&x!=null&&(r.defaultChecked=!!x),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?r.name=""+vn($):r.removeAttribute("name")}function tc(r,s,l,d,b,x,R,$){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),s!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){Bs(r);return}l=l!=null?""+vn(l):"",s=s!=null?""+vn(s):l,$||s===r.value||(r.value=s),r.defaultValue=s}d=d??b,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=$?r.checked:!!d,r.defaultChecked=!!d,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(r.name=R),Bs(r)}function eu(r,s,l){s==="number"&&or(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function lr(r,s,l,d){if(r=r.options,s){s={};for(var b=0;b<l.length;b++)s["$"+l[b]]=!0;for(l=0;l<r.length;l++)b=s.hasOwnProperty("$"+r[l].value),r[l].selected!==b&&(r[l].selected=b),b&&d&&(r[l].defaultSelected=!0)}else{for(l=""+vn(l),s=null,b=0;b<r.length;b++){if(r[b].value===l){r[b].selected=!0,d&&(r[b].defaultSelected=!0);return}s!==null||r[b].disabled||(s=r[b])}s!==null&&(s.selected=!0)}}function nu(r,s,l){if(s!=null&&(s=""+vn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+vn(l):""}function iu(r,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(ht(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=vn(s),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d),Bs(r)}function ga(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ec(r,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":d?r.setProperty(s,l):typeof l!="number"||l===0||vo.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function nc(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var b in s)d=s[b],s.hasOwnProperty(b)&&l[b]!==d&&ec(r,b,d)}else for(var x in s)s.hasOwnProperty(x)&&ec(r,x,s[x])}function ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(r){return ic.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ya(){}var as=null;function bo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var zs=null,_e=null;function rc(r){var s=da(r);if(s&&(r=s.stateNode)){var l=r[Vn]||null;t:switch(r=s.stateNode,s.type){case"input":if(rl(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pi(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==r&&d.form===r.form){var b=d[Vn]||null;if(!b)throw Error(i(90));rl(d,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===r.form&&tu(d)}break t;case"textarea":nu(r,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&lr(r,!!l.multiple,s,!1)}}}var su=!1;function ac(r,s,l){if(su)return r(s,l);su=!0;try{var d=r(s);return d}finally{if(su=!1,(zs!==null||_e!==null)&&(ad(),zs&&(s=zs,r=_e,_e=zs=null,rc(s),r)))for(s=0;s<r.length;s++)rc(r[s])}}function Ir(r,s){var l=r.stateNode;if(l===null)return null;var d=l[Vn]||null;if(d===null)return null;l=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break t;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(Bi)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){ou=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{ou=!1}var Tr=null,xo=null,Ma=null;function sc(){if(Ma)return Ma;var r,s=xo,l=s.length,d,b="value"in Tr?Tr.value:Tr.textContent,x=b.length;for(r=0;r<l&&s[r]===b[r];r++);var R=l-r;for(d=1;d<=R&&s[l-d]===b[x-d];d++);return Ma=b.slice(r,1<d?1-d:void 0)}function Hr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function al(){return!0}function sl(){return!1}function Ti(r){function s(l,d,b,x,R){this._reactName=l,this._targetInst=b,this.type=d,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var $ in r)r.hasOwnProperty($)&&(l=r[$],this[$]=l?l(x):x[$]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?al:sl,this.isPropagationStopped=sl,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),s}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=Ti(Oa),ss=m({},Oa,{view:0,detail:0}),ol=Ti(ss),So,os,ls,Co=m({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ls&&(ls&&r.type==="mousemove"?(So=r.screenX-ls.screenX,os=r.screenY-ls.screenY):os=So=0,ls=r),So)},movementY:function(r){return"movementY"in r?r.movementY:os}}),lu=Ti(Co),us=m({},Co,{dataTransfer:0}),cs=Ti(us),oc=m({},ss,{relatedTarget:0}),fs=Ti(oc),lc=m({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),C=Ti(lc),P=m({},Oa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),J=Ti(P),ut=m({},Oa,{data:0}),gt=Ti(ut),Dt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},re={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fe(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=re[r])?!!s[r]:!1}function Re(){return fe}var $e=m({},ss,{key:function(r){if(r.key){var s=Dt[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Hr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(r){return r.type==="keypress"?Hr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Hr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cn=Ti($e),Gn=m({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),li=Ti(Gn),Pn=m({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),Ni=Ti(Pn),mi=m({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zi=Ti(mi),hs=m({},Co,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),va=Ti(hs),ds=m({},Oa,{newState:0,oldState:0}),uu=Ti(ds),ll=[9,13,27,32],Fa=Bi&&"CompositionEvent"in window,ba=null;Bi&&"documentMode"in document&&(ba=document.documentMode);var Ao=Bi&&"TextEvent"in window&&!ba,ps=Bi&&(!Fa||ba&&8<ba&&11>=ba),Di=" ",Us=!1;function $s(r,s){switch(r){case"keyup":return ll.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ba=!1;function ur(r,s){switch(r){case"compositionend":return ul(s);case"keypress":return s.which!==32?null:(Us=!0,Di);case"textInput":return r=s.data,r===Di&&Us?null:r;default:return null}}function ms(r,s){if(Ba)return r==="compositionend"||!Fa&&$s(r,s)?(r=sc(),Ma=xo=Tr=null,Ba=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ps&&s.locale!=="ko"?null:s.data;default:return null}}var cl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!cl[r.type]:s==="textarea"}function Dr(r,s,l,d){zs?_e?_e.push(d):_e=[d]:zs=d,s=hd(s,"onChange"),0<s.length&&(l=new qr("onChange","change",null,l,d),r.push({event:l,listeners:s}))}var wa=null,gs=null;function fu(r){y0(r,0)}function xa(r){var s=yo(r);if(tu(s))return r}function js(r,s){if(r==="change")return s}var yr=!1;if(Bi){var cr;if(Bi){var za="oninput"in document;if(!za){var Ua=document.createElement("div");Ua.setAttribute("oninput","return;"),za=typeof Ua.oninput=="function"}cr=za}else cr=!1;yr=cr&&(!document.documentMode||9<document.documentMode)}function ys(){wa&&(wa.detachEvent("onpropertychange",fl),gs=wa=null)}function fl(r){if(r.propertyName==="value"&&xa(gs)){var s=[];Dr(s,gs,r,bo(r)),ac(fu,s)}}function hl(r,s,l){r==="focusin"?(ys(),wa=s,gs=l,wa.attachEvent("onpropertychange",fl)):r==="focusout"&&ys()}function ui(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xa(gs)}function uc(r,s){if(r==="click")return xa(s)}function $a(r,s){if(r==="input"||r==="change")return xa(s)}function ja(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ui=typeof Object.is=="function"?Object.is:ja;function vs(r,s){if(Ui(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var b=l[d];if(!$t.call(s,b)||!Ui(r[b],s[b]))return!1}return!0}function dl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pl(r,s){var l=dl(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=s&&d>=s)return{node:l,offset:s-r};r=d}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=dl(l)}}function bs(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?bs(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ws(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=or(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=or(r.document)}return s}function Ha(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var No=Bi&&"documentMode"in document&&11>=document.documentMode,Pr=null,xs=null,Zi=null,Wr=!1;function bn(r,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wr||Pr==null||Pr!==or(d)||(d=Pr,"selectionStart"in d&&Ha(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Zi&&vs(Zi,d)||(Zi=d,d=hd(xs,"onSelect"),0<d.length&&(s=new qr("onSelect","select",null,s,l),r.push({event:s,listeners:d}),s.target=Pr)))}function fn(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Mn={animationend:fn("Animation","AnimationEnd"),animationiteration:fn("Animation","AnimationIteration"),animationstart:fn("Animation","AnimationStart"),transitionrun:fn("Transition","TransitionRun"),transitionstart:fn("Transition","TransitionStart"),transitioncancel:fn("Transition","TransitionCancel"),transitionend:fn("Transition","TransitionEnd")},ci={},qa={};Bi&&(qa=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);function Sa(r){if(ci[r])return ci[r];if(!Mn[r])return r;var s=Mn[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in qa)return ci[r]=s[l];return r}var _o=Sa("animationend"),hu=Sa("animationiteration"),bf=Sa("animationstart"),Mh=Sa("transitionrun"),Oh=Sa("transitionstart"),Fh=Sa("transitioncancel"),wf=Sa("transitionend"),xf=new Map,ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ko.push("scrollEnd");function Vr(r,s){xf.set(r,s),pa(s,[r])}var du=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Mr=[],Eo=0,cc=0;function pu(){for(var r=Eo,s=cc=Eo=0;s<r;){var l=Mr[s];Mr[s++]=null;var d=Mr[s];Mr[s++]=null;var b=Mr[s];Mr[s++]=null;var x=Mr[s];if(Mr[s++]=null,d!==null&&b!==null){var R=d.pending;R===null?b.next=b:(b.next=R.next,R.next=b),d.pending=b}x!==0&&gu(l,b,x)}}function mu(r,s,l,d){Mr[Eo++]=r,Mr[Eo++]=s,Mr[Eo++]=l,Mr[Eo++]=d,cc|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function fc(r,s,l,d){return mu(r,s,l,d),Ji(r)}function Ss(r,s){return mu(r,null,null,s),Ji(r)}function gu(r,s,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var b=!1,x=r.return;x!==null;)x.childLanes|=l,d=x.alternate,d!==null&&(d.childLanes|=l),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(b=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,b&&s!==null&&(b=31-en(l),r=x.hiddenUpdates,d=r[b],d===null?r[b]=[s]:d.push(s),s.lane=l|536870912),x):null}function Ji(r){if(50<Hf)throw Hf=0,cm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var $i={};function hc(r,s,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(r,s,l,d){return new hc(r,s,l,d)}function dc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gr(r,s){var l=r.alternate;return l===null?(l=tr(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function yu(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ml(r,s,l,d,b,x){var R=0;if(d=r,typeof r=="function")dc(r)&&(R=1);else if(typeof r=="string")R=kx(r,l,V.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case F:return r=tr(31,l,s,b),r.elementType=F,r.lanes=x,r;case N:return Hs(l.children,b,x,s);case A:R=8,b|=24;break;case _:return r=tr(12,l,s,b|2),r.elementType=_,r.lanes=x,r;case Y:return r=tr(13,l,s,b),r.elementType=Y,r.lanes=x,r;case ct:return r=tr(19,l,s,b),r.elementType=ct,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:R=10;break t;case I:R=9;break t;case M:R=11;break t;case it:R=14;break t;case nt:R=16,d=null;break t}R=29,l=Error(i(130,r===null?"null":typeof r,"")),d=null}return s=tr(R,l,s,b),s.elementType=r,s.type=d,s.lanes=x,s}function Hs(r,s,l,d){return r=tr(7,r,d,s),r.lanes=l,r}function vu(r,s,l){return r=tr(6,r,null,s),r.lanes=l,r}function pc(r){var s=tr(18,null,null,0);return s.stateNode=r,s}function gl(r,s,l){return s=tr(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var mc=new WeakMap;function Yr(r,s){if(typeof r=="object"&&r!==null){var l=mc.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Ce(s)},mc.set(r,s),s)}return{value:r,source:s,stack:Ce(s)}}var yl=[],Lo=0,gc=null,bu=0,Xr=[],Kr=0,qs=null,Qr=1,Zr="";function Or(r,s){yl[Lo++]=bu,yl[Lo++]=gc,gc=r,bu=s}function Bh(r,s,l){Xr[Kr++]=Qr,Xr[Kr++]=Zr,Xr[Kr++]=qs,qs=r;var d=Qr;r=Zr;var b=32-en(d)-1;d&=~(1<<b),l+=1;var x=32-en(s)+b;if(30<x){var R=b-b%5;x=(d&(1<<R)-1).toString(32),d>>=R,b-=R,Qr=1<<32-en(s)+b|l<<b|d,Zr=x+r}else Qr=1<<x|l<<b|d,Zr=r}function Sf(r){r.return!==null&&(Or(r,1),Bh(r,1,0))}function yc(r){for(;r===gc;)gc=yl[--Lo],yl[Lo]=null,bu=yl[--Lo],yl[Lo]=null;for(;r===qs;)qs=Xr[--Kr],Xr[Kr]=null,Zr=Xr[--Kr],Xr[Kr]=null,Qr=Xr[--Kr],Xr[Kr]=null}function zh(r,s){Xr[Kr++]=Qr,Xr[Kr++]=Zr,Xr[Kr++]=qs,Qr=s.id,Zr=s.overflow,qs=r}var ji=null,Un=null,rn=!1,fr=null,Jn=!1,Ca=Error(i(519));function Ws(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Yr(s,r)),Ca}function Cf(r){var s=r.stateNode,l=r.type,d=r.memoizedProps;switch(s[kn]=r,s[Vn]=d,l){case"dialog":sn("cancel",s),sn("close",s);break;case"iframe":case"object":case"embed":sn("load",s);break;case"video":case"audio":for(l=0;l<Wf.length;l++)sn(Wf[l],s);break;case"source":sn("error",s);break;case"img":case"image":case"link":sn("error",s),sn("load",s);break;case"details":sn("toggle",s);break;case"input":sn("invalid",s),tc(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":sn("invalid",s);break;case"textarea":sn("invalid",s),iu(s,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||x0(s.textContent,l)?(d.popover!=null&&(sn("beforetoggle",s),sn("toggle",s)),d.onScroll!=null&&sn("scroll",s),d.onScrollEnd!=null&&sn("scrollend",s),d.onClick!=null&&(s.onclick=ya),s=!0):s=!1,s||Ws(r,!0)}function Cs(r){for(ji=r.return;ji;)switch(ji.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:ji=ji.return}}function Hi(r){if(r!==ji)return!1;if(!rn)return Cs(r),rn=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Nm(r.type,r.memoizedProps)),l=!l),l&&Un&&Ws(r),Cs(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Un=R0(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Un=R0(r)}else s===27?(s=Un,Tl(r.type)?(r=Rm,Rm=null,Un=r):Un=s):Un=ji?Ya(r.stateNode.nextSibling):null;return!0}function Ro(){Un=ji=null,rn=!1}function Af(){var r=fr;return r!==null&&(ra===null?ra=r:ra.push.apply(ra,r),fr=null),r}function vl(r){fr===null?fr=[r]:fr.push(r)}var vc=q(null),Vs=null,Wa=null;function Gs(r,s,l){j(vc,s._currentValue),s._currentValue=l}function Jr(r){r._currentValue=vc.current,T(vc)}function bl(r,s,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===l)break;r=r.return}}function Io(r,s,l,d){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var x=b.dependencies;if(x!==null){var R=b.child;x=x.firstContext;t:for(;x!==null;){var $=x;x=b;for(var at=0;at<s.length;at++)if($.context===s[at]){x.lanes|=l,$=x.alternate,$!==null&&($.lanes|=l),bl(x.return,l,r),d||(R=null);break t}x=$.next}}else if(b.tag===18){if(R=b.return,R===null)throw Error(i(341));R.lanes|=l,x=R.alternate,x!==null&&(x.lanes|=l),bl(R,l,r),R=null}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===r){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}}function Ys(r,s,l,d){r=null;for(var b=s,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var R=b.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var $=b.type;Ui(b.pendingProps.value,R.value)||(r!==null?r.push($):r=[$])}}else if(b===mt.current){if(R=b.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(Kf):r=[Kf])}b=b.return}r!==null&&Io(s,r,l,d),s.flags|=262144}function bc(r){for(r=r.firstContext;r!==null;){if(!Ui(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Xs(r){Vs=r,Wa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qi(r){return Uh(Vs,r)}function wc(r,s){return Vs===null&&Xs(r),Uh(r,s)}function Uh(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Wa===null){if(r===null)throw Error(i(308));Wa=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Wa=Wa.next=s;return l}var Lp=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},Rp=n.unstable_scheduleCallback,Ip=n.unstable_NormalPriority,fi={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wl(){return{controller:new Lp,data:new Map,refCount:0}}function wu(r){r.refCount--,r.refCount===0&&Rp(Ip,function(){r.controller.abort()})}var xu=null,xc=0,g=0,w=null;function k(r,s){if(xu===null){var l=xu=[];xc=0,g=gm(),w={status:"pending",value:void 0,then:function(d){l.push(d)}}}return xc++,s.then(L,L),s}function L(){if(--xc===0&&xu!==null){w!==null&&(w.status="fulfilled");var r=xu;xu=null,g=0,w=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function O(r,s){var l=[],d={status:"pending",value:null,reason:null,then:function(b){l.push(b)}};return r.then(function(){d.status="fulfilled",d.value=s;for(var b=0;b<l.length;b++)(0,l[b])(s)},function(b){for(d.status="rejected",d.reason=b,b=0;b<l.length;b++)(0,l[b])(void 0)}),d}var z=X.S;X.S=function(r,s){W2=Ue(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&k(r,s),z!==null&&z(r,s)};var U=q(null);function H(){var r=U.current;return r!==null?r:jn.pooledCache}function W(r,s){s===null?j(U,U.current):j(U,s.pool)}function Z(){var r=H();return r===null?null:{parent:fi._currentValue,pool:r}}var ft=Error(i(460)),xt=Error(i(474)),Q=Error(i(542)),pt={then:function(){}};function bt(r){return r=r.status,r==="fulfilled"||r==="rejected"}function It(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(ya,ya),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,jt(r),r;default:if(typeof s.status=="string")s.then(ya,ya);else{if(r=jn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(d){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=d}},function(d){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,jt(r),r}throw Rt=s,ft}}function wt(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Rt=l,ft):l}}var Rt=null;function Pt(){if(Rt===null)throw Error(i(459));var r=Rt;return Rt=null,r}function jt(r){if(r===ft||r===Q)throw Error(i(483))}var Bt=null,oe=0;function te(r){var s=oe;return oe+=1,Bt===null&&(Bt=[]),It(Bt,r,s)}function Oe(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ie(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function nn(r){function s(yt,dt){if(r){var St=yt.deletions;St===null?(yt.deletions=[dt],yt.flags|=16):St.push(dt)}}function l(yt,dt){if(!r)return null;for(;dt!==null;)s(yt,dt),dt=dt.sibling;return null}function d(yt){for(var dt=new Map;yt!==null;)yt.key!==null?dt.set(yt.key,yt):dt.set(yt.index,yt),yt=yt.sibling;return dt}function b(yt,dt){return yt=Gr(yt,dt),yt.index=0,yt.sibling=null,yt}function x(yt,dt,St){return yt.index=St,r?(St=yt.alternate,St!==null?(St=St.index,St<dt?(yt.flags|=67108866,dt):St):(yt.flags|=67108866,dt)):(yt.flags|=1048576,dt)}function R(yt){return r&&yt.alternate===null&&(yt.flags|=67108866),yt}function $(yt,dt,St,Ot){return dt===null||dt.tag!==6?(dt=vu(St,yt.mode,Ot),dt.return=yt,dt):(dt=b(dt,St),dt.return=yt,dt)}function at(yt,dt,St,Ot){var Se=St.type;return Se===N?Tt(yt,dt,St.props.children,Ot,St.key):dt!==null&&(dt.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===nt&&wt(Se)===dt.type)?(dt=b(dt,St.props),Oe(dt,St),dt.return=yt,dt):(dt=ml(St.type,St.key,St.props,null,yt.mode,Ot),Oe(dt,St),dt.return=yt,dt)}function Ct(yt,dt,St,Ot){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==St.containerInfo||dt.stateNode.implementation!==St.implementation?(dt=gl(St,yt.mode,Ot),dt.return=yt,dt):(dt=b(dt,St.children||[]),dt.return=yt,dt)}function Tt(yt,dt,St,Ot,Se){return dt===null||dt.tag!==7?(dt=Hs(St,yt.mode,Ot,Se),dt.return=yt,dt):(dt=b(dt,St),dt.return=yt,dt)}function Ft(yt,dt,St){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=vu(""+dt,yt.mode,St),dt.return=yt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case y:return St=ml(dt.type,dt.key,dt.props,null,yt.mode,St),Oe(St,dt),St.return=yt,St;case S:return dt=gl(dt,yt.mode,St),dt.return=yt,dt;case nt:return dt=wt(dt),Ft(yt,dt,St)}if(ht(dt)||B(dt))return dt=Hs(dt,yt.mode,St,null),dt.return=yt,dt;if(typeof dt.then=="function")return Ft(yt,te(dt),St);if(dt.$$typeof===D)return Ft(yt,wc(yt,dt),St);ie(yt,dt)}return null}function _t(yt,dt,St,Ot){var Se=dt!==null?dt.key:null;if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return Se!==null?null:$(yt,dt,""+St,Ot);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case y:return St.key===Se?at(yt,dt,St,Ot):null;case S:return St.key===Se?Ct(yt,dt,St,Ot):null;case nt:return St=wt(St),_t(yt,dt,St,Ot)}if(ht(St)||B(St))return Se!==null?null:Tt(yt,dt,St,Ot,null);if(typeof St.then=="function")return _t(yt,dt,te(St),Ot);if(St.$$typeof===D)return _t(yt,dt,wc(yt,St),Ot);ie(yt,St)}return null}function Lt(yt,dt,St,Ot,Se){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return yt=yt.get(St)||null,$(dt,yt,""+Ot,Se);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case y:return yt=yt.get(Ot.key===null?St:Ot.key)||null,at(dt,yt,Ot,Se);case S:return yt=yt.get(Ot.key===null?St:Ot.key)||null,Ct(dt,yt,Ot,Se);case nt:return Ot=wt(Ot),Lt(yt,dt,St,Ot,Se)}if(ht(Ot)||B(Ot))return yt=yt.get(St)||null,Tt(dt,yt,Ot,Se,null);if(typeof Ot.then=="function")return Lt(yt,dt,St,te(Ot),Se);if(Ot.$$typeof===D)return Lt(yt,dt,St,wc(dt,Ot),Se);ie(dt,Ot)}return null}function ae(yt,dt,St,Ot){for(var Se=null,xn=null,he=dt,Ke=dt=0,ln=null;he!==null&&Ke<St.length;Ke++){he.index>Ke?(ln=he,he=null):ln=he.sibling;var Sn=_t(yt,he,St[Ke],Ot);if(Sn===null){he===null&&(he=ln);break}r&&he&&Sn.alternate===null&&s(yt,he),dt=x(Sn,dt,Ke),xn===null?Se=Sn:xn.sibling=Sn,xn=Sn,he=ln}if(Ke===St.length)return l(yt,he),rn&&Or(yt,Ke),Se;if(he===null){for(;Ke<St.length;Ke++)he=Ft(yt,St[Ke],Ot),he!==null&&(dt=x(he,dt,Ke),xn===null?Se=he:xn.sibling=he,xn=he);return rn&&Or(yt,Ke),Se}for(he=d(he);Ke<St.length;Ke++)ln=Lt(he,yt,Ke,St[Ke],Ot),ln!==null&&(r&&ln.alternate!==null&&he.delete(ln.key===null?Ke:ln.key),dt=x(ln,dt,Ke),xn===null?Se=ln:xn.sibling=ln,xn=ln);return r&&he.forEach(function(Fl){return s(yt,Fl)}),rn&&Or(yt,Ke),Se}function Le(yt,dt,St,Ot){if(St==null)throw Error(i(151));for(var Se=null,xn=null,he=dt,Ke=dt=0,ln=null,Sn=St.next();he!==null&&!Sn.done;Ke++,Sn=St.next()){he.index>Ke?(ln=he,he=null):ln=he.sibling;var Fl=_t(yt,he,Sn.value,Ot);if(Fl===null){he===null&&(he=ln);break}r&&he&&Fl.alternate===null&&s(yt,he),dt=x(Fl,dt,Ke),xn===null?Se=Fl:xn.sibling=Fl,xn=Fl,he=ln}if(Sn.done)return l(yt,he),rn&&Or(yt,Ke),Se;if(he===null){for(;!Sn.done;Ke++,Sn=St.next())Sn=Ft(yt,Sn.value,Ot),Sn!==null&&(dt=x(Sn,dt,Ke),xn===null?Se=Sn:xn.sibling=Sn,xn=Sn);return rn&&Or(yt,Ke),Se}for(he=d(he);!Sn.done;Ke++,Sn=St.next())Sn=Lt(he,yt,Ke,Sn.value,Ot),Sn!==null&&(r&&Sn.alternate!==null&&he.delete(Sn.key===null?Ke:Sn.key),dt=x(Sn,dt,Ke),xn===null?Se=Sn:xn.sibling=Sn,xn=Sn);return r&&he.forEach(function(Bx){return s(yt,Bx)}),rn&&Or(yt,Ke),Se}function zn(yt,dt,St,Ot){if(typeof St=="object"&&St!==null&&St.type===N&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case y:t:{for(var Se=St.key;dt!==null;){if(dt.key===Se){if(Se=St.type,Se===N){if(dt.tag===7){l(yt,dt.sibling),Ot=b(dt,St.props.children),Ot.return=yt,yt=Ot;break t}}else if(dt.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===nt&&wt(Se)===dt.type){l(yt,dt.sibling),Ot=b(dt,St.props),Oe(Ot,St),Ot.return=yt,yt=Ot;break t}l(yt,dt);break}else s(yt,dt);dt=dt.sibling}St.type===N?(Ot=Hs(St.props.children,yt.mode,Ot,St.key),Ot.return=yt,yt=Ot):(Ot=ml(St.type,St.key,St.props,null,yt.mode,Ot),Oe(Ot,St),Ot.return=yt,yt=Ot)}return R(yt);case S:t:{for(Se=St.key;dt!==null;){if(dt.key===Se)if(dt.tag===4&&dt.stateNode.containerInfo===St.containerInfo&&dt.stateNode.implementation===St.implementation){l(yt,dt.sibling),Ot=b(dt,St.children||[]),Ot.return=yt,yt=Ot;break t}else{l(yt,dt);break}else s(yt,dt);dt=dt.sibling}Ot=gl(St,yt.mode,Ot),Ot.return=yt,yt=Ot}return R(yt);case nt:return St=wt(St),zn(yt,dt,St,Ot)}if(ht(St))return ae(yt,dt,St,Ot);if(B(St)){if(Se=B(St),typeof Se!="function")throw Error(i(150));return St=Se.call(St),Le(yt,dt,St,Ot)}if(typeof St.then=="function")return zn(yt,dt,te(St),Ot);if(St.$$typeof===D)return zn(yt,dt,wc(yt,St),Ot);ie(yt,St)}return typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint"?(St=""+St,dt!==null&&dt.tag===6?(l(yt,dt.sibling),Ot=b(dt,St),Ot.return=yt,yt=Ot):(l(yt,dt),Ot=vu(St,yt.mode,Ot),Ot.return=yt,yt=Ot),R(yt)):l(yt,dt)}return function(yt,dt,St,Ot){try{oe=0;var Se=zn(yt,dt,St,Ot);return Bt=null,Se}catch(he){if(he===ft||he===Q)throw he;var xn=tr(29,he,null,yt.mode);return xn.lanes=Ot,xn.return=yt,xn}finally{}}}var $n=nn(!0),je=nn(!1),ee=!1;function Gt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yn(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ke(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ve(r,s,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Nn&2)!==0){var b=d.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),d.pending=s,s=Ji(r),gu(r,null,l),s}return mu(r,d,s,l),Ji(r)}function Cn(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,_r(r,l)}}function _i(r,s){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var b=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var R={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?b=x=R:x=x.next=R,l=l.next}while(l!==null);x===null?b=x=s:x=x.next=s}else b=x=s;l={baseState:d.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var Wi=!1;function On(){if(Wi){var r=w;if(r!==null)throw r}}function gi(r,s,l,d){Wi=!1;var b=r.updateQueue;ee=!1;var x=b.firstBaseUpdate,R=b.lastBaseUpdate,$=b.shared.pending;if($!==null){b.shared.pending=null;var at=$,Ct=at.next;at.next=null,R===null?x=Ct:R.next=Ct,R=at;var Tt=r.alternate;Tt!==null&&(Tt=Tt.updateQueue,$=Tt.lastBaseUpdate,$!==R&&($===null?Tt.firstBaseUpdate=Ct:$.next=Ct,Tt.lastBaseUpdate=at))}if(x!==null){var Ft=b.baseState;R=0,Tt=Ct=at=null,$=x;do{var _t=$.lane&-536870913,Lt=_t!==$.lane;if(Lt?(on&_t)===_t:(d&_t)===_t){_t!==0&&_t===g&&(Wi=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});t:{var ae=r,Le=$;_t=s;var zn=l;switch(Le.tag){case 1:if(ae=Le.payload,typeof ae=="function"){Ft=ae.call(zn,Ft,_t);break t}Ft=ae;break t;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=Le.payload,_t=typeof ae=="function"?ae.call(zn,Ft,_t):ae,_t==null)break t;Ft=m({},Ft,_t);break t;case 2:ee=!0}}_t=$.callback,_t!==null&&(r.flags|=64,Lt&&(r.flags|=8192),Lt=b.callbacks,Lt===null?b.callbacks=[_t]:Lt.push(_t))}else Lt={lane:_t,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Tt===null?(Ct=Tt=Lt,at=Ft):Tt=Tt.next=Lt,R|=_t;if($=$.next,$===null){if($=b.shared.pending,$===null)break;Lt=$,$=Lt.next,Lt.next=null,b.lastBaseUpdate=Lt,b.shared.pending=null}}while(!0);Tt===null&&(at=Ft),b.baseState=at,b.firstBaseUpdate=Ct,b.lastBaseUpdate=Tt,x===null&&(b.shared.lanes=0),kl|=R,r.lanes=R,r.memoizedState=Ft}}function er(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function yi(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)er(l[r],s)}var Qe=q(null),mn=q(0);function Xn(r,s){r=$o,j(mn,r),j(Qe,s),$o=r|s.baseLanes}function wn(){j(mn,$o),j(Qe,Qe.current)}function ki(){$o=mn.current,T(Qe),T(mn)}var Kn=q(null),gn=null;function hi(r){var s=r.alternate;j(hn,hn.current&1),j(Kn,r),gn===null&&(s===null||Qe.current!==null||s.memoizedState!==null)&&(gn=r)}function An(r){j(hn,hn.current),j(Kn,r),gn===null&&(gn=r)}function vi(r){r.tag===22?(j(hn,hn.current),j(Kn,r),gn===null&&(gn=r)):bi()}function bi(){j(hn,hn.current),j(Kn,Kn.current)}function En(r){T(Kn),gn===r&&(gn=null),T(hn)}var hn=q(0);function nr(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Em(l)||Lm(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ti=0,ve=null,xe=null,yn=null,vr=!1,ta=!1,hr=!1,wi=0,Ks=0,Qs=null,Sc=0;function Fn(){throw Error(i(321))}function Nf(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Ui(r[l],s[l]))return!1;return!0}function _f(r,s,l,d,b,x){return ti=x,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?n2:zp,hr=!1,x=l(d,b),hr=!1,ta&&(x=As(s,l,d,b)),Cc(r),x}function Cc(r){X.H=Pf;var s=xe!==null&&xe.next!==null;if(ti=0,yn=xe=ve=null,vr=!1,Ks=0,Qs=null,s)throw Error(i(300));r===null||Mi||(r=r.dependencies,r!==null&&bc(r)&&(Mi=!0))}function As(r,s,l,d){ve=r;var b=0;do{if(ta&&(Qs=null),Ks=0,ta=!1,25<=b)throw Error(i(301));if(b+=1,yn=xe=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}X.H=i2,x=s(l,d)}while(ta);return x}function Tp(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?Zs(s):s,r=r.useState()[0],(xe!==null?xe.memoizedState:null)!==r&&(ve.flags|=1024),s}function kf(){var r=wi!==0;return wi=0,r}function Ef(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Ac(r){if(vr){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vr=!1}ti=0,yn=xe=ve=null,ta=!1,Ks=wi=0,Qs=null}function Pi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?ve.memoizedState=yn=r:yn=yn.next=r,yn}function ei(){if(xe===null){var r=ve.alternate;r=r!==null?r.memoizedState:null}else r=xe.next;var s=yn===null?ve.memoizedState:yn.next;if(s!==null)yn=s,xe=r;else{if(r===null)throw ve.alternate===null?Error(i(467)):Error(i(310));xe=r,r={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},yn===null?ve.memoizedState=yn=r:yn=yn.next=r}return yn}function Su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(r){var s=Ks;return Ks+=1,Qs===null&&(Qs=[]),r=It(Qs,r,s),s=ve,(yn===null?s.memoizedState:yn.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?n2:zp),r}function xl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Zs(r);if(r.$$typeof===D)return qi(r)}throw Error(i(438,String(r)))}function To(r){var s=null,l=ve.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=ve.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Su(),ve.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),d=0;d<r;d++)l[d]=G;return s.index++,l}function Va(r,s){return typeof s=="function"?s(r):s}function Nc(r){var s=ei();return Sl(s,xe,r)}function Sl(r,s,l){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var b=r.baseQueue,x=d.pending;if(x!==null){if(b!==null){var R=b.next;b.next=x.next,x.next=R}s.baseQueue=b=x,d.pending=null}if(x=r.baseState,b===null)r.memoizedState=x;else{s=b.next;var $=R=null,at=null,Ct=s,Tt=!1;do{var Ft=Ct.lane&-536870913;if(Ft!==Ct.lane?(on&Ft)===Ft:(ti&Ft)===Ft){var _t=Ct.revertLane;if(_t===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),Ft===g&&(Tt=!0);else if((ti&_t)===_t){Ct=Ct.next,_t===g&&(Tt=!0);continue}else Ft={lane:0,revertLane:Ct.revertLane,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},at===null?($=at=Ft,R=x):at=at.next=Ft,ve.lanes|=_t,kl|=_t;Ft=Ct.action,hr&&l(x,Ft),x=Ct.hasEagerState?Ct.eagerState:l(x,Ft)}else _t={lane:Ft,revertLane:Ct.revertLane,gesture:Ct.gesture,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},at===null?($=at=_t,R=x):at=at.next=_t,ve.lanes|=Ft,kl|=Ft;Ct=Ct.next}while(Ct!==null&&Ct!==s);if(at===null?R=x:at.next=$,!Ui(x,r.memoizedState)&&(Mi=!0,Tt&&(l=w,l!==null)))throw l;r.memoizedState=x,r.baseState=R,r.baseQueue=at,d.lastRenderedState=x}return b===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function _c(r){var s=ei(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var d=l.dispatch,b=l.pending,x=s.memoizedState;if(b!==null){l.pending=null;var R=b=b.next;do x=r(x,R.action),R=R.next;while(R!==b);Ui(x,s.memoizedState)||(Mi=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),l.lastRenderedState=x}return[x,d]}function kc(r,s,l){var d=ve,b=ei(),x=rn;if(x){if(l===void 0)throw Error(i(407));l=l()}else l=s();var R=!Ui((xe||b).memoizedState,l);if(R&&(b.memoizedState=l,Mi=!0),b=b.queue,Dp(Rf.bind(null,d,b,r),[r]),b.getSnapshot!==s||R||yn!==null&&yn.memoizedState.tag&1){if(d.flags|=2048,Po(9,{destroy:void 0},Lf.bind(null,d,b,l,s),null),jn===null)throw Error(i(349));x||(ti&127)!==0||Ns(d,s,l)}return l}function Ns(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=ve.updateQueue,s===null?(s=Su(),ve.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Lf(r,s,l,d){s.value=l,s.getSnapshot=d,$h(s)&&If(r)}function Rf(r,s,l){return l(function(){$h(s)&&If(r)})}function $h(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Ui(r,l)}catch{return!0}}function If(r){var s=Ss(r,2);s!==null&&aa(s,r,2)}function Js(r){var s=Pi();if(typeof r=="function"){var l=r;if(r=l(),hr){Te(!0);try{l()}finally{Te(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:r},s}function jh(r,s,l,d){return r.baseState=l,Sl(r,xe,typeof d=="function"?d:Va)}function Hh(r,s,l,d,b){if(Gh(r))throw Error(i(485));if(r=s.action,r!==null){var x={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){x.listeners.push(R)}};X.T!==null?l(!0):x.isTransition=!1,d(x),l=s.pending,l===null?(x.next=s.pending=x,qh(s,x)):(x.next=l.next,s.pending=l.next=x)}}function qh(r,s){var l=s.action,d=s.payload,b=r.state;if(s.isTransition){var x=X.T,R={};X.T=R;try{var $=l(b,d),at=X.S;at!==null&&at(R,$),Tf(r,s,$)}catch(Ct){Do(r,s,Ct)}finally{x!==null&&R.types!==null&&(x.types=R.types),X.T=x}}else try{x=l(b,d),Tf(r,s,x)}catch(Ct){Do(r,s,Ct)}}function Tf(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Wh(r,s,d)},function(d){return Do(r,s,d)}):Wh(r,s,l)}function Wh(r,s,l){s.status="fulfilled",s.value=l,Ec(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,qh(r,l)))}function Do(r,s,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Ec(s),s=s.next;while(s!==d)}r.action=null}function Ec(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Cu(r,s){return s}function Ga(r,s){if(rn){var l=jn.formState;if(l!==null){t:{var d=ve;if(rn){if(Un){e:{for(var b=Un,x=Jn;b.nodeType!==8;){if(!x){b=null;break e}if(b=Ya(b.nextSibling),b===null){b=null;break e}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){Un=Ya(b.nextSibling),d=b.data==="F!";break t}}Ws(d)}d=!1}d&&(s=l[0])}}return l=Pi(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:s},l.queue=d,l=Jg.bind(null,ve,d),d.dispatch=l,d=Js(!1),x=Bp.bind(null,ve,!1,d.queue),d=Pi(),b={state:s,dispatch:null,action:r,pending:null},d.queue=b,l=Hh.bind(null,ve,b,x,l),b.dispatch=l,d.memoizedState=r,[s,l,!1]}function _s(r){var s=ei();return ks(s,xe,r)}function ks(r,s,l){if(s=Sl(r,s,Cu)[0],r=Nc(Va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Zs(s)}catch(R){throw R===ft?Q:R}else d=s;s=ei();var b=s.queue,x=b.dispatch;return l!==s.memoizedState&&(ve.flags|=2048,Po(9,{destroy:void 0},Lc.bind(null,b,l),null)),[d,x,r]}function Lc(r,s){r.action=s}function Rc(r){var s=ei(),l=xe;if(l!==null)return ks(s,l,r);ei(),s=s.memoizedState,l=ei();var d=l.queue.dispatch;return l.memoizedState=r,[s,d,!1]}function Po(r,s,l,d){return r={tag:r,create:l,deps:d,inst:s,next:null},s=ve.updateQueue,s===null&&(s=Su(),ve.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,s.lastEffect=r),r}function Vh(){return ei().memoizedState}function Cl(r,s,l,d){var b=Pi();ve.flags|=r,b.memoizedState=Po(1|s,{destroy:void 0},l,d===void 0?null:d)}function Al(r,s,l,d){var b=ei();d=d===void 0?null:d;var x=b.memoizedState.inst;xe!==null&&d!==null&&Nf(d,xe.memoizedState.deps)?b.memoizedState=Po(s,x,l,d):(ve.flags|=r,b.memoizedState=Po(1|s,x,l,d))}function zg(r,s){Cl(8390656,8,r,s)}function Dp(r,s){Al(2048,8,r,s)}function Tw(r){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=Su(),ve.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function Ug(r){var s=ei().memoizedState;return Tw({ref:s,nextImpl:r}),function(){if((Nn&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function $g(r,s){return Al(4,2,r,s)}function jg(r,s){return Al(4,4,r,s)}function Hg(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function qg(r,s,l){l=l!=null?l.concat([r]):null,Al(4,4,Hg.bind(null,s,r),l)}function Pp(){}function Wg(r,s){var l=ei();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&Nf(s,d[1])?d[0]:(l.memoizedState=[r,s],r)}function Vg(r,s){var l=ei();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&Nf(s,d[1]))return d[0];if(d=r(),hr){Te(!0);try{r()}finally{Te(!1)}}return l.memoizedState=[d,s],d}function Mp(r,s,l){return l===void 0||(ti&1073741824)!==0&&(on&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=G2(),ve.lanes|=r,kl|=r,l)}function Gg(r,s,l,d){return Ui(l,s)?l:Qe.current!==null?(r=Mp(r,l,d),Ui(r,s)||(Mi=!0),r):(ti&42)===0||(ti&1073741824)!==0&&(on&261930)===0?(Mi=!0,r.memoizedState=l):(r=G2(),ve.lanes|=r,kl|=r,s)}function Yg(r,s,l,d,b){var x=lt.p;lt.p=x!==0&&8>x?x:8;var R=X.T,$={};X.T=$,Bp(r,!1,s,l);try{var at=b(),Ct=X.S;if(Ct!==null&&Ct($,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var Tt=O(at,d);Df(r,s,Tt,_a(r))}else Df(r,s,d,_a(r))}catch(Ft){Df(r,s,{then:function(){},status:"rejected",reason:Ft},_a())}finally{lt.p=x,R!==null&&$.types!==null&&(R.types=$.types),X.T=R}}function Dw(){}function Op(r,s,l,d){if(r.tag!==5)throw Error(i(476));var b=Xg(r).queue;Yg(r,b,s,st,l===null?Dw:function(){return Kg(r),l(d)})}function Xg(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:st},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Kg(r){var s=Xg(r);s.next===null&&(s=r.alternate.memoizedState),Df(r,s.next.queue,{},_a())}function Fp(){return qi(Kf)}function Qg(){return ei().memoizedState}function Zg(){return ei().memoizedState}function Pw(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=_a();r=ke(l);var d=Ve(s,r,l);d!==null&&(aa(d,s,l),Cn(d,s,l)),s={cache:wl()},r.payload=s;return}s=s.return}}function Mw(r,s,l){var d=_a();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Gh(r)?t2(s,l):(l=fc(r,s,l,d),l!==null&&(aa(l,r,d),e2(l,s,d)))}function Jg(r,s,l){var d=_a();Df(r,s,l,d)}function Df(r,s,l,d){var b={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gh(r))t2(s,b);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var R=s.lastRenderedState,$=x(R,l);if(b.hasEagerState=!0,b.eagerState=$,Ui($,R))return mu(r,s,b,0),jn===null&&pu(),!1}catch{}finally{}if(l=fc(r,s,b,d),l!==null)return aa(l,r,d),e2(l,s,d),!0}return!1}function Bp(r,s,l,d){if(d={lane:2,revertLane:gm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Gh(r)){if(s)throw Error(i(479))}else s=fc(r,l,d,2),s!==null&&aa(s,r,2)}function Gh(r){var s=r.alternate;return r===ve||s!==null&&s===ve}function t2(r,s){ta=vr=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function e2(r,s,l){if((l&4194048)!==0){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,_r(r,l)}}var Pf={readContext:qi,use:xl,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn};Pf.useEffectEvent=Fn;var n2={readContext:qi,use:xl,useCallback:function(r,s){return Pi().memoizedState=[r,s===void 0?null:s],r},useContext:qi,useEffect:zg,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Cl(4194308,4,Hg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Cl(4194308,4,r,s)},useInsertionEffect:function(r,s){Cl(4,2,r,s)},useMemo:function(r,s){var l=Pi();s=s===void 0?null:s;var d=r();if(hr){Te(!0);try{r()}finally{Te(!1)}}return l.memoizedState=[d,s],d},useReducer:function(r,s,l){var d=Pi();if(l!==void 0){var b=l(s);if(hr){Te(!0);try{l(s)}finally{Te(!1)}}}else b=s;return d.memoizedState=d.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},d.queue=r,r=r.dispatch=Mw.bind(null,ve,r),[d.memoizedState,r]},useRef:function(r){var s=Pi();return r={current:r},s.memoizedState=r},useState:function(r){r=Js(r);var s=r.queue,l=Jg.bind(null,ve,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Pp,useDeferredValue:function(r,s){var l=Pi();return Mp(l,r,s)},useTransition:function(){var r=Js(!1);return r=Yg.bind(null,ve,r.queue,!0,!1),Pi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var d=ve,b=Pi();if(rn){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),jn===null)throw Error(i(349));(on&127)!==0||Ns(d,s,l)}b.memoizedState=l;var x={value:l,getSnapshot:s};return b.queue=x,zg(Rf.bind(null,d,x,r),[r]),d.flags|=2048,Po(9,{destroy:void 0},Lf.bind(null,d,x,l,s),null),l},useId:function(){var r=Pi(),s=jn.identifierPrefix;if(rn){var l=Zr,d=Qr;l=(d&~(1<<32-en(d)-1)).toString(32)+l,s="_"+s+"R_"+l,l=wi++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=Sc++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Fp,useFormState:Ga,useActionState:Ga,useOptimistic:function(r){var s=Pi();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Bp.bind(null,ve,!0,l),l.dispatch=s,[r,s]},useMemoCache:To,useCacheRefresh:function(){return Pi().memoizedState=Pw.bind(null,ve)},useEffectEvent:function(r){var s=Pi(),l={impl:r};return s.memoizedState=l,function(){if((Nn&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},zp={readContext:qi,use:xl,useCallback:Wg,useContext:qi,useEffect:Dp,useImperativeHandle:qg,useInsertionEffect:$g,useLayoutEffect:jg,useMemo:Vg,useReducer:Nc,useRef:Vh,useState:function(){return Nc(Va)},useDebugValue:Pp,useDeferredValue:function(r,s){var l=ei();return Gg(l,xe.memoizedState,r,s)},useTransition:function(){var r=Nc(Va)[0],s=ei().memoizedState;return[typeof r=="boolean"?r:Zs(r),s]},useSyncExternalStore:kc,useId:Qg,useHostTransitionStatus:Fp,useFormState:_s,useActionState:_s,useOptimistic:function(r,s){var l=ei();return jh(l,xe,r,s)},useMemoCache:To,useCacheRefresh:Zg};zp.useEffectEvent=Ug;var i2={readContext:qi,use:xl,useCallback:Wg,useContext:qi,useEffect:Dp,useImperativeHandle:qg,useInsertionEffect:$g,useLayoutEffect:jg,useMemo:Vg,useReducer:_c,useRef:Vh,useState:function(){return _c(Va)},useDebugValue:Pp,useDeferredValue:function(r,s){var l=ei();return xe===null?Mp(l,r,s):Gg(l,xe.memoizedState,r,s)},useTransition:function(){var r=_c(Va)[0],s=ei().memoizedState;return[typeof r=="boolean"?r:Zs(r),s]},useSyncExternalStore:kc,useId:Qg,useHostTransitionStatus:Fp,useFormState:Rc,useActionState:Rc,useOptimistic:function(r,s){var l=ei();return xe!==null?jh(l,xe,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:To,useCacheRefresh:Zg};i2.useEffectEvent=Ug;function Up(r,s,l,d){s=r.memoizedState,l=l(d,s),l=l==null?s:m({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var $p={enqueueSetState:function(r,s,l){r=r._reactInternals;var d=_a(),b=ke(d);b.payload=s,l!=null&&(b.callback=l),s=Ve(r,b,d),s!==null&&(aa(s,r,d),Cn(s,r,d))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var d=_a(),b=ke(d);b.tag=1,b.payload=s,l!=null&&(b.callback=l),s=Ve(r,b,d),s!==null&&(aa(s,r,d),Cn(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=_a(),d=ke(l);d.tag=2,s!=null&&(d.callback=s),s=Ve(r,d,l),s!==null&&(aa(s,r,l),Cn(s,r,l))}};function r2(r,s,l,d,b,x,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,x,R):s.prototype&&s.prototype.isPureReactComponent?!vs(l,d)||!vs(b,x):!0}function a2(r,s,l,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==r&&$p.enqueueReplaceState(s,s.state,null)}function Au(r,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(r=r.defaultProps){l===s&&(l=m({},l));for(var b in r)l[b]===void 0&&(l[b]=r[b])}return l}function s2(r){du(r)}function o2(r){console.error(r)}function l2(r){du(r)}function Yh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function u2(r,s,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function jp(r,s,l){return l=ke(l),l.tag=3,l.payload={element:null},l.callback=function(){Yh(r,s)},l}function c2(r){return r=ke(r),r.tag=3,r}function f2(r,s,l,d){var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var x=d.value;r.payload=function(){return b(x)},r.callback=function(){u2(s,l,d)}}var R=l.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(r.callback=function(){u2(s,l,d),typeof b!="function"&&(El===null?El=new Set([this]):El.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})})}function Ow(r,s,l,d,b){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&Ys(s,l,b,!0),l=Kn.current,l!==null){switch(l.tag){case 31:case 13:return gn===null?sd():l.alternate===null&&xi===0&&(xi=3),l.flags&=-257,l.flags|=65536,l.lanes=b,d===pt?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),dm(r,d,b)),!1;case 22:return l.flags|=65536,d===pt?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),dm(r,d,b)),!1}throw Error(i(435,l.tag))}return dm(r,d,b),sd(),!1}if(rn)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,d!==Ca&&(r=Error(i(422),{cause:d}),vl(Yr(r,l)))):(d!==Ca&&(s=Error(i(423),{cause:d}),vl(Yr(s,l))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,d=Yr(d,l),b=jp(r.stateNode,d,b),_i(r,b),xi!==4&&(xi=2)),!1;var x=Error(i(520),{cause:d});if(x=Yr(x,l),jf===null?jf=[x]:jf.push(x),xi!==4&&(xi=2),s===null)return!0;d=Yr(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=b&-b,l.lanes|=r,r=jp(l.stateNode,d,r),_i(l,r),!1;case 1:if(s=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(El===null||!El.has(x))))return l.flags|=65536,b&=-b,l.lanes|=b,b=c2(b),f2(b,r,l,d),_i(l,b),!1}l=l.return}while(l!==null);return!1}var Hp=Error(i(461)),Mi=!1;function dr(r,s,l,d){s.child=r===null?je(s,null,l,d):$n(s,r.child,l,d)}function h2(r,s,l,d,b){l=l.render;var x=s.ref;if("ref"in d){var R={};for(var $ in d)$!=="ref"&&(R[$]=d[$])}else R=d;return Xs(s),d=_f(r,s,l,R,x,b),$=kf(),r!==null&&!Mi?(Ef(r,s,b),Mo(r,s,b)):(rn&&$&&Sf(s),s.flags|=1,dr(r,s,d,b),s.child)}function d2(r,s,l,d,b){if(r===null){var x=l.type;return typeof x=="function"&&!dc(x)&&x.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=x,p2(r,s,x,d,b)):(r=ml(l.type,null,d,s,s.mode,b),r.ref=s.ref,r.return=s,s.child=r)}if(x=r.child,!Qp(r,b)){var R=x.memoizedProps;if(l=l.compare,l=l!==null?l:vs,l(R,d)&&r.ref===s.ref)return Mo(r,s,b)}return s.flags|=1,r=Gr(x,d),r.ref=s.ref,r.return=s,s.child=r}function p2(r,s,l,d,b){if(r!==null){var x=r.memoizedProps;if(vs(x,d)&&r.ref===s.ref)if(Mi=!1,s.pendingProps=d=x,Qp(r,b))(r.flags&131072)!==0&&(Mi=!0);else return s.lanes=r.lanes,Mo(r,s,b)}return qp(r,s,l,d,b)}function m2(r,s,l,d){var b=d.children,x=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,r!==null){for(d=s.child=r.child,b=0;d!==null;)b=b|d.lanes|d.childLanes,d=d.sibling;d=b&~x}else d=0,s.child=null;return g2(r,s,x,l,d)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&W(s,x!==null?x.cachePool:null),x!==null?Xn(s,x):wn(),vi(s);else return d=s.lanes=536870912,g2(r,s,x!==null?x.baseLanes|l:l,l,d)}else x!==null?(W(s,x.cachePool),Xn(s,x),bi(),s.memoizedState=null):(r!==null&&W(s,null),wn(),bi());return dr(r,s,b,l),s.child}function Mf(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function g2(r,s,l,d,b){var x=H();return x=x===null?null:{parent:fi._currentValue,pool:x},s.memoizedState={baseLanes:l,cachePool:x},r!==null&&W(s,null),wn(),vi(s),r!==null&&Ys(r,s,d,!0),s.childLanes=b,null}function Xh(r,s){return s=Qh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function y2(r,s,l){return $n(s,r.child,null,l),r=Xh(s,s.pendingProps),r.flags|=2,En(s),s.memoizedState=null,r}function Fw(r,s,l){var d=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(rn){if(d.mode==="hidden")return r=Xh(s,d),s.lanes=536870912,Mf(null,r);if(An(s),(r=Un)?(r=L0(r,Jn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:qs!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},l=pc(r),l.return=s,s.child=l,ji=s,Un=null)):r=null,r===null)throw Ws(s);return s.lanes=536870912,null}return Xh(s,d)}var x=r.memoizedState;if(x!==null){var R=x.dehydrated;if(An(s),b)if(s.flags&256)s.flags&=-257,s=y2(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Mi||Ys(r,s,l,!1),b=(l&r.childLanes)!==0,Mi||b){if(d=jn,d!==null&&(R=kr(d,l),R!==0&&R!==x.retryLane))throw x.retryLane=R,Ss(r,R),aa(d,r,R),Hp;sd(),s=y2(r,s,l)}else r=x.treeContext,Un=Ya(R.nextSibling),ji=s,rn=!0,fr=null,Jn=!1,r!==null&&zh(s,r),s=Xh(s,d),s.flags|=4096;return s}return r=Gr(r.child,{mode:d.mode,children:d.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Kh(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function qp(r,s,l,d,b){return Xs(s),l=_f(r,s,l,d,void 0,b),d=kf(),r!==null&&!Mi?(Ef(r,s,b),Mo(r,s,b)):(rn&&d&&Sf(s),s.flags|=1,dr(r,s,l,b),s.child)}function v2(r,s,l,d,b,x){return Xs(s),s.updateQueue=null,l=As(s,d,l,b),Cc(r),d=kf(),r!==null&&!Mi?(Ef(r,s,x),Mo(r,s,x)):(rn&&d&&Sf(s),s.flags|=1,dr(r,s,l,x),s.child)}function b2(r,s,l,d,b){if(Xs(s),s.stateNode===null){var x=$i,R=l.contextType;typeof R=="object"&&R!==null&&(x=qi(R)),x=new l(d,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=$p,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=d,x.state=s.memoizedState,x.refs={},Gt(s),R=l.contextType,x.context=typeof R=="object"&&R!==null?qi(R):$i,x.state=s.memoizedState,R=l.getDerivedStateFromProps,typeof R=="function"&&(Up(s,l,R,d),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(R=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),R!==x.state&&$p.enqueueReplaceState(x,x.state,null),gi(s,d,x,b),On(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(r===null){x=s.stateNode;var $=s.memoizedProps,at=Au(l,$);x.props=at;var Ct=x.context,Tt=l.contextType;R=$i,typeof Tt=="object"&&Tt!==null&&(R=qi(Tt));var Ft=l.getDerivedStateFromProps;Tt=typeof Ft=="function"||typeof x.getSnapshotBeforeUpdate=="function",$=s.pendingProps!==$,Tt||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||($||Ct!==R)&&a2(s,x,d,R),ee=!1;var _t=s.memoizedState;x.state=_t,gi(s,d,x,b),On(),Ct=s.memoizedState,$||_t!==Ct||ee?(typeof Ft=="function"&&(Up(s,l,Ft,d),Ct=s.memoizedState),(at=ee||r2(s,l,at,d,_t,Ct,R))?(Tt||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Ct),x.props=d,x.state=Ct,x.context=R,d=at):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,Yn(r,s),R=s.memoizedProps,Tt=Au(l,R),x.props=Tt,Ft=s.pendingProps,_t=x.context,Ct=l.contextType,at=$i,typeof Ct=="object"&&Ct!==null&&(at=qi(Ct)),$=l.getDerivedStateFromProps,(Ct=typeof $=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R!==Ft||_t!==at)&&a2(s,x,d,at),ee=!1,_t=s.memoizedState,x.state=_t,gi(s,d,x,b),On();var Lt=s.memoizedState;R!==Ft||_t!==Lt||ee||r!==null&&r.dependencies!==null&&bc(r.dependencies)?(typeof $=="function"&&(Up(s,l,$,d),Lt=s.memoizedState),(Tt=ee||r2(s,l,Tt,d,_t,Lt,at)||r!==null&&r.dependencies!==null&&bc(r.dependencies))?(Ct||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,Lt,at),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,Lt,at)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||R===r.memoizedProps&&_t===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&_t===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Lt),x.props=d,x.state=Lt,x.context=at,d=Tt):(typeof x.componentDidUpdate!="function"||R===r.memoizedProps&&_t===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&_t===r.memoizedState||(s.flags|=1024),d=!1)}return x=d,Kh(r,s),d=(s.flags&128)!==0,x||d?(x=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,r!==null&&d?(s.child=$n(s,r.child,null,b),s.child=$n(s,null,l,b)):dr(r,s,l,b),s.memoizedState=x.state,r=s.child):r=Mo(r,s,b),r}function w2(r,s,l,d){return Ro(),s.flags|=256,dr(r,s,l,d),s.child}var Wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vp(r){return{baseLanes:r,cachePool:Z()}}function Gp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Na),r}function x2(r,s,l){var d=s.pendingProps,b=!1,x=(s.flags&128)!==0,R;if((R=x)||(R=r!==null&&r.memoizedState===null?!1:(hn.current&2)!==0),R&&(b=!0,s.flags&=-129),R=(s.flags&32)!==0,s.flags&=-33,r===null){if(rn){if(b?hi(s):bi(),(r=Un)?(r=L0(r,Jn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:qs!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},l=pc(r),l.return=s,s.child=l,ji=s,Un=null)):r=null,r===null)throw Ws(s);return Lm(r)?s.lanes=32:s.lanes=536870912,null}var $=d.children;return d=d.fallback,b?(bi(),b=s.mode,$=Qh({mode:"hidden",children:$},b),d=Hs(d,b,l,null),$.return=s,d.return=s,$.sibling=d,s.child=$,d=s.child,d.memoizedState=Vp(l),d.childLanes=Gp(r,R,l),s.memoizedState=Wp,Mf(null,d)):(hi(s),Yp(s,$))}var at=r.memoizedState;if(at!==null&&($=at.dehydrated,$!==null)){if(x)s.flags&256?(hi(s),s.flags&=-257,s=Xp(r,s,l)):s.memoizedState!==null?(bi(),s.child=r.child,s.flags|=128,s=null):(bi(),$=d.fallback,b=s.mode,d=Qh({mode:"visible",children:d.children},b),$=Hs($,b,l,null),$.flags|=2,d.return=s,$.return=s,d.sibling=$,s.child=d,$n(s,r.child,null,l),d=s.child,d.memoizedState=Vp(l),d.childLanes=Gp(r,R,l),s.memoizedState=Wp,s=Mf(null,d));else if(hi(s),Lm($)){if(R=$.nextSibling&&$.nextSibling.dataset,R)var Ct=R.dgst;R=Ct,d=Error(i(419)),d.stack="",d.digest=R,vl({value:d,source:null,stack:null}),s=Xp(r,s,l)}else if(Mi||Ys(r,s,l,!1),R=(l&r.childLanes)!==0,Mi||R){if(R=jn,R!==null&&(d=kr(R,l),d!==0&&d!==at.retryLane))throw at.retryLane=d,Ss(r,d),aa(R,r,d),Hp;Em($)||sd(),s=Xp(r,s,l)}else Em($)?(s.flags|=192,s.child=r.child,s=null):(r=at.treeContext,Un=Ya($.nextSibling),ji=s,rn=!0,fr=null,Jn=!1,r!==null&&zh(s,r),s=Yp(s,d.children),s.flags|=4096);return s}return b?(bi(),$=d.fallback,b=s.mode,at=r.child,Ct=at.sibling,d=Gr(at,{mode:"hidden",children:d.children}),d.subtreeFlags=at.subtreeFlags&65011712,Ct!==null?$=Gr(Ct,$):($=Hs($,b,l,null),$.flags|=2),$.return=s,d.return=s,d.sibling=$,s.child=d,Mf(null,d),d=s.child,$=r.child.memoizedState,$===null?$=Vp(l):(b=$.cachePool,b!==null?(at=fi._currentValue,b=b.parent!==at?{parent:at,pool:at}:b):b=Z(),$={baseLanes:$.baseLanes|l,cachePool:b}),d.memoizedState=$,d.childLanes=Gp(r,R,l),s.memoizedState=Wp,Mf(r.child,d)):(hi(s),l=r.child,r=l.sibling,l=Gr(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,r!==null&&(R=s.deletions,R===null?(s.deletions=[r],s.flags|=16):R.push(r)),s.child=l,s.memoizedState=null,l)}function Yp(r,s){return s=Qh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Qh(r,s){return r=tr(22,r,null,s),r.lanes=0,r}function Xp(r,s,l){return $n(s,r.child,null,l),r=Yp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function S2(r,s,l){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),bl(r.return,s,l)}function Kp(r,s,l,d,b,x){var R=r.memoizedState;R===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:b,treeForkCount:x}:(R.isBackwards=s,R.rendering=null,R.renderingStartTime=0,R.last=d,R.tail=l,R.tailMode=b,R.treeForkCount=x)}function C2(r,s,l){var d=s.pendingProps,b=d.revealOrder,x=d.tail;d=d.children;var R=hn.current,$=(R&2)!==0;if($?(R=R&1|2,s.flags|=128):R&=1,j(hn,R),dr(r,s,d,l),d=rn?bu:0,!$&&r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&S2(r,l,s);else if(r.tag===19)S2(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(l=s.child,b=null;l!==null;)r=l.alternate,r!==null&&nr(r)===null&&(b=l),l=l.sibling;l=b,l===null?(b=s.child,s.child=null):(b=l.sibling,l.sibling=null),Kp(s,!1,b,l,x,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,b=s.child,s.child=null;b!==null;){if(r=b.alternate,r!==null&&nr(r)===null){s.child=b;break}r=b.sibling,b.sibling=l,l=b,b=r}Kp(s,!0,l,null,x,d);break;case"together":Kp(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Mo(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),kl|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Ys(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=Gr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Gr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function Qp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&bc(r)))}function Bw(r,s,l){switch(s.tag){case 3:kt(s,s.stateNode.containerInfo),Gs(s,fi,r.memoizedState.cache),Ro();break;case 27:case 5:Mt(s);break;case 4:kt(s,s.stateNode.containerInfo);break;case 10:Gs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,An(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(hi(s),s.flags|=128,null):(l&s.child.childLanes)!==0?x2(r,s,l):(hi(s),r=Mo(r,s,l),r!==null?r.sibling:null);hi(s);break;case 19:var b=(r.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(Ys(r,s,l,!1),d=(l&s.childLanes)!==0),b){if(d)return C2(r,s,l);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),j(hn,hn.current),d)break;return null;case 22:return s.lanes=0,m2(r,s,l,s.pendingProps);case 24:Gs(s,fi,r.memoizedState.cache)}return Mo(r,s,l)}function A2(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Mi=!0;else{if(!Qp(r,l)&&(s.flags&128)===0)return Mi=!1,Bw(r,s,l);Mi=(r.flags&131072)!==0}else Mi=!1,rn&&(s.flags&1048576)!==0&&Bh(s,bu,s.index);switch(s.lanes=0,s.tag){case 16:t:{var d=s.pendingProps;if(r=wt(s.elementType),s.type=r,typeof r=="function")dc(r)?(d=Au(r,d),s.tag=1,s=b2(null,s,r,d,l)):(s.tag=0,s=qp(null,s,r,d,l));else{if(r!=null){var b=r.$$typeof;if(b===M){s.tag=11,s=h2(null,s,r,d,l);break t}else if(b===it){s.tag=14,s=d2(null,s,r,d,l);break t}}throw s=et(r)||r,Error(i(306,s,""))}}return s;case 0:return qp(r,s,s.type,s.pendingProps,l);case 1:return d=s.type,b=Au(d,s.pendingProps),b2(r,s,d,b,l);case 3:t:{if(kt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));d=s.pendingProps;var x=s.memoizedState;b=x.element,Yn(r,s),gi(s,d,null,l);var R=s.memoizedState;if(d=R.cache,Gs(s,fi,d),d!==x.cache&&Io(s,[fi],l,!0),On(),d=R.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:R.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=w2(r,s,d,l);break t}else if(d!==b){b=Yr(Error(i(424)),s),vl(b),s=w2(r,s,d,l);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Un=Ya(r.firstChild),ji=s,rn=!0,fr=null,Jn=!0,l=je(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ro(),d===b){s=Mo(r,s,l);break t}dr(r,s,d,l)}s=s.child}return s;case 26:return Kh(r,s),r===null?(l=M0(s.type,null,s.pendingProps,null))?s.memoizedState=l:rn||(l=s.type,r=s.pendingProps,d=dd(ot.current).createElement(l),d[kn]=s,d[Vn]=r,pr(d,l,r),oi(d),s.stateNode=d):s.memoizedState=M0(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Mt(s),r===null&&rn&&(d=s.stateNode=T0(s.type,s.pendingProps,ot.current),ji=s,Jn=!0,b=Un,Tl(s.type)?(Rm=b,Un=Ya(d.firstChild)):Un=b),dr(r,s,s.pendingProps.children,l),Kh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&rn&&((b=d=Un)&&(d=px(d,s.type,s.pendingProps,Jn),d!==null?(s.stateNode=d,ji=s,Un=Ya(d.firstChild),Jn=!1,b=!0):b=!1),b||Ws(s)),Mt(s),b=s.type,x=s.pendingProps,R=r!==null?r.memoizedProps:null,d=x.children,Nm(b,x)?d=null:R!==null&&Nm(b,R)&&(s.flags|=32),s.memoizedState!==null&&(b=_f(r,s,Tp,null,null,l),Kf._currentValue=b),Kh(r,s),dr(r,s,d,l),s.child;case 6:return r===null&&rn&&((r=l=Un)&&(l=mx(l,s.pendingProps,Jn),l!==null?(s.stateNode=l,ji=s,Un=null,r=!0):r=!1),r||Ws(s)),null;case 13:return x2(r,s,l);case 4:return kt(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=$n(s,null,d,l):dr(r,s,d,l),s.child;case 11:return h2(r,s,s.type,s.pendingProps,l);case 7:return dr(r,s,s.pendingProps,l),s.child;case 8:return dr(r,s,s.pendingProps.children,l),s.child;case 12:return dr(r,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Gs(s,s.type,d.value),dr(r,s,d.children,l),s.child;case 9:return b=s.type._context,d=s.pendingProps.children,Xs(s),b=qi(b),d=d(b),s.flags|=1,dr(r,s,d,l),s.child;case 14:return d2(r,s,s.type,s.pendingProps,l);case 15:return p2(r,s,s.type,s.pendingProps,l);case 19:return C2(r,s,l);case 31:return Fw(r,s,l);case 22:return m2(r,s,l,s.pendingProps);case 24:return Xs(s),d=qi(fi),r===null?(b=H(),b===null&&(b=jn,x=wl(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=l),b=x),s.memoizedState={parent:d,cache:b},Gt(s),Gs(s,fi,b)):((r.lanes&l)!==0&&(Yn(r,s),gi(s,null,null,l),On()),b=r.memoizedState,x=s.memoizedState,b.parent!==d?(b={parent:d,cache:d},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),Gs(s,fi,d)):(d=x.cache,Gs(s,fi,d),d!==b.cache&&Io(s,[fi],l,!0))),dr(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Oo(r){r.flags|=4}function Zp(r,s,l,d,b){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(Q2())r.flags|=8192;else throw Rt=pt,xt}else r.flags&=-16777217}function N2(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!U0(s))if(Q2())r.flags|=8192;else throw Rt=pt,xt}function Zh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ia():536870912,r.lanes|=s,Pc|=s)}function Of(r,s){if(!rn)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Qn(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(s)for(var b=r.child;b!==null;)l|=b.lanes|b.childLanes,d|=b.subtreeFlags&65011712,d|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)l|=b.lanes|b.childLanes,d|=b.subtreeFlags,d|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=d,r.childLanes=l,s}function zw(r,s,l){var d=s.pendingProps;switch(yc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(s),null;case 1:return Qn(s),null;case 3:return l=s.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Jr(fi),At(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Hi(s)?Oo(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Af())),Qn(s),null;case 26:var b=s.type,x=s.memoizedState;return r===null?(Oo(s),x!==null?(Qn(s),N2(s,x)):(Qn(s),Zp(s,b,null,d,l))):x?x!==r.memoizedState?(Oo(s),Qn(s),N2(s,x)):(Qn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==d&&Oo(s),Qn(s),Zp(s,b,r,d,l)),null;case 27:if(Ht(s),l=ot.current,b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&Oo(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Qn(s),null}r=V.current,Hi(s)?Cf(s):(r=T0(b,d,l),s.stateNode=r,Oo(s))}return Qn(s),null;case 5:if(Ht(s),b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&Oo(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Qn(s),null}if(x=V.current,Hi(s))Cf(s);else{var R=dd(ot.current);switch(x){case 1:x=R.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:x=R.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":x=R.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":x=R.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":x=R.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?R.createElement("select",{is:d.is}):R.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?R.createElement(b,{is:d.is}):R.createElement(b)}}x[kn]=s,x[Vn]=d;t:for(R=s.child;R!==null;){if(R.tag===5||R.tag===6)x.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===s)break t;for(;R.sibling===null;){if(R.return===null||R.return===s)break t;R=R.return}R.sibling.return=R.return,R=R.sibling}s.stateNode=x;t:switch(pr(x,b,d),b){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Oo(s)}}return Qn(s),Zp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==d&&Oo(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(r=ot.current,Hi(s)){if(r=s.stateNode,l=s.memoizedProps,d=null,b=ji,b!==null)switch(b.tag){case 27:case 5:d=b.memoizedProps}r[kn]=s,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||x0(r.nodeValue,l)),r||Ws(s,!0)}else r=dd(r).createTextNode(d),r[kn]=s,s.stateNode=r}return Qn(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(d=Hi(s),l!==null){if(r===null){if(!d)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[kn]=s}else Ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qn(s),r=!1}else l=Af(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(En(s),s):(En(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Qn(s),null;case 13:if(d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=Hi(s),d!==null&&d.dehydrated!==null){if(r===null){if(!b)throw Error(i(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[kn]=s}else Ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qn(s),b=!1}else b=Af(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(En(s),s):(En(s),null)}return En(s),(s.flags&128)!==0?(s.lanes=l,s):(l=d!==null,r=r!==null&&r.memoizedState!==null,l&&(d=s.child,b=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(b=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==b&&(d.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),Zh(s,s.updateQueue),Qn(s),null);case 4:return At(),r===null&&wm(s.stateNode.containerInfo),Qn(s),null;case 10:return Jr(s.type),Qn(s),null;case 19:if(T(hn),d=s.memoizedState,d===null)return Qn(s),null;if(b=(s.flags&128)!==0,x=d.rendering,x===null)if(b)Of(d,!1);else{if(xi!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(x=nr(r),x!==null){for(s.flags|=128,Of(d,!1),r=x.updateQueue,s.updateQueue=r,Zh(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)yu(l,r),l=l.sibling;return j(hn,hn.current&1|2),rn&&Or(s,d.treeForkCount),s.child}r=r.sibling}d.tail!==null&&Ue()>id&&(s.flags|=128,b=!0,Of(d,!1),s.lanes=4194304)}else{if(!b)if(r=nr(x),r!==null){if(s.flags|=128,b=!0,r=r.updateQueue,s.updateQueue=r,Zh(s,r),Of(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!rn)return Qn(s),null}else 2*Ue()-d.renderingStartTime>id&&l!==536870912&&(s.flags|=128,b=!0,Of(d,!1),s.lanes=4194304);d.isBackwards?(x.sibling=s.child,s.child=x):(r=d.last,r!==null?r.sibling=x:s.child=x,d.last=x)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ue(),r.sibling=null,l=hn.current,j(hn,b?l&1|2:l&1),rn&&Or(s,d.treeForkCount),r):(Qn(s),null);case 22:case 23:return En(s),ki(),d=s.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Qn(s),s.subtreeFlags&6&&(s.flags|=8192)):Qn(s),l=s.updateQueue,l!==null&&Zh(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),r!==null&&T(U),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Jr(fi),Qn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Uw(r,s){switch(yc(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Jr(fi),At(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ht(s),null;case 31:if(s.memoizedState!==null){if(En(s),s.alternate===null)throw Error(i(340));Ro()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(En(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ro()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return T(hn),null;case 4:return At(),null;case 10:return Jr(s.type),null;case 22:case 23:return En(s),ki(),r!==null&&T(U),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Jr(fi),null;case 25:return null;default:return null}}function _2(r,s){switch(yc(s),s.tag){case 3:Jr(fi),At();break;case 26:case 27:case 5:Ht(s);break;case 4:At();break;case 31:s.memoizedState!==null&&En(s);break;case 13:En(s);break;case 19:T(hn);break;case 10:Jr(s.type);break;case 22:case 23:En(s),ki(),r!==null&&T(U);break;case 24:Jr(fi)}}function Ff(r,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var b=d.next;l=b;do{if((l.tag&r)===r){d=void 0;var x=l.create,R=l.inst;d=x(),R.destroy=d}l=l.next}while(l!==b)}}catch($){Rn(s,s.return,$)}}function Nl(r,s,l){try{var d=s.updateQueue,b=d!==null?d.lastEffect:null;if(b!==null){var x=b.next;d=x;do{if((d.tag&r)===r){var R=d.inst,$=R.destroy;if($!==void 0){R.destroy=void 0,b=s;var at=l,Ct=$;try{Ct()}catch(Tt){Rn(b,at,Tt)}}}d=d.next}while(d!==x)}}catch(Tt){Rn(s,s.return,Tt)}}function k2(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{yi(s,l)}catch(d){Rn(r,r.return,d)}}}function E2(r,s,l){l.props=Au(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){Rn(r,s,d)}}function Bf(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(b){Rn(r,s,b)}}function to(r,s){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(b){Rn(r,s,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(b){Rn(r,s,b)}else l.current=null}function L2(r){var s=r.type,l=r.memoizedProps,d=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break t;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(b){Rn(r,r.return,b)}}function Jp(r,s,l){try{var d=r.stateNode;lx(d,r.type,l,s),d[Vn]=s}catch(b){Rn(r,r.return,b)}}function R2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Tl(r.type)||r.tag===4}function tm(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||R2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Tl(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function em(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ya));else if(d!==4&&(d===27&&Tl(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(em(r,s,l),r=r.sibling;r!==null;)em(r,s,l),r=r.sibling}function Jh(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(d!==4&&(d===27&&Tl(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Jh(r,s,l),r=r.sibling;r!==null;)Jh(r,s,l),r=r.sibling}function I2(r){var s=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);pr(s,d,l),s[kn]=r,s[Vn]=l}catch(x){Rn(r,r.return,x)}}var Fo=!1,Oi=!1,nm=!1,T2=typeof WeakSet=="function"?WeakSet:Set,ir=null;function $w(r,s){if(r=r.containerInfo,Cm=wd,r=ws(r),Ha(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else t:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var b=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break t}var R=0,$=-1,at=-1,Ct=0,Tt=0,Ft=r,_t=null;e:for(;;){for(var Lt;Ft!==l||b!==0&&Ft.nodeType!==3||($=R+b),Ft!==x||d!==0&&Ft.nodeType!==3||(at=R+d),Ft.nodeType===3&&(R+=Ft.nodeValue.length),(Lt=Ft.firstChild)!==null;)_t=Ft,Ft=Lt;for(;;){if(Ft===r)break e;if(_t===l&&++Ct===b&&($=R),_t===x&&++Tt===d&&(at=R),(Lt=Ft.nextSibling)!==null)break;Ft=_t,_t=Ft.parentNode}Ft=Lt}l=$===-1||at===-1?null:{start:$,end:at}}else l=null}l=l||{start:0,end:0}}else l=null;for(Am={focusedElem:r,selectionRange:l},wd=!1,ir=s;ir!==null;)if(s=ir,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ir=r;else for(;ir!==null;){switch(s=ir,x=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)b=r[l],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,l=s,b=x.memoizedProps,x=x.memoizedState,d=l.stateNode;try{var ae=Au(l.type,b);r=d.getSnapshotBeforeUpdate(ae,x),d.__reactInternalSnapshotBeforeUpdate=r}catch(Le){Rn(l,l.return,Le)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)km(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":km(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,ir=r;break}ir=s.return}}function D2(r,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:zo(r,l),d&4&&Ff(5,l);break;case 1:if(zo(r,l),d&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(R){Rn(l,l.return,R)}else{var b=Au(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(b,s,r.__reactInternalSnapshotBeforeUpdate)}catch(R){Rn(l,l.return,R)}}d&64&&k2(l),d&512&&Bf(l,l.return);break;case 3:if(zo(r,l),d&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{yi(r,s)}catch(R){Rn(l,l.return,R)}}break;case 27:s===null&&d&4&&I2(l);case 26:case 5:zo(r,l),s===null&&d&4&&L2(l),d&512&&Bf(l,l.return);break;case 12:zo(r,l);break;case 31:zo(r,l),d&4&&O2(r,l);break;case 13:zo(r,l),d&4&&F2(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=Kw.bind(null,l),gx(r,l))));break;case 22:if(d=l.memoizedState!==null||Fo,!d){s=s!==null&&s.memoizedState!==null||Oi,b=Fo;var x=Oi;Fo=d,(Oi=s)&&!x?Uo(r,l,(l.subtreeFlags&8772)!==0):zo(r,l),Fo=b,Oi=x}break;case 30:break;default:zo(r,l)}}function P2(r){var s=r.alternate;s!==null&&(r.alternate=null,P2(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Fs(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ni=null,ea=!1;function Bo(r,s,l){for(l=l.child;l!==null;)M2(r,s,l),l=l.sibling}function M2(r,s,l){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ze,l)}catch{}switch(l.tag){case 26:Oi||to(l,s),Bo(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Oi||to(l,s);var d=ni,b=ea;Tl(l.type)&&(ni=l.stateNode,ea=!1),Bo(r,s,l),Gf(l.stateNode),ni=d,ea=b;break;case 5:Oi||to(l,s);case 6:if(d=ni,b=ea,ni=null,Bo(r,s,l),ni=d,ea=b,ni!==null)if(ea)try{(ni.nodeType===9?ni.body:ni.nodeName==="HTML"?ni.ownerDocument.body:ni).removeChild(l.stateNode)}catch(x){Rn(l,s,x)}else try{ni.removeChild(l.stateNode)}catch(x){Rn(l,s,x)}break;case 18:ni!==null&&(ea?(r=ni,k0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),jc(r)):k0(ni,l.stateNode));break;case 4:d=ni,b=ea,ni=l.stateNode.containerInfo,ea=!0,Bo(r,s,l),ni=d,ea=b;break;case 0:case 11:case 14:case 15:Nl(2,l,s),Oi||Nl(4,l,s),Bo(r,s,l);break;case 1:Oi||(to(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&E2(l,s,d)),Bo(r,s,l);break;case 21:Bo(r,s,l);break;case 22:Oi=(d=Oi)||l.memoizedState!==null,Bo(r,s,l),Oi=d;break;default:Bo(r,s,l)}}function O2(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{jc(r)}catch(l){Rn(s,s.return,l)}}}function F2(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{jc(r)}catch(l){Rn(s,s.return,l)}}function jw(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new T2),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new T2),s;default:throw Error(i(435,r.tag))}}function td(r,s){var l=jw(r);s.forEach(function(d){if(!l.has(d)){l.add(d);var b=Qw.bind(null,r,d);d.then(b,b)}})}function na(r,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var b=l[d],x=r,R=s,$=R;t:for(;$!==null;){switch($.tag){case 27:if(Tl($.type)){ni=$.stateNode,ea=!1;break t}break;case 5:ni=$.stateNode,ea=!1;break t;case 3:case 4:ni=$.stateNode.containerInfo,ea=!0;break t}$=$.return}if(ni===null)throw Error(i(160));M2(x,R,b),ni=null,ea=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)B2(s,r),s=s.sibling}var Es=null;function B2(r,s){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:na(s,r),ia(r),d&4&&(Nl(3,r,r.return),Ff(3,r),Nl(5,r,r.return));break;case 1:na(s,r),ia(r),d&512&&(Oi||l===null||to(l,l.return)),d&64&&Fo&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var b=Es;if(na(s,r),ia(r),d&512&&(Oi||l===null||to(l,l.return)),d&4){var x=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){t:{d=r.type,l=r.memoizedProps,b=b.ownerDocument||b;e:switch(d){case"title":x=b.getElementsByTagName("title")[0],(!x||x[fa]||x[kn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(d),b.head.insertBefore(x,b.querySelector("head > title"))),pr(x,d,l),x[kn]=r,oi(x),d=x;break t;case"link":var R=B0("link","href",b).get(d+(l.href||""));if(R){for(var $=0;$<R.length;$++)if(x=R[$],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){R.splice($,1);break e}}x=b.createElement(d),pr(x,d,l),b.head.appendChild(x);break;case"meta":if(R=B0("meta","content",b).get(d+(l.content||""))){for($=0;$<R.length;$++)if(x=R[$],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){R.splice($,1);break e}}x=b.createElement(d),pr(x,d,l),b.head.appendChild(x);break;default:throw Error(i(468,d))}x[kn]=r,oi(x),d=x}r.stateNode=d}else z0(b,r.type,r.stateNode);else r.stateNode=F0(b,d,r.memoizedProps);else x!==d?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,d===null?z0(b,r.type,r.stateNode):F0(b,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Jp(r,r.memoizedProps,l.memoizedProps)}break;case 27:na(s,r),ia(r),d&512&&(Oi||l===null||to(l,l.return)),l!==null&&d&4&&Jp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(na(s,r),ia(r),d&512&&(Oi||l===null||to(l,l.return)),r.flags&32){b=r.stateNode;try{ga(b,"")}catch(ae){Rn(r,r.return,ae)}}d&4&&r.stateNode!=null&&(b=r.memoizedProps,Jp(r,b,l!==null?l.memoizedProps:b)),d&1024&&(nm=!0);break;case 6:if(na(s,r),ia(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(ae){Rn(r,r.return,ae)}}break;case 3:if(gd=null,b=Es,Es=pd(s.containerInfo),na(s,r),Es=b,ia(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{jc(s.containerInfo)}catch(ae){Rn(r,r.return,ae)}nm&&(nm=!1,z2(r));break;case 4:d=Es,Es=pd(r.stateNode.containerInfo),na(s,r),ia(r),Es=d;break;case 12:na(s,r),ia(r);break;case 31:na(s,r),ia(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,td(r,d)));break;case 13:na(s,r),ia(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(nd=Ue()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,td(r,d)));break;case 22:b=r.memoizedState!==null;var at=l!==null&&l.memoizedState!==null,Ct=Fo,Tt=Oi;if(Fo=Ct||b,Oi=Tt||at,na(s,r),Oi=Tt,Fo=Ct,ia(r),d&8192)t:for(s=r.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(l===null||at||Fo||Oi||Nu(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){at=l=s;try{if(x=at.stateNode,b)R=x.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{$=at.stateNode;var Ft=at.memoizedProps.style,_t=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;$.style.display=_t==null||typeof _t=="boolean"?"":(""+_t).trim()}}catch(ae){Rn(at,at.return,ae)}}}else if(s.tag===6){if(l===null){at=s;try{at.stateNode.nodeValue=b?"":at.memoizedProps}catch(ae){Rn(at,at.return,ae)}}}else if(s.tag===18){if(l===null){at=s;try{var Lt=at.stateNode;b?E0(Lt,!0):E0(at.stateNode,!1)}catch(ae){Rn(at,at.return,ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,td(r,l))));break;case 19:na(s,r),ia(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,td(r,d)));break;case 30:break;case 21:break;default:na(s,r),ia(r)}}function ia(r){var s=r.flags;if(s&2){try{for(var l,d=r.return;d!==null;){if(R2(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var b=l.stateNode,x=tm(r);Jh(r,x,b);break;case 5:var R=l.stateNode;l.flags&32&&(ga(R,""),l.flags&=-33);var $=tm(r);Jh(r,$,R);break;case 3:case 4:var at=l.stateNode.containerInfo,Ct=tm(r);em(r,Ct,at);break;default:throw Error(i(161))}}catch(Tt){Rn(r,r.return,Tt)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function z2(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;z2(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function zo(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)D2(r,s.alternate,s),s=s.sibling}function Nu(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Nl(4,s,s.return),Nu(s);break;case 1:to(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&E2(s,s.return,l),Nu(s);break;case 27:Gf(s.stateNode);case 26:case 5:to(s,s.return),Nu(s);break;case 22:s.memoizedState===null&&Nu(s);break;case 30:Nu(s);break;default:Nu(s)}r=r.sibling}}function Uo(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,b=r,x=s,R=x.flags;switch(x.tag){case 0:case 11:case 15:Uo(b,x,l),Ff(4,x);break;case 1:if(Uo(b,x,l),d=x,b=d.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ct){Rn(d,d.return,Ct)}if(d=x,b=d.updateQueue,b!==null){var $=d.stateNode;try{var at=b.shared.hiddenCallbacks;if(at!==null)for(b.shared.hiddenCallbacks=null,b=0;b<at.length;b++)er(at[b],$)}catch(Ct){Rn(d,d.return,Ct)}}l&&R&64&&k2(x),Bf(x,x.return);break;case 27:I2(x);case 26:case 5:Uo(b,x,l),l&&d===null&&R&4&&L2(x),Bf(x,x.return);break;case 12:Uo(b,x,l);break;case 31:Uo(b,x,l),l&&R&4&&O2(b,x);break;case 13:Uo(b,x,l),l&&R&4&&F2(b,x);break;case 22:x.memoizedState===null&&Uo(b,x,l),Bf(x,x.return);break;case 30:break;default:Uo(b,x,l)}s=s.sibling}}function im(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&wu(l))}function rm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&wu(r))}function Ls(r,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U2(r,s,l,d),s=s.sibling}function U2(r,s,l,d){var b=s.flags;switch(s.tag){case 0:case 11:case 15:Ls(r,s,l,d),b&2048&&Ff(9,s);break;case 1:Ls(r,s,l,d);break;case 3:Ls(r,s,l,d),b&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&wu(r)));break;case 12:if(b&2048){Ls(r,s,l,d),r=s.stateNode;try{var x=s.memoizedProps,R=x.id,$=x.onPostCommit;typeof $=="function"&&$(R,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(at){Rn(s,s.return,at)}}else Ls(r,s,l,d);break;case 31:Ls(r,s,l,d);break;case 13:Ls(r,s,l,d);break;case 23:break;case 22:x=s.stateNode,R=s.alternate,s.memoizedState!==null?x._visibility&2?Ls(r,s,l,d):zf(r,s):x._visibility&2?Ls(r,s,l,d):(x._visibility|=2,Ic(r,s,l,d,(s.subtreeFlags&10256)!==0||!1)),b&2048&&im(R,s);break;case 24:Ls(r,s,l,d),b&2048&&rm(s.alternate,s);break;default:Ls(r,s,l,d)}}function Ic(r,s,l,d,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=r,R=s,$=l,at=d,Ct=R.flags;switch(R.tag){case 0:case 11:case 15:Ic(x,R,$,at,b),Ff(8,R);break;case 23:break;case 22:var Tt=R.stateNode;R.memoizedState!==null?Tt._visibility&2?Ic(x,R,$,at,b):zf(x,R):(Tt._visibility|=2,Ic(x,R,$,at,b)),b&&Ct&2048&&im(R.alternate,R);break;case 24:Ic(x,R,$,at,b),b&&Ct&2048&&rm(R.alternate,R);break;default:Ic(x,R,$,at,b)}s=s.sibling}}function zf(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,d=s,b=d.flags;switch(d.tag){case 22:zf(l,d),b&2048&&im(d.alternate,d);break;case 24:zf(l,d),b&2048&&rm(d.alternate,d);break;default:zf(l,d)}s=s.sibling}}var Uf=8192;function Tc(r,s,l){if(r.subtreeFlags&Uf)for(r=r.child;r!==null;)$2(r,s,l),r=r.sibling}function $2(r,s,l){switch(r.tag){case 26:Tc(r,s,l),r.flags&Uf&&r.memoizedState!==null&&Ex(l,Es,r.memoizedState,r.memoizedProps);break;case 5:Tc(r,s,l);break;case 3:case 4:var d=Es;Es=pd(r.stateNode.containerInfo),Tc(r,s,l),Es=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Uf,Uf=16777216,Tc(r,s,l),Uf=d):Tc(r,s,l));break;default:Tc(r,s,l)}}function j2(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function $f(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];ir=d,q2(d,r)}j2(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)H2(r),r=r.sibling}function H2(r){switch(r.tag){case 0:case 11:case 15:$f(r),r.flags&2048&&Nl(9,r,r.return);break;case 3:$f(r);break;case 12:$f(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ed(r)):$f(r);break;default:$f(r)}}function ed(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];ir=d,q2(d,r)}j2(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Nl(8,s,s.return),ed(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,ed(s));break;default:ed(s)}r=r.sibling}}function q2(r,s){for(;ir!==null;){var l=ir;switch(l.tag){case 0:case 11:case 15:Nl(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:wu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,ir=d;else t:for(l=r;ir!==null;){d=ir;var b=d.sibling,x=d.return;if(P2(d),d===l){ir=null;break t}if(b!==null){b.return=x,ir=b;break t}ir=x}}}var Hw={getCacheForType:function(r){var s=qi(fi),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return qi(fi).controller.signal}},qw=typeof WeakMap=="function"?WeakMap:Map,Nn=0,jn=null,an=null,on=0,Ln=0,Aa=null,_l=!1,Dc=!1,am=!1,$o=0,xi=0,kl=0,_u=0,sm=0,Na=0,Pc=0,jf=null,ra=null,om=!1,nd=0,W2=0,id=1/0,rd=null,El=null,Vi=0,Ll=null,Mc=null,jo=0,lm=0,um=null,V2=null,Hf=0,cm=null;function _a(){return(Nn&2)!==0&&on!==0?on&-on:X.T!==null?gm():Ii()}function G2(){if(Na===0)if((on&536870912)===0||rn){var r=_n;_n<<=1,(_n&3932160)===0&&(_n=262144),Na=r}else Na=536870912;return r=Kn.current,r!==null&&(r.flags|=32),Na}function aa(r,s,l){(r===jn&&(Ln===2||Ln===9)||r.cancelPendingCommit!==null)&&(Oc(r,0),Rl(r,on,Na,!1)),ye(r,l),((Nn&2)===0||r!==jn)&&(r===jn&&((Nn&2)===0&&(_u|=l),xi===4&&Rl(r,on,Na,!1)),eo(r))}function Y2(r,s,l){if((Nn&6)!==0)throw Error(i(327));var d=!l&&(s&127)===0&&(s&r.expiredLanes)===0||ua(r,s),b=d?Gw(r,s):hm(r,s,!0),x=d;do{if(b===0){Dc&&!d&&Rl(r,s,0,!1);break}else{if(l=r.current.alternate,x&&!Ww(l)){b=hm(r,s,!1),x=!1;continue}if(b===2){if(x=s,r.errorRecoveryDisabledLanes&x)var R=0;else R=r.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){s=R;t:{var $=r;b=jf;var at=$.current.memoizedState.isDehydrated;if(at&&(Oc($,R).flags|=256),R=hm($,R,!1),R!==2){if(am&&!at){$.errorRecoveryDisabledLanes|=x,_u|=x,b=4;break t}x=ra,ra=b,x!==null&&(ra===null?ra=x:ra.push.apply(ra,x))}b=R}if(x=!1,b!==2)continue}}if(b===1){Oc(r,0),Rl(r,s,0,!0);break}t:{switch(d=r,x=b,x){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Rl(d,s,Na,!_l);break t;case 2:ra=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(b=nd+300-Ue(),10<b)){if(Rl(d,s,Na,!_l),un(d,0,!0)!==0)break t;jo=s,d.timeoutHandle=N0(X2.bind(null,d,l,ra,rd,om,s,Na,_u,Pc,_l,x,"Throttled",-0,0),b);break t}X2(d,l,ra,rd,om,s,Na,_u,Pc,_l,x,null,-0,0)}}break}while(!0);eo(r)}function X2(r,s,l,d,b,x,R,$,at,Ct,Tt,Ft,_t,Lt){if(r.timeoutHandle=-1,Ft=s.subtreeFlags,Ft&8192||(Ft&16785408)===16785408){Ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ya},$2(s,x,Ft);var ae=(x&62914560)===x?nd-Ue():(x&4194048)===x?W2-Ue():0;if(ae=Lx(Ft,ae),ae!==null){jo=x,r.cancelPendingCommit=ae(i0.bind(null,r,s,x,l,d,b,R,$,at,Tt,Ft,null,_t,Lt)),Rl(r,x,R,!Ct);return}}i0(r,s,x,l,d,b,R,$,at)}function Ww(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var b=l[d],x=b.getSnapshot;b=b.value;try{if(!Ui(x(),b))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rl(r,s,l,d){s&=~sm,s&=~_u,r.suspendedLanes|=s,r.pingedLanes&=~s,d&&(r.warmLanes|=s),d=r.expirationTimes;for(var b=s;0<b;){var x=31-en(b),R=1<<x;d[x]=-1,b&=~R}l!==0&&Ta(r,l,s)}function ad(){return(Nn&6)===0?(qf(0),!1):!0}function fm(){if(an!==null){if(Ln===0)var r=an.return;else r=an,Wa=Vs=null,Ac(r),Bt=null,oe=0,r=an;for(;r!==null;)_2(r.alternate,r),r=r.return;an=null}}function Oc(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,fx(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),jo=0,fm(),jn=r,an=l=Gr(r.current,null),on=s,Ln=0,Aa=null,_l=!1,Dc=ua(r,s),am=!1,Pc=Na=sm=_u=kl=xi=0,ra=jf=null,om=!1,(s&8)!==0&&(s|=s&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=s;0<d;){var b=31-en(d),x=1<<b;s|=r[b],d&=~x}return $o=s,pu(),l}function K2(r,s){ve=null,X.H=Pf,s===ft||s===Q?(s=Pt(),Ln=3):s===xt?(s=Pt(),Ln=4):Ln=s===Hp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Aa=s,an===null&&(xi=1,Yh(r,Yr(s,r.current)))}function Q2(){var r=Kn.current;return r===null?!0:(on&4194048)===on?gn===null:(on&62914560)===on||(on&536870912)!==0?r===gn:!1}function Z2(){var r=X.H;return X.H=Pf,r===null?Pf:r}function J2(){var r=X.A;return X.A=Hw,r}function sd(){xi=4,_l||(on&4194048)!==on&&Kn.current!==null||(Dc=!0),(kl&134217727)===0&&(_u&134217727)===0||jn===null||Rl(jn,on,Na,!1)}function hm(r,s,l){var d=Nn;Nn|=2;var b=Z2(),x=J2();(jn!==r||on!==s)&&(rd=null,Oc(r,s)),s=!1;var R=xi;t:do try{if(Ln!==0&&an!==null){var $=an,at=Aa;switch(Ln){case 8:fm(),R=6;break t;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var Ct=Ln;if(Ln=0,Aa=null,Fc(r,$,at,Ct),l&&Dc){R=0;break t}break;default:Ct=Ln,Ln=0,Aa=null,Fc(r,$,at,Ct)}}Vw(),R=xi;break}catch(Tt){K2(r,Tt)}while(!0);return s&&r.shellSuspendCounter++,Wa=Vs=null,Nn=d,X.H=b,X.A=x,an===null&&(jn=null,on=0,pu()),R}function Vw(){for(;an!==null;)t0(an)}function Gw(r,s){var l=Nn;Nn|=2;var d=Z2(),b=J2();jn!==r||on!==s?(rd=null,id=Ue()+500,Oc(r,s)):Dc=ua(r,s);t:do try{if(Ln!==0&&an!==null){s=an;var x=Aa;e:switch(Ln){case 1:Ln=0,Aa=null,Fc(r,s,x,1);break;case 2:case 9:if(bt(x)){Ln=0,Aa=null,e0(s);break}s=function(){Ln!==2&&Ln!==9||jn!==r||(Ln=7),eo(r)},x.then(s,s);break t;case 3:Ln=7;break t;case 4:Ln=5;break t;case 7:bt(x)?(Ln=0,Aa=null,e0(s)):(Ln=0,Aa=null,Fc(r,s,x,7));break;case 5:var R=null;switch(an.tag){case 26:R=an.memoizedState;case 5:case 27:var $=an;if(R?U0(R):$.stateNode.complete){Ln=0,Aa=null;var at=$.sibling;if(at!==null)an=at;else{var Ct=$.return;Ct!==null?(an=Ct,od(Ct)):an=null}break e}}Ln=0,Aa=null,Fc(r,s,x,5);break;case 6:Ln=0,Aa=null,Fc(r,s,x,6);break;case 8:fm(),xi=6;break t;default:throw Error(i(462))}}Yw();break}catch(Tt){K2(r,Tt)}while(!0);return Wa=Vs=null,X.H=d,X.A=b,Nn=l,an!==null?0:(jn=null,on=0,pu(),xi)}function Yw(){for(;an!==null&&!Ae();)t0(an)}function t0(r){var s=A2(r.alternate,r,$o);r.memoizedProps=r.pendingProps,s===null?od(r):an=s}function e0(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=v2(l,s,s.pendingProps,s.type,void 0,on);break;case 11:s=v2(l,s,s.pendingProps,s.type.render,s.ref,on);break;case 5:Ac(s);default:_2(l,s),s=an=yu(s,$o),s=A2(l,s,$o)}r.memoizedProps=r.pendingProps,s===null?od(r):an=s}function Fc(r,s,l,d){Wa=Vs=null,Ac(s),Bt=null,oe=0;var b=s.return;try{if(Ow(r,b,s,l,on)){xi=1,Yh(r,Yr(l,r.current)),an=null;return}}catch(x){if(b!==null)throw an=b,x;xi=1,Yh(r,Yr(l,r.current)),an=null;return}s.flags&32768?(rn||d===1?r=!0:Dc||(on&536870912)!==0?r=!1:(_l=r=!0,(d===2||d===9||d===3||d===6)&&(d=Kn.current,d!==null&&d.tag===13&&(d.flags|=16384))),n0(s,r)):od(s)}function od(r){var s=r;do{if((s.flags&32768)!==0){n0(s,_l);return}r=s.return;var l=zw(s.alternate,s,$o);if(l!==null){an=l;return}if(s=s.sibling,s!==null){an=s;return}an=s=r}while(s!==null);xi===0&&(xi=5)}function n0(r,s){do{var l=Uw(r.alternate,r);if(l!==null){l.flags&=32767,an=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){an=r;return}an=r=l}while(r!==null);xi=6,an=null}function i0(r,s,l,d,b,x,R,$,at){r.cancelPendingCommit=null;do ld();while(Vi!==0);if((Nn&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(x=s.lanes|s.childLanes,x|=cc,ns(r,l,x,R,$,at),r===jn&&(an=jn=null,on=0),Mc=s,Ll=r,jo=l,lm=x,um=b,V2=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Zw(Xe,function(){return l0(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,b=lt.p,lt.p=2,R=Nn,Nn|=4;try{$w(r,s,l)}finally{Nn=R,lt.p=b,X.T=d}}Vi=1,r0(),a0(),s0()}}function r0(){if(Vi===1){Vi=0;var r=Ll,s=Mc,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=lt.p;lt.p=2;var b=Nn;Nn|=4;try{B2(s,r);var x=Am,R=ws(r.containerInfo),$=x.focusedElem,at=x.selectionRange;if(R!==$&&$&&$.ownerDocument&&bs($.ownerDocument.documentElement,$)){if(at!==null&&Ha($)){var Ct=at.start,Tt=at.end;if(Tt===void 0&&(Tt=Ct),"selectionStart"in $)$.selectionStart=Ct,$.selectionEnd=Math.min(Tt,$.value.length);else{var Ft=$.ownerDocument||document,_t=Ft&&Ft.defaultView||window;if(_t.getSelection){var Lt=_t.getSelection(),ae=$.textContent.length,Le=Math.min(at.start,ae),zn=at.end===void 0?Le:Math.min(at.end,ae);!Lt.extend&&Le>zn&&(R=zn,zn=Le,Le=R);var yt=pl($,Le),dt=pl($,zn);if(yt&&dt&&(Lt.rangeCount!==1||Lt.anchorNode!==yt.node||Lt.anchorOffset!==yt.offset||Lt.focusNode!==dt.node||Lt.focusOffset!==dt.offset)){var St=Ft.createRange();St.setStart(yt.node,yt.offset),Lt.removeAllRanges(),Le>zn?(Lt.addRange(St),Lt.extend(dt.node,dt.offset)):(St.setEnd(dt.node,dt.offset),Lt.addRange(St))}}}}for(Ft=[],Lt=$;Lt=Lt.parentNode;)Lt.nodeType===1&&Ft.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Ft.length;$++){var Ot=Ft[$];Ot.element.scrollLeft=Ot.left,Ot.element.scrollTop=Ot.top}}wd=!!Cm,Am=Cm=null}finally{Nn=b,lt.p=d,X.T=l}}r.current=s,Vi=2}}function a0(){if(Vi===2){Vi=0;var r=Ll,s=Mc,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=lt.p;lt.p=2;var b=Nn;Nn|=4;try{D2(r,s.alternate,s)}finally{Nn=b,lt.p=d,X.T=l}}Vi=3}}function s0(){if(Vi===4||Vi===3){Vi=0,ge();var r=Ll,s=Mc,l=jo,d=V2;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Vi=5:(Vi=0,Mc=Ll=null,o0(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(El=null),di(l),s=s.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ze,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,b=lt.p,lt.p=2,X.T=null;try{for(var x=r.onRecoverableError,R=0;R<d.length;R++){var $=d[R];x($.value,{componentStack:$.stack})}}finally{X.T=s,lt.p=b}}(jo&3)!==0&&ld(),eo(r),b=r.pendingLanes,(l&261930)!==0&&(b&42)!==0?r===cm?Hf++:(Hf=0,cm=r):Hf=0,qf(0)}}function o0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,wu(s)))}function ld(){return r0(),a0(),s0(),l0()}function l0(){if(Vi!==5)return!1;var r=Ll,s=lm;lm=0;var l=di(jo),d=X.T,b=lt.p;try{lt.p=32>l?32:l,X.T=null,l=um,um=null;var x=Ll,R=jo;if(Vi=0,Mc=Ll=null,jo=0,(Nn&6)!==0)throw Error(i(331));var $=Nn;if(Nn|=4,H2(x.current),U2(x,x.current,R,l),Nn=$,qf(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ze,x)}catch{}return!0}finally{lt.p=b,X.T=d,o0(r,s)}}function u0(r,s,l){s=Yr(l,s),s=jp(r.stateNode,s,2),r=Ve(r,s,2),r!==null&&(ye(r,2),eo(r))}function Rn(r,s,l){if(r.tag===3)u0(r,r,l);else for(;s!==null;){if(s.tag===3){u0(s,r,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(El===null||!El.has(d))){r=Yr(l,r),l=c2(2),d=Ve(s,l,2),d!==null&&(f2(l,d,s,r),ye(d,2),eo(d));break}}s=s.return}}function dm(r,s,l){var d=r.pingCache;if(d===null){d=r.pingCache=new qw;var b=new Set;d.set(s,b)}else b=d.get(s),b===void 0&&(b=new Set,d.set(s,b));b.has(l)||(am=!0,b.add(l),r=Xw.bind(null,r,s,l),s.then(r,r))}function Xw(r,s,l){var d=r.pingCache;d!==null&&d.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,jn===r&&(on&l)===l&&(xi===4||xi===3&&(on&62914560)===on&&300>Ue()-nd?(Nn&2)===0&&Oc(r,0):sm|=l,Pc===on&&(Pc=0)),eo(r)}function c0(r,s){s===0&&(s=Ia()),r=Ss(r,s),r!==null&&(ye(r,s),eo(r))}function Kw(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),c0(r,l)}function Qw(r,s){var l=0;switch(r.tag){case 31:case 13:var d=r.stateNode,b=r.memoizedState;b!==null&&(l=b.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),c0(r,l)}function Zw(r,s){return be(r,s)}var ud=null,Bc=null,pm=!1,cd=!1,mm=!1,Il=0;function eo(r){r!==Bc&&r.next===null&&(Bc===null?ud=Bc=r:Bc=Bc.next=r),cd=!0,pm||(pm=!0,tx())}function qf(r,s){if(!mm&&cd){mm=!0;do for(var l=!1,d=ud;d!==null;){if(r!==0){var b=d.pendingLanes;if(b===0)var x=0;else{var R=d.suspendedLanes,$=d.pingedLanes;x=(1<<31-en(42|r)+1)-1,x&=b&~(R&~$),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,p0(d,x))}else x=on,x=un(d,d===jn?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||ua(d,x)||(l=!0,p0(d,x));d=d.next}while(l);mm=!1}}function Jw(){f0()}function f0(){cd=pm=!1;var r=0;Il!==0&&cx()&&(r=Il);for(var s=Ue(),l=null,d=ud;d!==null;){var b=d.next,x=h0(d,s);x===0?(d.next=null,l===null?ud=b:l.next=b,b===null&&(Bc=l)):(l=d,(r!==0||(x&3)!==0)&&(cd=!0)),d=b}Vi!==0&&Vi!==5||qf(r),Il!==0&&(Il=0)}function h0(r,s){for(var l=r.suspendedLanes,d=r.pingedLanes,b=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var R=31-en(x),$=1<<R,at=b[R];at===-1?(($&l)===0||($&d)!==0)&&(b[R]=Ki($,s)):at<=s&&(r.expiredLanes|=$),x&=~$}if(s=jn,l=on,l=un(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===s&&(Ln===2||Ln===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&ne(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ua(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(d!==null&&ne(d),di(l)){case 2:case 8:l=tn;break;case 32:l=Xe;break;case 268435456:l=ze;break;default:l=Xe}return d=d0.bind(null,r),l=be(l,d),r.callbackPriority=s,r.callbackNode=l,s}return d!==null&&d!==null&&ne(d),r.callbackPriority=2,r.callbackNode=null,2}function d0(r,s){if(Vi!==0&&Vi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(ld()&&r.callbackNode!==l)return null;var d=on;return d=un(r,r===jn?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Y2(r,d,s),h0(r,Ue()),r.callbackNode!=null&&r.callbackNode===l?d0.bind(null,r):null)}function p0(r,s){if(ld())return null;Y2(r,s,!0)}function tx(){hx(function(){(Nn&6)!==0?be(Be,Jw):f0()})}function gm(){if(Il===0){var r=g;r===0&&(r=De,De<<=1,(De&261888)===0&&(De=256)),Il=r}return Il}function m0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:gr(""+r)}function g0(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function ex(r,s,l,d,b){if(s==="submit"&&l&&l.stateNode===b){var x=m0((b[Vn]||null).action),R=d.submitter;R&&(s=(s=R[Vn]||null)?m0(s.formAction):R.getAttribute("formAction"),s!==null&&(x=s,R=null));var $=new qr("action","action",null,d,b);r.push({event:$,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Il!==0){var at=R?g0(b,R):new FormData(b);Op(l,{pending:!0,data:at,method:b.method,action:x},null,at)}}else typeof x=="function"&&($.preventDefault(),at=R?g0(b,R):new FormData(b),Op(l,{pending:!0,data:at,method:b.method,action:x},x,at))},currentTarget:b}]})}}for(var ym=0;ym<ko.length;ym++){var vm=ko[ym],nx=vm.toLowerCase(),ix=vm[0].toUpperCase()+vm.slice(1);Vr(nx,"on"+ix)}Vr(_o,"onAnimationEnd"),Vr(hu,"onAnimationIteration"),Vr(bf,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Mh,"onTransitionRun"),Vr(Oh,"onTransitionStart"),Vr(Fh,"onTransitionCancel"),Vr(wf,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wf));function y0(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],b=d.event;d=d.listeners;t:{var x=void 0;if(s)for(var R=d.length-1;0<=R;R--){var $=d[R],at=$.instance,Ct=$.currentTarget;if($=$.listener,at!==x&&b.isPropagationStopped())break t;x=$,b.currentTarget=Ct;try{x(b)}catch(Tt){du(Tt)}b.currentTarget=null,x=at}else for(R=0;R<d.length;R++){if($=d[R],at=$.instance,Ct=$.currentTarget,$=$.listener,at!==x&&b.isPropagationStopped())break t;x=$,b.currentTarget=Ct;try{x(b)}catch(Tt){du(Tt)}b.currentTarget=null,x=at}}}}function sn(r,s){var l=s[Er];l===void 0&&(l=s[Er]=new Set);var d=r+"__bubble";l.has(d)||(v0(s,r,2,!1),l.add(d))}function bm(r,s,l){var d=0;s&&(d|=4),v0(l,r,d,s)}var fd="_reactListening"+Math.random().toString(36).slice(2);function wm(r){if(!r[fd]){r[fd]=!0,Xl.forEach(function(l){l!=="selectionchange"&&(rx.has(l)||bm(l,!1,r),bm(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[fd]||(s[fd]=!0,bm("selectionchange",!1,s))}}function v0(r,s,l,d){switch(G0(s)){case 2:var b=Tx;break;case 8:b=Dx;break;default:b=Mm}l=b.bind(null,s,l,r),b=void 0,!ou||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),d?b!==void 0?r.addEventListener(s,l,{capture:!0,passive:b}):r.addEventListener(s,l,!0):b!==void 0?r.addEventListener(s,l,{passive:b}):r.addEventListener(s,l,!1)}function xm(r,s,l,d,b){var x=d;if((s&1)===0&&(s&2)===0&&d!==null)t:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var $=d.stateNode.containerInfo;if($===b)break;if(R===4)for(R=d.return;R!==null;){var at=R.tag;if((at===3||at===4)&&R.stateNode.containerInfo===b)return;R=R.return}for(;$!==null;){if(R=ha($),R===null)return;if(at=R.tag,at===5||at===6||at===26||at===27){d=x=R;continue t}$=$.parentNode}}d=d.return}ac(function(){var Ct=x,Tt=bo(l),Ft=[];t:{var _t=xf.get(r);if(_t!==void 0){var Lt=qr,ae=r;switch(r){case"keypress":if(Hr(l)===0)break t;case"keydown":case"keyup":Lt=cn;break;case"focusin":ae="focus",Lt=fs;break;case"focusout":ae="blur",Lt=fs;break;case"beforeblur":case"afterblur":Lt=fs;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=cs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Ni;break;case _o:case hu:case bf:Lt=C;break;case wf:Lt=zi;break;case"scroll":case"scrollend":Lt=ol;break;case"wheel":Lt=va;break;case"copy":case"cut":case"paste":Lt=J;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=li;break;case"toggle":case"beforetoggle":Lt=uu}var Le=(s&4)!==0,zn=!Le&&(r==="scroll"||r==="scrollend"),yt=Le?_t!==null?_t+"Capture":null:_t;Le=[];for(var dt=Ct,St;dt!==null;){var Ot=dt;if(St=Ot.stateNode,Ot=Ot.tag,Ot!==5&&Ot!==26&&Ot!==27||St===null||yt===null||(Ot=Ir(dt,yt),Ot!=null&&Le.push(Vf(dt,Ot,St))),zn)break;dt=dt.return}0<Le.length&&(_t=new Lt(_t,ae,null,l,Tt),Ft.push({event:_t,listeners:Le}))}}if((s&7)===0){t:{if(_t=r==="mouseover"||r==="pointerover",Lt=r==="mouseout"||r==="pointerout",_t&&l!==as&&(ae=l.relatedTarget||l.fromElement)&&(ha(ae)||ae[Qi]))break t;if((Lt||_t)&&(_t=Tt.window===Tt?Tt:(_t=Tt.ownerDocument)?_t.defaultView||_t.parentWindow:window,Lt?(ae=l.relatedTarget||l.toElement,Lt=Ct,ae=ae?ha(ae):null,ae!==null&&(zn=o(ae),Le=ae.tag,ae!==zn||Le!==5&&Le!==27&&Le!==6)&&(ae=null)):(Lt=null,ae=Ct),Lt!==ae)){if(Le=lu,Ot="onMouseLeave",yt="onMouseEnter",dt="mouse",(r==="pointerout"||r==="pointerover")&&(Le=li,Ot="onPointerLeave",yt="onPointerEnter",dt="pointer"),zn=Lt==null?_t:yo(Lt),St=ae==null?_t:yo(ae),_t=new Le(Ot,dt+"leave",Lt,l,Tt),_t.target=zn,_t.relatedTarget=St,Ot=null,ha(Tt)===Ct&&(Le=new Le(yt,dt+"enter",ae,l,Tt),Le.target=St,Le.relatedTarget=zn,Ot=Le),zn=Ot,Lt&&ae)e:{for(Le=ax,yt=Lt,dt=ae,St=0,Ot=yt;Ot;Ot=Le(Ot))St++;Ot=0;for(var Se=dt;Se;Se=Le(Se))Ot++;for(;0<St-Ot;)yt=Le(yt),St--;for(;0<Ot-St;)dt=Le(dt),Ot--;for(;St--;){if(yt===dt||dt!==null&&yt===dt.alternate){Le=yt;break e}yt=Le(yt),dt=Le(dt)}Le=null}else Le=null;Lt!==null&&b0(Ft,_t,Lt,Le,!1),ae!==null&&zn!==null&&b0(Ft,zn,ae,Le,!0)}}t:{if(_t=Ct?yo(Ct):window,Lt=_t.nodeName&&_t.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&_t.type==="file")var xn=js;else if(cu(_t))if(yr)xn=$a;else{xn=ui;var he=hl}else Lt=_t.nodeName,!Lt||Lt.toLowerCase()!=="input"||_t.type!=="checkbox"&&_t.type!=="radio"?Ct&&ru(Ct.elementType)&&(xn=js):xn=uc;if(xn&&(xn=xn(r,Ct))){Dr(Ft,xn,l,Tt);break t}he&&he(r,_t,Ct),r==="focusout"&&Ct&&_t.type==="number"&&Ct.memoizedProps.value!=null&&eu(_t,"number",_t.value)}switch(he=Ct?yo(Ct):window,r){case"focusin":(cu(he)||he.contentEditable==="true")&&(Pr=he,xs=Ct,Zi=null);break;case"focusout":Zi=xs=Pr=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":Wr=!1,bn(Ft,l,Tt);break;case"selectionchange":if(No)break;case"keydown":case"keyup":bn(Ft,l,Tt)}var Ke;if(Fa)t:{switch(r){case"compositionstart":var ln="onCompositionStart";break t;case"compositionend":ln="onCompositionEnd";break t;case"compositionupdate":ln="onCompositionUpdate";break t}ln=void 0}else Ba?$s(r,l)&&(ln="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ln="onCompositionStart");ln&&(ps&&l.locale!=="ko"&&(Ba||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Ba&&(Ke=sc()):(Tr=Tt,xo="value"in Tr?Tr.value:Tr.textContent,Ba=!0)),he=hd(Ct,ln),0<he.length&&(ln=new gt(ln,r,null,l,Tt),Ft.push({event:ln,listeners:he}),Ke?ln.data=Ke:(Ke=ul(l),Ke!==null&&(ln.data=Ke)))),(Ke=Ao?ur(r,l):ms(r,l))&&(ln=hd(Ct,"onBeforeInput"),0<ln.length&&(he=new gt("onBeforeInput","beforeinput",null,l,Tt),Ft.push({event:he,listeners:ln}),he.data=Ke)),ex(Ft,r,Ct,l,Tt)}y0(Ft,s)})}function Vf(r,s,l){return{instance:r,listener:s,currentTarget:l}}function hd(r,s){for(var l=s+"Capture",d=[];r!==null;){var b=r,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=Ir(r,l),b!=null&&d.unshift(Vf(r,b,x)),b=Ir(r,s),b!=null&&d.push(Vf(r,b,x))),r.tag===3)return d;r=r.return}return[]}function ax(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function b0(r,s,l,d,b){for(var x=s._reactName,R=[];l!==null&&l!==d;){var $=l,at=$.alternate,Ct=$.stateNode;if($=$.tag,at!==null&&at===d)break;$!==5&&$!==26&&$!==27||Ct===null||(at=Ct,b?(Ct=Ir(l,x),Ct!=null&&R.unshift(Vf(l,Ct,at))):b||(Ct=Ir(l,x),Ct!=null&&R.push(Vf(l,Ct,at)))),l=l.return}R.length!==0&&r.push({event:s,listeners:R})}var sx=/\r\n?/g,ox=/\u0000|\uFFFD/g;function w0(r){return(typeof r=="string"?r:""+r).replace(sx,`
`).replace(ox,"")}function x0(r,s){return s=w0(s),w0(r)===s}function Bn(r,s,l,d,b,x){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ga(r,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ga(r,""+d);break;case"className":rs(r,"class",d);break;case"tabIndex":rs(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(r,l,d);break;case"style":nc(r,d,x);break;case"data":if(s!=="object"){rs(r,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=gr(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(s!=="input"&&Bn(r,s,"name",b.name,b,null),Bn(r,s,"formEncType",b.formEncType,b,null),Bn(r,s,"formMethod",b.formMethod,b,null),Bn(r,s,"formTarget",b.formTarget,b,null)):(Bn(r,s,"encType",b.encType,b,null),Bn(r,s,"method",b.method,b,null),Bn(r,s,"target",b.target,b,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=gr(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=ya);break;case"onScroll":d!=null&&sn("scroll",r);break;case"onScrollEnd":d!=null&&sn("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=gr(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":sn("beforetoggle",r),sn("toggle",r),Rr(r,"popover",d);break;case"xlinkActuate":ma(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ma(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ma(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ma(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ma(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ma(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ma(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ma(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ma(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Rr(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=au.get(l)||l,Rr(r,l,d))}}function Sm(r,s,l,d,b,x){switch(l){case"style":nc(r,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof d=="string"?ga(r,d):(typeof d=="number"||typeof d=="bigint")&&ga(r,""+d);break;case"onScroll":d!=null&&sn("scroll",r);break;case"onScrollEnd":d!=null&&sn("scrollend",r);break;case"onClick":d!=null&&(r.onclick=ya);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lr.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(b=l.endsWith("Capture"),s=l.slice(2,b?l.length-7:void 0),x=r[Vn]||null,x=x!=null?x[l]:null,typeof x=="function"&&r.removeEventListener(s,x,b),typeof d=="function")){typeof x!="function"&&x!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,d,b);break t}l in r?r[l]=d:d===!0?r.setAttribute(l,""):Rr(r,l,d)}}}function pr(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sn("error",r),sn("load",r);var d=!1,b=!1,x;for(x in l)if(l.hasOwnProperty(x)){var R=l[x];if(R!=null)switch(x){case"src":d=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bn(r,s,x,R,l,null)}}b&&Bn(r,s,"srcSet",l.srcSet,l,null),d&&Bn(r,s,"src",l.src,l,null);return;case"input":sn("invalid",r);var $=x=R=b=null,at=null,Ct=null;for(d in l)if(l.hasOwnProperty(d)){var Tt=l[d];if(Tt!=null)switch(d){case"name":b=Tt;break;case"type":R=Tt;break;case"checked":at=Tt;break;case"defaultChecked":Ct=Tt;break;case"value":x=Tt;break;case"defaultValue":$=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(i(137,s));break;default:Bn(r,s,d,Tt,l,null)}}tc(r,x,$,at,Ct,R,b,!1);return;case"select":sn("invalid",r),d=R=x=null;for(b in l)if(l.hasOwnProperty(b)&&($=l[b],$!=null))switch(b){case"value":x=$;break;case"defaultValue":R=$;break;case"multiple":d=$;default:Bn(r,s,b,$,l,null)}s=x,l=R,r.multiple=!!d,s!=null?lr(r,!!d,s,!1):l!=null&&lr(r,!!d,l,!0);return;case"textarea":sn("invalid",r),x=b=d=null;for(R in l)if(l.hasOwnProperty(R)&&($=l[R],$!=null))switch(R){case"value":d=$;break;case"defaultValue":b=$;break;case"children":x=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:Bn(r,s,R,$,l,null)}iu(r,d,b,x);return;case"option":for(at in l)if(l.hasOwnProperty(at)&&(d=l[at],d!=null))switch(at){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Bn(r,s,at,d,l,null)}return;case"dialog":sn("beforetoggle",r),sn("toggle",r),sn("cancel",r),sn("close",r);break;case"iframe":case"object":sn("load",r);break;case"video":case"audio":for(d=0;d<Wf.length;d++)sn(Wf[d],r);break;case"image":sn("error",r),sn("load",r);break;case"details":sn("toggle",r);break;case"embed":case"source":case"link":sn("error",r),sn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ct in l)if(l.hasOwnProperty(Ct)&&(d=l[Ct],d!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bn(r,s,Ct,d,l,null)}return;default:if(ru(s)){for(Tt in l)l.hasOwnProperty(Tt)&&(d=l[Tt],d!==void 0&&Sm(r,s,Tt,d,l,void 0));return}}for($ in l)l.hasOwnProperty($)&&(d=l[$],d!=null&&Bn(r,s,$,d,l,null))}function lx(r,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,R=null,$=null,at=null,Ct=null,Tt=null;for(Lt in l){var Ft=l[Lt];if(l.hasOwnProperty(Lt)&&Ft!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":at=Ft;default:d.hasOwnProperty(Lt)||Bn(r,s,Lt,null,d,Ft)}}for(var _t in d){var Lt=d[_t];if(Ft=l[_t],d.hasOwnProperty(_t)&&(Lt!=null||Ft!=null))switch(_t){case"type":x=Lt;break;case"name":b=Lt;break;case"checked":Ct=Lt;break;case"defaultChecked":Tt=Lt;break;case"value":R=Lt;break;case"defaultValue":$=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(i(137,s));break;default:Lt!==Ft&&Bn(r,s,_t,Lt,d,Ft)}}rl(r,R,$,at,Ct,Tt,x,b);return;case"select":Lt=R=$=_t=null;for(x in l)if(at=l[x],l.hasOwnProperty(x)&&at!=null)switch(x){case"value":break;case"multiple":Lt=at;default:d.hasOwnProperty(x)||Bn(r,s,x,null,d,at)}for(b in d)if(x=d[b],at=l[b],d.hasOwnProperty(b)&&(x!=null||at!=null))switch(b){case"value":_t=x;break;case"defaultValue":$=x;break;case"multiple":R=x;default:x!==at&&Bn(r,s,b,x,d,at)}s=$,l=R,d=Lt,_t!=null?lr(r,!!l,_t,!1):!!d!=!!l&&(s!=null?lr(r,!!l,s,!0):lr(r,!!l,l?[]:"",!1));return;case"textarea":Lt=_t=null;for($ in l)if(b=l[$],l.hasOwnProperty($)&&b!=null&&!d.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Bn(r,s,$,null,d,b)}for(R in d)if(b=d[R],x=l[R],d.hasOwnProperty(R)&&(b!=null||x!=null))switch(R){case"value":_t=b;break;case"defaultValue":Lt=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==x&&Bn(r,s,R,b,d,x)}nu(r,_t,Lt);return;case"option":for(var ae in l)if(_t=l[ae],l.hasOwnProperty(ae)&&_t!=null&&!d.hasOwnProperty(ae))switch(ae){case"selected":r.selected=!1;break;default:Bn(r,s,ae,null,d,_t)}for(at in d)if(_t=d[at],Lt=l[at],d.hasOwnProperty(at)&&_t!==Lt&&(_t!=null||Lt!=null))switch(at){case"selected":r.selected=_t&&typeof _t!="function"&&typeof _t!="symbol";break;default:Bn(r,s,at,_t,d,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)_t=l[Le],l.hasOwnProperty(Le)&&_t!=null&&!d.hasOwnProperty(Le)&&Bn(r,s,Le,null,d,_t);for(Ct in d)if(_t=d[Ct],Lt=l[Ct],d.hasOwnProperty(Ct)&&_t!==Lt&&(_t!=null||Lt!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,s));break;default:Bn(r,s,Ct,_t,d,Lt)}return;default:if(ru(s)){for(var zn in l)_t=l[zn],l.hasOwnProperty(zn)&&_t!==void 0&&!d.hasOwnProperty(zn)&&Sm(r,s,zn,void 0,d,_t);for(Tt in d)_t=d[Tt],Lt=l[Tt],!d.hasOwnProperty(Tt)||_t===Lt||_t===void 0&&Lt===void 0||Sm(r,s,Tt,_t,d,Lt);return}}for(var yt in l)_t=l[yt],l.hasOwnProperty(yt)&&_t!=null&&!d.hasOwnProperty(yt)&&Bn(r,s,yt,null,d,_t);for(Ft in d)_t=d[Ft],Lt=l[Ft],!d.hasOwnProperty(Ft)||_t===Lt||_t==null&&Lt==null||Bn(r,s,Ft,_t,d,Lt)}function S0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ux(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var b=l[d],x=b.transferSize,R=b.initiatorType,$=b.duration;if(x&&$&&S0(R)){for(R=0,$=b.responseEnd,d+=1;d<l.length;d++){var at=l[d],Ct=at.startTime;if(Ct>$)break;var Tt=at.transferSize,Ft=at.initiatorType;Tt&&S0(Ft)&&(at=at.responseEnd,R+=Tt*(at<$?1:($-Ct)/(at-Ct)))}if(--d,s+=8*(x+R)/(b.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Cm=null,Am=null;function dd(r){return r.nodeType===9?r:r.ownerDocument}function C0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A0(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Nm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _m=null;function cx(){var r=window.event;return r&&r.type==="popstate"?r===_m?!1:(_m=r,!0):(_m=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(r){return _0.resolve(null).then(r).catch(dx)}:N0;function dx(r){setTimeout(function(){throw r})}function Tl(r){return r==="head"}function k0(r,s){var l=s,d=0;do{var b=l.nextSibling;if(r.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"||l==="/&"){if(d===0){r.removeChild(b),jc(s);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Gf(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Gf(l);for(var x=l.firstChild;x;){var R=x.nextSibling,$=x.nodeName;x[fa]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=R}}else l==="body"&&Gf(r.ownerDocument.body);l=b}while(l);jc(s)}function E0(r,s){var l=r;r=0;do{var d=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=d}while(l)}function km(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":km(l),Fs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function px(r,s,l,d){for(;r.nodeType===1;){var b=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[fa])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Ya(r.nextSibling),r===null)break}return null}function mx(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ya(r.nextSibling),r===null))return null;return r}function L0(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ya(r.nextSibling),r===null))return null;return r}function Em(r){return r.data==="$?"||r.data==="$~"}function Lm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function gx(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ya(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Rm=null;function R0(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return Ya(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function I0(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function T0(r,s,l){switch(s=dd(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Gf(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Fs(r)}var Xa=new Map,D0=new Set;function pd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ho=lt.d;lt.d={f:yx,r:vx,D:bx,C:wx,L:xx,m:Sx,X:Ax,S:Cx,M:Nx};function yx(){var r=Ho.f(),s=ad();return r||s}function vx(r){var s=da(r);s!==null&&s.tag===5&&s.type==="form"?Kg(s):Ho.r(r)}var zc=typeof document>"u"?null:document;function P0(r,s,l){var d=zc;if(d&&typeof s=="string"&&s){var b=pi(s);b='link[rel="'+r+'"][href="'+b+'"]',typeof l=="string"&&(b+='[crossorigin="'+l+'"]'),D0.has(b)||(D0.add(b),r={rel:r,crossOrigin:l,href:s},d.querySelector(b)===null&&(s=d.createElement("link"),pr(s,"link",r),oi(s),d.head.appendChild(s)))}}function bx(r){Ho.D(r),P0("dns-prefetch",r,null)}function wx(r,s){Ho.C(r,s),P0("preconnect",r,s)}function xx(r,s,l){Ho.L(r,s,l);var d=zc;if(d&&r&&s){var b='link[rel="preload"][as="'+pi(s)+'"]';s==="image"&&l&&l.imageSrcSet?(b+='[imagesrcset="'+pi(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(b+='[imagesizes="'+pi(l.imageSizes)+'"]')):b+='[href="'+pi(r)+'"]';var x=b;switch(s){case"style":x=Uc(r);break;case"script":x=$c(r)}Xa.has(x)||(r=m({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Xa.set(x,r),d.querySelector(b)!==null||s==="style"&&d.querySelector(Yf(x))||s==="script"&&d.querySelector(Xf(x))||(s=d.createElement("link"),pr(s,"link",r),oi(s),d.head.appendChild(s)))}}function Sx(r,s){Ho.m(r,s);var l=zc;if(l&&r){var d=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+pi(d)+'"][href="'+pi(r)+'"]',x=b;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=$c(r)}if(!Xa.has(x)&&(r=m({rel:"modulepreload",href:r},s),Xa.set(x,r),l.querySelector(b)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xf(x)))return}d=l.createElement("link"),pr(d,"link",r),oi(d),l.head.appendChild(d)}}}function Cx(r,s,l){Ho.S(r,s,l);var d=zc;if(d&&r){var b=Da(d).hoistableStyles,x=Uc(r);s=s||"default";var R=b.get(x);if(!R){var $={loading:0,preload:null};if(R=d.querySelector(Yf(x)))$.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Xa.get(x))&&Im(r,l);var at=R=d.createElement("link");oi(at),pr(at,"link",r),at._p=new Promise(function(Ct,Tt){at.onload=Ct,at.onerror=Tt}),at.addEventListener("load",function(){$.loading|=1}),at.addEventListener("error",function(){$.loading|=2}),$.loading|=4,md(R,s,d)}R={type:"stylesheet",instance:R,count:1,state:$},b.set(x,R)}}}function Ax(r,s){Ho.X(r,s);var l=zc;if(l&&r){var d=Da(l).hoistableScripts,b=$c(r),x=d.get(b);x||(x=l.querySelector(Xf(b)),x||(r=m({src:r,async:!0},s),(s=Xa.get(b))&&Tm(r,s),x=l.createElement("script"),oi(x),pr(x,"link",r),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(b,x))}}function Nx(r,s){Ho.M(r,s);var l=zc;if(l&&r){var d=Da(l).hoistableScripts,b=$c(r),x=d.get(b);x||(x=l.querySelector(Xf(b)),x||(r=m({src:r,async:!0,type:"module"},s),(s=Xa.get(b))&&Tm(r,s),x=l.createElement("script"),oi(x),pr(x,"link",r),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(b,x))}}function M0(r,s,l,d){var b=(b=ot.current)?pd(b):null;if(!b)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Uc(l.href),l=Da(b).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Uc(l.href);var x=Da(b).hoistableStyles,R=x.get(r);if(R||(b=b.ownerDocument||b,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,R),(x=b.querySelector(Yf(r)))&&!x._p&&(R.instance=x,R.state.loading=5),Xa.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Xa.set(r,l),x||_x(b,r,l,R.state))),s&&d===null)throw Error(i(528,""));return R}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$c(l),l=Da(b).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Uc(r){return'href="'+pi(r)+'"'}function Yf(r){return'link[rel="stylesheet"]['+r+"]"}function O0(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function _x(r,s,l,d){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=r.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),pr(s,"link",l),oi(s),r.head.appendChild(s))}function $c(r){return'[src="'+pi(r)+'"]'}function Xf(r){return"script[async]"+r}function F0(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=r.querySelector('style[data-href~="'+pi(l.href)+'"]');if(d)return s.instance=d,oi(d),d;var b=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),oi(d),pr(d,"style",b),md(d,l.precedence,r),s.instance=d;case"stylesheet":b=Uc(l.href);var x=r.querySelector(Yf(b));if(x)return s.state.loading|=4,s.instance=x,oi(x),x;d=O0(l),(b=Xa.get(b))&&Im(d,b),x=(r.ownerDocument||r).createElement("link"),oi(x);var R=x;return R._p=new Promise(function($,at){R.onload=$,R.onerror=at}),pr(x,"link",d),s.state.loading|=4,md(x,l.precedence,r),s.instance=x;case"script":return x=$c(l.src),(b=r.querySelector(Xf(x)))?(s.instance=b,oi(b),b):(d=l,(b=Xa.get(x))&&(d=m({},l),Tm(d,b)),r=r.ownerDocument||r,b=r.createElement("script"),oi(b),pr(b,"link",d),r.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,md(d,l.precedence,r));return s.instance}function md(r,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=d.length?d[d.length-1]:null,x=b,R=0;R<d.length;R++){var $=d[R];if($.dataset.precedence===s)x=$;else if(x!==b)break}x?x.parentNode.insertBefore(r,x.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function Im(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Tm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var gd=null;function B0(r,s,l){if(gd===null){var d=new Map,b=gd=new Map;b.set(l,d)}else b=gd,d=b.get(l),d||(d=new Map,b.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),b=0;b<l.length;b++){var x=l[b];if(!(x[fa]||x[kn]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var R=x.getAttribute(s)||"";R=r+R;var $=d.get(R);$?$.push(x):d.set(R,[x])}}return d}function z0(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function kx(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function U0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Ex(r,s,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Uc(d.href),x=s.querySelector(Yf(b));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=yd.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=x,oi(x);return}x=s.ownerDocument||s,d=O0(d),(b=Xa.get(b))&&Im(d,b),x=x.createElement("link"),oi(x);var R=x;R._p=new Promise(function($,at){R.onload=$,R.onerror=at}),pr(x,"link",d),l.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=yd.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var Dm=0;function Lx(r,s){return r.stylesheets&&r.count===0&&bd(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var d=setTimeout(function(){if(r.stylesheets&&bd(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+s);0<r.imgBytes&&Dm===0&&(Dm=62500*ux());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&bd(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>Dm?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(b)}}:null}function yd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var vd=null;function bd(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,vd=new Map,s.forEach(Rx,r),vd=null,yd.call(r))}function Rx(r,s){if(!(s.state.loading&4)){var l=vd.get(r);if(l)var d=l.get(null);else{l=new Map,vd.set(r,l);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var R=b[x];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(l.set(R.dataset.precedence,R),d=R)}d&&l.set(null,d)}b=s.instance,R=b.getAttribute("data-precedence"),x=l.get(R)||d,x===d&&l.set(null,b),l.set(R,b),this.count++,d=yd.bind(this),b.addEventListener("load",d),b.addEventListener("error",d),x?x.parentNode.insertBefore(b,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),s.state.loading|=4}}var Kf={$$typeof:D,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function Ix(r,s,l,d,b,x,R,$,at){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$r(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.hiddenUpdates=$r(null),this.identifierPrefix=d,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function $0(r,s,l,d,b,x,R,$,at,Ct,Tt,Ft){return r=new Ix(r,s,l,R,at,Ct,Tt,Ft,$),s=1,x===!0&&(s|=24),x=tr(3,null,null,s),r.current=x,x.stateNode=r,s=wl(),s.refCount++,r.pooledCache=s,s.refCount++,x.memoizedState={element:d,isDehydrated:l,cache:s},Gt(x),r}function j0(r){return r?(r=$i,r):$i}function H0(r,s,l,d,b,x){b=j0(b),d.context===null?d.context=b:d.pendingContext=b,d=ke(s),d.payload={element:l},x=x===void 0?null:x,x!==null&&(d.callback=x),l=Ve(r,d,s),l!==null&&(aa(l,r,s),Cn(l,r,s))}function q0(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Pm(r,s){q0(r,s),(r=r.alternate)&&q0(r,s)}function W0(r){if(r.tag===13||r.tag===31){var s=Ss(r,67108864);s!==null&&aa(s,r,67108864),Pm(r,67108864)}}function V0(r){if(r.tag===13||r.tag===31){var s=_a();s=Wn(s);var l=Ss(r,s);l!==null&&aa(l,r,s),Pm(r,s)}}var wd=!0;function Tx(r,s,l,d){var b=X.T;X.T=null;var x=lt.p;try{lt.p=2,Mm(r,s,l,d)}finally{lt.p=x,X.T=b}}function Dx(r,s,l,d){var b=X.T;X.T=null;var x=lt.p;try{lt.p=8,Mm(r,s,l,d)}finally{lt.p=x,X.T=b}}function Mm(r,s,l,d){if(wd){var b=Om(d);if(b===null)xm(r,s,d,xd,l),Y0(r,d);else if(Mx(b,r,s,l,d))d.stopPropagation();else if(Y0(r,d),s&4&&-1<Px.indexOf(r)){for(;b!==null;){var x=da(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var R=pe(x.pendingLanes);if(R!==0){var $=x;for($.pendingLanes|=2,$.entangledLanes|=2;R;){var at=1<<31-en(R);$.entanglements[1]|=at,R&=~at}eo(x),(Nn&6)===0&&(id=Ue()+500,qf(0))}}break;case 31:case 13:$=Ss(x,2),$!==null&&aa($,x,2),ad(),Pm(x,2)}if(x=Om(d),x===null&&xm(r,s,d,xd,l),x===b)break;b=x}b!==null&&d.stopPropagation()}else xm(r,s,d,null,l)}}function Om(r){return r=bo(r),Fm(r)}var xd=null;function Fm(r){if(xd=null,r=ha(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=u(s),r!==null)return r;r=null}else if(l===31){if(r=c(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return xd=r,null}function G0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case Be:return 2;case tn:return 8;case Xe:case ce:return 32;case ze:return 268435456;default:return 32}default:return 32}}var Bm=!1,Dl=null,Pl=null,Ml=null,Qf=new Map,Zf=new Map,Ol=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y0(r,s){switch(r){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":Pl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":Qf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zf.delete(s.pointerId)}}function Jf(r,s,l,d,b,x){return r===null||r.nativeEvent!==x?(r={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:x,targetContainers:[b]},s!==null&&(s=da(s),s!==null&&W0(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),r)}function Mx(r,s,l,d,b){switch(s){case"focusin":return Dl=Jf(Dl,r,s,l,d,b),!0;case"dragenter":return Pl=Jf(Pl,r,s,l,d,b),!0;case"mouseover":return Ml=Jf(Ml,r,s,l,d,b),!0;case"pointerover":var x=b.pointerId;return Qf.set(x,Jf(Qf.get(x)||null,r,s,l,d,b)),!0;case"gotpointercapture":return x=b.pointerId,Zf.set(x,Jf(Zf.get(x)||null,r,s,l,d,b)),!0}return!1}function X0(r){var s=ha(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){r.blockedOn=s,Os(r.priority,function(){V0(l)});return}}else if(s===31){if(s=c(l),s!==null){r.blockedOn=s,Os(r.priority,function(){V0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Om(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);as=d,l.target.dispatchEvent(d),as=null}else return s=da(l),s!==null&&W0(s),r.blockedOn=l,!1;s.shift()}return!0}function K0(r,s,l){Sd(r)&&l.delete(s)}function Ox(){Bm=!1,Dl!==null&&Sd(Dl)&&(Dl=null),Pl!==null&&Sd(Pl)&&(Pl=null),Ml!==null&&Sd(Ml)&&(Ml=null),Qf.forEach(K0),Zf.forEach(K0)}function Cd(r,s){r.blockedOn===s&&(r.blockedOn=null,Bm||(Bm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ox)))}var Ad=null;function Q0(r){Ad!==r&&(Ad=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ad===r&&(Ad=null);for(var s=0;s<r.length;s+=3){var l=r[s],d=r[s+1],b=r[s+2];if(typeof d!="function"){if(Fm(d||l)===null)continue;break}var x=da(l);x!==null&&(r.splice(s,3),s-=3,Op(x,{pending:!0,data:b,method:l.method,action:d},d,b))}}))}function jc(r){function s(at){return Cd(at,r)}Dl!==null&&Cd(Dl,r),Pl!==null&&Cd(Pl,r),Ml!==null&&Cd(Ml,r),Qf.forEach(s),Zf.forEach(s);for(var l=0;l<Ol.length;l++){var d=Ol[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Ol.length&&(l=Ol[0],l.blockedOn===null);)X0(l),l.blockedOn===null&&Ol.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var b=l[d],x=l[d+1],R=b[Vn]||null;if(typeof x=="function")R||Q0(l);else if(R){var $=null;if(x&&x.hasAttribute("formAction")){if(b=x,R=x[Vn]||null)$=R.formAction;else if(Fm(b)!==null)continue}else $=R.action;typeof $=="function"?l[d+1]=$:(l.splice(d,3),d-=3),Q0(l)}}}function Z0(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(R){return b=R})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function zm(r){this._internalRoot=r}Nd.prototype.render=zm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=_a();H0(l,d,r,s,null,null)},Nd.prototype.unmount=zm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;H0(r.current,2,null,r,null,null),ad(),s[Qi]=null}};function Nd(r){this._internalRoot=r}Nd.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ii();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Ol.length&&s!==0&&s<Ol[l].priority;l++);Ol.splice(l,0,r),l===0&&X0(r)}};var J0=t.version;if(J0!=="19.2.0")throw Error(i(527,J0,"19.2.0"));lt.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Fx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{Ze=_d.inject(Fx),Ne=_d}catch{}}return eh.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,d="",b=s2,x=o2,R=l2;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError)),s=$0(r,1,!1,null,null,l,d,null,b,x,R,Z0),r[Qi]=s.current,wm(r),new zm(s)},eh.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var d=!1,b="",x=s2,R=o2,$=l2,at=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(R=l.onCaughtError),l.onRecoverableError!==void 0&&($=l.onRecoverableError),l.formState!==void 0&&(at=l.formState)),s=$0(r,1,!0,s,l??null,d,b,at,x,R,$,Z0),s.context=j0(null),l=s.current,d=_a(),d=Wn(d),b=ke(d),b.callback=null,Ve(l,b,d),l=d,s.current.lanes=l,ye(s,l),eo(s),r[Qi]=s.current,wm(r),new Nd(s)},eh.version="19.2.0",eh}var uy;function Xx(){if(uy)return jm.exports;uy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),jm.exports=Yx(),jm.exports}var Kx=Xx();const Qx=cg(Kx);var cy="popstate";function Zx(n={}){function t(i,a){let{pathname:o,search:u,hash:c}=i.location;return L1("",{pathname:o,search:u,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:yh(a)}return tS(t,e,null,n)}function ri(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Za(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Jx(){return Math.random().toString(36).substring(2,10)}function fy(n,t){return{usr:n.state,key:n.key,idx:t}}function L1(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?hf(t):t,state:e,key:t&&t.key||i||Jx()}}function yh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function hf(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function tS(n,t,e,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,c="POP",f=null,h=p();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function p(){return(u.state||{idx:null}).idx}function m(){c="POP";let A=p(),_=A==null?null:A-h;h=A,f&&f({action:c,location:N.location,delta:_})}function v(A,_){c="PUSH";let I=L1(N.location,A,_);h=p()+1;let D=fy(I,h),M=N.createHref(I);try{u.pushState(D,"",M)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(M)}o&&f&&f({action:c,location:N.location,delta:1})}function y(A,_){c="REPLACE";let I=L1(N.location,A,_);h=p();let D=fy(I,h),M=N.createHref(I);u.replaceState(D,"",M),o&&f&&f({action:c,location:N.location,delta:0})}function S(A){return eS(A)}let N={get action(){return c},get location(){return n(a,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(cy,m),f=A,()=>{a.removeEventListener(cy,m),f=null}},createHref(A){return t(a,A)},createURL:S,encodeLocation(A){let _=S(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:y,go(A){return u.go(A)}};return N}function eS(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ri(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:yh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function I5(n,t,e="/"){return nS(n,t,e,!1)}function nS(n,t,e,i){let a=typeof t=="string"?hf(t):t,o=Qo(a.pathname||"/",e);if(o==null)return null;let u=T5(n);iS(u);let c=null;for(let f=0;c==null&&f<u.length;++f){let h=pS(o);c=hS(u[f],h,i)}return c}function T5(n,t=[],e=[],i="",a=!1){let o=(u,c,f=a,h)=>{let p={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&f)return;ri(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let m=Xo([i,p.relativePath]),v=e.concat(p);u.children&&u.children.length>0&&(ri(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),T5(u.children,t,v,m,f)),!(u.path==null&&!u.index)&&t.push({path:m,score:cS(m,u.index),routesMeta:v})};return n.forEach((u,c)=>{if(u.path===""||!u.path?.includes("?"))o(u,c);else for(let f of D5(u.path))o(u,c,!0,f)}),t}function D5(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=D5(i.join("/")),c=[];return c.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&c.push(...u),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function iS(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:fS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var rS=/^:[\w-]+$/,aS=3,sS=2,oS=1,lS=10,uS=-2,hy=n=>n==="*";function cS(n,t){let e=n.split("/"),i=e.length;return e.some(hy)&&(i+=uS),t&&(i+=sS),e.filter(a=>!hy(a)).reduce((a,o)=>a+(rS.test(o)?aS:o===""?oS:lS),i)}function fS(n,t){return n.length===t.length&&n.slice(0,-1).every((i,a)=>i===t[a])?n[n.length-1]-t[t.length-1]:0}function hS(n,t,e=!1){let{routesMeta:i}=n,a={},o="/",u=[];for(let c=0;c<i.length;++c){let f=i[c],h=c===i.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=Xd({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),v=f.route;if(!m&&h&&e&&!i[i.length-1].route.index&&(m=Xd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!m)return null;Object.assign(a,m.params),u.push({params:a,pathname:Xo([o,m.pathname]),pathnameBase:bS(Xo([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=Xo([o,m.pathnameBase]))}return u}function Xd(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=dS(n.path,n.caseSensitive,n.end),a=t.match(e);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:i.reduce((h,{paramName:p,isOptional:m},v)=>{if(p==="*"){let S=c[v]||"";u=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const y=c[v];return m&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:u,pattern:n}}function dS(n,t=!1,e=!0){Za(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function pS(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Za(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Qo(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}var mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gS=n=>mS.test(n);function yS(n,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof n=="string"?hf(n):n,o;if(e)if(gS(e))o=e;else{if(e.includes("//")){let u=e;e=e.replace(/\/\/+/g,"/"),Za(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${e}`)}e.startsWith("/")?o=dy(e.substring(1),"/"):o=dy(e,t)}else o=t;return{pathname:o,search:wS(i),hash:xS(a)}}function dy(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Vm(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vS(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function hg(n){let t=vS(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function dg(n,t,e,i=!1){let a;typeof n=="string"?a=hf(n):(a={...n},ri(!a.pathname||!a.pathname.includes("?"),Vm("?","pathname","search",a)),ri(!a.pathname||!a.pathname.includes("#"),Vm("#","pathname","hash",a)),ri(!a.search||!a.search.includes("#"),Vm("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,c;if(u==null)c=e;else{let m=t.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),m-=1;a.pathname=v.join("/")}c=m>=0?t[m]:"/"}let f=yS(a,c),h=u&&u!=="/"&&u.endsWith("/"),p=(o||u===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Xo=n=>n.join("/").replace(/\/\/+/g,"/"),bS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function CS(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var P5=["POST","PUT","PATCH","DELETE"];new Set(P5);var AS=["GET",...P5];new Set(AS);var df=Nt.createContext(null);df.displayName="DataRouter";var dp=Nt.createContext(null);dp.displayName="DataRouterState";Nt.createContext(!1);var M5=Nt.createContext({isTransitioning:!1});M5.displayName="ViewTransition";var NS=Nt.createContext(new Map);NS.displayName="Fetchers";var _S=Nt.createContext(null);_S.displayName="Await";var es=Nt.createContext(null);es.displayName="Navigation";var Ah=Nt.createContext(null);Ah.displayName="Location";var ho=Nt.createContext({outlet:null,matches:[],isDataRoute:!1});ho.displayName="Route";var pg=Nt.createContext(null);pg.displayName="RouteError";function kS(n,{relative:t}={}){ri(pf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=Nt.useContext(es),{hash:a,pathname:o,search:u}=_h(n,{relative:t}),c=o;return e!=="/"&&(c=o==="/"?e:Xo([e,o])),i.createHref({pathname:c,search:u,hash:a})}function pf(){return Nt.useContext(Ah)!=null}function Vl(){return ri(pf(),"useLocation() may be used only in the context of a <Router> component."),Nt.useContext(Ah).location}var O5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F5(n){Nt.useContext(es).static||Nt.useLayoutEffect(n)}function Nh(){let{isDataRoute:n}=Nt.useContext(ho);return n?US():ES()}function ES(){ri(pf(),"useNavigate() may be used only in the context of a <Router> component.");let n=Nt.useContext(df),{basename:t,navigator:e}=Nt.useContext(es),{matches:i}=Nt.useContext(ho),{pathname:a}=Vl(),o=JSON.stringify(hg(i)),u=Nt.useRef(!1);return F5(()=>{u.current=!0}),Nt.useCallback((f,h={})=>{if(Za(u.current,O5),!u.current)return;if(typeof f=="number"){e.go(f);return}let p=dg(f,JSON.parse(o),a,h.relative==="path");n==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Xo([t,p.pathname])),(h.replace?e.replace:e.push)(p,h.state,h)},[t,e,o,a,n])}Nt.createContext(null);function _h(n,{relative:t}={}){let{matches:e}=Nt.useContext(ho),{pathname:i}=Vl(),a=JSON.stringify(hg(e));return Nt.useMemo(()=>dg(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function LS(n,t){return B5(n,t)}function B5(n,t,e,i,a){ri(pf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Nt.useContext(es),{matches:u}=Nt.useContext(ho),c=u[u.length-1],f=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let I=m&&m.path||"";z5(h,!m||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let v=Vl(),y;if(t){let I=typeof t=="string"?hf(t):t;ri(p==="/"||I.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${I.pathname}" was given in the \`location\` prop.`),y=I}else y=v;let S=y.pathname||"/",N=S;if(p!=="/"){let I=p.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=I5(n,{pathname:N});Za(m||A!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Za(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=PS(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},f,I.params),pathname:Xo([p,o.encodeLocation?o.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:Xo([p,o.encodeLocation?o.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),u,e,i,a);return t&&_?Nt.createElement(Ah.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function RS(){let n=zS(),t=SS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=Nt.createElement(Nt.Fragment,null,Nt.createElement("p",null," Hey developer "),Nt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Nt.createElement("code",{style:o},"ErrorBoundary")," or"," ",Nt.createElement("code",{style:o},"errorElement")," prop on your route.")),Nt.createElement(Nt.Fragment,null,Nt.createElement("h2",null,"Unexpected Application Error!"),Nt.createElement("h3",{style:{fontStyle:"italic"}},t),e?Nt.createElement("pre",{style:a},e):null,u)}var IS=Nt.createElement(RS,null),TS=class extends Nt.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?Nt.createElement(ho.Provider,{value:this.props.routeContext},Nt.createElement(pg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DS({routeContext:n,match:t,children:e}){let i=Nt.useContext(df);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Nt.createElement(ho.Provider,{value:n},e)}function PS(n,t=[],e=null,i=null,a=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let o=n,u=e?.errors;if(u!=null){let p=o.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);ri(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,f=-1;if(e)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:v,errors:y}=e,S=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let h=e&&i?(p,m)=>{i(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:CS(e.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,v)=>{let y,S=!1,N=null,A=null;e&&(y=u&&m.route.id?u[m.route.id]:void 0,N=m.route.errorElement||IS,c&&(f<0&&v===0?(z5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,A=null):f===v&&(S=!0,A=m.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,v+1)),I=()=>{let D;return y?D=N:S?D=A:m.route.Component?D=Nt.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=p,Nt.createElement(DS,{match:m,routeContext:{outlet:p,matches:_,isDataRoute:e!=null},children:D})};return e&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?Nt.createElement(TS,{location:e.location,revalidation:e.revalidation,component:N,error:y,children:I(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:h}):I()},null)}function mg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MS(n){let t=Nt.useContext(df);return ri(t,mg(n)),t}function OS(n){let t=Nt.useContext(dp);return ri(t,mg(n)),t}function FS(n){let t=Nt.useContext(ho);return ri(t,mg(n)),t}function gg(n){let t=FS(n),e=t.matches[t.matches.length-1];return ri(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function BS(){return gg("useRouteId")}function zS(){let n=Nt.useContext(pg),t=OS("useRouteError"),e=gg("useRouteError");return n!==void 0?n:t.errors?.[e]}function US(){let{router:n}=MS("useNavigate"),t=gg("useNavigate"),e=Nt.useRef(!1);return F5(()=>{e.current=!0}),Nt.useCallback(async(a,o={})=>{Za(e.current,O5),e.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:t,...o}))},[n,t])}var py={};function z5(n,t,e){!t&&!py[n]&&(py[n]=!0,Za(!1,e))}Nt.memo($S);function $S({routes:n,future:t,state:e,unstable_onError:i}){return B5(n,void 0,e,i,t)}function jS({to:n,replace:t,state:e,relative:i}){ri(pf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=Nt.useContext(es);Za(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=Nt.useContext(ho),{pathname:u}=Vl(),c=Nh(),f=dg(n,hg(o),u,i==="path"),h=JSON.stringify(f);return Nt.useEffect(()=>{c(JSON.parse(h),{replace:t,state:e,relative:i})},[c,h,i,t,e]),null}function oh(n){ri(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HS({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:o=!1,unstable_useTransitions:u}){ri(!pf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=Nt.useMemo(()=>({basename:c,navigator:a,static:o,unstable_useTransitions:u,future:{}}),[c,a,o,u]);typeof e=="string"&&(e=hf(e));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:y="default"}=e,S=Nt.useMemo(()=>{let N=Qo(h,c);return N==null?null:{location:{pathname:N,search:p,hash:m,state:v,key:y},navigationType:i}},[c,h,p,m,v,y,i]);return Za(S!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:Nt.createElement(es.Provider,{value:f},Nt.createElement(Ah.Provider,{children:t,value:S}))}function qS({children:n,location:t}){return LS(R1(n),t)}function R1(n,t=[]){let e=[];return Nt.Children.forEach(n,(i,a)=>{if(!Nt.isValidElement(i))return;let o=[...t,a];if(i.type===Nt.Fragment){e.push.apply(e,R1(i.props.children,o));return}ri(i.type===oh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ri(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=R1(i.props.children,o)),e.push(u)}),e}var Bd="get",zd="application/x-www-form-urlencoded";function pp(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function WS(n){return pp(n)&&n.tagName.toLowerCase()==="button"}function VS(n){return pp(n)&&n.tagName.toLowerCase()==="form"}function GS(n){return pp(n)&&n.tagName.toLowerCase()==="input"}function YS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function XS(n,t){return n.button===0&&(!t||t==="_self")&&!YS(n)}var kd=null;function KS(){if(kd===null)try{new FormData(document.createElement("form"),0),kd=!1}catch{kd=!0}return kd}var QS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(n){return n!=null&&!QS.has(n)?(Za(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):n}function ZS(n,t){let e,i,a,o,u;if(VS(n)){let c=n.getAttribute("action");i=c?Qo(c,t):null,e=n.getAttribute("method")||Bd,a=Gm(n.getAttribute("enctype"))||zd,o=new FormData(n)}else if(WS(n)||GS(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(i=f?Qo(f,t):null,e=n.getAttribute("formmethod")||c.getAttribute("method")||Bd,a=Gm(n.getAttribute("formenctype"))||Gm(c.getAttribute("enctype"))||zd,o=new FormData(c,n),!KS()){let{name:h,type:p,value:m}=n;if(p==="image"){let v=h?`${h}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else h&&o.append(h,m)}}else{if(pp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Bd,i=null,a=zd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yg(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function JS(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&Qo(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function t4(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function e4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function n4(n,t,e){let i=await Promise.all(n.map(async a=>{let o=t.routes[a.route.id];if(o){let u=await t4(o,e);return u.links?u.links():[]}return[]}));return s4(i.flat(1).filter(e4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function my(n,t,e,i,a,o){let u=(f,h)=>e[h]?f.route.id!==e[h].route.id:!0,c=(f,h)=>e[h].pathname!==f.pathname||e[h].route.path?.endsWith("*")&&e[h].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,h)=>u(f,h)||c(f,h)):o==="data"?t.filter((f,h)=>{let p=i.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(u(f,h)||c(f,h))return!0;if(f.route.shouldRevalidate){let m=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function i4(n,t,{includeHydrateFallback:e}={}){return r4(n.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function r4(n){return[...new Set(n)]}function a4(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function s4(n,t){let e=new Set;return new Set(t),n.reduce((i,a)=>{let o=JSON.stringify(a4(a));return e.has(o)||(e.add(o),i.push({key:o,link:a})),i},[])}function U5(){let n=Nt.useContext(df);return yg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function o4(){let n=Nt.useContext(dp);return yg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vg=Nt.createContext(void 0);vg.displayName="FrameworkContext";function $5(){let n=Nt.useContext(vg);return yg(n,"You must render this element inside a <HydratedRouter> element"),n}function l4(n,t){let e=Nt.useContext(vg),[i,a]=Nt.useState(!1),[o,u]=Nt.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,v=Nt.useRef(null);Nt.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let N=_=>{_.forEach(I=>{u(I.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[n]),Nt.useEffect(()=>{if(i){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[i]);let y=()=>{a(!0)},S=()=>{a(!1),u(!1)};return e?n!=="intent"?[o,v,{}]:[o,v,{onFocus:nh(c,y),onBlur:nh(f,S),onMouseEnter:nh(h,y),onMouseLeave:nh(p,S),onTouchStart:nh(m,y)}]:[!1,v,{}]}function nh(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function u4({page:n,...t}){let{router:e}=U5(),i=Nt.useMemo(()=>I5(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?Nt.createElement(f4,{page:n,matches:i,...t}):null}function c4(n){let{manifest:t,routeModules:e}=$5(),[i,a]=Nt.useState([]);return Nt.useEffect(()=>{let o=!1;return n4(n,t,e).then(u=>{o||a(u)}),()=>{o=!0}},[n,t,e]),i}function f4({page:n,matches:t,...e}){let i=Vl(),{manifest:a,routeModules:o}=$5(),{basename:u}=U5(),{loaderData:c,matches:f}=o4(),h=Nt.useMemo(()=>my(n,t,f,a,i,"data"),[n,t,f,a,i]),p=Nt.useMemo(()=>my(n,t,f,a,i,"assets"),[n,t,f,a,i]),m=Nt.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,N=!1;if(t.forEach(_=>{let I=a.routes[_.route.id];!I||!I.hasLoader||(!h.some(D=>D.route.id===_.route.id)&&_.route.id in c&&o[_.route.id]?.shouldRevalidate||I.hasClientLoader?N=!0:S.add(_.route.id))}),S.size===0)return[];let A=JS(n,u,"data");return N&&S.size>0&&A.searchParams.set("_routes",t.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[A.pathname+A.search]},[u,c,i,a,h,t,n,o]),v=Nt.useMemo(()=>i4(p,a),[p,a]),y=c4(p);return Nt.createElement(Nt.Fragment,null,m.map(S=>Nt.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>Nt.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),y.map(({key:S,link:N})=>Nt.createElement("link",{key:S,nonce:e.nonce,...N})))}function h4(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var j5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j5&&(window.__reactRouterVersion="7.10.0")}catch{}function d4({basename:n,children:t,unstable_useTransitions:e,window:i}){let a=Nt.useRef();a.current==null&&(a.current=Zx({window:i,v5Compat:!0}));let o=a.current,[u,c]=Nt.useState({action:o.action,location:o.location}),f=Nt.useCallback(h=>{e===!1?c(h):Nt.startTransition(()=>c(h))},[e]);return Nt.useLayoutEffect(()=>o.listen(f),[o,f]),Nt.createElement(HS,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:e===!0})}var H5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q5=Nt.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:c,target:f,to:h,preventScrollReset:p,viewTransition:m,...v},y){let{basename:S,unstable_useTransitions:N}=Nt.useContext(es),A=typeof h=="string"&&H5.test(h),_,I=!1;if(typeof h=="string"&&A&&(_=h,j5))try{let G=new URL(window.location.href),E=h.startsWith("//")?new URL(G.protocol+h):new URL(h),B=Qo(E.pathname,S);E.origin===G.origin&&B!=null?h=B+E.search+E.hash:I=!0}catch{Za(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=kS(h,{relative:a}),[M,Y,ct]=l4(i,v),it=y4(h,{replace:u,state:c,target:f,preventScrollReset:p,relative:a,viewTransition:m,unstable_useTransitions:N});function nt(G){t&&t(G),G.defaultPrevented||it(G)}let F=Nt.createElement("a",{...v,...ct,href:_||D,onClick:I||o?t:nt,ref:h4(y,Y),target:f,"data-discover":!A&&e==="render"?"true":void 0});return M&&!A?Nt.createElement(Nt.Fragment,null,F,Nt.createElement(u4,{page:D})):F});q5.displayName="Link";var p4=Nt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:c,children:f,...h},p){let m=_h(u,{relative:h.relative}),v=Vl(),y=Nt.useContext(dp),{navigator:S,basename:N}=Nt.useContext(es),A=y!=null&&S4(m)&&c===!0,_=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,I=v.pathname,D=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;e||(I=I.toLowerCase(),D=D?D.toLowerCase():null,_=_.toLowerCase()),D&&N&&(D=Qo(D,N)||D);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let Y=I===_||!a&&I.startsWith(_)&&I.charAt(M)==="/",ct=D!=null&&(D===_||!a&&D.startsWith(_)&&D.charAt(_.length)==="/"),it={isActive:Y,isPending:ct,isTransitioning:A},nt=Y?t:void 0,F;typeof i=="function"?F=i(it):F=[i,Y?"active":null,ct?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let G=typeof o=="function"?o(it):o;return Nt.createElement(q5,{...h,"aria-current":nt,className:F,ref:p,style:G,to:u,viewTransition:c},typeof f=="function"?f(it):f)});p4.displayName="NavLink";var m4=Nt.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:o,method:u=Bd,action:c,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:m,...v},y)=>{let{unstable_useTransitions:S}=Nt.useContext(es),N=w4(),A=x4(c,{relative:h}),_=u.toLowerCase()==="get"?"get":"post",I=typeof c=="string"&&H5.test(c),D=M=>{if(f&&f(M),M.defaultPrevented)return;M.preventDefault();let Y=M.nativeEvent.submitter,ct=Y?.getAttribute("formmethod")||u,it=()=>N(Y||M.currentTarget,{fetcherKey:t,method:ct,navigate:e,replace:a,state:o,relative:h,preventScrollReset:p,viewTransition:m});S&&e!==!1?Nt.startTransition(()=>it()):it()};return Nt.createElement("form",{ref:y,method:_,action:A,onSubmit:i?f:D,...v,"data-discover":!I&&n==="render"?"true":void 0})});m4.displayName="Form";function g4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W5(n){let t=Nt.useContext(df);return ri(t,g4(n)),t}function y4(n,{target:t,replace:e,state:i,preventScrollReset:a,relative:o,viewTransition:u,unstable_useTransitions:c}={}){let f=Nh(),h=Vl(),p=_h(n,{relative:o});return Nt.useCallback(m=>{if(XS(m,t)){m.preventDefault();let v=e!==void 0?e:yh(h)===yh(p),y=()=>f(n,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:u});c?Nt.startTransition(()=>y()):y()}},[h,f,p,e,i,t,n,a,o,u,c])}var v4=0,b4=()=>`__${String(++v4)}__`;function w4(){let{router:n}=W5("useSubmit"),{basename:t}=Nt.useContext(es),e=BS(),i=n.fetch,a=n.navigate;return Nt.useCallback(async(o,u={})=>{let{action:c,method:f,encType:h,formData:p,body:m}=ZS(o,t);if(u.navigate===!1){let v=u.fetcherKey||b4();await i(v,e,u.action||c,{preventScrollReset:u.preventScrollReset,formData:p,body:m,formMethod:u.method||f,formEncType:u.encType||h,flushSync:u.flushSync})}else await a(u.action||c,{preventScrollReset:u.preventScrollReset,formData:p,body:m,formMethod:u.method||f,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:e,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,t,e])}function x4(n,{relative:t}={}){let{basename:e}=Nt.useContext(es),i=Nt.useContext(ho);ri(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={..._h(n||".",{relative:t})},u=Vl();if(n==null){o.search=u.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Xo([e,o.pathname])),yh(o)}function S4(n,{relative:t}={}){let e=Nt.useContext(M5);ri(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=W5("useViewTransitionState"),a=_h(n,{relative:t});if(!e.isTransitioning)return!1;let o=Qo(e.currentLocation.pathname,i)||e.currentLocation.pathname,u=Qo(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Xd(a.pathname,u)!=null||Xd(a.pathname,o)!=null}const V5=Nt.createContext(),bg=()=>Nt.useContext(V5),C4=({children:n})=>{const[t,e]=Nt.useState(""),[i,a]=Nt.useState(!1),[o,u]=Nt.useState(null),[c,f]=Nt.useState(null),[h,p]=Nt.useState([]),[m,v]=Nt.useState({name:"Waiting...",confidence:0}),y=Nt.useRef(0),S=()=>{p([]),u(new Date),f(null),a(!0),y.current=0},N=()=>{a(!1),f(new Date)},A=Nt.useCallback((I,D)=>{y.current+=1;const M=new Date;p(Y=>[...Y,{name:I,confidence:D,timestamp:M}]),v({name:I,confidence:D})},[]),_={practitionerName:t,setPractitionerName:e,isSessionActive:i,startSession:S,endSession:N,sessionStartTime:o,sessionEndTime:c,detectedPoses:h,currentPose:m,logPose:A,frameCount:y.current};return Ut.jsx(V5.Provider,{value:_,children:n})},G5=()=>{const n=Nt.useRef(null),[t,e]=Nt.useState(null),[i,a]=Nt.useState(null),[o,u]=Nt.useState(!1),c=Nt.useCallback(async()=>{try{const h=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1});e(h),u(!0),n.current&&(n.current.srcObject=h),a(null)}catch(h){console.error("Error accessing camera:",h),a(h),u(!1)}},[]),f=Nt.useCallback(()=>{t&&(t.getTracks().forEach(h=>h.stop()),e(null),u(!1))},[t]);return Nt.useEffect(()=>()=>{f()},[f]),{videoRef:n,startCamera:c,stopCamera:f,permissionGranted:o,error:i,stream:t}};const A4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),gy=n=>{const t=N4(n);return t.charAt(0).toUpperCase()+t.slice(1)},Y5=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),_4=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var k4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const E4=Nt.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:u,...c},f)=>Nt.createElement("svg",{ref:f,...k4,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:Y5("lucide",a),...!o&&!_4(c)&&{"aria-hidden":"true"},...c},[...u.map(([h,p])=>Nt.createElement(h,p)),...Array.isArray(o)?o:[o]]));const tl=(n,t)=>{const e=Nt.forwardRef(({className:i,...a},o)=>Nt.createElement(E4,{ref:o,iconNode:t,className:Y5(`lucide-${A4(gy(n))}`,`lucide-${n}`,i),...a}));return e.displayName=gy(n),e};const L4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],R4=tl("activity",L4);const I4=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],T4=tl("camera",I4);const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],P4=tl("circle-stop",D4);const M4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],O4=tl("clock",M4);const F4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],B4=tl("download",F4);const z4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],U4=tl("house",z4);const $4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],j4=tl("play",$4);const H4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q4=tl("user",H4);const W4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],V4=tl("zap",W4),G4=()=>{const{practitionerName:n,setPractitionerName:t,startSession:e}=bg(),{videoRef:i,startCamera:a,permissionGranted:o,stream:u}=G5(),c=Nh(),f=()=>{n&&o&&(e(),c("/session"))};return Nt.useEffect(()=>{},[]),Ut.jsxs("div",{className:"min-h-screen bg-stone-50 flex flex-col items-center justify-center p-4 font-sans text-stone-800",children:[Ut.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[Ut.jsxs("div",{className:"bg-ayur-primary p-6 text-center",children:[Ut.jsx("h1",{className:"text-3xl font-serif text-white font-bold tracking-wide",children:"Ayursutra"}),Ut.jsx("p",{className:"text-ayur-secondary text-sm mt-1 opacity-90",children:"Yoga Monitoring System"})]}),Ut.jsxs("div",{className:"p-8 space-y-6",children:[Ut.jsxs("div",{className:"space-y-2",children:[Ut.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-stone-600",children:[Ut.jsx(q4,{size:18}),"Name"]}),Ut.jsx("input",{type:"text",value:n,onChange:h=>t(h.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 rounded-lg border border-stone-200 focus:ring-2 focus:ring-ayur-primary focus:border-transparent outline-none transition-all"})]}),Ut.jsxs("div",{className:"space-y-2",children:[Ut.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-stone-600",children:[Ut.jsx(T4,{size:18}),"Camera Check"]}),Ut.jsx("div",{className:"relative aspect-video bg-stone-100 rounded-lg overflow-hidden border-2 border-dashed border-stone-300 flex items-center justify-center",children:o&&u?Ut.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform -scale-x-100"}):Ut.jsx("button",{onClick:a,className:"px-4 py-2 bg-stone-200 hover:bg-stone-300 rounded-md text-stone-600 font-medium transition-colors",children:"Request Camera Access"})}),o&&Ut.jsx("p",{className:"text-xs text-green-600 text-center",children:" Camera access granted"})]}),Ut.jsxs("button",{onClick:f,disabled:!n||!o,className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all transform ${n&&o?"bg-ayur-primary text-white hover:bg-[#c59665] hover:scale-[1.02] shadow-lg":"bg-stone-200 text-stone-400 cursor-not-allowed"}`,children:[Ut.jsx(j4,{size:20,fill:"currentColor"}),"Start Session"]})]})]}),Ut.jsx("p",{className:"mt-8 text-stone-400 text-xs text-center max-w-xs",children:"Ensure you are in a well-lit room and your full body is visible in the frame."})]})},Y4=(n,t)=>{const e=Nt.useRef(null),[i,a]=Nt.useState(!1),[o,u]=Nt.useState([]),c=Nt.useRef();Nt.useEffect(()=>(e.current=new Worker(new URL("/assets/poseWorker-Dg0GQwQU.js",import.meta.url),{type:"module"}),e.current.onmessage=p=>{const{type:m,poses:v,error:y}=p.data;m==="MODEL_LOADED"?(a(!0),console.log("Pose Detection Model Loaded")):m==="POSE_DETECTED"?u(v):m==="ERROR"&&console.error("Worker Error:",y)},e.current.postMessage({type:"LOAD_MODEL"}),()=>{e.current.terminate()}),[]);const f=Nt.useRef(0),h=Nt.useCallback(p=>{if(n.current&&n.current.readyState===4&&i&&t&&p-f.current>=100){const m=n.current;createImageBitmap(m).then(v=>{e.current.postMessage({type:"DETECT_POSE",imageData:v},[v])}),f.current=p}c.current=requestAnimationFrame(h)},[n,i,t]);return Nt.useEffect(()=>(t&&i?c.current=requestAnimationFrame(h):cancelAnimationFrame(c.current),()=>cancelAnimationFrame(c.current)),[t,i,h]),{poses:o,isModelLoaded:i}},X4={NOSE:0,LEFT_EYE:1,RIGHT_EYE:2,LEFT_EAR:3,RIGHT_EAR:4,LEFT_SHOULDER:5,RIGHT_SHOULDER:6,LEFT_ELBOW:7,RIGHT_ELBOW:8,LEFT_WRIST:9,RIGHT_WRIST:10,LEFT_HIP:11,RIGHT_HIP:12,LEFT_KNEE:13,RIGHT_KNEE:14,LEFT_ANKLE:15,RIGHT_ANKLE:16},Bl=(n,t,e)=>{if(!n||!t||!e)return 0;const i=Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x);let a=Math.abs(i*180/Math.PI);return a>180&&(a=360-a),a},K4=n=>{if(!n||n.length===0)return{name:"Unknown",confidence:0};const t=p=>n[X4[p]],e=Bl(t("LEFT_SHOULDER"),t("LEFT_ELBOW"),t("LEFT_WRIST")),i=Bl(t("RIGHT_SHOULDER"),t("RIGHT_ELBOW"),t("RIGHT_WRIST")),a=Bl(t("LEFT_HIP"),t("LEFT_SHOULDER"),t("LEFT_ELBOW")),o=Bl(t("RIGHT_HIP"),t("RIGHT_SHOULDER"),t("RIGHT_ELBOW")),u=Bl(t("LEFT_HIP"),t("LEFT_KNEE"),t("LEFT_ANKLE")),c=Bl(t("RIGHT_HIP"),t("RIGHT_KNEE"),t("RIGHT_ANKLE")),f=Bl(t("LEFT_SHOULDER"),t("LEFT_HIP"),t("LEFT_KNEE")),h=Bl(t("RIGHT_SHOULDER"),t("RIGHT_HIP"),t("RIGHT_KNEE"));if(u>160&&c>160&&f>160&&h>160){if(e<160&&i<160&&Math.abs(t("LEFT_WRIST").x-t("RIGHT_WRIST").x)<50)return{name:"Pranamasana",confidence:.85};if(a<30&&o<30)return{name:"Tadasana",confidence:.9}}if((u<100&&c>160||c<100&&u>160)&&(f>150||h>150))return{name:"Vrikshasana",confidence:.85};if(e>160&&i>160&&u>160&&c>160&&f>160&&h>160){const p=Math.abs(t("LEFT_SHOULDER").y-t("LEFT_ANKLE").y);if(Math.abs(t("LEFT_SHOULDER").x-t("LEFT_ANKLE").x)>p)return{name:"Phalakasana",confidence:.8}}if(u>160&&c>160&&t("LEFT_SHOULDER").y<t("LEFT_HIP").y,t("LEFT_HIP").y<t("LEFT_SHOULDER").y&&t("LEFT_HIP").y<t("LEFT_ANKLE").y&&f<100&&h<100&&u>150&&c>150)return{name:"Adho Mukha Svanasana",confidence:.9};if(Math.abs(a-90)<30&&Math.abs(o-90)<30&&(u<110&&c>150||c<110&&u>150))return{name:"Virabhadrasana II",confidence:.85};if(u>160&&c>160&&f>160&&h>160){const p=Math.abs(t("LEFT_SHOULDER").y-t("LEFT_ANKLE").y);if(Math.abs(t("LEFT_SHOULDER").x-t("LEFT_ANKLE").x)>p)return{name:"Savasana",confidence:.9}}return(u<100&&c>120||c<100&&u>120)&&t("LEFT_WRIST").y>t("LEFT_SHOULDER").y?{name:"Ashwa Sanchalanasana",confidence:.8}:{name:"Unknown",confidence:0}};const Q4=1e-7,Z4=1e-4;class J4{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class X5{refCount(t){return sa("refCount")}incRef(t){return sa("incRef")}timerAvailable(){return!0}time(t){return sa("time")}read(t){return sa("read")}readSync(t){return sa("readSync")}readToGPU(t,e){return sa("readToGPU")}numDataIds(){return sa("numDataIds")}disposeData(t,e){return sa("disposeData")}write(t,e,i){return sa("write")}move(t,e,i,a,o){return sa("move")}createTensorFromGPUData(t,e,i){return sa("createTensorFromGPUData")}memory(){return sa("memory")}floatPrecision(){return sa("floatPrecision")}epsilon(){return this.floatPrecision()===32?Q4:Z4}dispose(){return sa("dispose")}}function sa(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function ih(n,t,e){const i=n[t];n[t]=n[e],n[e]=i}function tC(n){let t=0;for(let e=0;e<n.length;e++)t+=n[e];return t}function Xt(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function K5(n,t,e=""){Xt(el(n,t),()=>e+` Shapes ${n} and ${t} must match`)}function Zt(n){if(n.length===0)return 1;let t=n[0];for(let e=1;e<n.length;e++)t*=n[e];return t}function yy(n){return n.length===0}function el(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function eC(n){return n%1===0}function Ud(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function nC(n,t){let e=1,i=-1;for(let o=0;o<n.length;++o)if(n[o]>=0)e*=n[o];else if(n[o]===-1){if(i!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${o}`);i=o}else if(n[o]<0)throw Error(`Shapes can not be < 0. Found ${n[o]} at dim ${o}`);if(i===-1){if(t>0&&t!==e)throw Error(`Size(${t}) must match the product of shape ${n}`);return n}if(e===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(t%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${e}`);const a=n.slice();return a[i]=t/e,a}function Gl(n,t){const e=t.length;return n=n==null?t.map((i,a)=>a):[].concat(n),Xt(n.every(i=>i>=-e&&i<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${n}`),Xt(n.every(i=>eC(i)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(i=>i<0?e+i:i)}function zu(n,t){return Yi(n,t)}function Yi(n,t){let e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else if(n==="bool")e=new Uint8Array(t);else if(n==="string")e=new Array(t);else throw new Error(`Unknown data type ${n}`);return e}function iC(n,t){for(let e=0;e<n.length;e++){const i=n[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${t} being uploaded contains ${i}.`)}}function rC(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function aC(n,t){return!(t==="complex64"||t==="float32"&&n!=="complex64"||t==="int32"&&n!=="float32"&&n!=="complex64"||t==="bool"&&n==="bool")}function I1(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function sC(n){if(n==null)return 0;let t=0;return n.forEach(e=>t+=e.length),t}function mp(n){return typeof n=="string"||n instanceof String}function oC(n){return typeof n=="boolean"}function lC(n){return typeof n=="number"}function kh(n){return Array.isArray(n)?kh(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":lC(n)?"float32":mp(n)?"string":oC(n)?"bool":"float32"}function T1(n){return!!(n&&n.constructor&&n.call&&n.apply)}function mr(n){const t=n.length;if(t<2)return[];const e=new Array(t-1);e[t-2]=n[t-1];for(let i=t-3;i>=0;--i)e[i]=e[i+1]*n[i+1];return e}function Q5(n,t,e,i=!1){const a=new Array;if(t.length===1){const o=t[0]*(i?2:1);for(let u=0;u<o;u++)a[u]=e[n+u]}else{const o=t[0],u=t.slice(1),c=u.reduce((f,h)=>f*h)*(i?2:1);for(let f=0;f<o;f++)a[f]=Q5(n+f*c,u,e,i)}return a}function vy(n,t,e=!1){if(n.length===0)return t[0];const i=n.reduce((a,o)=>a*o)*(e?2:1);if(i===0)return[];if(i!==t.length)throw new Error(`[${n}] does not match the input size ${t.length}${e?" for a complex tensor":""}.`);return Q5(0,n,t,e)}function Ym(n,t){if(Array.isArray(n))return n;if(t==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(t==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${t}`)}function uC(n,t){const e=Zo(n,t);for(let i=0;i<e.length;i++)e[i]=1;return e}function Zo(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${t}`)}function Eh(n){n.forEach(t=>{Xt(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function D1(n,t,e){if(t===0)return 0;if(t===1)return n[0];let i=n[n.length-1];for(let a=0;a<n.length-1;++a)i+=e[a]*n[a];return i}function wg(n,t,e){if(t===0)return[];if(t===1)return[n];const i=new Array(t);for(let a=0;a<i.length-1;++a)i[a]=Math.floor(n/e[a]),n-=i[a]*e[a];return i[i.length-1]=n,i}function xg(n){return n&&n.then&&typeof n.then=="function"}const by="tfjsflags";class cC{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=fC,this.populateURLFlags()}setPlatform(t,e){this.platform!=null&&(Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,i){if(this.flagRegistry[t]={evaluationFn:e,setHook:i},this.urlFlags[t]!=null){const a=this.urlFlags[t];Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${a}.`),this.set(t,a)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(xg(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);by in t&&t[by].split(",").forEach(i=>{const[a,o]=i.split(":");this.urlFlags[a]=dC(a,o)})}}function fC(n){const t={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...i)=>(hC(t,i[0],i[1]),i.join("="))),t}function hC(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}function dC(n,t){const e=t.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:t}function Pe(){return Z5}let Z5=null;function pC(n){Z5=n}let Xm;function J5(){if(Xm==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");Xm=n}return Xm}function mC(){const n=J5();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function Sg(n,t){const e=mC();if(e.has(n))return e.get(n);{const i=t();return e.set(n,i),e.get(n)}}const tb="Abs",gC="Acos",yC="Acosh",Cg="Add",vC="AddN",bC="All",wC="Any",xC="ArgMax",SC="ArgMin",CC="Asin",AC="Asinh",NC="Atan",_C="Atanh",kC="Atan2",EC="AvgPool",LC="AvgPoolGrad",RC="AvgPool3D",IC="AvgPool3DGrad",TC="BatchMatMul",DC="BatchToSpaceND",PC="Bincount",MC="BroadcastArgs",Ag="Cast",OC="Ceil",FC="ClipByValue",eb="Complex",nb="ComplexAbs",BC="Concat",zC="Conv2D",UC="Conv2DBackpropFilter",$C="Conv2DBackpropInput",jC="Conv3D",HC="Conv3DBackpropFilterV2",qC="Conv3DBackpropInputV2",WC="Cos",VC="Cosh",GC="Cumprod",YC="Cumsum",XC="CropAndResize",KC="DenseBincount",QC="DepthToSpace",ZC="DepthwiseConv2dNative",JC="DepthwiseConv2dNativeBackpropFilter",t6="DepthwiseConv2dNativeBackpropInput",e6="Diag",n6="Dilation2D",i6="Dilation2DBackpropInput",r6="Dilation2DBackpropFilter",a6="Draw",ib="RealDiv",s6="Einsum",o6="Elu",l6="EluGrad",u6="Erf",c6="Equal",f6="Exp",h6="ExpandDims",d6="Expm1",p6="FFT",rb="Fill",m6="FlipLeftRight",g6="Floor",ab="FloorDiv",y6="FusedBatchNorm",v6="GatherV2",b6="GatherNd",w6="Greater",x6="GreaterEqual",Ng="Identity",S6="IFFT",C6="Imag",A6="IsFinite",N6="IsInf",_6="IsNan",k6="LeakyRelu",E6="Less",L6="LessEqual",R6="LinSpace",I6="Log",T6="Log1p",D6="LogicalAnd",P6="LogicalNot",M6="LogicalOr",O6="LRN",F6="LRNGrad",B6="Max",sb="Maximum",z6="MaxPool",U6="MaxPoolGrad",$6="MaxPool3D",j6="MaxPool3DGrad",H6="MaxPoolWithArgmax",q6="Mean",W6="Min",V6="Minimum",G6="MirrorPad",Y6="Mod",X6="Multinomial",ob="Multiply",K6="Neg",Q6="NotEqual",Z6="NonMaxSuppressionV3",J6="NonMaxSuppressionV5",tA="OnesLike",eA="OneHot",nA="Pack",iA="PadV2",lb="Pow",rA="Prelu",aA="Prod",sA="Range",oA="Real",lA="Reciprocal",uA="Relu",ub="Reshape",cA="ResizeNearestNeighbor",fA="ResizeNearestNeighborGrad",hA="ResizeBilinear",dA="ResizeBilinearGrad",pA="Relu6",mA="Reverse",gA="Round",yA="Rsqrt",vA="ScatterNd",bA="TensorScatterUpdate",wA="SearchSorted",xA="Select",SA="Selu",CA="Slice",AA="Sin",NA="Sinh",_A="Sign",kA="Sigmoid",EA="Softplus",cb="Sqrt",LA="Sum",RA="SpaceToBatchND",IA="SplitV",TA="Softmax",DA="SparseSegmentMean",PA="SparseSegmentSum",MA="SparseToDense",OA="SquaredDifference",FA="Square",BA="StridedSlice",zA="StringNGrams",fb="Sub",UA="Tan",$A="Tanh",hb="Tile",jA="TopK",HA="Transform",qA="Transpose",WA="Unpack",VA="UnsortedSegmentSum",db="ZerosLike",GA="Step",YA="FromPixels",XA="RotateWithOffset",KA="_FusedMatMul",QA="FusedConv2D",ZA="FusedDepthwiseConv2D";function Yc(...n){Pe().getBool("IS_TEST")||Pe().getBool("PROD")||console.warn(...n)}const Kd=Sg("kernelRegistry",()=>new Map),JA=Sg("gradRegistry",()=>new Map);function wy(n,t){const e=pb(n,t);return Kd.get(e)}function xy(n){return JA.get(n)}function Sy(n){const t=Kd.entries(),e=[];for(;;){const{done:i,value:a}=t.next();if(i)break;const[o,u]=a,[c]=o.split("_");c===n&&e.push(u)}return e}function tN(n){const{kernelName:t,backendName:e}=n,i=pb(t,e);Kd.has(i)&&Yc(`The kernel '${t}' for backend '${e}' is already registered`),Kd.set(i,n)}function pb(n,t){return`${t}_${n}`}function mb(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var Km,Cy;function eN(){if(Cy)return Km;Cy=1,Km=t;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(G,E,B){this.low=G|0,this.high=E|0,this.unsigned=!!B}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function e(G){return(G&&G.__isLong__)===!0}t.isLong=e;var i={},a={};function o(G,E){var B,tt,et;return E?(G>>>=0,(et=0<=G&&G<256)&&(tt=a[G],tt)?tt:(B=c(G,(G|0)<0?-1:0,!0),et&&(a[G]=B),B)):(G|=0,(et=-128<=G&&G<128)&&(tt=i[G],tt)?tt:(B=c(G,G<0?-1:0,!1),et&&(i[G]=B),B))}t.fromInt=o;function u(G,E){if(isNaN(G))return E?I:_;if(E){if(G<0)return I;if(G>=S)return it}else{if(G<=-N)return nt;if(G+1>=N)return ct}return G<0?u(-G,E).neg():c(G%y|0,G/y|0,E)}t.fromNumber=u;function c(G,E,B){return new t(G,E,B)}t.fromBits=c;var f=Math.pow;function h(G,E,B){if(G.length===0)throw Error("empty string");if(G==="NaN"||G==="Infinity"||G==="+Infinity"||G==="-Infinity")return _;if(typeof E=="number"?(B=E,E=!1):E=!!E,B=B||10,B<2||36<B)throw RangeError("radix");var tt;if((tt=G.indexOf("-"))>0)throw Error("interior hyphen");if(tt===0)return h(G.substring(1),E,B).neg();for(var et=u(f(B,8)),ht=_,X=0;X<G.length;X+=8){var lt=Math.min(8,G.length-X),st=parseInt(G.substring(X,X+lt),B);if(lt<8){var vt=u(f(B,lt));ht=ht.mul(vt).add(u(st))}else ht=ht.mul(et),ht=ht.add(u(st))}return ht.unsigned=E,ht}t.fromString=h;function p(G,E){return typeof G=="number"?u(G,E):typeof G=="string"?h(G,E):c(G.low,G.high,typeof E=="boolean"?E:G.unsigned)}t.fromValue=p;var m=65536,v=1<<24,y=m*m,S=y*y,N=S/2,A=o(v),_=o(0);t.ZERO=_;var I=o(0,!0);t.UZERO=I;var D=o(1);t.ONE=D;var M=o(1,!0);t.UONE=M;var Y=o(-1);t.NEG_ONE=Y;var ct=c(-1,2147483647,!1);t.MAX_VALUE=ct;var it=c(-1,-1,!0);t.MAX_UNSIGNED_VALUE=it;var nt=c(0,-2147483648,!1);t.MIN_VALUE=nt;var F=t.prototype;return F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*y+(this.low>>>0):this.high*y+(this.low>>>0)},F.toString=function(E){if(E=E||10,E<2||36<E)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt)){var B=u(E),tt=this.div(B),et=tt.mul(B).sub(this);return tt.toString(E)+et.toInt().toString(E)}else return"-"+this.neg().toString(E);for(var ht=u(f(E,6),this.unsigned),X=this,lt="";;){var st=X.div(ht),vt=X.sub(st.mul(ht)).toInt()>>>0,Et=vt.toString(E);if(X=st,X.isZero())return Et+lt;for(;Et.length<6;)Et="0"+Et;lt=""+Et+lt}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt)?64:this.neg().getNumBitsAbs();for(var E=this.high!=0?this.high:this.low,B=31;B>0&&(E&1<<B)==0;B--);return this.high!=0?B+33:B+1},F.isZero=function(){return this.high===0&&this.low===0},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return(this.low&1)===1},F.isEven=function(){return(this.low&1)===0},F.equals=function(E){return e(E)||(E=p(E)),this.unsigned!==E.unsigned&&this.high>>>31===1&&E.high>>>31===1?!1:this.high===E.high&&this.low===E.low},F.eq=F.equals,F.notEquals=function(E){return!this.eq(E)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(E){return this.comp(E)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(E){return this.comp(E)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(E){return this.comp(E)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(E){return this.comp(E)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(E){if(e(E)||(E=p(E)),this.eq(E))return 0;var B=this.isNegative(),tt=E.isNegative();return B&&!tt?-1:!B&&tt?1:this.unsigned?E.high>>>0>this.high>>>0||E.high===this.high&&E.low>>>0>this.low>>>0?-1:1:this.sub(E).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq(nt)?nt:this.not().add(D)},F.neg=F.negate,F.add=function(E){e(E)||(E=p(E));var B=this.high>>>16,tt=this.high&65535,et=this.low>>>16,ht=this.low&65535,X=E.high>>>16,lt=E.high&65535,st=E.low>>>16,vt=E.low&65535,Et=0,q=0,T=0,j=0;return j+=ht+vt,T+=j>>>16,j&=65535,T+=et+st,q+=T>>>16,T&=65535,q+=tt+lt,Et+=q>>>16,q&=65535,Et+=B+X,Et&=65535,c(T<<16|j,Et<<16|q,this.unsigned)},F.subtract=function(E){return e(E)||(E=p(E)),this.add(E.neg())},F.sub=F.subtract,F.multiply=function(E){if(this.isZero())return _;if(e(E)||(E=p(E)),n){var B=n.mul(this.low,this.high,E.low,E.high);return c(B,n.get_high(),this.unsigned)}if(E.isZero())return _;if(this.eq(nt))return E.isOdd()?nt:_;if(E.eq(nt))return this.isOdd()?nt:_;if(this.isNegative())return E.isNegative()?this.neg().mul(E.neg()):this.neg().mul(E).neg();if(E.isNegative())return this.mul(E.neg()).neg();if(this.lt(A)&&E.lt(A))return u(this.toNumber()*E.toNumber(),this.unsigned);var tt=this.high>>>16,et=this.high&65535,ht=this.low>>>16,X=this.low&65535,lt=E.high>>>16,st=E.high&65535,vt=E.low>>>16,Et=E.low&65535,q=0,T=0,j=0,V=0;return V+=X*Et,j+=V>>>16,V&=65535,j+=ht*Et,T+=j>>>16,j&=65535,j+=X*vt,T+=j>>>16,j&=65535,T+=et*Et,q+=T>>>16,T&=65535,T+=ht*vt,q+=T>>>16,T&=65535,T+=X*st,q+=T>>>16,T&=65535,q+=tt*Et+et*vt+ht*st+X*lt,q&=65535,c(j<<16|V,q<<16|T,this.unsigned)},F.mul=F.multiply,F.divide=function(E){if(e(E)||(E=p(E)),E.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&E.low===-1&&E.high===-1)return this;var B=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,E.low,E.high);return c(B,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?I:_;var tt,et,ht;if(this.unsigned){if(E.unsigned||(E=E.toUnsigned()),E.gt(this))return I;if(E.gt(this.shru(1)))return M;ht=I}else{if(this.eq(nt)){if(E.eq(D)||E.eq(Y))return nt;if(E.eq(nt))return D;var X=this.shr(1);return tt=X.div(E).shl(1),tt.eq(_)?E.isNegative()?D:Y:(et=this.sub(E.mul(tt)),ht=tt.add(et.div(E)),ht)}else if(E.eq(nt))return this.unsigned?I:_;if(this.isNegative())return E.isNegative()?this.neg().div(E.neg()):this.neg().div(E).neg();if(E.isNegative())return this.div(E.neg()).neg();ht=_}for(et=this;et.gte(E);){tt=Math.max(1,Math.floor(et.toNumber()/E.toNumber()));for(var lt=Math.ceil(Math.log(tt)/Math.LN2),st=lt<=48?1:f(2,lt-48),vt=u(tt),Et=vt.mul(E);Et.isNegative()||Et.gt(et);)tt-=st,vt=u(tt,this.unsigned),Et=vt.mul(E);vt.isZero()&&(vt=D),ht=ht.add(vt),et=et.sub(Et)}return ht},F.div=F.divide,F.modulo=function(E){if(e(E)||(E=p(E)),n){var B=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,E.low,E.high);return c(B,n.get_high(),this.unsigned)}return this.sub(this.div(E).mul(E))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return c(~this.low,~this.high,this.unsigned)},F.and=function(E){return e(E)||(E=p(E)),c(this.low&E.low,this.high&E.high,this.unsigned)},F.or=function(E){return e(E)||(E=p(E)),c(this.low|E.low,this.high|E.high,this.unsigned)},F.xor=function(E){return e(E)||(E=p(E)),c(this.low^E.low,this.high^E.high,this.unsigned)},F.shiftLeft=function(E){return e(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?c(this.low<<E,this.high<<E|this.low>>>32-E,this.unsigned):c(0,this.low<<E-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(E){return e(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?c(this.low>>>E|this.high<<32-E,this.high>>E,this.unsigned):c(this.high>>E-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(E){if(e(E)&&(E=E.toInt()),E&=63,E===0)return this;var B=this.high;if(E<32){var tt=this.low;return c(tt>>>E|B<<32-E,B>>>E,this.unsigned)}else return E===32?c(B,0,this.unsigned):c(B>>>E-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},F.toBytes=function(E){return E?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var E=this.high,B=this.low;return[B&255,B>>>8&255,B>>>16&255,B>>>24,E&255,E>>>8&255,E>>>16&255,E>>>24]},F.toBytesBE=function(){var E=this.high,B=this.low;return[E>>>24,E>>>16&255,E>>>8&255,E&255,B>>>24,B>>>16&255,B>>>8&255,B&255]},t.fromBytes=function(E,B,tt){return tt?t.fromBytesLE(E,B):t.fromBytesBE(E,B)},t.fromBytesLE=function(E,B){return new t(E[0]|E[1]<<8|E[2]<<16|E[3]<<24,E[4]|E[5]<<8|E[6]<<16|E[7]<<24,B)},t.fromBytesBE=function(E,B){return new t(E[4]<<24|E[5]<<16|E[6]<<8|E[7],E[0]<<24|E[1]<<16|E[2]<<8|E[3],B)},Km}var gb=eN();const yb=cg(gb),nN=zx({__proto__:null,default:yb},[gb]);const Ru=yb||nN;function gp(n){return Ru.fromString(n,!0,16)}const vb=gp("c3a5c85c97cb3127"),ku=gp("b492b66fbe98f273"),Ar=gp("9ae16a3b2f90404f");function P1(n){return n.xor(n.shru(47))}function bb(n,t,e){const i=n.slice(t,t+e);return Ru.fromBytes(Array.from(i),!0,!0)}function qn(n,t){return bb(n,t,8)}function Ay(n,t){return bb(n,t,4)}function Gi(n,t){return t===0?n:n.shru(t).or(n.shl(64-t))}function Hl(n,t,e=gp("9ddfea08eb382d69")){let i=n.xor(t).mul(e);i=i.xor(i.shru(47));let a=t.xor(i).mul(e);return a=a.xor(a.shru(47)),a=a.mul(e),a}function iN(n,t,e,i,a,o){a=a.add(n),o=Gi(o.add(a).add(i),21);const u=a;return a=a.add(t),a=a.add(e),o=o.add(Gi(a,44)),[a.add(i),o.add(u)]}function Ed(n,t,e,i){return iN(qn(n,t),qn(n,t+8),qn(n,t+16),qn(n,t+24),e,i)}function rN(n,t=n.length){if(t>=8){const e=Ar.add(t*2),i=qn(n,0).add(Ar),a=qn(n,t-8),o=Gi(a,37).mul(e).add(i),u=Gi(i,25).add(a).mul(e);return Hl(o,u,e)}if(t>=4){const e=Ar.add(t*2),i=Ay(n,0);return Hl(i.shl(3).add(t),Ay(n,t-4),e)}if(t>0){const e=n[0],i=n[t>>1],a=n[t-1],o=e+(i<<8),u=t+(a<<2);return P1(Ar.mul(o).xor(vb.mul(u))).mul(Ar)}return Ar}function aN(n,t=n.length){const e=Ar.add(t*2),i=qn(n,0).mul(ku),a=qn(n,8),o=qn(n,t-8).mul(e),u=qn(n,t-16).mul(Ar);return Hl(Gi(i.add(a),43).add(Gi(o,30)).add(u),i.add(Gi(a.add(Ar),18)).add(o),e)}function sN(n,t=n.length){const e=Ar.add(t*2),i=qn(n,0).mul(Ar),a=qn(n,8),o=qn(n,t-8).mul(e),u=qn(n,t-16).mul(Ar),c=Gi(i.add(a),43).add(Gi(o,30)).add(u),f=Hl(c,i.add(Gi(a.add(Ar),18)).add(o),e),h=qn(n,16).mul(e),p=qn(n,24),m=c.add(qn(n,t-32)).mul(e),v=f.add(qn(n,t-24)).mul(e);return Hl(Gi(h.add(p),43).add(Gi(m,30)).add(v),h.add(Gi(p.add(i),18)).add(m),e)}function oN(n,t=n.length){const e=Ru.fromNumber(81,!0);if(t<=32)return t<=16?rN(n,t):aN(n,t);if(t<=64)return sN(n,t);let i=e,a=e.mul(ku).add(113),o=P1(a.mul(Ar).add(113)).mul(Ar),u=[Ru.UZERO,Ru.UZERO],c=[Ru.UZERO,Ru.UZERO];i=i.mul(Ar).add(qn(n,0));let f=0;const h=(t-1>>6)*64,p=h+(t-1&63)-63;do i=Gi(i.add(a).add(u[0]).add(qn(n,f+8)),37).mul(ku),a=Gi(a.add(u[1]).add(qn(n,f+48)),42).mul(ku),i=i.xor(c[1]),a=a.add(u[0]).add(qn(n,f+40)),o=Gi(o.add(c[0]),33).mul(ku),u=Ed(n,f,u[1].mul(ku),i.add(c[0])),c=Ed(n,f+32,o.add(c[1]),a.add(qn(n,f+16))),[o,i]=[i,o],f+=64;while(f!==h);const m=ku.add(o.and(255).shl(1));return f=p,c[0]=c[0].add(t-1&63),u[0]=u[0].add(c[0]),c[0]=c[0].add(u[0]),i=Gi(i.add(a).add(u[0]).add(qn(n,f+8)),37).mul(m),a=Gi(a.add(u[1]).add(qn(n,f+48)),42).mul(m),i=i.xor(c[1].mul(9)),a=a.add(u[0].mul(9).add(qn(n,f+40))),o=Gi(o.add(c[0]),33).mul(m),u=Ed(n,f,u[1].mul(m),i.add(c[0])),c=Ed(n,f+32,o.add(c[1]),a.add(qn(n,f+16))),[o,i]=[i,o],Hl(Hl(u[0],c[0],m).add(P1(a).mul(vb)).add(o),Hl(u[1],c[1],m).add(i),m)}function lN(n,t){return t==="string"?Mu(n):yp([n],t)}function uN(n,t){return n instanceof Float32Array&&t==="float32"||n instanceof Int32Array&&t==="int32"||n instanceof Uint8Array&&t==="bool"}function yp(n,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Uu(n)),Pe().getBool("DEBUG")&&iC(n,t),uN(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){const e=new Uint8Array(n.length);for(let i=0;i<e.length;++i)Math.round(n[i])!==0&&(e[i]=1);return e}else throw new Error(`Unknown data type ${t}`)}function Qd(){return Pe().platform.now()}function Mu(n,t="utf-8"){return t=t||"utf-8",Pe().platform.encode(n,t)}function lf(n,t="utf-8"){return t=t||"utf-8",Pe().platform.decode(n,t)}function Ja(n){return Pe().platform.isTypedArray!=null?Pe().platform.isTypedArray(n):mb(n)}function Uu(n,t=[],e=!1){if(t==null&&(t=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||xg(n)||n==null||Ja(n)&&e)t.push(n);else if(Array.isArray(n)||Ja(n))for(let i=0;i<n.length;++i)Uu(n[i],t,e);else{let i=-1;for(const a of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(a)&&(i=Math.max(i,Number(a)));for(let a=0;a<=i;a++)Uu(n[a],t,e)}return t}class cN{constructor(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new hN)}profileKernel(t,e,i){let a;const o=()=>{a=i()};let u;const c=Qd();if(this.backendTimer.timerAvailable())u=this.backendTimer.time(o);else{o();for(const h of a)h.dataSync();u=Promise.resolve({kernelMs:Qd()-c})}if(Pe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let h=0;h<a.length;h++){const p=a[h];p.data().then(m=>{fN(m,p.dtype,t)})}return{kernelName:t,outputs:a,inputs:e,timeMs:u.then(h=>h.kernelMs),extraInfo:u.then(h=>h.getExtraProfileInfo!=null?h.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:e,outputs:i,timeMs:a,inputs:o,extraInfo:u}=t;i.forEach(c=>{Promise.all([c.data(),a,u]).then(f=>{this.logger.logKernelProfile(e,c,f[0],f[1],o,f[2])})})}}function fN(n,t,e){if(t!=="float32")return!1;for(let i=0;i<n.length;i++){const a=n[i];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${e}'`),!0}return!1}class hN{logKernelProfile(t,e,i,a,o,u){const c=typeof a=="number"?Ud(`${a}ms`,9):a.error,f=Ud(t,25),h=e.rank,p=e.size,m=Ud(e.shape.toString(),14);let v="";for(const y in o){const S=o[y];if(S!=null){const N=S.shape||e.shape,A=N.length;v+=`${y}: ${A}D ${A>0?N:""} `}}console.log(`%c${f}	%c${c}	%c${h}D ${m}	%c${p}	%c${v}	%c${u}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function dN(n,t,e){const i={},a={};for(let f=0;f<t.length;f++)i[t[f].id]=!0;for(let f=0;f<n.length;f++){const h=n[f],p=h.inputs;for(const m in p){const v=p[m];let y=!1;for(let S=0;S<t.length;S++)if(i[v.id]){h.outputs.forEach(N=>i[N.id]=!0),y=!0,a[h.id]=!0;break}if(y)break}}const o={};o[e.id]=!0;const u={};for(let f=n.length-1;f>=0;f--){const h=n[f],p=h.inputs;for(let m=0;m<h.outputs.length;m++)if(o[h.outputs[m].id]){for(const v in p)o[p[v].id]=!0,u[h.id]=!0;break}}const c=[];for(let f=0;f<n.length;f++){const h=n[f];if(a[h.id]&&u[h.id]){const p={};for(const v in h.inputs){const y=h.inputs[v];i[y.id]&&(p[v]=y)}const m=Object.assign({},h);m.inputs=p,m.outputs=h.outputs,c.push(m)}}return c}function pN(n,t,e,i){for(let a=t.length-1;a>=0;a--){const o=t[a],u=[];if(o.outputs.forEach(f=>{const h=n[f.id];h!=null?u.push(h):u.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const c=o.gradient(u);for(const f in o.inputs){if(!(f in c))throw new Error(`Cannot backprop through input ${f}. Available gradients found: ${Object.keys(c)}.`);const h=e(()=>c[f]());if(h.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${f} must have 'float32' dtype, but has '${h.dtype}'`);const p=o.inputs[f];if(!el(h.shape,p.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${f}' has shape '${h.shape}', which does not match the shape of the input '${p.shape}'`);if(n[p.id]==null)n[p.id]=h;else{const m=n[p.id];n[p.id]=i(m,h),m.dispose()}}}}const Ny=20,rh=3,Qm=7;function mN(n,t,e,i){const a=mr(t),o=gN(n,t,e,a),u=t.length,c=$d(n,t,e,a,o),f=["Tensor"];return i&&(f.push(`  dtype: ${e}`),f.push(`  rank: ${u}`),f.push(`  shape: [${t}]`),f.push("  values:")),f.push(c.map(h=>"    "+h).join(`
`)),f.join(`
`)}function gN(n,t,e,i){const a=Zt(t),o=i[i.length-1],u=new Array(o).fill(0),c=t.length,f=e==="complex64"?uh(n):n;if(c>1)for(let h=0;h<a/o;h++){const p=h*o;for(let m=0;m<o;m++)u[m]=Math.max(u[m],lh(f[p+m],0,e).length)}return u}function lh(n,t,e){let i;return Array.isArray(n)?i=`${parseFloat(n[0].toFixed(Qm))} + ${parseFloat(n[1].toFixed(Qm))}j`:mp(n)?i=`'${n}'`:e==="bool"?i=wb(n):i=parseFloat(n.toFixed(Qm)).toString(),Ud(i,t)}function wb(n){return n===0?"false":"true"}function $d(n,t,e,i,a,o=!0){const u=e==="complex64"?2:1,c=t[0],f=t.length;if(f===0){if(e==="complex64"){const N=uh(n);return[lh(N[0],0,e)]}return e==="bool"?[wb(n[0])]:[n[0].toString()]}if(f===1){if(c>Ny){const A=rh*u;let _=Array.from(n.slice(0,A)),I=Array.from(n.slice((c-rh)*u,c*u));return e==="complex64"&&(_=uh(_),I=uh(I)),["["+_.map((D,M)=>lh(D,a[M],e)).join(", ")+", ..., "+I.map((D,M)=>lh(D,a[c-rh+M],e)).join(", ")+"]"]}return["["+(e==="complex64"?uh(n):Array.from(n)).map((A,_)=>lh(A,a[_],e)).join(", ")+"]"]}const h=t.slice(1),p=i.slice(1),m=i[0]*u,v=[];if(c>Ny){for(let N=0;N<rh;N++){const A=N*m,_=A+m;v.push(...$d(n.slice(A,_),h,e,p,a,!1))}v.push("...");for(let N=c-rh;N<c;N++){const A=N*m,_=A+m;v.push(...$d(n.slice(A,_),h,e,p,a,N===c-1))}}else for(let N=0;N<c;N++){const A=N*m,_=A+m;v.push(...$d(n.slice(A,_),h,e,p,a,N===c-1))}const y=f===2?",":"";v[0]="["+(c>0?v[0]+y:"");for(let N=1;N<v.length-1;N++)v[N]=" "+v[N]+y;let S=`,
`;for(let N=2;N<f;N++)S+=`
`;return v[v.length-1]=" "+v[v.length-1]+"]"+(o?"":S),v}function uh(n){const t=[];for(let e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}class Zd{constructor(t,e,i){if(this.dtype=e,this.shape=t.slice(),this.size=Zt(t),i!=null){const a=i.length;Xt(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||Yi(e,this.size),this.strides=mr(t)}set(t,...e){e.length===0&&(e=[0]),Xt(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const i=this.locToIndex(e);this.values[i]=t}get(...t){t.length===0&&(t=[0]);let e=0;for(const a of t){if(a<0||a>=this.shape[e]){const o=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(o)}e++}let i=t[t.length-1];for(let a=0;a<t.length-1;++a)i+=this.strides[a]*t[a];return this.values[i]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let e=t[t.length-1];for(let i=0;i<t.length-1;++i)e+=this.strides[i]*t[i];return e}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const e=new Array(this.shape.length);for(let i=0;i<e.length-1;++i)e[i]=Math.floor(t/this.strides[i]),t-=e[i]*this.strides[i];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return Is().makeTensor(this.values,this.shape,this.dtype)}}let Is=null,Xc=null;function yN(n){Is=n}function vN(n){Xc=n}class Ts{constructor(t,e,i,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=Zt(t),this.strides=mr(t),this.dataId=i,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Xc.buffer(this.shape,this.dtype,t)}bufferSync(){return Xc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return vy(this.shape,t,this.dtype==="complex64")}arraySync(){return vy(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Is().read(this.dataId);if(this.dtype==="string"){const e=await t;try{return e.map(i=>lf(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Is().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Is().readSync(this.dataId);if(this.dtype==="string")try{return t.map(e=>lf(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Is().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Is().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Xc.print(this,t)}clone(){return this.throwIfDisposed(),Xc.clone(this)}toString(t=!1){const e=this.dataSync();return mN(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Xc.cast(this,t)}variable(t=!0,e,i){return this.throwIfDisposed(),Is().makeVariable(this,t,e,i)}}Object.defineProperty(Ts,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function xb(){return Sg("Tensor",()=>Ts)}xb();class Jd extends Ts{constructor(t,e,i,a){super(t.shape,t.dtype,t.dataId,a),this.trainable=e,this.name=i}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!el(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Is().disposeTensor(this),this.dataId=t.dataId,Is().incRef(this,null)}dispose(){Is().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Jd,Symbol.hasInstance,{value:n=>n instanceof Ts&&n.assign!=null&&n.assign instanceof Function});var _y;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(_y||(_y={}));var M1;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(M1||(M1={}));var O1;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(O1||(O1={}));var F1;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(F1||(F1={}));var B1;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(B1||(B1={}));const bN={float32:F1,int32:M1,bool:O1,complex64:B1};function ql(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${n} with ${t}`)}return bN[n][t]}function wN(n){return ql(n,"int32")}function Sb(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function Cb(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}function Vu(n,t){if(n.dtype===t.dtype)return[n,t];const e=ql(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function Ab(n){const t=[];return Nb(n,t,new Set),t}function Nb(n,t,e){if(n==null)return;if(n instanceof Ts){t.push(n);return}if(!xN(n))return;const i=n;for(const a in i){const o=i[a];e.has(o)||(e.add(o),Nb(o,t,e))}}function xN(n){return Array.isArray(n)||typeof n=="object"}function Zm(n){return n.kernelName!=null}class ky{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class uf{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ky}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const i=t[e];if(await this.initializeBackend(i).success){await this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:e}=this.initializeBackend(t);if(e)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,i=1){return t in this.registryFactory?(Yc(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:i},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:e,asyncInit:i}=this.initializeBackend(t);if(!(i?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new cN(this.backendInstance),!0}setupRegisteredKernels(){Sy(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){Sy(t).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(e==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const i=e.factory();if(i&&!(i instanceof X5)&&typeof i.then=="function"){const a=++this.pendingBackendInitId,o=i.then(u=>a<this.pendingBackendInitId?!1:(this.registry[t]=u,this.pendingBackendInit=null,!0)).catch(u=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Yc(`Initialization of backend ${t} failed`),Yc(u.stack||u.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=i,{success:!0,asyncInit:!1}}catch(i){return Yc(`Initialization of backend ${t} failed`),Yc(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const i=t[e],{success:a,asyncInit:o}=this.initializeBackend(i);if(o||a)return{name:i,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const i=this.state.tensorInfo.get(e),a=i.backend,o=this.readSync(e),u=a.refCount(e);a.disposeData(e,!0),i.backend=t,t.move(e,o,i.shape,i.dtype,u),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let i=null;if(e==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");e=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}let a;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(a),()=>(a=e(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(t,e,i){t();try{const a=i();return e(),a}catch(a){throw e(),a}}nextTensorId(){return uf.nextTensorId++}nextVariableId(){return uf.nextVariableId++}clone(t){const e=Me.runKernel(Ng,{x:t}),i={x:t},a=u=>({x:()=>{const c="float32",f={x:u},h={dtype:c};return Me.runKernel(Ag,f,h)}}),o=[];return this.addTapeNode(this.state.activeScope.name,i,[e],a,o,{}),e}runKernel(t,e,i){if(this.backendName==null&&this.backend,!(wy(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,i){const a=this.backend.numDataIds();let o=0;i.forEach(f=>{o+=f.dtype==="complex64"?3:1});const u=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],c=a-e-o-u;if(c>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${c} data ids) after running '${t}'`)}runKernelFunc(t){let e,i=[];const a=this.isTapeOn(),o=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let c;this.backendName==null&&this.backend;let f;const h=Zm(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Zm(t)){const{kernelName:S,inputs:N,attrs:A}=t;this.backendName==null&&this.backend;const _=wy(S,this.backendName);Xt(_!=null,()=>`Cannot find registered kernel '${S}' for backend '${this.backendName}'`),c=()=>{const I=this.backend.numDataIds();f=_.kernelFunc({inputs:N,attrs:A,backend:this.backend});const D=Array.isArray(f)?f:[f];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(S,I,D);const M=D.map(Y=>Y.rank!=null?Y:this.makeTensorFromTensorInfo(Y));if(a){const Y=this.getTensorsForGradient(S,N,M);i=this.saveTensorsForBackwardMode(Y)}return M}}else{const{forwardFunc:S}=t,N=A=>{a&&(i=A.map(_=>this.keep(this.clone(_))))};c=()=>{const A=this.backend.numDataIds();f=this.tidy(()=>S(this.backend,N));const _=Array.isArray(f)?f:[f];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,A,_),_}}const{inputs:p,attrs:m}=t,v=Zm(t)?null:t.backwardsFunc;let y;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?e=c():(y=this.profiler.profileKernel(h,p,()=>c()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(y),e=y.outputs)}),a&&this.addTapeNode(h,p,e,v,i,m),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(p).map(S=>p[S]!=null?p[S].shape:null),outputShapes:e.map(S=>S.shape),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(f)?e:e[0]}saveTensorsForBackwardMode(t){return t.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(t,e,i){const a=xy(t);if(a!=null){const o=a.inputsToSave||[],u=a.outputsToSave||[];let c;a.saveAllInputs?(Xt(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),c=Object.keys(e).map(h=>e[h])):c=o.map(h=>e[h]);const f=i.filter((h,p)=>u[p]);return c.concat(f)}return[]}makeTensor(t,e,i,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",a=a||this.backend;let o=t;i==="string"&&mp(t[0])&&(o=t.map(f=>Mu(f)));const u=a.write(o,e,i),c=new Ts(e,i,u,this.nextTensorId());if(this.trackTensor(c,a),i==="string"){const f=this.state.tensorInfo.get(u),h=sC(o);this.state.numBytes+=h-f.bytes,f.bytes=h}return c}makeTensorFromDataId(t,e,i,a){i=i||"float32";const o={dataId:t,shape:e,dtype:i};return this.makeTensorFromTensorInfo(o,a)}makeTensorFromTensorInfo(t,e){const{dataId:i,shape:a,dtype:o}=t,u=new Ts(a,o,i,this.nextTensorId());return this.trackTensor(u,e),u}makeVariable(t,e=!0,i,a){i=i||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));const o=new Jd(t,e,i,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(t,e){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let i=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(i=t.size*I1(t.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:i})),t instanceof Jd||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const i=t.size*I1(t.dtype);this.state.numBytes-=i}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-i;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,e,i,a,o,u){const c={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:i,saved:o},f=xy(t);f!=null&&(a=f.gradFunc),a!=null&&(c.gradient=h=>(h=h.map((p,m)=>{if(p==null){const v=i[m],y=Zo(v.size,v.dtype);return this.makeTensor(y,v.shape,v.dtype)}return p}),a(h.length>1?h:h[0],o,u))),this.state.activeTape.push(c)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Ab(t),i=new Set(e.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const u=this.state.activeScope.track[o];!u.kept&&!i.has(u.id)&&u.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(o=>{!o.kept&&o.scopeId===a.id&&this.track(o)})}gradients(t,e,i,a=!1){if(Xt(e.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));Xt(o instanceof Ts,()=>"The result y returned by f() must be a tensor.");const u=dN(this.state.activeTape,e,o);if(!a&&u.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const c={};c[o.id]=i??SN(o.shape),pN(c,u,h=>this.tidy(h),CN);const f=e.map(h=>c[h.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(h=>{for(const p of h.saved)p.dispose()}),this.state.activeTape=null),{value:o,grads:f}})}customGrad(t){return Xt(T1(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{Xt(e.every(c=>c instanceof Ts),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i;const a={};e.forEach((c,f)=>{a[f]=c});const o=(c,f)=>(i=t(...e,f),Xt(i.value instanceof Ts,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Xt(T1(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),u=(c,f)=>{const h=i.gradFunc(c,f),p=Array.isArray(h)?h:[h];Xt(p.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Xt(p.every(v=>v instanceof Ts),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const m={};return p.forEach((v,y)=>{m[y]=()=>v}),m};return this.runKernelFunc({forwardFunc:o,backwardsFunc:u,inputs:a})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,e){return this.state.tensorInfo.get(t).backend.readToGPU(t,e)}async time(t){const e=Qd(),i=await this.backend.time(t);return i.wallMs=Qd()-e,i}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ky;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}uf.nextTensorId=0;uf.nextVariableId=0;function SN(n){const t=uC(Zt(n),"float32");return Me.makeTensor(t,n,"float32")}function _b(){const n=J5();if(n._tfengine==null){const t=new cC(n);n._tfengine=new uf(t)}return pC(n._tfengine.ENV),yN(()=>n._tfengine),n._tfengine}const Me=_b();function CN(n,t){const e={a:n,b:t};return Me.runKernel(Cg,e)}function AN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const zr=Pe();zr.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});zr.registerFlag("IS_BROWSER",()=>AN());zr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");zr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));zr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));zr.registerFlag("PROD",()=>!1);zr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>zr.getBool("DEBUG"));zr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);zr.registerFlag("IS_TEST",()=>!1);zr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>zr.getBool("DEBUG"));zr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);zr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);zr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function NN(n,t){let e=n;if(Ja(n))return t==="string"?[]:[n.length];if(Sb(n)){const a=n.channels||"RGBA";return[n.height,n.width*a.length]}else if(Cb(n))return[n.buffer.size/(t==null?4:I1(t))];if(!Array.isArray(n))return[];const i=[];for(;Array.isArray(e)||Ja(e)&&t!=="string";)i.push(e.length),e=e[0];return Array.isArray(n)&&Pe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&kb(n,i,[]),i}function kb(n,t,e){if(e=e||[],!Array.isArray(n)&&!Ja(n)){Xt(t.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}Xt(t.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${n.length} elements`),Xt(n.length===t[0],()=>`Element arr[${e.join("][")}] should have ${t[0]} elements, but has ${n.length} elements`);const i=t.slice(1);for(let a=0;a<n.length;++a)kb(n[a],i,e.concat(a))}function Ey(n,t,e,i){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==t||n==="numeric"&&t==="string")throw new Error(`Argument '${e}' passed to '${i}' must be ${n} tensor, but got ${t} tensor`)}}function ai(n,t,e,i="numeric"){if(n instanceof xb())return Ey(i,n.dtype,t,e),n;let a=kh(n);if(a!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(a=i),Ey(i,a,t,e),n==null||!Ja(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const f=n==null?"null":n.constructor.name;throw new Error(`Argument '${t}' passed to '${e}' must be a Tensor or TensorLike, but got '${f}'`)}const o=NN(n,a);!Ja(n)&&!Array.isArray(n)&&(n=[n]);const c=a!=="string"?yp(n,a):Uu(n,[],!0);return Me.makeTensor(c,o,a)}const _N="__op";function Nr(n){const t=Object.keys(n);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let e=t[0];const i=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+_N;const a=(...o)=>{Me.startScope(e);try{const u=i(...o);return xg(u)&&console.error("Cannot return a Promise inside of tidy."),Me.endScope(u),u}catch(u){throw Me.endScope(null),u}};return Object.defineProperty(a,"name",{value:e,configurable:!0}),a}function kN(n,t){const e=ai(n,"real","complex"),i=ai(t,"imag","complex");K5(e.shape,i.shape,`real and imag shapes, ${e.shape} and ${i.shape}, must match in call to tf.complex().`);const a={real:e,imag:i};return Me.runKernel(eb,a)}const EN=Nr({complex_:kN});function LN(n,t,e,i){if(i==null)i=kh(n);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Cb(n)||Sb(n)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return Me.backend.createTensorFromGPUData(n,t||e,i)}if(!Ja(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Eh(t);const a=Zt(t),o=Zt(e);Xt(a===o,()=>`Based on the provided shape, [${t}], the tensor should have ${a} values but has ${o}`);for(let u=0;u<e.length;++u){const c=e[u],f=u===e.length-1?c!==Zt(t.slice(u)):!0;Xt(e[u]===t[u]||!f,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${t}). `)}}return!Ja(n)&&!Array.isArray(n)&&(n=[n]),t=t||e,n=i!=="string"?yp(n,i):Uu(n,[],!0),Me.makeTensor(n,t,i)}class Lh{static join(t){return new Lh(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(i=>Ja(i)?i.buffer:i),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let i=0;i<t.length;i++){const a=t[i];i!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=e+a.byteLength;this.shards.push({buffer:a,start:e,end:o}),e=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),e=Math.min(this.byteLength,e),e<=t)return new ArrayBuffer(0);const i=this.findShardForByte(t);if(i===-1)throw new Error(`Could not find start shard for byte ${t}`);const a=e-t,o=new ArrayBuffer(a),u=new Uint8Array(o);let c=0;for(let f=i;f<this.shards.length;f++){const h=this.shards[f],m=t+c-h.start,v=c,S=Math.min(e,h.end)-h.start,N=new Uint8Array(h.buffer,m,S-m);if(u.set(N,v),c+=N.length,e<h.end)break}return o}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(a){return t<a.start?-1:t>=a.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const i=RN(this.shards,e);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function RN(n,t){let e=0,i=n.length;for(;e<=i;){const a=Math.floor((i-e)/2)+e,o=t(n[a]);if(o===0)return a;o<0?i=a:e=a+1}return-1}function Jm(){return Me}function Fi(n,t){return Me.tidy(n,t)}function La(n){Ab(n).forEach(e=>e.dispose())}function IN(n){return Me.keep(n)}function TN(n,t,e=1){return Me.registerBackend(n,t,e)}const _g=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ly(n){return _g?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function DN(n){if(_g)return Buffer.from(n).toString("base64");const t=new Uint8Array(n);let e="";for(let i=0,a=t.length;i<a;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function PN(n){if(_g){const i=Buffer.from(n,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const t=atob(n),e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e.set([t.charCodeAt(i)],i);return e.buffer}function Eb(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:Ly(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:Ly(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new Lh(n.weightData).byteLength}}class Fr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Fr.instance==null&&(Fr.instance=new Fr),Fr.instance}static registerSaveRouter(t){Fr.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Fr.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Fr.getHandlers(t,"save")}static getLoadHandlers(t,e){return Fr.getHandlers(t,"load",e)}static getHandlers(t,e,i){const a=[];return(e==="load"?Fr.getInstance().loadRouters:Fr.getInstance().saveRouters).forEach(u=>{const c=u(t,i);c!==null&&a.push(c)}),a}}const z1="tensorflowjs",U1=1,Pu="models_store",$l="model_info_store";function Lb(){if(!Pe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function $1(n){const t=n.result;t.createObjectStore(Pu,{keyPath:"modelPath"}),t.createObjectStore($l,{keyPath:"modelPath"})}class $u{constructor(t){if(this.indexedDB=Lb(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((i,a)=>{const o=this.indexedDB.open(z1,U1);o.onupgradeneeded=()=>$1(o),o.onsuccess=()=>{const u=o.result;if(e==null){const c=u.transaction(Pu,"readonly"),h=c.objectStore(Pu).get(this.modelPath);h.onsuccess=()=>{if(h.result==null)return u.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(h.result.modelArtifacts)},h.onerror=p=>(u.close(),a(h.error)),c.oncomplete=()=>u.close()}else{e.weightData=Lh.join(e.weightData);const c=Eb(e),f=u.transaction($l,"readwrite");let h=f.objectStore($l),p;try{p=h.put({modelPath:this.modelPath,modelArtifactsInfo:c})}catch(v){return a(v)}let m;p.onsuccess=()=>{m=u.transaction(Pu,"readwrite");const v=m.objectStore(Pu);let y;try{y=v.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:c})}catch(S){return a(S)}y.onsuccess=()=>i({modelArtifactsInfo:c}),y.onerror=S=>{h=f.objectStore($l);const N=h.delete(this.modelPath);N.onsuccess=()=>(u.close(),a(y.error)),N.onerror=A=>(u.close(),a(y.error))}},p.onerror=v=>(u.close(),a(p.error)),f.oncomplete=()=>{m==null?u.close():m.oncomplete=()=>u.close()}}},o.onerror=u=>a(o.error)})}}$u.URL_SCHEME="indexeddb://";const Rb=n=>Pe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith($u.URL_SCHEME)?MN(n.slice($u.URL_SCHEME.length)):null;Fr.registerSaveRouter(Rb);Fr.registerLoadRouter(Rb);function MN(n){return new $u(n)}function ON(n){return n.startsWith($u.URL_SCHEME)?n.slice($u.URL_SCHEME.length):n}class FN{constructor(){this.indexedDB=Lb()}async listModels(){return new Promise((t,e)=>{const i=this.indexedDB.open(z1,U1);i.onupgradeneeded=()=>$1(i),i.onsuccess=()=>{const a=i.result,o=a.transaction($l,"readonly"),c=o.objectStore($l).getAll();c.onsuccess=()=>{const f={};for(const h of c.result)f[h.modelPath]=h.modelArtifactsInfo;t(f)},c.onerror=f=>(a.close(),e(c.error)),o.oncomplete=()=>a.close()},i.onerror=a=>e(i.error)})}async removeModel(t){return t=ON(t),new Promise((e,i)=>{const a=this.indexedDB.open(z1,U1);a.onupgradeneeded=()=>$1(a),a.onsuccess=()=>{const o=a.result,u=o.transaction($l,"readwrite"),c=u.objectStore($l),f=c.get(t);let h;f.onsuccess=()=>{if(f.result==null)return o.close(),i(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const p=c.delete(t),m=()=>{h=o.transaction(Pu,"readwrite");const y=h.objectStore(Pu).delete(t);y.onsuccess=()=>e(f.result.modelArtifactsInfo),y.onerror=S=>i(f.error)};p.onsuccess=m,p.onerror=v=>(m(),o.close(),i(f.error))}},f.onerror=p=>(o.close(),i(f.error)),u.oncomplete=()=>{h==null?o.close():h.oncomplete=()=>o.close()}},a.onerror=o=>i(a.error)})}}const Go="/",Kc="tensorflowjs_models",Ib="info",BN="model_topology",zN="weight_specs",UN="weight_data",$N="model_metadata";function Tb(n){return{info:[Kc,n,Ib].join(Go),topology:[Kc,n,BN].join(Go),weightSpecs:[Kc,n,zN].join(Go),weightData:[Kc,n,UN].join(Go),modelMetadata:[Kc,n,$N].join(Go)}}function Db(n){for(const t of Object.values(n))window.localStorage.removeItem(t)}function jN(n){const t=n.split(Go);if(t.length<3)throw new Error(`Invalid key format: ${n}`);return t.slice(1,t.length-1).join(Go)}function HN(n){return n.startsWith(ju.URL_SCHEME)?n.slice(ju.URL_SCHEME.length):n}class ju{constructor(t){if(!Pe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Tb(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),i=JSON.stringify(t.weightSpecs),a=Eb(t),o=Lh.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,DN(o));const u={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(u)),{modelArtifactsInfo:a}}catch{throw Db(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=i;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=a;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const c=JSON.parse(o);e.format=c.format,e.generatedBy=c.generatedBy,e.convertedBy=c.convertedBy,c.signature!=null&&(e.signature=c.signature),c.userDefinedMetadata!=null&&(e.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(e.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(e.initializerSignature=c.initializerSignature),c.trainingConfig!=null&&(e.trainingConfig=c.trainingConfig)}const u=this.LS.getItem(this.keys.weightData);if(u==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=PN(u),e}}ju.URL_SCHEME="localstorage://";const Pb=n=>Pe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(ju.URL_SCHEME)?qN(n.slice(ju.URL_SCHEME.length)):null;Fr.registerSaveRouter(Pb);Fr.registerLoadRouter(Pb);function qN(n){return new ju(n)}class WN{constructor(){Xt(Pe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Xt(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=Kc+Go,i=Go+Ib;for(let a=0;a<this.LS.length;++a){const o=this.LS.key(a);if(o.startsWith(e)&&o.endsWith(i)){const u=jN(o);t[u]=JSON.parse(this.LS.getItem(o))}}return t}async removeModel(t){t=HN(t);const e=Tb(t);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${t}'`);const i=JSON.parse(this.LS.getItem(e.info));return Db(e),i}}const Ry="://";class ao{constructor(){this.managers={}}static getInstance(){return ao.instance==null&&(ao.instance=new ao),ao.instance}static registerManager(t,e){Xt(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Ry)&&(t=t.slice(0,t.indexOf(Ry))),Xt(t.length>0,()=>"scheme must not be an empty string.");const i=ao.getInstance();Xt(i.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),i.managers[t]=e}static getManager(t){const e=ao.getInstance().managers[t];if(e==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(ao.getInstance().managers)}}class VN{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){if(typeof window>"u"||!Pe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,e);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();const a=this.functionRefs[i.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return mb(t)}}if(Pe().get("IS_BROWSER")){Pe().setPlatform("browser",new VN);try{ao.registerManager(ju.URL_SCHEME,new WN)}catch{}try{ao.registerManager($u.URL_SCHEME,new FN)}catch{}}const GN={importFetch:()=>require("node-fetch")};let t1;class YN{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return Pe().global.fetch!=null?Pe().global.fetch(t,e):(t1==null&&(t1=GN.importFetch()),t1(t,e))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}Pe().get("IS_NODE")&&!Pe().get("IS_BROWSER")&&Pe().setPlatform("node",new YN);function ar(n,t="float32",e){return t=t||"float32",Eh(n),new Zd(n,t,e)}function XN(n,t){const e=ai(n,"x","cast");if(!rC(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");const i={x:e},a={dtype:t};return Me.runKernel(Ag,i,a)}const j1=Nr({cast_:XN});function KN(n){const e={x:ai(n,"x","clone","string_or_numeric")};return Me.runKernel(Ng,e)}const Mb=Nr({clone_:KN});function QN(n,t=!1){console.log(n.toString(t))}_b();const ZN={buffer:ar,cast:j1,clone:Mb,print:QN};vN(ZN);function JN(n,t){let e=ai(n,"a","add"),i=ai(t,"b","add");[e,i]=Vu(e,i);const a={a:e,b:i};return Me.runKernel(Cg,a)}const In=Nr({add_:JN});function t_(n,t){let e=ai(n,"a","floorDiv"),i=ai(t,"b","floorDiv");[e,i]=Vu(e,i);const a={a:e,b:i};return Me.runKernel(ab,a)}const e_=Nr({floorDiv_:t_});function n_(n,t){let e=ai(n,"a","div"),i=ai(t,"b","div");if([e,i]=Vu(e,i),e.dtype==="int32"&&i.dtype==="int32")return e_(e,i);const a={a:e,b:i},o={};return Me.runKernel(ib,a,o)}const uo=Nr({div_:n_});function i_(n,t){let e=ai(n,"a","mul"),i=ai(t,"b","mul");[e,i]=Vu(e,i);const a={a:e,b:i};return Me.runKernel(ob,a)}const dn=Nr({mul_:i_});function r_(n){const t=ai(n,"x","abs");if(t.dtype==="complex64"){const e={x:t};return Me.runKernel(nb,e)}else{const e={x:t};return Me.runKernel(tb,e)}}const a_=Nr({abs_:r_});function kg(n,t,e,i,a="NHWC",o){const u=n[3],c=[...t,u],f=mf(a);return po(n,c,e,o,i,null,null,f)}function Rh(n,t,e,i,a,o,u="channelsLast"){const[c,f]=tp(t);let h;if(u==="channelsLast")h=[c,f,n[3],n[3]];else if(u==="channelsFirst")h=[c,f,n[1],n[1]];else throw new Error(`Unknown dataFormat ${u}`);return po(n,h,e,i,a,o,!1,u)}function vp(n,t,e,i,a,o,u="NDHWC"){const[c,f,h]=H1(t);let p,m;if(u==="NDHWC")m="channelsLast",p=[c,f,h,n[4],n[4]];else if(u==="NCDHW")m="channelsFirst",p=[c,f,h,n[1],n[1]];else throw new Error(`Unknown dataFormat ${u}`);return bp(n,p,e,i,a,!1,m,o)}function po(n,t,e,i,a,o,u=!1,c="channelsLast"){let[f,h,p,m]=[-1,-1,-1,-1];if(c==="channelsLast")[f,h,p,m]=n;else if(c==="channelsFirst")[f,m,h,p]=n;else throw new Error(`Unknown dataFormat ${c}`);const[v,y,,S]=t,[N,A]=tp(e),[_,I]=tp(i),D=tf(v,_),M=tf(y,I),{padInfo:Y,outHeight:ct,outWidth:it}=l_(a,h,p,N,A,D,M,o,c),nt=u?S*m:S;let F;return c==="channelsFirst"?F=[f,nt,ct,it]:c==="channelsLast"&&(F=[f,ct,it,nt]),{batchSize:f,dataFormat:c,inHeight:h,inWidth:p,inChannels:m,outHeight:ct,outWidth:it,outChannels:nt,padInfo:Y,strideHeight:N,strideWidth:A,filterHeight:v,filterWidth:y,effectiveFilterHeight:D,effectiveFilterWidth:M,dilationHeight:_,dilationWidth:I,inShape:n,outShape:F,filterShape:t}}function bp(n,t,e,i,a,o=!1,u="channelsLast",c){let[f,h,p,m,v]=[-1,-1,-1,-1,-1];if(u==="channelsLast")[f,h,p,m,v]=n;else if(u==="channelsFirst")[f,v,h,p,m]=n;else throw new Error(`Unknown dataFormat ${u}`);const[y,S,N,,A]=t,[_,I,D]=H1(e),[M,Y,ct]=H1(i),it=tf(y,M),nt=tf(S,Y),F=tf(N,ct),{padInfo:G,outDepth:E,outHeight:B,outWidth:tt}=u_(a,h,p,m,_,I,D,it,nt,F,c),et=o?A*v:A;let ht;return u==="channelsFirst"?ht=[f,et,E,B,tt]:u==="channelsLast"&&(ht=[f,E,B,tt,et]),{batchSize:f,dataFormat:u,inDepth:h,inHeight:p,inWidth:m,inChannels:v,outDepth:E,outHeight:B,outWidth:tt,outChannels:et,padInfo:G,strideDepth:_,strideHeight:I,strideWidth:D,filterDepth:y,filterHeight:S,filterWidth:N,effectiveFilterDepth:it,effectiveFilterHeight:nt,effectiveFilterWidth:F,dilationDepth:M,dilationHeight:Y,dilationWidth:ct,inShape:n,outShape:ht,filterShape:t}}function s_(n,t,e,i,a){i==null&&(i=Ob(n,t,e));const o=n[0],u=n[1],c=vh((o-t+2*i)/e+1,a),f=vh((u-t+2*i)/e+1,a);return[c,f]}function o_(n,t,e,i,a,o){a==null&&(a=Ob(n,t[0],i[0]));const u=[0,0,0,e];for(let c=0;c<3;c++)n[c]+2*a>=t[c]&&(u[c]=vh((n[c]-t[c]+2*a)/i[c]+1,o));return u}function Ob(n,t,e,i=1){const a=tf(t,i);return Math.floor((n[0]*(e-1)-e+a)/2)}function tp(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function H1(n){return typeof n=="number"?[n,n,n]:n}function tf(n,t){return t<=1?n:n+(n-1)*(t-1)}function l_(n,t,e,i,a,o,u,c,f){let h,p,m;if(typeof n=="number"){h={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const y=s_([t,e],o,i,n,c);p=y[0],m=y[1]}else if(n==="same"){p=Math.ceil(t/i),m=Math.ceil(e/a);const v=Math.max(0,(p-1)*i+o-t),y=Math.max(0,(m-1)*a+u-e),S=Math.floor(v/2),N=v-S,A=Math.floor(y/2),_=y-A;h={top:S,bottom:N,left:A,right:_,type:"SAME"}}else if(n==="valid")h={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((t-o+1)/i),m=Math.ceil((e-u+1)/a);else if(typeof n=="object"){const v=f==="channelsLast"?n[1][0]:n[2][0],y=f==="channelsLast"?n[1][1]:n[2][1],S=f==="channelsLast"?n[2][0]:n[3][0],N=f==="channelsLast"?n[2][1]:n[3][1];h={top:v,bottom:y,left:S,right:N,type:v===0&&y===0&&S===0&&N===0?"VALID":"EXPLICIT"},p=vh((t-o+v+y)/i+1,c),m=vh((e-u+S+N)/a+1,c)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:h,outHeight:p,outWidth:m}}function u_(n,t,e,i,a,o,u,c,f,h,p){let m,v,y,S;if(n==="valid"&&(n=0),typeof n=="number"){m={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const A=o_([t,e,i,1],[c,f,h],1,[a,o,u],n,p);v=A[0],y=A[1],S=A[2]}else if(n==="same"){v=Math.ceil(t/a),y=Math.ceil(e/o),S=Math.ceil(i/u);const N=(v-1)*a+c-t,A=(y-1)*o+f-e,_=(S-1)*u+h-i,I=Math.floor(N/2),D=N-I,M=Math.floor(A/2),Y=A-M,ct=Math.floor(_/2),it=_-ct;m={top:M,bottom:Y,left:ct,right:it,front:I,back:D,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:m,outDepth:v,outHeight:y,outWidth:S}}function vh(n,t){if(!t)return Math.trunc(n);switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${t}`)}}function Iy(n){const[t,e,i]=tp(n);return t===1&&e===1&&i===1}function Fb(n,t){return Iy(n)||Iy(t)}function mf(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function c_(n,t){const i={x:ai(n,"x","reshape","string_or_numeric")},a={shape:t};return Me.runKernel(ub,i,a)}const Bb=Nr({reshape_:c_});function f_(n,t){let e=ai(n,"broadcastTo","x");const i=e.shape;if(Eh(t),t.length<e.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${e.rank}.`);if(t.length>e.rank){const h=e.shape.slice();for(;h.length<t.length;)h.unshift(1);e=Bb(e,h)}const a=e.shape,o=Array.from(t);for(let h=t.length-1;h>=0;h--)if(a[h]===t[h])o[h]=1;else if(e.shape[h]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${t}].`);if(o.map((h,p)=>h>1?p:-1).filter(h=>h>=0).length===0)return Mb(e);const c={x:e},f={reps:o};return Me.runKernel(hb,c,f)}const h_=Nr({broadcastTo_:f_});function d_(n,t,e){Eh(n),e=e||kh(t);const i={shape:n,value:t,dtype:e};return Me.runKernel(rb,{},i)}function ep(n,t){const e=n.length,i=[];for(let a=0;a<e;a++){const o=e-1-a,u=n[o]||1;(t[t.length-1-a]||1)>1&&u===1&&i.unshift(o)}return i}function oo(n,t){const e=Math.max(n.length,t.length),i=new Array(e);for(let a=0;a<e;a++){let o=n[n.length-a-1];o==null&&(o=1);let u=t[t.length-a-1];if(u==null&&(u=1),o===1)i[e-a-1]=u;else if(u===1)i[e-a-1]=o;else if(o!==u){const c=`Operands could not be broadcast together with shapes ${n} and ${t}.`;throw Error(c)}else i[e-a-1]=o}return i}function p_(n){const e={x:ai(n,"x","zerosLike")};return Me.runKernel(db,e)}const co=Nr({zerosLike_:p_});function zb(n,t){for(let e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function m_(n,t,e){const i=n.length+t.length,a=[];let o=0,u=0;for(let c=0;c<i;c++)e.indexOf(c)===-1?a.push(n[o++]):a.push(t[u++]);return a}function wp(n,t){const e=[],i=n.length;for(let o=0;o<i;o++)t.indexOf(o)===-1&&e.push(n[o]);const a=t.map(o=>n[o]);return[e,a]}function g_(n,t){const e=t.map(i=>1);return m_(n,e,t)}function Eg(n,t,e){Xt(zb(t,e),()=>`${n} supports only inner-most axes for now. Got axes ${t} and rank-${e} input.`)}function Ih(n,t){if(zb(n,t))return null;const e=[];for(let i=0;i<t;++i)n.indexOf(i)===-1&&e.push(i);return n.forEach(i=>e.push(i)),e}function Ub(n){return n.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function Th(n,t){const e=[];for(let i=t-n;i<t;++i)e.push(i);return e}function y_(n,t){let e=ai(n,"base","pow"),i=ai(t,"exp","pow");[e,i]=Vu(e,i);const a={a:e,b:i};return Me.runKernel(lb,a)}const Ty=Nr({pow_:y_});function Hu(n,t){if((Ja(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ja(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return LN(n,[],[],t)}function v_(n){const e={x:ai(n,"x","sqrt","float32")};return Me.runKernel(cb,e)}const cf=Nr({sqrt_:v_});function b_(n){const t=ai(n,"x","square"),e={};return Me.runKernel("Square",{x:t},e)}const Ou=Nr({square_:b_});function w_(n,t){Xt(T1(n),()=>"The f passed in variableGrads(f) must be a function"),Xt(t==null||Array.isArray(t)&&t.every(h=>h instanceof Jd),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const e=t!=null;if(!e){t=[];for(const h in Me.registeredVariables)t.push(Me.registeredVariables[h])}const i=e?t.filter(h=>!h.trainable):null,a=t.length;t=t.filter(h=>h.trainable),Xt(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const o=!0,{value:u,grads:c}=Me.gradients(n,t,null,o);Xt(c.some(h=>h!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Xt(u.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${u.rank} tensor`);const f={};return t.forEach((h,p)=>{c[p]!=null&&(f[h.name]=c[p])}),i?.forEach(h=>f[h.name]=null),{value:u,grads:f}}function x_(n,t){let e=ai(n,"a","sub"),i=ai(t,"b","sub");[e,i]=Vu(e,i);const a={a:e,b:i};return Me.runKernel(fb,a)}const ef=Nr({sub_:x_});function S_(n,t){let e=ai(n,"a","maximum"),i=ai(t,"b","maximum");[e,i]=Vu(e,i),e.dtype==="bool"&&(e=j1(e,"int32"),i=j1(i,"int32")),oo(e.shape,i.shape);const a={a:e,b:i};return Me.runKernel(sb,a)}const C_=Nr({maximum_:S_});function q1(n,t="float32"){if(Eh(n),t==="complex64"){const i=q1(n,"float32"),a=q1(n,"float32");return EN(i,a)}const e=Zo(Zt(n),t);return Me.makeTensor(e,n,t)}function Lg(n,t,e){const i=t.shape.length,a=i>1?t.shape[i-1]:1,o=e.length;let u=1;for(let m=a;m<o;++m)u*=e[m];const c=a<1?1:a,f=Zt(t.shape)/c,h=[...mr(e.slice(0,a)),1],p=Zt(e);return{sliceRank:a,numUpdates:f,sliceSize:u,strides:h,outputSize:p}}function A_(n,t,e){const i=N_(n,t,e),a=i<0?-(i+1):i;n.splice(a,0,t)}function N_(n,t,e){return k_(n,t,e||__)}function __(n,t){return n>t?1:n<t?-1:0}function k_(n,t,e){let i=0,a=n.length,o=0,u=!1;for(;i<a;){o=i+(a-i>>>1);const c=e(t,n[o]);c>0?i=o+1:(a=o,u=!c)}return u?i:-i-1}function E_(n,t,e,i,a){return $b(n,t,e,i,a,0)}function L_(n,t,e,i,a,o){return $b(n,t,e,i,a,o,!0)}function $b(n,t,e,i,a,o,u=!1,c=!1,f=!1){const h=[];for(let A=0;A<t.length;A++)t[A]>a&&h.push({score:t[A],boxIndex:A,suppressBeginIndex:0});h.sort(Dy);const p=o>0?-.5/o:0,m=[],v=[];for(;m.length<e&&h.length>0;){const A=h.pop(),{score:_,boxIndex:I,suppressBeginIndex:D}=A;if(_<a)break;let M=!1;for(let Y=m.length-1;Y>=D;--Y){const ct=R_(n,I,m[Y]);if(ct>=i){M=!0;break}if(A.score=A.score*I_(i,p,ct),A.score<=a)break}A.suppressBeginIndex=m.length,M||(A.score===_?(m.push(I),v.push(A.score)):A.score>a&&A_(h,A,Dy))}const y=m.length,S=e-y;c&&S>0&&(m.push(...new Array(S).fill(0)),v.push(...new Array(S).fill(0)));const N={selectedIndices:m};return u&&(N.selectedScores=v),f&&(N.validOutputs=y),N}function R_(n,t,e){const i=n.subarray(t*4,t*4+4),a=n.subarray(e*4,e*4+4),o=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),c=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=Math.min(a[0],a[2]),p=Math.min(a[1],a[3]),m=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),y=(c-o)*(f-u),S=(m-h)*(v-p);if(y<=0||S<=0)return 0;const N=Math.max(o,h),A=Math.max(u,p),_=Math.min(c,m),I=Math.min(f,v),D=Math.max(_-N,0)*Math.max(I-A,0);return D/(y+S-D)}function I_(n,t,e){const i=Math.exp(t*e*e);return e<=n?i:0}function Dy(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}const T_=new Map,D_=new Map;class P_{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class Iu{constructor(){this.classNameMap={}}static getMap(){return Iu.instance==null&&(Iu.instance=new Iu),Iu.instance}static register(t){Iu.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function M_(n,t,e){Xt(n.className!=null,()=>"Class being registered does not have the static className property defined."),Xt(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),Xt(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof e>"u"&&(e=n.className);const i=e,a=t+">"+i;return Iu.register(n),T_.set(a,n),D_.set(n,a),n}class Gu extends P_{minimize(t,e=!1,i){const{value:a,grads:o}=this.computeGradients(t,i);if(i!=null){const u=i.map(c=>({name:c.name,tensor:o[c.name]}));this.applyGradients(u)}else this.applyGradients(o);return La(o),e?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return w_(t,e)}dispose(){this.iterations_!=null&&La(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Hu(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Gu,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});class O_ extends Gu{static get className(){return"Adadelta"}constructor(t,e,i=null){super(),this.learningRate=t,this.rho=e,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=Me.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,a)=>{const o=Me.registeredVariables[i],u=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${i}/accum_grad`,variable:Fi(()=>co(o).variable(u))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${i}/accum_var`,variable:Fi(()=>co(o).variable(u))});const c=Array.isArray(t)?t[a].tensor:t[i];if(c==null)return;const f=this.accumulatedGrads[a].variable,h=this.accumulatedUpdates[a].variable;Fi(()=>{const p=In(dn(f,this.rho),dn(Ou(c),1-this.rho)),m=dn(uo(cf(In(h,this.epsilon)),cf(In(f,this.epsilon))),c),v=In(dn(h,this.rho),dn(Ou(m),1-this.rho));f.assign(p),h.assign(v);const y=In(dn(m,-this.learningRate),o);o.assign(y)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(La(this.accumulatedGrads.map(t=>t.variable)),La(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=t.length/2,i=!1;this.accumulatedGrads=t.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(i)})),this.accumulatedUpdates=t.slice(e,e*2).map(a=>({originalName:a.name,variable:a.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}class F_ extends Gu{static get className(){return"Adagrad"}constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,a)=>{const o=Me.registeredVariables[i];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${i}/accumulator`,variable:Fi(()=>d_(o.shape,this.initialAccumulatorValue).variable(!1))});const u=Array.isArray(t)?t[a].tensor:t[i];if(u==null)return;const c=this.accumulatedGrads[a].variable;Fi(()=>{const f=In(c,Ou(u));c.assign(f);const h=In(dn(uo(u,cf(In(f,Me.backend.epsilon()))),-this.learningRate),o);o.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&La(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulatedGrads=t.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}class B_ extends Gu{static get className(){return"Adam"}constructor(t,e,i,a=null){super(),this.learningRate=t,this.beta1=e,this.beta2=i,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Fi(()=>{this.accBeta1=Hu(e).variable(),this.accBeta2=Hu(i).variable()}),a==null&&(this.epsilon=Me.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);Fi(()=>{const i=ef(1,this.accBeta1),a=ef(1,this.accBeta2);e.forEach((o,u)=>{const c=Me.registeredVariables[o],f=!1;this.accumulatedFirstMoment[u]==null&&(this.accumulatedFirstMoment[u]={originalName:`${o}/m`,variable:Fi(()=>co(c).variable(f))}),this.accumulatedSecondMoment[u]==null&&(this.accumulatedSecondMoment[u]={originalName:`${o}/v`,variable:Fi(()=>co(c).variable(f))});const h=Array.isArray(t)?t[u].tensor:t[o];if(h==null)return;const p=this.accumulatedFirstMoment[u].variable,m=this.accumulatedSecondMoment[u].variable,v=In(dn(p,this.beta1),dn(h,1-this.beta1)),y=In(dn(m,this.beta2),dn(Ou(h),1-this.beta2)),S=uo(v,i),N=uo(y,a);p.assign(v),m.assign(y);const A=In(dn(uo(S,In(cf(N),this.epsilon)),-this.learningRate),c);c.assign(A)}),this.accBeta1.assign(dn(this.accBeta1,this.beta1)),this.accBeta2.assign(dn(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&La(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&La(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t),Fi(()=>{this.accBeta1.assign(Ty(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ty(this.beta2,this.iterations_+1))});const e=t.length/2,i=!1;this.accumulatedFirstMoment=t.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(i)})),this.accumulatedSecondMoment=t.slice(e,e*2).map(a=>({originalName:a.name,variable:a.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}class z_ extends Gu{static get className(){return"Adamax"}constructor(t,e,i,a=null,o=0){super(),this.learningRate=t,this.beta1=e,this.beta2=i,this.epsilon=a,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Fi(()=>{this.iteration=Hu(0).variable(),this.accBeta1=Hu(e).variable()}),a==null&&(this.epsilon=Me.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);Fi(()=>{const i=ef(1,this.accBeta1),a=uo(-this.learningRate,In(dn(this.iteration,this.decay),1));e.forEach((o,u)=>{const c=Me.registeredVariables[o],f=!1;this.accumulatedFirstMoment[u]==null&&(this.accumulatedFirstMoment[u]={originalName:`${o}/m`,variable:co(c).variable(f)}),this.accumulatedWeightedInfNorm[u]==null&&(this.accumulatedWeightedInfNorm[u]={originalName:`${o}/v`,variable:co(c).variable(f)});const h=Array.isArray(t)?t[u].tensor:t[o];if(h==null)return;const p=this.accumulatedFirstMoment[u].variable,m=this.accumulatedWeightedInfNorm[u].variable,v=In(dn(p,this.beta1),dn(h,1-this.beta1)),y=dn(m,this.beta2),S=a_(h),N=C_(y,S);p.assign(v),m.assign(N);const A=In(dn(uo(a,i),uo(v,In(N,this.epsilon))),c);c.assign(A)}),this.iteration.assign(In(this.iteration,1)),this.accBeta1.assign(dn(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&La(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&La(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}class jb extends Gu{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,a)=>{const o=Array.isArray(t)?t[a].tensor:t[i];if(o==null)return;const u=Me.registeredVariables[i];Fi(()=>{const c=In(dn(this.c,o),u);u.assign(c)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=IN(Hu(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}class U_ extends jb{static get className(){return"Momentum"}constructor(t,e,i=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=i,this.accumulations=[],this.m=Hu(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,a)=>{const o=Me.registeredVariables[i];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${i}/momentum`,variable:Fi(()=>co(o).variable(!1))});const u=this.accumulations[a].variable,c=Array.isArray(t)?t[a].tensor:t[i];c!=null&&Fi(()=>{let f;const h=In(dn(this.m,u),c);this.useNesterov?f=In(dn(this.c,In(c,dn(h,this.m))),o):f=In(dn(this.c,h),o),u.assign(h),o.assign(f)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&La(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulations=t.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}class $_ extends Gu{static get className(){return"RMSProp"}constructor(t,e=.9,i=0,a=null,o=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=i,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,a==null&&(this.epsilon=Me.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,a)=>{const o=Me.registeredVariables[i],u=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${i}/rms`,variable:Fi(()=>co(o).variable(u))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${i}/momentum`,variable:Fi(()=>co(o).variable(u))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${i}/mg`,variable:Fi(()=>co(o).variable(u))});const c=Array.isArray(t)?t[a].tensor:t[i];if(c==null)return;const f=this.accumulatedMeanSquares[a].variable,h=this.accumulatedMoments[a].variable;Fi(()=>{const p=In(dn(f,this.decay),dn(Ou(c),1-this.decay));if(this.centered){const m=this.accumulatedMeanGrads[a].variable,v=In(dn(m,this.decay),dn(c,1-this.decay)),y=uo(dn(c,this.learningRate),cf(ef(p,In(Ou(v),this.epsilon)))),S=In(dn(h,this.momentum),y);f.assign(p),m.assign(v),h.assign(S);const N=ef(o,S);o.assign(N)}else{const m=In(dn(f,this.decay),dn(Ou(c),1-this.decay)),v=In(dn(h,this.momentum),uo(dn(c,this.learningRate),cf(In(m,this.epsilon))));f.assign(m),h.assign(v);const y=ef(o,v);o.assign(y)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&La(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&La(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&La(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,i=!1;this.accumulatedMeanSquares=t.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(i)})),this.accumulatedMoments=t.slice(e,e*2).map(a=>({originalName:a.name,variable:a.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=t.slice(e*2,e*3).map(a=>({originalName:a.name,variable:a.tensor.variable(i)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}const j_=[O_,F_,B_,z_,U_,$_,jb];function H_(){for(const n of j_)M_(n)}function q_(n,t){const e=n.shape.length,i=t.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[i-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[i-1]} vs. ${e}`);if(Zt(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const a=t.shape,o=a[a.length-1];let u=1;for(let m=0;m<a.length-1;++m)u*=a[m];const c=n.shape,f=a.slice();f.pop();let h=1;for(let m=o;m<e;++m)h*=c[m],f.push(c[m]);const p=[...mr(n.shape).map(m=>m/h),1].slice(0,o);return[f,u,h,p]}const W1=-2,W_=-1;function V_(n,t,e){const i=n.shape.length;Xt(i===t.length,()=>`Error in slice${i}D: Length of begin ${t} must match the rank of the array (${i}).`),Xt(i===e.length,()=>`Error in slice${i}D: Length of size ${e} must match the rank of the array (${i}).`);for(let a=0;a<i;++a)Xt(t[a]+e[a]<=n.shape[a],()=>`Error in slice${i}D: begin[${a}] + size[${a}] (${t[a]+e[a]}) would overflow input.shape[${a}] (${n.shape[a]})`)}function G_(n,t,e){const i=[];for(let a=0;a<n.length;a++)i[a]=Math.ceil((t[a]-n[a])/e[a]);return i}function Y_(n,t,e){let i=e.length;for(let a=0;a<e.length;a++)if(e[a]>1){i=a;break}for(let a=i+1;a<e.length;a++)if(t[a]>0||e[a]!==n[a])return!1;return!0}function X_(n,t){let e=n.length>0?n[n.length-1]:1;for(let i=0;i<n.length-1;i++)e+=n[i]*t[i];return e}function K_(n,t,e){let i;const a=n.shape.length;typeof t=="number"?i=[t,...new Array(a-1).fill(0)]:t.length<a?i=t.concat(new Array(a-t.length).fill(0)):i=t.slice(),i.forEach(u=>{Xt(u!==-1,()=>"slice() does not support negative begin indexing.")});let o;return e==null?o=new Array(a).fill(-1):typeof e=="number"?o=[e,...new Array(a-1).fill(-1)]:e.length<a?o=e.concat(new Array(a-e.length).fill(-1)):o=e,o=o.map((u,c)=>u>=0?u:(Xt(u===-1,()=>`Negative size values should be exactly -1 but got ${u} for the slice() size at index ${c}.`),n.shape[c]-i[c])),[i,o]}function Q_(n,t,e,i,a,o,u,c,f){let h;if(i==null?(h=new Array(t.length),h.fill(1)):h=i,u!=null&&(u&u-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let p=!1;const m={dims:h.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:e.slice(),strides:h.slice(),beginMask:a,endMask:o,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:f};for(let D=0;D<m.dims;D++)p&&(1<<D&c)!==0&&m.numAddAxisAfterEllipsis++,1<<D&u&&(p=!0);p||(m.ellipsisMask|=1<<m.dims,m.dims++);const v={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Z_(m,v);let y=!0,S=!0,N=!0;const A=[],_=[];for(let D=0;D<n.length;++D){if(v.strides[D]===0)throw Error(`strides[${D}] must be non-zero`);const M=!!(v.shrinkAxisMask&1<<D),Y=n[D];if(Y===-1){A.push(M?1:-1);continue}const ct=[v.beginMask&1<<D,v.endMask&1<<D],it=[v.strides[D]>0?0:-1,v.strides[D]>0?Y:Y-1];if(M&&v.strides[D]<=0)throw Error("only stride 1 allowed on non-range indexing.");N=N&&v.strides[D]===1;const nt=!!(v.beginMask&1<<D&&v.endMask&1<<D);if(v.beginValid&&v.endValid){if(M){const B=v.begin[D]<0?Y+v.begin[D]:v.begin[D];if(v.begin[D]=B,v.end[D]=v.begin[D]+1,B<0||B>=Y)throw Error(`slice index ${v.begin[D]} of dimension ${D} out of bounds.`)}else v.begin[D]=Py(v.begin[D],0,v.strides[D],Y,ct,it),v.end[D]=Py(v.end[D],1,v.strides[D],Y,ct,it);const E=v.strides[D]===1&&v.begin[D]===0&&v.end[D]===Y;y=y&&E,S=S&&(D===0&&v.strides[D]===1||E)}else y=y&&v.strides[D]===1&&nt,S=S&&(D===0&&v.strides[D]===1||nt);let F,G=!1;if(v.beginValid&&v.endValid?(F=v.end[D]-v.begin[D],G=!0):M?(F=1,G=!0):nt&&Y>=0&&(v.strides[D]<0?F=-Y:F=Y,G=!0),G){let E;F===0||F<0!=v.strides[D]<0?E=0:E=Math.trunc(F/v.strides[D])+(F%v.strides[D]!==0?1:0),A.push(E)}else A.push(-1)}for(let D=0;D<v.finalShapeGatherIndices.length;++D){const M=v.finalShapeGatherIndices[D];M>=0?_.push(A[M]):M===W1&&_.push(1)}return{finalShapeSparse:_.filter((D,M)=>v.finalShapeGatherIndices[M]!==W1),finalShape:_,isIdentity:y,sliceDim0:S,isSimpleSlice:N,begin:v.begin,end:v.end,strides:v.strides}}function Z_(n,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let e=0;t.beginValid=n.begin!=null,t.endValid=n.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let i=0;i<n.dims;i++)if(1<<i&n.ellipsisMask){const a=Math.min(t.dims-(n.dims-i)+1+n.numAddAxisAfterEllipsis,t.dims);for(;e<a;e++)t.begin[e]=0,t.end[e]=0,t.strides[e]=1,t.beginMask|=1<<e,t.endMask|=1<<e,t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[e]=i}else if(1<<i&n.newAxisMask)t.finalShapeGatherIndices.push(W1),t.finalShapeGatherIndicesSparse.push(-1);else{if(e===t.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${t.dims} dims, ${t.begin.length}.`);n.begin!=null&&(t.begin[e]=n.begin[i]),n.end!=null&&(t.end[e]=n.end[i]),t.strides[e]=n.strides[i],n.beginMask&1<<i&&(t.beginMask|=1<<e),n.endMask&1<<i&&(t.endMask|=1<<e),n.shrinkAxisMask&1<<i?(t.finalShapeGatherIndices.push(W_),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<e):(t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(i)),t.inputShapeGatherIndicesSparse[e]=i,e++}}function Py(n,t,e,i,a,o){if(a[t])return e>0?o[t]:o[t+1&1];{const u=n<0?i+n:n;return u<o[0]?o[0]:u>o[1]?o[1]:u}}function J_(n,t){const e=n[0].length;n.forEach((a,o)=>{Xt(a.length===e,()=>`Error in concat${e}D: rank of tensors[${o}] must be the same as the rank of the rest (${e})`)}),Xt(t>=0&&t<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);const i=n[0];n.forEach((a,o)=>{for(let u=0;u<e;u++)Xt(u===t||a[u]===i[u],()=>`Error in concat${e}D: Shape of tensors[${o}] (${a}) does not match the shape of the rest (${i}) along the non-concatenated axis ${o}.`)})}function bh(n,t){const e=n[0].slice();for(let i=1;i<n.length;i++)e[t]+=n[i][t];return e}var so;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(so||(so={}));function tk(n,t,e){let i=new Array;if(e==null&&t==null)return i;if(t==null)for(;i.length<n+e.length;)i.push(-1);else i=t.slice();if(e==null)return i;if(n+e.length!==i.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${n+e.length}, but shape.rank = ${i.length}`);for(let a=1;a<e.length;++a){const o=e[a],u=i[i.length-e.length+a],c=i[u];if(o>=0)if(c>=0){if(c!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${a+n}] = ${o} but shape[${a+n}] = ${c}`)}else i[u]=o}return i}function ek(n){const t={FIRST_DIM_SIZE:so.FIRST_DIM_SIZE,VALUE_ROWIDS:so.VALUE_ROWIDS,ROW_LENGTHS:so.ROW_LENGTHS,ROW_SPLITS:so.ROW_SPLITS,ROW_LIMITS:so.ROW_LIMITS,ROW_STARTS:so.ROW_STARTS},e=[];for(const i of n)if(i in t)e.push(t[i]);else break;return e}function nk(n){return n.length===0?0:n[0]===so.FIRST_DIM_SIZE?n.length-1:n.length}function ik(n,t){if(n==null||t==null)return;const e=n.length,i=t.length;if(e>=i)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${i})`);for(let a=0;a<Math.min(e,i-1);++a){const o=n[a],u=t[a+1];if(o>=0&&u>=0&&o!==1&&o!==u)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${a-n.length}] = ${o} but ragged tensor input.flatValues.shape[${a-n.length}] = ${u}`)}}function rk(n,t,e){const i=e*(typeof n=="number"?n:n[0]),a=t*(typeof n=="number"?n:n[1]);return[i,a]}function Hb(n,t,e,i=!0){let a=[];if(i)a=a.concat(t.slice(0)),a.push(n[0]/e),a=a.concat(n.slice(1));else{a=a.concat(n[0]);const o=t.length;for(let u=0;u<o;++u)a=a.concat([n[u+1]/t[u],t[u]]);a=a.concat(n.slice(o+1))}return a}function qb(n,t,e=!0){const i=[];if(e){i.push(t);for(let a=t+1;a<n;++a)a<=2*t?(i.push(a),i.push(a-(t+1))):i.push(a)}else{const a=[],o=[];for(let u=1;u<n;++u)u>=t*2+1||u%2===1?o.push(u):a.push(u);i.push(...a),i.push(0),i.push(...o)}return i}function Wb(n,t,e,i=!0){const a=[];i?a.push(n[0]/e):a.push(n[0]*e);for(let o=1;o<n.length;++o)o<=t.length?i?a.push(t[o-1]*n[o]):a.push(n[o]/t[o-1]):a.push(n[o]);return a}function ak(n,t){const e=[0];for(let i=0;i<t;++i)e.push(n[i][0]);return e}function sk(n,t,e){const i=n.slice(0,1);for(let a=0;a<e;++a)i.push(n[a+1]-t[a][0]-t[a][1]);return i}const ok=1.7580993408473768,lk=1.0507009873554805;const uk=.3275911,ck=.254829592,fk=-.284496736,hk=1.421413741,dk=-1.453152027,pk=1.061405429;function My(n,t){if(n.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${t.length}.`);const e=new Float32Array(n.length*2);for(let i=0;i<e.length;i+=2)e[i]=n[i/2],e[i+1]=t[i/2];return e}const e1="->",mk=/->/g,Oy=",",Fy="...";function gk(n,t){n=n.replace(/\s/g,"");const e=(n.length-n.replace(mk,"").length)/e1.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${e1}").`);const[i,a]=n.split(e1);Xt(i.indexOf(Fy)===-1,()=>`The ellipsis notation ("${Fy}") is not supported yet.`);const o=i.split(Oy),u=o.length;if(t!==u)throw new Error(`Expected ${u} input tensors, received ${t}`);if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const c=[];for(let v=0;v<a.length;++v){const y=a[v];if(!o.some(S=>S.indexOf(y)!==-1))throw new Error(`Output subscripts contain the label ${y} not present in the input subscripts.`);c.indexOf(y)===-1&&c.push(y)}for(let v=0;v<i.length;++v){const y=i[v];c.indexOf(y)===-1&&y!==Oy&&c.push(y)}const f=new Array(o.length);for(let v=0;v<u;++v){if(new Set(o[v].split("")).size!==o[v].length)throw new Error(`Found duplicate axes in input component ${o[v]}. Support for duplicate axes in input is not implemented yet.`);f[v]=[];for(let y=0;y<o[v].length;++y)f[v].push(c.indexOf(o[v][y]))}const h=c.length,p=a.length,m=[];for(let v=p;v<h;++v)m.push(v);return{allDims:c,summedDims:m,idDims:f}}function yk(n,t){let e=new Array(n);e.fill(-1);for(let a=0;a<t.length;++a)e[t[a]]=a;const i=[];for(let a=0;a<n;++a)e[a]===-1&&i.push(a);return e=e.filter(a=>a!==-1),{permutationIndices:e,expandDims:i}}function vk(n,t,e){const i=new Array(n);for(let a=0;a<e.length;++a){const o=e[a].shape;for(let u=0;u<t[a].length;++u)i[t[a][u]]===void 0?i[t[a][u]]=o[u]:Xt(i[t[a][u]]===o[u],()=>`Expected dimension ${i[t[a][u]]} at axis ${u} of input shaped ${JSON.stringify(o)}, but got dimension ${o[u]}`)}}function bk(n,t){const e=n,i=[];let a=0;n.length===0&&e.push(-1),a=n.length+1;for(let u=0;u<a;++u)i.push([]);const o=[];for(let u=0;u<e.length;++u){const c=e[u],f=xk(t,c);for(const h of f)o.indexOf(h)===-1&&(i[u].push(h),o.push(h))}return{path:e,steps:i}}function wk(n){return n.every((t,e)=>t===e)}function xk(n,t){const e=[];for(let i=0;i<n.length;++i)(n[i].length===0||n[i].indexOf(t)!==-1||t===-1)&&e.push(i);return e}function Sk(n,t,e=0){let i=[];if(typeof t=="number")Xt(n.shape[e]%t===0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(n.shape[e]/t);else{const a=t.reduce((u,c)=>(c===-1&&(u+=1),u),0);Xt(a<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(o!==-1){const u=t.reduce((c,f)=>f>0?c+f:c);t[o]=n.shape[e]-u}Xt(n.shape[e]===t.reduce((u,c)=>u+c),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}function Ck(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function Ak(n,t){return`indices(${n}, 0) is invalid: ${t} < 0`}function Nk(n,t,e){return`indices(${n}, 0) is invalid: ${t} >= ${e}`}function _k(n,t){return`only one output dimension may be -1, not both ${n} and ${t}`}function kk(n,t){return`size ${n} must be non-negative, not ${t}`}function Ek(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Lk(n,t){const e=Zt(n),i=Zt(t);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${i}. inputShape=${n} outputShape= ${t}`}function Rk(n,t){const e=Zt(n),i=Zt(t);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${i}. inputShape=${n} outputShape=${t}`}function By(){return"segment ids must be >= 0"}function Ik(){return"segment ids are not increasing"}function Tk(n,t){return`Segment id ${n} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function Dk(n,t,e){return`Bad: indices[${n}] == ${t} out of range [0, ${e})`}function Pk(n,t,e){const i=[],a=n.length;for(let o=0;o<a;o++)o!==t?i.push(n[o]):i.push(e);return i}function Mk(n,t,e,i){const a=t.shape.length,o=n.shape.length;if(i!==0&&(i<-a||i>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${i}`);if(i<0&&(i+=a),i>o)throw new Error(`batchDims (${i}) must be less than rank(x) (
    ${o}).`);if(e<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${e}).`);for(let m=0;m<i;++m)if(n.shape[m]!==t.shape[m])throw new Error(`x.shape[${m}]: ${n.shape[m]} should be equal to indices.shape[${m}]: ${t.shape[m]}.`);const u=n.shape[e],c=[];let f=1,h=1,p=1;for(let m=0;m<i;++m)c.push(n.shape[m]),f*=n.shape[m];for(let m=i;m<e;m++)c.push(n.shape[m]),h*=n.shape[m];for(let m=i;m<a;m++)c.push(t.shape[m]);for(let m=e+1;m<o;m++)c.push(n.shape[m]),p*=n.shape[m];return{batchSize:f,sliceSize:p,outerSize:h,dimSize:u,outputShape:c}}function np(n){try{return n.map(t=>lf(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Ok(n){return n.map(t=>Mu(t))}H_();const Fk=Pe();Fk.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var zy;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(zy||(zy={}));var Uy;(function(n){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(Uy||(Uy={}));const Ra=Pe();Ra.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",()=>15);Ra.registerFlag("WEBGPU_CPU_FORWARD",()=>!0);Ra.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",()=>-1);Ra.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",()=>!0);Ra.registerFlag("WEBGPU_USE_LOW_POWER_GPU",()=>!1);Ra.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e3);Ra.registerFlag("WEBGPU_USE_PROFILE_TOOL",()=>!1);Ra.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",()=>!0);Ra.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",()=>!1);Ra.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",()=>-1);Ra.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",()=>!1);Ra.registerFlag("WEBGPU_PRINT_SHADER",()=>"");Ra.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",()=>!1);class Bk{constructor(t){t&&(this.vendor=t.vendor,this.architecture=t.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}getIntelGPUGeneration(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0}isIntel(){return this.vendor==="intel"}}class zk{constructor(t){this.device=t,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireBuffer(t,e,i=!1,a=!0){let o;const u=$y(t,e);return a?(this.freeBuffers.has(u)||this.freeBuffers.set(u,[]),this.freeBuffers.get(u).length>0?(o=this.freeBuffers.get(u).pop(),this.numFreeBuffers--):(o=this.device.createBuffer({size:t,usage:e,mappedAtCreation:i}),this.numBytesAllocated+=t)):(o=this.device.createBuffer({size:t,usage:e,mappedAtCreation:i}),this.numBytesAllocated+=t),this.usedBuffers.has(u)||this.usedBuffers.set(u,[]),this.usedBuffers.get(u).push(o),this.numUsedBuffers++,this.numBytesUsed+=t,o}releaseBuffer(t,e=!0){if(this.freeBuffers.size===0)return;const i=t.size,a=t.usage,o=$y(i,a),u=this.usedBuffers.get(o),c=u.indexOf(t);if(c<0)throw new Error("Cannot find the buffer in buffer manager");u[c]=u[u.length-1],u.pop(),this.numUsedBuffers--,this.numBytesUsed-=i,e?(this.freeBuffers.get(o).push(t),this.numFreeBuffers++):(t.destroy(),this.numBytesAllocated-=i)}getNumUsedBuffers(){return this.numUsedBuffers}getNumFreeBuffers(){return this.numFreeBuffers}dispose(){this.freeBuffers.forEach((t,e)=>{t.forEach(i=>{i.destroy()})}),this.usedBuffers.forEach((t,e)=>{t.forEach(i=>{i.destroy()})}),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function $y(n,t){return`${n}_${t}`}class Uk{constructor(t){this.device=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireTexture(t,e,i,a){const o=Hy(i),u=t*e*o,c=jy(t,e,i,a);if(this.freeTextures.has(c)||this.freeTextures.set(c,[]),this.usedTextures.has(c)||this.usedTextures.set(c,[]),this.numBytesUsed+=u,this.numUsedTextures++,this.freeTextures.get(c).length>0){this.numFreeTextures--;const h=this.freeTextures.get(c).shift();return this.usedTextures.get(c).push(h),h}this.numBytesAllocated+=u;const f=this.device.createTexture({size:[t,e],format:i,usage:a});return this.usedTextures.get(c).push(f),f}releaseTexture(t){if(this.freeTextures.size===0)return;const e=t.width,i=t.height,a=t.format,o=t.usage,u=jy(e,i,a,o);this.freeTextures.has(u)||this.freeTextures.set(u,[]),this.freeTextures.get(u).push(t),this.numFreeTextures++,this.numUsedTextures--;const c=this.usedTextures.get(u),f=c.indexOf(t);if(f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(f,1);const h=Hy(a),p=e*i*h;this.numBytesUsed-=p}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){this.freeTextures.forEach((t,e)=>{t.forEach(i=>{i.destroy()})}),this.usedTextures.forEach((t,e)=>{t.forEach(i=>{i.destroy()})}),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function jy(n,t,e,i){return`${n}_${t}_${e}_${i}`}function Hy(n){if(n==="rgba8unorm")return 16;throw new Error(`${n} is not supported!`)}function $k(n,t){if(Math.max(...n)>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");const e=n.length,i="xyzwuv",a=n.map(u=>`${t}.${i[u]}`),o=new Array(e-1);o[e-2]=a[e-1];for(let u=e-3;u>=0;--u)o[u]=`(${o[u+1]} * ${a[u+1]})`;return o}const Yl=(n,t,e)=>e==="int32"?`atomicAdd(${n}, bitcast<i32>(${t}));`:`
          {
            var oldValue = 0;
            loop {
              let newValueF32 = bitcast<f32>(oldValue) + (${t});
              let newValue = bitcast<i32>(newValueF32);
              let res = atomicCompareExchangeWeak(${n}, oldValue, newValue);
              if res.exchanged {
                break;
              }
              oldValue = res.old_value;
            }
          }`;var ff;(function(n){n[n.FROM_PIXELS=0]="FROM_PIXELS",n[n.DRAW=1]="DRAW"})(ff||(ff={}));const jk=(n,t,e,i,a)=>{const o={dtype:i.dtype,shape:i.shape},u=qk(e,o,t),c=n.createShaderModule({code:u,label:t.constructor.name});let f=Pe().get("WEBGPU_PRINT_SHADER");if(f!==""){f=f.toLowerCase();const h=f.split(",");(f==="all"||h.some(p=>t.shaderKey.toLowerCase().includes(p)))&&(console.group(t.shaderKey),console.debug(u),console.groupEnd())}return a?n.createComputePipelineAsync({compute:{module:c,entryPoint:"_start"},label:t.constructor.name,layout:"auto"}):n.createComputePipeline({compute:{module:c,entryPoint:"_start"},label:t.constructor.name,layout:"auto"})},Ye=(n,t="f32")=>{switch(n){case 1:return`${t}`;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${n}-component ${t} is not supported.`)}};function Ci(n){if(n<=1)return"i32";if(n===2)return"vec2<i32>";if(n===3)return"vec3<i32>";if(n===4)return"vec4<i32>";if(n===5)return"vec5";if(n===6)return"vec6";throw Error(`GPU for rank ${n} is not yet supported`)}function Ko(n){if(n===0)return"x";if(n===1)return"y";if(n===2)return"z";if(n===3)return"w";if(n===4)return"u";if(n===5)return"v";throw Error(`Index ${n} is not yet supported`)}function Wt(...n){let t;switch(n.length){case 0:t=`
        fn main()
      `;break;case 1:t=`
        fn main(${n[0]} : i32)
      `;break;default:throw Error("Unreachable")}return t}function qy(n,t){let e;return e=`
     ${Hk(t)}
      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,
                @builtin(global_invocation_id) GlobalId : vec3<u32>,
                @builtin(local_invocation_index) LocalIndex: u32,
                @builtin(workgroup_id) WorkgroupId : vec3<u32>,
                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {
        localId = LocalId;
        localIndex = LocalIndex;
        globalId = GlobalId;
        numWorkgroups = NumWorkgroups;
        workgroupId = WorkgroupId;
        ${n?"main(getGlobalIndex());":"main();"};
      }
    `,e}function Hk(n){return`
  @compute @workgroup_size(${n.workgroupSize[0]}, ${n.workgroupSize[1]}, ${n.workgroupSize[2]})
`}function qk(n,t,e){const i=[],a=e.workgroupSize[0]*e.workgroupSize[1]*e.workgroupSize[2];if(e.outputComponent=e.outputComponent?e.outputComponent:1,i.push(`

      var<private> localId: vec3<u32>;
      var<private> localIndex: u32;
      var<private> globalId: vec3<u32>;
      var<private> numWorkgroups: vec3<u32>;
      var<private> workgroupId: vec3<u32>;

      // Only used when the y/z dimension of workgroup size is 1.
      fn getGlobalIndex() -> i32 {
        ${Vb(e)?"  return i32(globalId.x);":`  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +
                workgroupId.y * numWorkgroups.x + workgroupId.x) * ${a}u +
                localIndex);
        `}
      }
    `),e.pixelsOpType!=null){const S=e.pixelsOpType===ff.FROM_PIXELS?`@group(0) @binding(0) var<storage, read_write> result: array<${Tu(t.dtype,e.outputComponent)}>;`:`@group(0) @binding(1) var<storage, read> inBuf : array<${Tu(n[0].dtype,e.outputComponent)}>;`,N=t.shape.length===3?"vec2<i32>":"i32";i.push(`
        struct Uniform {
          outShapeStrides : ${N},
          size            : i32,
          numChannels     : i32,
          alpha           : f32,
        };

        ${S}
        @group(0) @binding(2) var<uniform> uniforms: Uniform;
      `);const A=Vy(e);return[Wy,i.join(`
`),jd(t.shape),e.getUserCode(),qy(A,e)].join(`
`)}let o,u,c="struct Uniforms { NAN : f32, INFINITY : f32, ";e.variableNames.forEach((S,N)=>{const A=Ci(n[N].shape.length);c+=`${S.charAt(0).toLowerCase()+S.slice(1)}Shape : ${A}, `,o=n[N].shape.length-1,u=Ci(o),c+=`${S.charAt(0).toLowerCase()+S.slice(1)}ShapeStrides: ${u}, `});const f=Ci(t.shape.length);c+=`outShape : ${f}, `,o=t.shape.length-1,u=Ci(o),c+=`
         outShapeStrides: ${u}, `,e.size&&(c+="size : i32, "),e.uniforms&&(c+=e.uniforms),c+="};",c=Jk(c),i.push(c),e.atomic?i.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;
    `):i.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<${Tu(t.dtype,e.outputComponent)}>;
    `),e.variableNames.forEach((S,N)=>{i.push(`
      @group(0) @binding(${1+N}) var<storage, read> ${S}: array<${e.variableComponents?Tu(n[N].dtype,e.variableComponents[N]):Tu(n[N].dtype,e.outputComponent)}>;
        `)}),c!==""&&i.push(`
      @group(0) @binding(${1+e.variableNames.length}) var<uniform> uniforms: Uniforms;
      `);const h=Kk(t.shape,e.dispatchLayout),p=[Wy,i.join(`
`)+Vk,jd(t.shape),h,Qk(t.shape.length)];e.atomic||p.push(Zk(t.shape,t.dtype,e.outputComponent)),e.variableNames.forEach((S,N)=>{p.push(`${jd(n[N].shape,S)}`)});const m=n.map((S,N)=>Xk(S,t.shape,e.variableComponents?e.variableComponents[N]:e.outputComponent,e.dispatchLayout.x.length===t.shape.length)).join(`
`);p.push(m),p.push(e.getUserCode());const v=Vy(e);return p.push(qy(v,e)),p.join(`
`)}function Wk(n,t,e){let i=n.shaderKey;if(n.pixelsOpType!=null)return i;const a=[],o=[];t.forEach(p=>{a.push(p.shape),o.push(p.dtype)}),a.push(e.shape),o.push(e.dtype);const u=t.map(p=>ep(p.shape,e.shape)),c=t.map(p=>el(p.shape,e.shape)).join("_"),f=u.map(p=>p.join("_")).join(";"),h=Vb(n)?"flatDispatch":"";return i+="_"+(n.workgroupSize?n.workgroupSize.join(","):"")+a.map(p=>p.length).join(",")+o.join(",")+n.variableNames.join(",")+f+c+h,i}const Wy=`
  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};
  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};

  // Checks whether coordinates lie within the bounds of the shape.
  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {
    return all(coord >= vec2<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {
    return all(coord >= vec3<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {
    return all(coord >= vec4<i32>(0)) && all(coord < shape);
  }

  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {
    return coord;
  }
  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {
    return dot(coords, vec2<i32>(shape.y, 1));
  }
  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {
    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));
  }
  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
    return dot(coords, vec4<i32>(
        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
  }
  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {
    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;
  }
  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {
    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;
  }

  // NaN defination in IEEE 754-1985 is :
  //   - sign = either 0 or 1.
  //   - biased exponent = all 1 bits.
  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).
  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers
  fn isnan(val: f32) -> bool {
    let floatToUint: u32 = bitcast<u32>(val);
    return (floatToUint & 0x7fffffffu) > 0x7f800000u;
  }
  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {
    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);
    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);
  }
`,Vk=`
  fn isinf(val: f32) -> bool {
    return abs(val) == uniforms.INFINITY;
  }
`;function jd(n,t=""){const e=n.length,i=t!==""?`get${t.charAt(0).toUpperCase()+t.slice(1)}CoordsFromIndex`:"getCoordsFromIndex",a=t!==""?`${t.charAt(0).toLowerCase()+t.slice(1)}ShapeStrides`:"outShapeStrides";if(e<=1)return`fn ${i}(index : i32) -> i32 { return index; }`;const o=mr(n),u=Ci(e),c=[];for(let h=0;h<e;h++)c.push(`d${h}`);if(o.length===1)return`    fn ${i}(index : i32) -> vec2<i32> {
      let d0 = index / uniforms.${a}; let d1 = index - d0 * uniforms.${a};
      return vec2<i32>(d0, d1);
    }`;let f;return f="var index2 = index;"+o.map((h,p)=>{const m=`let ${c[p]} = index2 / uniforms.${a}.${Ko(p)}`,v=p===o.length-1?`let ${c[p+1]} = index2 - ${c[p]} * uniforms.${a}.${Ko(p)}`:`index2 = index2 - ${c[p]} * uniforms.${a}.${Ko(p)}`;return`${m}; ${v};`}).join(""),`
    fn ${i}(index : i32) -> ${u} {
      ${f}
      return ${u}(${c.join(",")});
    }
  `}function Gk(n,t){const e=n.name,i=n.shape.length,a=Ci(i),o="get"+e.charAt(0).toUpperCase()+e.slice(1),u=["d0","d1","d2","d3","d4","d5"].slice(0,i),c=u.map(p=>`${p} : i32`).join(", ");if(i<1)return`
      fn ${o}() -> ${Ye(t)} {
        return ${Ye(t)}(${e}[0]);
      }
    `;const f=`uniforms.${e.charAt(0).toLowerCase()+e.slice(1)}Shape`;let h=`${i}D`;return i===0&&(h="1D"),`
    fn ${o}(${c}) -> ${Ye(t)} {
      return ${Ye(t)}(${e}[getIndexFromCoords${h}(${a}(${u.join(",")}),
        ${f})${t===1?"":` / ${t}`}]);
    }
   `}function Yk(n,t,e,i){const a=n.name,o=a.charAt(0).toUpperCase()+a.slice(1),u="get"+o+"ByOutput",c=n.shape.length,f=t.length,h=Ci(f);if(el(n.shape,t)&&i)return`
    fn ${u}Index(globalIndex : i32) -> ${Ye(e)} {
      return ${Ye(e)}(${a}[globalIndex]);
    }

    fn ${u}Coords(coords : ${h}) -> ${Ye(e)} {
      return ${Ye(e)}(${a}[${f>1?"getOutputIndexFromCoords(coords)":"coords"}${e===1?"":` / ${e}`}]);
    }
    `;const p=ep(n.shape,t),m=f-c;let v="";if(c===0)return`
    fn ${u}Index(globalIndex : i32) -> ${Ye(e)}{
      return get${o}();
    }

    fn ${u}Coords(coords : ${h}) -> ${Ye(e)}{
      return get${o}();
    }
  `;f<2&&p.length>=1?v="coords = 0;":v=p.map(A=>`coords.${Ko(A+m)} = 0;`).join(`
`);let y="";if(f<2&&c>0)y="coords";else if(f>1){const A=Ci(c),_=n.shape.map((I,D)=>`coords.${Ko(D+m)}`).join(", ");y=`${A}(${_})`}else y="coords";const S=`uniforms.${a.charAt(0).toLowerCase()+a.slice(1)}Shape`,N=`${c}D`;return`
  fn ${u}Index(globalIndex : i32) -> ${Ye(e)} {
    var coords = getCoordsFromIndex(globalIndex);
    ${v}
    return ${Ye(e)}(${a}[getIndexFromCoords${N}(${y}, ${S})${e===1?"":` / ${e}`}]);
  }

  fn ${u}Coords(coordsIn : ${h}) -> ${Ye(e)} {
    var coords = coordsIn;
    ${v}
    return ${Ye(e)}(${a}[getIndexFromCoords${N}(${y}, ${S})${e===1?"":` / ${e}`}]);
  }
`}function Xk(n,t,e,i){let a=Gk(n,e);return n.shape.length<=t.length&&(a+=Yk(n,t,e,i)),a}function Kk(n,t){const{x:e,y:i=[],z:a=[]}=t,o=n.length,u=e.length+i.length+a.length;if(u!==o)return"";if(e.length===o)return`fn getOutputCoords() -> ${Ci(o)}{
    let globalIndex = getGlobalIndex();
    return getCoordsFromIndex(globalIndex);
  }
  `;let c="";const f=[e,i,a];for(let v=0;v<f.length;v++){const y=f[v];if(y.length!==0)if(y.length===1)c+=`let d${y[0]} = i32(globalId[${v}]);`;else{const S=$k(y,"uniforms.outShape");c+=`var index${v} = i32(globalId[${v}]);`;for(let N=0;N<S.length;N++)c+=`let d${y[N]} = index${v} / ${S[N]};`,N===S.length-1?c+=`let d${y[N+1]} = index${v} - d${y[N]} * ${S[N]};`:c+=`index${v} = index${v} - d${y[N]} * ${S[N]};`}}const h=[];for(let v=0;v<u;v++)h.push(`d${v}`);const p=Ci(u);let m=`fn getOutputCoords() -> ${p} {
  ${c}
`;return h.length===0?m+=`return ${p}(0); }`:m+=`return ${p}(${h.join(",")}); }`,m}function Qk(n){let t="";switch(n){case 0:case 1:t+=`
        fn getOutputIndexFromCoords(coords : i32) -> i32 {
          return coords;
        }
        `;break;case 2:t+=`
        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {
          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));
        }
        `;break;case 3:t+=`
        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {
          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));
        }
        `;break;case 4:t+=`
        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
          return dot(coords, vec4<i32>(
            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));
        }
        `;break;case 5:t+=`
        fn getOutputIndexFromCoords(coords : vec5) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u;
        }
        `;break;case 6:t+=`
        fn getOutputIndexFromCoords(coords : vec6) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u * uniforms.outShapeStrides.u +
              coords.v;
        }
        `;break;default:Xt(!1,()=>`Unsupported ${n}D shape`);break}return t}function Vb(n){return n.dispatch[1]===1&&n.dispatch[2]===1}function Tu(n,t=1){if(n==="float32")return Ye(t,"f32");if(n==="int32"||n==="bool")return Ye(t,"i32");throw new Error(`type ${n} is not supported.`)}function Zk(n,t,e){const i=n.length,a=Tu(t,e);let o=`fn setOutputAtIndex(flatIndex : i32, value : ${Ye(e)}) {
      result[flatIndex] = ${a}(value);
    }

    fn setOutputAtIndexI32(flatIndex : i32, value : ${Ye(e,"i32")}) {
      result[flatIndex] = ${a}(value);
    }
    `;if(i>=2){const u=["d0","d1","d2","d3","d4","d5"].slice(0,i),c=Ci(i);o+=`
      fn setOutputAtCoords(${u.map(f=>`${f} : i32`).join(", ")}, value : ${Ye(e)}) {
        let flatIndex = getOutputIndexFromCoords(${c}(${u.join(", ")}));
        setOutputAtIndex(flatIndex${e===1?"":` / ${e}`}, value);
      }
      fn setOutputAtCoordsI32(${u.map(f=>`${f} : i32`).join(", ")}, value : ${Ye(e,"i32")}) {
        let flatIndex = getOutputIndexFromCoords(${c}(${u.join(", ")}));
        setOutputAtIndexI32(flatIndex${e===1?"":` / ${e}`}, value);
      }
    `}return o}function Jk(n){const t=/(\w+)\s*:\s*vec(5|6)/g;n=n.replace(t,i=>"@align(16) "+i);const e=/vec(5|6)\s*,\s*(\w+)/g;return n=n.replace(e,(i,a,o)=>`vec${a}, @align(16) ${o}`),n}function Vy(n){return!(n.dispatchLayout.hasOwnProperty("y")&&n.dispatchLayout.y.length!==0||n.dispatchLayout.hasOwnProperty("z")&&n.dispatchLayout.z.length!==0)}const Fu=n=>{let t=1;for(let e=0;e<n.length;e++)t*=n[e];return t};function Vt(n,t,e=[1,1,1],i=[1,1,1]){const[a,o,u]=[Math.ceil(Fu(n.x.map(c=>t[c]))/(e[0]*i[0])),n.y?Math.ceil(Fu(n.y.map(c=>t[c]))/(e[1]*i[1])):1,n.z?Math.ceil(Fu(n.z.map(c=>t[c]))/(e[2]*i[2])):1];return[a,o,u]}function tE(n,t,e,i=!1){const a=[8,8,1],o=[4,4,1];return i||(n<=8&&(o[1]=1),t<=16&&e<=16&&(a[0]=4)),{workgroupSize:a,elementsPerThread:o}}function Gb(n,t,e=!1){if(e)return[8,8,1];const i=Fu(n.x.map(o=>t[o])),a=Fu(n.y.map(o=>t[o]));return i<=4?[4,16,1]:a<=4?[16,4,1]:[16,16,1]}function Yb(n,t,e=!1){if(e)return[4,4,1];const i=Fu(n.x.map(o=>t[o])),a=Fu(n.y.map(o=>t[o]));return i<=4?[1,2,1]:a<=4?[2,1,1]:[2,2,1]}function Jt(n){return{x:n.map((t,e)=>e)}}function Gy(n){if(n==="float32"||n==="int32"||n==="bool"||n==="string")return 4;if(n==="complex64")return 8;throw new Error(`Unknown dtype ${n}`)}function Xb(){return!!(typeof globalThis<"u"&&globalThis.navigator&&globalThis.navigator.gpu)}function Kb(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>{e!=null&&Xt(e.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGPU backend.`)})}var ro;(function(n){n[n.MatMulReduceProgram=0]="MatMulReduceProgram",n[n.MatMulSplitKProgram=1]="MatMulSplitKProgram",n[n.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",n[n.MatMulPackedProgram=3]="MatMulPackedProgram",n[n.MatMulMax=4]="MatMulMax"})(ro||(ro={}));const eE=Pe().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),nE=(n,t)=>{const e=n.limits.maxComputeWorkgroupsPerDimension,i=t.dispatchLayout,a=t.dispatch;if(a.every(u=>u<=e))return a;Xt(a[0]>e&&i.y===void 0&&i.z===void 0,()=>"Dispatch size exceeds WebGPU limits in Y or Z dimension.");let o=Math.ceil(Math.sqrt(a[0]));return o>e?(o=Math.ceil(Math.cbrt(a[0])),Xt(o<=e,()=>"Total dispatch size exceeds WebGPU maximum."),[o,o,o]):[o,o,1]};class xp extends X5{nextDataId(){return xp.nextDataId++}constructor(t,e){if(super(),this.commandQueueOwnedIds=new WeakSet,this.dispatchCountInPass=0,this.disposed=!1,this.downloadWaitMs=0,this.tensorDataPendingDisposal=[],this.queryResolveBuffer=null,this.querySet=null,this.querySetCount=2,this.stagingPendingDisposal=[],this.uniformPendingDisposal=[],this.uploadWaitMs=0,this.hasReadSyncWarned=!1,this.hasTimestampQueryWarned=!1,!Xb())throw new Error("WebGPU is not supported on this device");this.pipelineCache={},this.device=t,this.queue=t.queue,this.commandEncoder=null,this.computePassEncoder=null,this.adapterInfo=new Bk(e),this.supportTimestampQuery=this.device.features.has("timestamp-query"),this.thresholdToIncreaseWorkgroups=this.adapterInfo.intelGPUGeneration>=12?16:8,this.bufferManager=new zk(this.device),this.textureManager=new Uk(this.device),this.tensorMap=new J4(this,Jm()),Pe().getBool("WEBGPU_USE_PROFILE_TOOL")&&(this.dummyCanvas=document.createElement("canvas"),this.dummyCanvas.width=1,this.dummyCanvas.height=1,this.dummyContext=this.dummyCanvas.getContext("webgpu"),this.dummyContext.configure({device:t,format:"bgra8unorm"}),document.body.appendChild(this.dummyCanvas))}floatPrecision(){return 32}disposeData(t,e=!1){if(!this.tensorMap.has(t))return!0;const i=this.tensorMap.get(t);return e?i.refCount=0:i.refCount--,i.refCount>0?!1:(i.complexTensorInfos!=null&&(this.disposeData(i.complexTensorInfos.real.dataId),this.disposeData(i.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(t)?(this.tensorDataPendingDisposal.push(t),!0):(this.releaseResource(t),this.tensorMap.delete(t),!0))}memory(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}releaseResource(t){const e=this.tensorMap.get(t);if(!(!e||!e.resource)){if(e.external){e.resource=null;return}e.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(e.resource):e.resource instanceof GPUTexture&&this.textureManager.releaseTexture(e.resource),e.resource=null}}refCount(t){return this.tensorMap.has(t)?this.tensorMap.get(t).refCount:0}incRef(t){const e=this.tensorMap.get(t);e.refCount++}decRef(t){if(this.tensorMap.has(t)){const e=this.tensorMap.get(t);e.refCount--}}write(t,e,i){if(i==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.tensorMap.set(a,{dtype:i,shape:e,values:t,refCount:1}),a}move(t,e,i,a,o){if(a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(t,{dtype:a,shape:i,values:e,refCount:o})}submitQueue(){this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach(t=>{this.releaseResource(t),this.tensorMap.delete(t)}),this.uniformPendingDisposal.forEach(t=>this.bufferManager.releaseBuffer(t)),this.stagingPendingDisposal.forEach(t=>this.bufferManager.releaseBuffer(t,!1)),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]}ensureCommandEncoderReady(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())}endComputePassEncoder(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}async checkCompileCompletionAsync(){let t;try{t=await Promise.all(Object.values(this.pipelineCache))}catch(e){throw new Error(e.message)}Object.keys(this.pipelineCache).map((e,i)=>{this.pipelineCache[e]=t[i]})}async getBufferData(t){if(Pe().getBool("WEBGPU_ENGINE_COMPILE_ONLY"))return console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),null;const e=t.size,i=this.bufferManager.acquireBuffer(e,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(t,0,i,0,e),this.submitQueue(),await i.mapAsync(GPUMapMode.READ);const a=i.getMappedRange().slice(0);return i.unmap(),i!=null&&this.bufferManager.releaseBuffer(i),Pe().getBool("WEBGPU_USE_PROFILE_TOOL")&&(Xt(this.dummyContext!==void 0,()=>"Fail to get context for profiling tool"),this.dummyContext.getCurrentTexture()),a}convertAndCacheOnCPU(t,e){const i=this.tensorMap.get(t);return i.values=e,i.values}readSync(t){const e=this.tensorMap.get(t),{values:i,complexTensorInfos:a}=e;if(i!=null||e.dtype==="string")return i;if(e.dtype==="complex64"){const N=this.readSync(a.real.dataId),A=this.readSync(a.imag.dataId),_=Ym(My(N,A).buffer,"float32");return this.convertAndCacheOnCPU(t,_),_}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));const o=["opaque","premultiplied"],u=e.resource,c=u.size;Xt(c%4===0,()=>"Because there is 4 bytes for one pixel, buffer size must be multiple of 4.");const f=c/4,h=new ArrayBuffer(c),p=256,m=256,v=o.map(N=>new OffscreenCanvas(p,m)),y=new OffscreenCanvas(p,m);this.endComputePassEncoder(),v.map((N,A)=>{const _=N.getContext("webgpu");return _.configure({device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:o[A]}),_.getCurrentTexture()}).map((N,A)=>{const _=p*4,I=(nt,F,G)=>{this.ensureCommandEncoderReady(),this.commandEncoder.copyBufferToTexture({buffer:u,bytesPerRow:_,offset:G},{texture:N},{width:nt,height:F}),this.submitQueue();const E=y.getContext("2d",{willReadFrequently:!0});E.clearRect(0,0,nt,F),E.drawImage(v[A],0,0);const B=E.getImageData(0,0,nt,F).data,tt=o[A],et=new Uint8ClampedArray(h,G,nt*F*4);for(let ht=0;ht<et.length;ht+=4)if(tt==="premultiplied")et[ht+3]=B[ht+3];else{const X=B[ht];et[ht]=B[ht+2],et[ht+1]=B[ht+1],et[ht+2]=X}},D=Math.floor(f/(p*m));let M=p,Y=m,ct=0;for(let nt=0;nt<D;nt++)I(M,Y,ct),ct+=p*m*4;const it=f%(p*m);Y=Math.floor(it/p),Y>0&&(I(M,Y,ct),ct+=Y*(p*4)),M=it%p,M>0&&I(M,1,ct)});const S=Ym(h,e.dtype);return this.convertAndCacheOnCPU(t,S),S}async read(t){if(!this.tensorMap.has(t))throw new Error(`Tensor ${t} was not registered!`);const e=this.tensorMap.get(t),{values:i}=e;if(i!=null)return i;let a;if(e.dtype==="complex64"){const o=await Promise.all([this.read(e.complexTensorInfos.real.dataId),this.read(e.complexTensorInfos.imag.dataId)]),u=o[0],c=o[1];a=My(u,c)}else{const o=await this.getBufferData(e.resource);a=Ym(o,e.dtype)}return this.convertAndCacheOnCPU(t,a),a}copyBuffer(t){const e=t.size,i=t.usage,a=this.bufferManager.acquireBuffer(e,i);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(t,0,a,0,e),this.submitQueue(),a}createTensorFromGPUData(t,e,i){let a=t.buffer;if(i==="complex64")throw new Error("Cannot write to a complex64 dtype. ");const o={id:this.nextDataId()};this.tensorMap.set(o,{dtype:i,shape:e,values:null,refCount:1,external:t.zeroCopy});const u=this.tensorMap.get(o),c=Gy(u.dtype)*Zt(u.shape);if(t.buffer.size<c)throw new Error(`GPUBuffer size(${t.buffer.size}) is smaller than tensor size(${c})!`);if((t.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!==(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return t.zeroCopy!==!0&&(a=this.copyBuffer(a)),u.resource=a,Jm().makeTensorFromDataId(o,e,i,this)}readToGPU(t){const e=this.tensorMap.get(t),{values:i,dtype:a,shape:o,resource:u}=e;if(a==="complex64")throw new Error("Does not support reading buffer for complex64 dtype.");if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=u,f=c.size,h=c.usage,p=this.bufferManager.acquireBuffer(f,h);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(u,0,p,0,f),this.submitQueue();const m=this.makeTensorInfo(o,a),v=Jm().makeTensorFromTensorInfo(m),y=this.tensorMap.get(m.dataId);return y.resource=p,{tensorRef:v,buffer:p}}bufferSync(t){const e=this.readSync(t.dataId);if(t.dtype==="string")try{const i=e.map(a=>lf(a));return ar(t.shape,t.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ar(t.shape,t.dtype,e)}async time(t){!this.supportTimestampQuery&&!this.hasTimestampQueryWarned&&(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0);const e=this.activeTimers,i=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,t();const o=Uu(this.activeTimers.map(h=>h.query)).filter(h=>h!=null),u=Uu(this.activeTimers.map(h=>h.name)).filter(h=>h!=null);this.activeTimers=e,a&&(this.programTimersStack=null);const c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},f=await Promise.all(o);return c.kernelMs=tC(f),c.getExtraProfileInfo=()=>f.map((h,p)=>({name:u[p],ms:h})).map(h=>`${h.name}: ${h.ms}`).join(", "),this.uploadWaitMs=0,this.downloadWaitMs=0,c}makeTensorInfo(t,e,i){return e==="string"&&i!=null&&i.length>0&&mp(i[0])&&(i=i.map(o=>Mu(o))),{dataId:this.write(i,t,e),shape:t,dtype:e}}tensorToBinding(t){if(!t)return null;const i=this.tensorMap.get(t.dataId).resource;return i instanceof GPUBuffer?{buffer:i}:i instanceof GPUTexture?i.createView():i}uploadToGPU(t){const e=this.tensorMap.get(t);if(e.resource!=null)return;const i=Gy(e.dtype)*Zt(e.shape);let a;const o=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(e.values){if(a=this.bufferManager.acquireBuffer(i,o,!0),a.mapState==="unmapped"){const u=this.bufferManager.acquireBuffer(i,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),c=u.getMappedRange();e.dtype==="int32"||e.dtype==="bool"?new Int32Array(c).set(e.values):new Float32Array(c).set(e.values),u.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(u,0,a,0,i),this.stagingPendingDisposal.push(u)}else{const u=a.getMappedRange();e.dtype==="int32"||e.dtype==="bool"?new Int32Array(u).set(e.values):new Float32Array(u).set(e.values),a.unmap()}e.values=null}else a=this.bufferManager.acquireBuffer(i,o);e.resource=a}makeUniforms(t){let e=0,i=0;const a=[];let o=1;t.forEach(f=>{f.data.length===0&&(f.data=[1]);let h;switch(f.data.length){case 1:h=4;break;case 2:h=8;break;case 3:h=16;break;case 4:h=16;break;case 5:h=16;break;case 6:h=16;break;default:Xt(!1,()=>`Unsupported ${f.data.length}D shape`)}(i===5||i===6)&&(h=16),h>o&&(o=h),e=Math.ceil(e/h)*h,i=f.data.length,a.push(e),e+=f.data.length*4}),e=Math.ceil(e/o)*o;const u=new ArrayBuffer(e);t.forEach((f,h)=>{const p=a[h];f.type==="int32"?new Int32Array(u,p,f.data.length).set(f.data):f.type==="uint32"?new Uint32Array(u,p,f.data.length).set(f.data):new Float32Array(u,p,f.data.length).set(f.data)});const c=this.bufferManager.acquireBuffer(e,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(c,0,u,0,e),this.uniformPendingDisposal.push(c),{offset:0,size:e,buffer:c}}runWebGPUProgram(t,e,i,a,o){if(o||(o=this.makeTensorInfo(t.outputShape,i)),Zt(o.shape)===0)return this.tensorMap.get(o.dataId).values=zu(o.dtype,0),o;this.uploadToGPU(o.dataId),t.dispatch=nE(this.device,t);const u=e.map((f,h)=>{if(f.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return this.uploadToGPU(f.dataId),{dtype:this.tensorMap.get(f.dataId).dtype,shape:f.shape,name:t.variableNames[h]}});t.shaderKey=Wk(t,u,o);const c=Pe().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return t.shaderKey in this.pipelineCache||(this.pipelineCache[t.shaderKey]=jk(this.device,t,u,o,c)),t.pipeline=this.pipelineCache[t.shaderKey],c||this.recordAndSubmit(t,o,e,a),o}recordAndSubmit(t,e,i,a){if(t.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");let o=[],u=[];const c="int32";if(t.pixelsOpType==null){o.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),u=i.concat(e).map(y=>y.shape);const v="int32";u.map(y=>{o.push({type:v,data:y});const S=mr(y);o.push({type:v,data:S})})}else{const v=mr(e.shape);o.push({type:c,data:v})}if(t.size){const v=Zt(t.outputShape);o.push({type:c,data:[t.outputComponent?v/t.outputComponent:v]})}a&&(o=[...o,...a]);const f=[this.tensorToBinding(e),...i.map(v=>this.tensorToBinding(v)),this.makeUniforms(o)];i.forEach(v=>{this.commandQueueOwnedIds.add(v.dataId)}),this.commandQueueOwnedIds.add(e.dataId);const h=this.device.createBindGroup({layout:t.pipeline.getBindGroupLayout(0),entries:f.map((v,y)=>({binding:y,resource:v}))}),p=this.activeTimers!=null;this.ensureCommandEncoderReady();const m={};p&&this.supportTimestampQuery?(this.endComputePassEncoder(),this.querySet==null&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),m.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(m)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(m)),this.computePassEncoder.setPipeline(t.pipeline),this.computePassEncoder.setBindGroup(0,h),this.computePassEncoder.dispatchWorkgroups(t.dispatch[0],t.dispatch[1],t.dispatch[2]),this.dispatchCountInPass++,(p||Pe().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||t.pixelsOpType===ff.DRAW)&&(this.endComputePassEncoder(),p?this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime()}):this.submitQueue())}async getQueryTime(){if(!this.supportTimestampQuery)return 0;this.queryResolveBuffer==null&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(this.querySetCount*8,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0);const t=this.bufferManager.acquireBuffer(this.querySetCount*8,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.querySetCount*8),this.submitQueue(),await t.mapAsync(GPUMapMode.READ);const e=new BigUint64Array(t.getMappedRange()),i=Number(e[1]-e[0])/1e6;return t.unmap(),this.bufferManager.releaseBuffer(t),i}shouldExecuteOnCPU(t,e=eE){return Pe().getBool("WEBGPU_CPU_FORWARD")&&t.every(i=>this.tensorMap.get(i.dataId).resource==null&&Zt(i.shape)<e)}numDataIds(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length}dispose(){this.disposed||(this.querySet!=null&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}xp.nextDataId=0;Xb()&&TN("webgpu",async()=>{const n={powerPreference:Pe().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},t=await navigator.gpu.requestAdapter(n),e={},i=[];t.features.has("timestamp-query")&&i.push("timestamp-query"),t.features.has("bgra8unorm-storage")&&i.push(["bgra8unorm-storage"]),e.requiredFeatures=i;const a=t.limits;e.requiredLimits={maxComputeWorkgroupStorageSize:a.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:a.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:a.maxStorageBufferBindingSize,maxBufferSize:a.maxBufferSize,maxComputeWorkgroupSizeX:a.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:a.maxComputeInvocationsPerWorkgroup};const o=await t.requestDevice(e),u="info"in t?t.info:"requestAdapterInfo"in t?await t.requestAdapterInfo():void 0;return new xp(o,u)},3);var Ie;(function(n){n[n.ADD=0]="ADD",n[n.ATAN2=1]="ATAN2",n[n.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",n[n.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",n[n.DIV=4]="DIV",n[n.ELU_DER=5]="ELU_DER",n[n.EQUAL=6]="EQUAL",n[n.FLOOR_DIV=7]="FLOOR_DIV",n[n.GREATER=8]="GREATER",n[n.GREATER_EQUAL=9]="GREATER_EQUAL",n[n.LESS=10]="LESS",n[n.LESS_EQUAL=11]="LESS_EQUAL",n[n.LOGICAL_AND=12]="LOGICAL_AND",n[n.LOGICAL_OR=13]="LOGICAL_OR",n[n.MAX=14]="MAX",n[n.MIN=15]="MIN",n[n.MOD=16]="MOD",n[n.MUL=17]="MUL",n[n.NOT_EQUAL=18]="NOT_EQUAL",n[n.POW=19]="POW",n[n.PRELU=20]="PRELU",n[n.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",n[n.SUB=22]="SUB"})(Ie||(Ie={}));const iE="let resultTemp = a + b;",rE="let resultTemp = atan2(a, b);",aE="let resultTemp = areal * breal - aimag * bimag;",sE="let resultTemp = areal * bimag + aimag * breal;",oE="let resultTemp = a / b;",lE="let resultTemp = select(a * (b + 1.0), a, b >= b - b);",uE=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a == b);
`,cE=`
  let remainder =
      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));
  let quotient = (a - remainder) / b;
  let resultTemp =
      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));
`,fE=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a > b);
`,hE=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a >= b);
`,dE=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a < b);
`,pE=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a <= b);
`,mE="return f32(a >= 1.0 && b >= 1.0);",gE=`return (vec4<f32>(a >= vec4<f32>(1.0)) *
  vec4<f32>(b >= vec4<f32>(1.0)));`,yE="return f32(a >= 1.0 || b >= 1.0);",vE=`return min(vec4<f32>(a >= vec4<f32>(1.0)) +
  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));`,bE="let resultTemp = max(a, b);",wE="let resultTemp = min(a, b);",xE=`
  let isNaN = b == 0.;
  var resultTemp = a % b;
  resultTemp = select((resultTemp + b) % b, resultTemp,
      (a < 0. && b < 0.) || (a >= 0. && b > 0.));
`,SE=`
  let isNaN = !vec4<bool>(b);
  var resultTemp = vec4<f32>(a % b);
  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {
    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];
  }
  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {
    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];
  }
  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {
    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];
  }
  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {
    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];
  }
`,CE="let resultTemp = a * b;",AE=`
  var resultTemp = f32(a != b);
  let valueForNaN = 1.0;
`,NE=`
  var resultTemp = vec4<f32>(a != b);
  let valueForNaN = 1.0;
`,_E=`
  let isNaN = a < 0.0 && floor(b) < b;
  if (b == 0.0) {
    return 1.0;
  }
  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),
      round(abs(b) % 2.0) != 1.0);
`,kE=`
  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);
  let isModRound1 = vec4<f32>(isModRound1Bool);
  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);
  var resultTemp = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  let isExpZero = b == vec4<f32>(0.0);
  if (isExpZero.r) {
    resultTemp.r = 1.0;
  }
  if (isExpZero.g) {
    resultTemp.g = 1.0;
  }
  if (isExpZero.b) {
    resultTemp.b = 1.0;
  }
  if (isExpZero.a) {
    resultTemp.a = 1.0;
  }
  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);
`,EE="if (a < 0.0) { return b * a; }  return a;",LE=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,RE="let resultTemp = (a - b) * (a - b);",IE="let resultTemp = a - b;";function Rg(n,t){let e;do{switch(n){case Ie.ATAN2:e=rE;break;case Ie.MAX:e=bE;break;case Ie.MIN:e=wE;break;case Ie.MOD:e=t?SE:xE;break;case Ie.NOT_EQUAL:e=t?NE:AE;break;case Ie.POW:e=t?kE:_E;break;default:continue}let i,a,o;return t?(i="isnanVec4",a="vec4<f32>",o="vec4<bool>"):(i="isnan",a="f32",o="bool"),`
      let aIsNaN = ${i}(a);
      let aPostLegalization = select(a, ${a}(42), aIsNaN);
      let bIsNaN = ${i}(b);
      let bPostLegalization = select(b, ${a}(42), bIsNaN);
      let isNaN = false;
      let valueForNaN = uniforms.NAN;
      {
        let a = aPostLegalization;
        let b = bPostLegalization;
        ${e}
        return select(
            resultTemp, ${a}(valueForNaN),
            ${o}(isNaN) | aIsNaN | bIsNaN);
      }
    `}while(!1);switch(n){case Ie.ADD:e=iE;break;case Ie.COMPLEX_MULTIPLY_IMAG:e=sE;break;case Ie.COMPLEX_MULTIPLY_REAL:e=aE;break;case Ie.DIV:e=oE;break;case Ie.ELU_DER:e=lE;break;case Ie.EQUAL:e=uE;break;case Ie.FLOOR_DIV:e=cE;break;case Ie.GREATER:e=fE;break;case Ie.GREATER_EQUAL:e=hE;break;case Ie.LESS:e=dE;break;case Ie.LESS_EQUAL:e=pE;break;case Ie.LOGICAL_AND:return t?gE:mE;case Ie.LOGICAL_OR:return t?vE:yE;case Ie.MUL:e=CE;break;case Ie.PRELU:return t?LE:EE;case Ie.SQUARED_DIFFERENCE:e=RE;break;case Ie.SUB:e=IE;break}return`
    ${e}
    return resultTemp;
  `}var qt;(function(n){n[n.ABS=0]="ABS",n[n.ACOS=1]="ACOS",n[n.ACOSH=2]="ACOSH",n[n.ASIN=3]="ASIN",n[n.ASINH=4]="ASINH",n[n.ATAN=5]="ATAN",n[n.ATANH=6]="ATANH",n[n.CEIL=7]="CEIL",n[n.COS=8]="COS",n[n.COSH=9]="COSH",n[n.ELU=10]="ELU",n[n.ERF=11]="ERF",n[n.EXP=12]="EXP",n[n.EXPM1=13]="EXPM1",n[n.FLOOR=14]="FLOOR",n[n.IS_FINITE=15]="IS_FINITE",n[n.IS_INF=16]="IS_INF",n[n.IS_NAN=17]="IS_NAN",n[n.LINEAR=18]="LINEAR",n[n.LOG=19]="LOG",n[n.LOG1P=20]="LOG1P",n[n.LOGICAL_NOT=21]="LOGICAL_NOT",n[n.NEG=22]="NEG",n[n.RELU=23]="RELU",n[n.RELU6=24]="RELU6",n[n.LEAKYRELU=25]="LEAKYRELU",n[n.RECIPROCAL=26]="RECIPROCAL",n[n.ROUND=27]="ROUND",n[n.RSQRT=28]="RSQRT",n[n.SELU=29]="SELU",n[n.SIGMOID=30]="SIGMOID",n[n.SIGN=31]="SIGN",n[n.SIN=32]="SIN",n[n.SINH=33]="SINH",n[n.SOFTPLUS=34]="SOFTPLUS",n[n.SQRT=35]="SQRT",n[n.SQUARE=36]="SQUARE",n[n.STEP=37]="STEP",n[n.TAN=38]="TAN",n[n.TANH=39]="TANH",n[n.TO_INT=40]="TO_INT"})(qt||(qt={}));const TE="return abs(a);",DE=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return acos(a);
`,PE=`
  if (a < 1.) {
    return uniforms.NAN;
  }
  return acosh(a);
`,ME=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return asin(a);
`,OE="return asinh(a);",FE=`
  if (isnan(a)) {
    return uniforms.NAN;
  }
  return atan(a);
`,BE=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  if (a == 1.) {
    return uniforms.INFINITY;
  }
  if (a == -1.) {
    return -uniforms.INFINITY;
  }
  return atanh(a);
`,zE="return ceil(a);",UE="return cos(a);",$E=`
  let e2x = exp(-a);
  return (e2x + 1.0 / e2x) / 2.0;
`,jE="return exp(a) - 1.0;",HE="if (a >= 0.0) { return a; }  return (exp(a) - 1.0);",qE=`
  var resFloat = exp(a) - vec4<f32>(1.0);
  if (a.r >= 0.0) {
    resFloat.r = a.r;
  }
  if (a.g >= 0.0) {
    resFloat.g = a.g;
  }
  if (a.b >= 0.0) {
    resFloat.b = a.b;
  }
  if (a.a >= 0.0) {
    resFloat.a = a.a;
  }
  return resFloat;
`,WE=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  let p = ${uk};
  let a1 = ${ck};
  let a2 = ${fk};
  let a3 = ${hk};
  let a4 = ${dk};
  let a5 = ${pk};

  let sign = sign(a);
  let absA = abs(a);
  let t = 1.0 / (1.0 + p * absA);
  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));
`,VE="return exp(a);",GE="return floor(a);",YE="return f32(!isnan(a) && !isinf(a));",XE="return f32(isinf(a));",KE="return f32(isnan(a));",QE="return a;",ZE=`if (a < 0.0) { return uniforms.NAN; }
  return log(a);`,JE=`
  if (isnan(a)) { return a; }
  return log(1.0 + a);
`,tL="return f32(!(a >= 1.0));",eL="return -a;",nL="if (a < 0.0) { return uniforms.alpha * a; } return a;",iL=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,rL="return 1.0 / a;",aL="return select(a, 0.0, a < 0.0);",sL="return clamp(a, 0.0, 6.0);",oL="return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));",lL=`
  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));
`,uL="return round(a);",cL="return inverseSqrt(a);",fL=`
  if (a >= 0.0) {
    return ${lk} * a;
  } else {
    return ${ok} * (exp(a) - 1.0);
  }
`,hL="return 1.0 / (1.0 + exp(-1.0 * a));",dL="return sign(a);",pL="return sin(a);",mL=`
  let e2x = exp(a);
  return (e2x - 1.0 / e2x) / 2.0;
`,gL=`
  let epsilon = 1.1920928955078125e-7;
  let threshold = log(epsilon) + 2.0;

  let too_large = a > -threshold;
  let too_small = a < threshold;
  let exp_a = exp(a);

  if (too_large) {
    return a;
  } else if (too_small) {
    return exp_a;
  } else {
    return log(exp_a + 1.0);
  }
`,yL="return sqrt(a);",vL="return a * a;",bL=`
  if (isnan(a)) {
    return a;
  }

  return select(uniforms.stepAlpha, 1.0, a > 0.0);
`,wL="return tan(a);",xL=`
  let e2x = exp(-2.0 * abs(a));
  return sign(a) * (1.0 - e2x) / (1.0 + e2x);
`,SL="return f32(i32((a)));";function Eu(n,t){switch(n){case qt.ABS:return TE;case qt.ACOS:return DE;case qt.ACOSH:return PE;case qt.ASIN:return ME;case qt.ASINH:return OE;case qt.ATAN:return FE;case qt.ATANH:return BE;case qt.COS:return UE;case qt.COSH:return $E;case qt.CEIL:return zE;case qt.ELU:return t?qE:HE;case qt.ERF:return WE;case qt.EXP:return VE;case qt.EXPM1:return jE;case qt.FLOOR:return GE;case qt.IS_FINITE:return YE;case qt.IS_INF:return XE;case qt.IS_NAN:return KE;case qt.LINEAR:return QE;case qt.LOG:return ZE;case qt.LOG1P:return JE;case qt.LOGICAL_NOT:return tL;case qt.NEG:return eL;case qt.LEAKYRELU:return t?iL:nL;case qt.RECIPROCAL:return rL;case qt.RELU:return t?lL:aL;case qt.RELU6:return t?oL:sL;case qt.ROUND:return uL;case qt.RSQRT:return cL;case qt.SELU:return fL;case qt.SIGMOID:return hL;case qt.SIGN:return dL;case qt.SIN:return pL;case qt.SINH:return mL;case qt.SOFTPLUS:return gL;case qt.SQRT:return yL;case qt.SQUARE:return vL;case qt.STEP:return bL;case qt.TAN:return wL;case qt.TANH:return xL;case qt.TO_INT:return SL;default:throw new Error(`BinaryType ${n} is not implemented!`)}}function nl(n,t=!1,e=!1,i=3){if(n===null)return"";let a="";if(n==="linear")a=Eu(qt.LINEAR);else if(n==="relu")a=Eu(qt.RELU,e);else if(n==="elu")a=Eu(qt.ELU,e);else if(n==="relu6")a=Eu(qt.RELU6,e);else if(n==="prelu")a=Rg(Ie.PRELU,e);else if(n==="sigmoid")a=Eu(qt.SIGMOID,e);else if(n==="leakyrelu")a=Eu(qt.LEAKYRELU,e);else throw new Error(`Activation ${n} has not been implemented for the WebGPU backend.`);const u=Ye(e?4:1);let c="";return t?c=`
      fn activation(a : ${u}, coords : vec${i}<i32>) -> ${u} {
        let b = getPreluActivationWeightsByOutputCoords(coords);
        ${a}
      }`:c=`
      fn activation(a : ${u}, coords : vec${i}<i32>) -> ${u} {
        ${a}
      }`,c}function Yu(n,t){return`
      ${n?"value = value + getBiasByOutputCoords(coords);":""}
      ${t?"value = activation(value, coords);":""}
      `}function Qb(n,t,e=!1,i=!1,a=!1,o=1){Xt(n&&o===1||!n,()=>`transposeA ${n} is not compatible with component size ${o}`);const u=`
      ${n?"value = getA(batch, col, row);":"value = getA(batch, row, col);"}

    `,c=t?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return`
  fn mm_readA(batch: i32, row: i32, col: i32) -> ${Ye(o)} {
    var value = ${Ye(o)}(0.0);
    ${e&&a?u:`
    ${n?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])"}
    {
      ${u}
    }
    `}
    return value;
  }

  fn mm_readB(batch: i32, row: i32, col: i32) -> ${Ye(o)} {
    var value = ${Ye(o)}(0.0);
    ${c}
    return value;
  }
  `}function Ig(n,t,e,i,a=!1,o=!1,u=!1,c=1){return`
  ${Qb(e,i,a,o,u,c)}
  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ${Ye(c)}) {
    ${a&&o?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)"}
    {
      var value = valueIn;
      let coords = vec3<i32>(batch, row, col);
      ${Yu(n,t)}
      setOutputAtCoords(coords[0], coords[1], coords[2], value);
    }
  }
  `}const CL=(n,t)=>n?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol * ${t});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRow + innerRow,
          kStart + inputCol * ${t});
        `,AL=(n,t,e,i)=>{if(n)return`
      for (var k = 0; k < ${i}; k++) {
        let BCached0 = mm_Bsub[k][tileCol];
        let ACached0 = mm_Asub[k][localRow];
        for (var i = 0; i < ${e}; i++) {
          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);
        }
      }`;{let a="",o="";for(let u=0;u<t;u++)a+=`let BCached${u} = mm_Bsub[k * ${t} + ${u}][tileCol];`,o+=`acc[i] = fma(BCached${u}, vec4<f32>(ACached[${u}]), acc[i]);`;return`
      for (var k = 0; k < ${i/t}; k++) {
        ${a}
        for (var i = 0; i < ${e}; i++) {
          let ACached = mm_Asub[tileRow + i][k];
          ${o}
        }
      }`}};function Sp(n,t,e=!1,i=32,a=!1,o=32,u=!1){const c=t[1]*n[1],f=t[0]*n[0],h=e?c:i,p=e?i:c,m=h/t[0],v=i/t[1],y=n[1],S=n[0];return Xt((e&&m===4&&n[1]===4||!e&&(m===3||m===4))&&h%t[0]===0&&i%t[1]===0&&n[0]===4,()=>`If transposeA ${e} is true, innerElementSize ${m} and workPerThread[1] ${n[1]} must be 4.
          Otherwise, innerElementSize ${m} must be 3 or 4.
      tileAWidth ${h} must be divisible by workgroupSize[0]${t[0]}. tileInner ${i} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${n[0]} must be 4.`),`
  var<workgroup> mm_Asub : array<array<vec${m}<f32>, ${h/m}>, ${p}>;
  var<workgroup> mm_Bsub : array<array<vec4<f32>, ${f/n[0]}>, ${i}>;

  ${Wt()} {
    let localRow = i32(localId.y);
    let tileRow = localRow * ${y};
    let tileCol = i32(localId.x);

    let globalRow = i32(globalId.y) * ${y};
    let globalCol = i32(globalId.x) * ${S};
    let batch = ${a?"0":"i32(globalId.z)"};
    let batchA = ${a||!u?"batch":"batch % uniforms.aShape[0]"};
    let batchB = ${a||!u?"batch":"batch % uniforms.bShape[0]"};
    let globalRowStart = i32(workgroupId.y) * ${c};

    let numTiles = ${a?`${Math.ceil(o/i)}`:`(uniforms.dimInner - 1) / ${i} + 1`};
    var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

    var acc: array<vec4<f32>, ${y}>;

    // Loop over shared dimension.
    let tileRowB = localRow * ${v};
    for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var innerRow = 0; innerRow < ${y}; innerRow++) {
            let inputRow = tileRow + innerRow;
            let inputCol = tileCol;
            ${CL(e,m)}
        }

        // Load one tile of B into local memory.
        for (var innerRow = 0; innerRow < ${v}; innerRow++) {
            let inputRow = tileRowB + innerRow;
            let inputCol = tileCol;
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);
        }
        kStart = kStart + ${i};
        workgroupBarrier();

        // Compute acc values for a single thread.
        ${AL(e,m,y,i)}
        workgroupBarrier();
    }

    for (var innerRow = 0; innerRow < ${y}; innerRow++) {
        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
    }
  }`}const Yy=n=>n?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol);
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRowStart + inputRow,
          kStart + inputCol);
        `,NL=n=>n?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];";function Cp(n,t,e=!1,i=32,a=!1,o=32,u=!1,c=!1){const f=n[1]*t[1],h=n[0]*t[0],p=e?f:i,m=e?i:f;Xt(m%t[1]===0&&p%t[0]===0&&i%t[1]===0,()=>`tileAHight ${m} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${p} must be divisible by workgroupSize[0]${t[0]}, tileInner ${i} must be divisible by workgroupSize[1]${t[1]}`);const v=m/t[1],y=p/t[0],S=i/t[1],N=n[1],A=n[0],_=u?`
      let localRow = i32(localId.y);
      let localCol = i32(localId.x);
      let globalRowStart = i32(workgroupId.y) * ${f};
      let globalColStart = i32(workgroupId.x) * ${h};

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var inputRow = localRow; inputRow < ${m}; inputRow = inputRow + ${t[1]}) {
          for (var inputCol = localCol; inputCol < ${p}; inputCol = inputCol + ${t[0]}) {
            ${Yy(e)}
          }
        }
        // Load one tile of B into local memory.
        for (var inputRow = localRow; inputRow < ${i}; inputRow = inputRow + ${t[1]}) {
              for (var inputCol = localCol; inputCol < ${h}; inputCol = inputCol + ${t[0]}) {
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
              kStart + inputRow,
              globalColStart + inputCol);
          }
        }
        kStart = kStart + ${i};
        workgroupBarrier();

        // Compute acc values for a single thread.
        var BCached : array<f32, ${A}>;
        for (var k = 0; k < ${i}; k++) {
          for (var inner = 0; inner < ${A}; inner++) {
            BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
          }
          for (var innerRow = 0; innerRow < ${N}; innerRow++) {
            let ACached = ${e?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
            for (var innerCol = 0; innerCol < ${A}; innerCol++) {
              acc[innerRow][innerCol] =
                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
            }
          }
        }
        workgroupBarrier();
      }
      for (var innerRow = 0; innerRow < ${N}; innerRow++) {
        let gRow = globalRowStart + localRow + innerRow * ${t[1]};
        for (var innerCol = 0; innerCol < ${A}; innerCol++) {
          let gCol = globalColStart + localCol + innerCol * ${t[0]};
          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
        }
      }
      `:`
  let tileRow = i32(localId.y) * ${N};
  let tileCol = i32(localId.x) * ${A};

  let globalRow = i32(globalId.y) * ${N};
  let globalCol = i32(globalId.x) * ${A};
  let globalRowStart = i32(workgroupId.y) * ${f};

  let tileRowA = i32(localId.y) * ${v};
  let tileColA = i32(localId.x) * ${y};
  let tileRowB = i32(localId.y) * ${S};
  // Loop over shared dimension.
  for (var t = 0; t < numTiles; t++) {
    // Load one tile of A into local memory.
    for (var innerRow = 0; innerRow < ${v}; innerRow++) {
      for (var innerCol = 0; innerCol < ${y}; innerCol++) {
        let inputRow = tileRowA + innerRow;
        let inputCol = tileColA + innerCol;
        ${Yy(e)}
      }
    }

    // Load one tile of B into local memory.
    for (var innerRow = 0; innerRow < ${S}; innerRow++) {
      for (var innerCol = 0; innerCol < ${A}; innerCol++) {
        let inputRow = tileRowB + innerRow;
        let inputCol = tileCol + innerCol;
        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
          kStart + inputRow,
          globalCol + innerCol);
      }
    }
    kStart = kStart + ${i};
    workgroupBarrier();

    // Compute acc values for a single thread.
    var BCached : array<f32, ${A}>;
    for (var k = 0; k < ${i}; k++) {
      for (var inner = 0; inner < ${A}; inner++) {
        BCached[inner] = mm_Bsub[k][tileCol + inner];
      }

      for (var innerRow = 0; innerRow < ${N}; innerRow++) {
        ${NL(e)}
        for (var innerCol = 0; innerCol < ${A}; innerCol++) {
          acc[innerRow][innerCol] =
              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
        }
      }
    }

    workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < ${N}; innerRow++) {
    for (var innerCol = 0; innerCol < ${A}; innerCol++) {
      mm_write(batch, globalRow + innerRow, globalCol + innerCol,
          acc[innerRow][innerCol]);
    }
  }
  `;return`
    var<workgroup> mm_Asub : array<array<f32, ${p}>, ${m}>;
    var<workgroup> mm_Bsub : array<array<f32, ${h}>, ${i}>;

    ${Wt()} {
      let batch = ${a?"0":"i32(globalId.z)"};
      let batchA = ${a||!c?"batch":"batch % uniforms.aShape[0]"};
      let batchB = ${a||!c?"batch":"batch % uniforms.bShape[0]"};
      let numTiles = ${a?`${Math.ceil(o/i)}`:`(uniforms.dimInner - 1) / ${i} + 1`};
      var kStart = ${a?`i32(globalId.z) * ${o}`:"0"};

      var acc : array<array<f32, ${A}>, ${N}>;

      // Without this initialization strange values show up in acc.
      for (var innerRow = 0; innerRow < ${N}; innerRow++) {
        for (var innerCol = 0; innerCol < ${A}; innerCol++) {
          acc[innerRow][innerCol] = 0.0;
        }
      }
      ${_}
    }
  `}const _L=n=>n?`
      mm_readA(batchA, colA, globalRow),
      mm_readA(batchA, colA + 1, globalRow),
      mm_readA(batchA, colA + 2, globalRow),
      mm_readA(batchA, colA + 3, globalRow)
  `:`
      mm_readA(batchA, globalRow, colA),
      mm_readA(batchA, globalRow, colA + 1),
      mm_readA(batchA, globalRow, colA + 2),
      mm_readA(batchA, globalRow, colA + 3)
  `;function kL(n,t=!1){Xt(n[1]===1&&n[2]===1,()=>`A linear work group size is required. But got ${n}.`);const e=n[0]*4;return`
    var<workgroup> mm_Asub : array<vec4<f32>, ${n[0]}>;

    ${Wt()} {
      let tileCol = i32(localId.x);
      let globalCol = i32(globalId.x);
      let globalRow = i32(globalId.y);

      let numTiles = (uniforms.dimInner - 1) / ${e} + 1;
      let batch = i32(globalId.z);
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      // Without this initialization strange values show up in acc.
      var acc = 0.0;

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        let colA = t * ${e} + tileCol * 4;
        mm_Asub[tileCol] = vec4<f32>(${_L(t)});
        workgroupBarrier();

        // Compute acc values for a single thread.
        for (var k = 0; k < ${e/4}; k++) {
          let rowB = t * ${e} + k * 4;
          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),
                              mm_readB(batchB, rowB + 1, globalCol),
                              mm_readB(batchB, rowB + 2, globalCol),
                              mm_readB(batchB, rowB + 3, globalCol));

          let ACached = mm_Asub[k];
          acc = acc + dot(ACached, BCached);
        }

        workgroupBarrier();
      }

      mm_write(batch, globalRow, globalCol, acc);
    }
  `}class EL{constructor(t,e,i=!1,a=!1,o=null,u=null,c=null,f=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e,this.dispatchLayout={x:[2],y:[1],z:[0]};const h=i?t[1]:t[2];if(this.isVec4=(h%4===0&&!i||e[1]%4===0&&i)&&e[2]%4===0&&!a,this.outputComponent=this.isVec4?4:1,this.isVectorA=e[1]===1&&!i,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{const v=tE(e[1],h,e[2],i);this.workgroupSize=v.workgroupSize,this.elementsPerThread=v.elementsPerThread}this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);const p=o!=null,m=c!=null;p&&this.variableNames.push("bias"),m&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=f,this.transposeA=i,this.transposeB=a,this.addBias=p,this.activation=u,this.hasPreluActivationWeights=m,[this.fitAOuter,this.fitBOuter,this.fitInner]=this.getShapeFit(e[1],e[2],h),this.shaderKey=`matMulPacked_${this.elementsPerThread}_${i}_${a}_${this.activation}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.isVectorA}_${this.sequentialAccessByThreads}`}getShapeFit(t,e,i){const a=this.workgroupSize[1]*this.elementsPerThread[1],o=this.workgroupSize[0]*this.elementsPerThread[0];!this.isVec4&&this.isVectorA?this.tileInner=this.workgroupSize[0]*4:this.tileInner=o;const u=t%a===0,c=e%o===0,f=i%this.tileInner===0;return[u,c,f]}getUserCode(){return`
      ${nl(this.activation,this.hasPreluActivationWeights,this.isVec4)}
      ${Ig(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1)}
      ${this.isVec4?Sp(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?kL(this.workgroupSize,this.transposeA):Cp(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0)}
    `}}function LL(n){return`
    var<workgroup> sumValues : array<f32, ${n}>;
    ${Wt()} {
      let coords = getOutputCoords();
      let batch = coords[0];
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      let row = coords[1];
      let col = coords[2];
      var sum = 0.0;
      let Length = uniforms.dimInner;
      for (var k = i32(localId.x); k < Length; k = k + ${n}) {
        let dataA = mm_readA(batchA, row, k);
        let dataB = mm_readB(batchB, k, col);
        sum = sum + dataA * dataB;
      }
      sumValues[localId.x] = sum;
      workgroupBarrier();

      for(var currentSize = ${n/2}u; currentSize > 1u;
          currentSize = currentSize / 2u) {
        if (localId.x < currentSize)
        {
          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];
        }
        workgroupBarrier();
      }

      if (localId.x == 0u) {
        sum = sumValues[0] + sumValues[1];
        mm_write(batch, row, col, sum);
      }
    }
  `}class RL{constructor(t,e=!1,i=!1,a=null,o=null,u=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize);const c=a!=null,f=u!=null;c&&this.variableNames.push("bias"),f&&this.variableNames.push("preluActivationWeights"),this.transposeA=e,this.transposeB=i,this.addBias=c,this.activation=o,this.hasPreluActivationWeights=f,this.shaderKey=`matMulReduce_${this.activation}_${e}_${i}`}getUserCode(){return`
      ${nl(this.activation,this.hasPreluActivationWeights)}
      ${Ig(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${LL(this.workgroupSize[0])}
    `}}function IL(n){const t=n[1],e=n[0],i=t>e?t:e;return`
  var<workgroup> mm_Asub : array<array<f32, ${i}>, ${t}>;
  var<workgroup> mm_Bsub : array<array<f32, ${e}>, ${i}>;

  // If the output size is small for matrix multiplication, avoid to use vec4
  // and handle some elements per thread to optimally utilize the ALU.
  // Read data from global memory to registers firstly, then store them into
  // shared memory, so it is instruction-Level parallelism for arithmetic
  // operations and others handle IO operations between barrier api, makes ALU
  // and load/store units work simultaneously, could improves the performance.
  ${Wt()} {
    let tileRow = i32(localId.y);
    let tileCol = i32(localId.x);
    let globalRow = i32(globalId.y);
    let globalCol = i32(globalId.x);
    let batch = i32(globalId.z);
    let batchA = batch % uniforms.aShape[0];
    let batchB = batch % uniforms.bShape[0];

    // uniforms.dimInner should be greater than 0.
    let numTiles = (uniforms.dimInner - 1) / ${i} + 1;
    var acc = 0.0;

    var globalColA = tileCol;
    var globalRowB = 0;
    var regA = mm_readA(batchA, globalRow, globalColA);
    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
    globalColA = globalColA + ${i};
    globalRowB = globalRowB + ${i};

    for (var t = 0; t < numTiles; t = t + 1) {
      mm_Asub[tileRow][tileCol] = regA;
      mm_Bsub[2 * tileRow][tileCol] = regB0;
      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;

      workgroupBarrier();

      regA = mm_readA(batchA, globalRow, globalColA);
      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
      globalColA = globalColA + ${i};
      globalRowB = globalRowB + ${i};

      for (var k = 0; k < ${i}; k = k + 1) {
        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];
      }
      workgroupBarrier();
    }

    mm_write(batch, globalRow, globalCol, acc);
  }
  `}class TL{constructor(t,e,i,a=!1,o=!1,u=null,c=null,f=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=i,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(i[2]/this.workgroupSize[0]),Math.ceil(i[1]/this.workgroupSize[1]),i[0]];const h=u!=null;h&&this.variableNames.push("bias");const p=f!=null;p&&this.variableNames.push("preluActivationWeights"),this.transposeA=a,this.transposeB=o,this.addBias=h,this.activation=c,this.hasPreluActivationWeights=p,this.shaderKey=`matMulSmallOutputSize_${this.activation}_${a}_${o}`}getUserCode(){return`
      ${nl(this.activation,this.hasPreluActivationWeights)}
      ${Ig(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${IL(this.workgroupSize)}
    `}}class DL{constructor(t,e,i=!1,a=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,Xt(t[0]===1,()=>"MatMulSplitKProgram only supports batch = 1."),this.outputShape=t,this.dispatchLayout={x:[2],y:[1],z:[0,3]};const o=(i&&this.outputShape[1]%4===0||!i&&e%4===0)&&this.outputShape[2]%4===0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=o?4:1,o||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=Vt(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],e],this.workgroupSize,this.elementsPerThread),this.transposeA=i,this.transposeB=a,this.shaderKey=`matMulSplitK_${i}_${a}_${this.elementsPerThread}_${this.outputComponent}`}getUserCode(){const t=this.outputComponent;return`
      ${Qb(!1,this.transposeB,!1,!1,!1,t)}
      fn mm_write(batch: i32, row : i32, col : i32, value : ${Ye(t)}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
          let coords = vec3<i32>(batch, row, col);
          let flatIndex = getOutputIndexFromCoords(coords);
          // The problem is that we should initialize output to zero before using.
          // Otherwise, the original value will be added to the result.
          for (var i = 0; i < ${t}; i = i + 1) {
            ${Yl("&result[flatIndex + i]",`${t>1?"value[i]":"value"}`,"float32")}
          }
        }
      }
      ${t===4?Sp(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):Cp(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner)}
    `}}class PL{constructor(t,e=null,i=null,a=null){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=e!=null,this.hasPreluActivationWeights=a!=null,this.activation=i,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`biasActivation_${i}`}getUserCode(){return`
    ${nl(this.activation,this.hasPreluActivationWeights)}
    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        var value = getXByOutputIndex(index);
        ${Yu(this.addBias,this.activation)}
        setOutputAtIndex(index, value);
      }
    }
    `}}class ML{constructor(t){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        setOutputAtIndex(index, uniforms.value);
      }
    }
  `}}function Br(n){const{backend:t,attrs:e}=n,{shape:i,value:a}=e;let{dtype:o}=e;if(o=o||kh(a),o==="string"){const u=Yi(o,Zt(i));return u.fill(a),t.makeTensorInfo(i,o,u)}else{const u=new ML(i),c=[{type:"float32",data:[a]}];return t.runWebGPUProgram(u,[],o,c)}}const OL={kernelName:rb,backendName:"webgpu",kernelFunc:Br};function se(n){const{inputs:t,attrs:e}=n,{x:i}=t,{shape:a}=e,o=Zt(i.shape),u=nC(a,o),c=Zt(u);return Xt(o===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.backend.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype}}const FL={kernelName:ub,backendName:"webgpu",kernelFunc:se};function Ap({a:n,b:t,transposeA:e,transposeB:i,backend:a,bias:o=null,preluActivationWeights:u=null,leakyreluAlpha:c=0,activation:f=null}){const h=n.shape.length,p=t.shape.length,m=e?n.shape[h-2]:n.shape[h-1],v=i?t.shape[p-1]:t.shape[p-2],y=e?n.shape[h-1]:n.shape[h-2],S=i?t.shape[p-2]:t.shape[p-1],N=n.shape.slice(0,-2),A=t.shape.slice(0,-2),_=Zt(N),I=Zt(A),M=oo(n.shape.slice(0,-2),t.shape.slice(0,-2)).concat([y,S]);Xt(m===v,()=>`Error in matMul: inner shapes (${m}) and (${v}) of Tensors with shapes ${n.shape} and ${t.shape} and transposeA=${e} and transposeB=${i} must match.`);const Y=e?[_,m,y]:[_,y,m],ct=i?[I,S,v]:[I,v,S],it=se({inputs:{x:n},backend:a,attrs:{shape:Y}}),nt=se({inputs:{x:t},backend:a,attrs:{shape:ct}}),F=[it,nt],G=Math.max(_,I),E=[it,nt],B=[{type:"int32",data:[y]},{type:"int32",data:[S]},{type:"int32",data:[m]}];let tt,et;const ht=[G,y,S];let X=Pe().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(X<0){const st=Pe().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),vt=st>0?st:a.thresholdToIncreaseWorkgroups,Et=G*Math.ceil(y/32)*Math.ceil(S/32);Et<=vt||y<=8&&Et<=vt*2?G*y*S<=128?X=ro.MatMulReduceProgram:G===1&&v>=2e3?X=ro.MatMulSplitKProgram:X=ro.MatMulSmallOutputSizeProgram:X=ro.MatMulPackedProgram}switch(X){case ro.MatMulReduceProgram:tt=new RL(ht,e,i,o,f,u);break;case ro.MatMulSplitKProgram:{if(et=Br({backend:a,attrs:{shape:ht,value:0,dtype:n.dtype}}),tt=new DL(ht,v,e,i),o||f){et=a.runWebGPUProgram(tt,E,n.dtype,B,et);const vt=new PL(et.shape,o,f,u);let Et=null;const q=[et];o&&q.push(o),u&&q.push(u),f==="leakyrelu"&&(Et=[{type:"float32",data:[c]}],vt.uniforms+=" alpha : f32,");const T=a.runWebGPUProgram(vt,q,et.dtype,Et);F.push(et);const j=se({inputs:{x:T},backend:a,attrs:{shape:M}});F.push(T);for(const V of F)a.disposeData(V.dataId);return j}break}case ro.MatMulSmallOutputSizeProgram:tt=new TL(Y,ct,ht,e,i,o,f,u);break;case ro.MatMulPackedProgram:const st=a.adapterInfo.isIntel();tt=new EL(Y,ht,e,i,o,f,u,st);break;default:throw new Error(`Unsupported MatMulProgramType ${X}.`)}o&&E.push(o),u&&E.push(u),f==="leakyrelu"&&(B.push({type:"float32",data:[c]}),tt.uniforms+=" alpha : f32,"),et=a.runWebGPUProgram(tt,E,n.dtype,B,et);const lt=se({inputs:{x:et},backend:a,attrs:{shape:M}});F.push(et);for(const st of F)a.disposeData(st.dataId);return lt}function BL(n){const{inputs:t,backend:e,attrs:i}=n,{a,b:o,bias:u,preluActivationWeights:c}=t,{transposeA:f,transposeB:h,activation:p,leakyreluAlpha:m}=i;return Ap({a,b:o,transposeA:f,transposeB:h,backend:e,bias:u,preluActivationWeights:c,leakyreluAlpha:m,activation:p})}const zL={kernelName:KA,backendName:"webgpu",kernelFunc:BL};class Xy{constructor(t,e,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=oo(e,i),this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`binaryOpComplex_${t}`,this.op=t}getUserCode(){return`
      fn binaryOpComplex(
          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {
        ${Rg(this.op,!1)}
      }

      ${Wt("index")} {
        if(index < uniforms.size) {
          let areal = getARealByOutputIndex(index);
          let aimag = getAImagByOutputIndex(index);
          let breal = getBRealByOutputIndex(index);
          let bimag = getBImagByOutputIndex(index);
          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));
        }
      }
    `}}class ip{constructor(t,e,i){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=oo(e,i),this.dispatchLayout=Jt(this.outputShape),this.op=t,this.useSharedMemoryWithA=e.length<=1&&i.length>1&&e[0]<128,this.useSharedMemoryWithB=i.length<=1&&e.length>1&&i[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?i[0]:e[0],this.shaderKey=`binary_${t}_${this.lastDimensionSize}`,this.type="shared",this.workgroupSize=[256,1,1];else{const a=e.length>0&&e[e.length-1]%4===0,o=i.length>0&&i[i.length-1]%4===0;a&&o?(this.outputComponent=4,this.variableComponents=[4,4]):a&&(yy(i)||i[i.length-1]===1)||o&&(yy(e)||e[e.length-1]===1)?(this.outputComponent=4,this.variableComponents=a?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey=`binary_${t}_${this.variableComponents}`,this.workgroupSize=[128,1,1]}this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}getUserCode(){let t;const e=this.outputComponent===4?"vec4<f32>":"f32",i=`
    fn binaryOperation(a : ${e}, b : ${e}) -> ${e} {
      ${Rg(this.op,this.outputComponent===4)}
    };
    `;if(this.type==="shared"){const a=this.lastDimensionSize>1?`coords[${this.outputShape.length-1}]`:"0",o=this.useSharedMemoryWithB?`let a = getAByOutputIndex(index);
          let b = sharedBuf[${a}];`:`let a = sharedBuf[${a}];
          let b = getBByOutputIndex(index);`;t=`
        ${i}
        var<workgroup> sharedBuf : array<f32, ${this.lastDimensionSize}>;
        ${Wt("index")} {
          // Fill in the shared memory buffer.
          let localIndex = i32(localId.x);
          if(localIndex < ${this.lastDimensionSize}) {
            sharedBuf[localIndex] = f32(${this.useSharedMemoryWithB?"B":"A"}[localIndex]);
          }
          workgroupBarrier();

          if(index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            ${o}
            setOutputAtIndex(index, binaryOperation(a, b));
          }
        }
        `}else t=`
       ${i}
       ${Wt("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index * ${this.outputComponent});
           let a = ${e}(getAByOutputCoords(coords));
           let b = ${e}(getBByOutputCoords(coords));
           setOutputAtIndex(index, binaryOperation(a, b));
         }
       }
       `;return t}}function oa(n){const{inputs:t}=n,{x:e}=t;return n.backend.incRef(e.dataId),{dataId:e.dataId,shape:e.shape,dtype:e.dtype}}const UL={kernelName:Ng,backendName:"webgpu",kernelFunc:oa};function Xu(n){const{inputs:t,backend:e}=n,{real:i,imag:a}=t,o=e.makeTensorInfo(i.shape,"complex64"),u=e.tensorMap.get(o.dataId),c=oa({inputs:{x:i},backend:e}),f=oa({inputs:{x:a},backend:e});return u.complexTensorInfos={real:c,imag:f},o}const $L={kernelName:eb,backendName:"webgpu",kernelFunc:Xu};class gf{constructor(t,e,i=""){this.variableNames=["A"],this.size=!0;const a=128;this.workgroupSize=[a,1,1],this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=e,i!==""&&(this.uniforms=i),this.shaderKey=`unary_${e}`}getUserCode(){return`
      fn unaryOperation(a : f32) -> f32 {
        ${Eu(this.op,!1)}
      }
      ${Wt("index")} {
        if (index < uniforms.size) {
          let a = getAByOutputIndex(index);
          setOutputAtIndex(index, unaryOperation(a));
        }
      }
      `}}function pn({opType:n,cpuKernelImpl:t,dtype:e}){return({inputs:i,backend:a})=>{const{x:o}=i,u=a,c=e||o.dtype;if(u.shouldExecuteOnCPU([o])&&t!=null){const h=u.tensorMap.get(o.dataId),p=t(h.values,c);return u.makeTensorInfo(o.shape,c,p)}const f=new gf(o.shape,n);return u.runWebGPUProgram(f,[o],c)}}function Xi({opType:n,cpuKernelImpl:t,supportsComplex:e=!1,dtype:i}){return({inputs:a,backend:o})=>{const{a:u,b:c}=a,f=o;if(e&&u.dtype==="complex64"){const m=f.tensorMap.get(u.dataId),v=f.tensorMap.get(c.dataId);let y,S;if(n!==Ie.MUL)[y,S]=[[m.complexTensorInfos.real,v.complexTensorInfos.real],[m.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(A=>{const[_,I]=A,D={dataId:_.dataId,dtype:_.dtype,shape:u.shape},M={dataId:I.dataId,dtype:I.dtype,shape:c.shape},Y=new ip(n,u.shape,c.shape);return f.runWebGPUProgram(Y,[D,M],ql(_.dtype,I.dtype))});else{const A=new Xy(Ie.COMPLEX_MULTIPLY_REAL,u.shape,c.shape),_=new Xy(Ie.COMPLEX_MULTIPLY_IMAG,u.shape,c.shape),I=[{dataId:m.complexTensorInfos.real.dataId,dtype:m.complexTensorInfos.real.dtype,shape:u.shape},{dataId:m.complexTensorInfos.imag.dataId,dtype:m.complexTensorInfos.imag.dtype,shape:u.shape},{dataId:v.complexTensorInfos.real.dataId,dtype:v.complexTensorInfos.real.dtype,shape:c.shape},{dataId:v.complexTensorInfos.imag.dataId,dtype:v.complexTensorInfos.imag.dtype,shape:c.shape}];y=f.runWebGPUProgram(A,I,"float32"),S=f.runWebGPUProgram(_,I,"float32")}const N=Xu({inputs:{real:y,imag:S},backend:f});return f.disposeData(y.dataId),f.disposeData(S.dataId),N}const h=i||ql(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&t!=null){const m=f.tensorMap.get(u.dataId).values,v=f.tensorMap.get(c.dataId).values,y=u.dtype==="string"?np(m):m,S=u.dtype==="string"?np(v):v,[N,A]=t(u.shape,c.shape,y,S,h);return f.makeTensorInfo(A,h,N)}const p=new ip(n,u.shape,c.shape);return f.runWebGPUProgram(p,[u,c],h)}}function jL(n){const t=new Float32Array(n.length);for(let e=0;e<n.length;++e)t[e]=Math.abs(n[e]);return t}function Ur(n){return(t,e,i,a,o)=>{const u=oo(t,e),c=u.length,f=mr(u),h=Zt(u),p=zu(o,h),m=t.length,v=e.length,y=mr(t),S=mr(e),N=ep(t,u),A=ep(e,u);if(N.length+A.length===0)for(let _=0;_<p.length;++_)p[_]=n(i[_%i.length],a[_%a.length]);else for(let _=0;_<p.length;++_){const I=wg(_,c,f),D=I.slice(-m);N.forEach(it=>D[it]=0);const M=D1(D,m,y),Y=I.slice(-v);A.forEach(it=>Y[it]=0);const ct=D1(Y,v,S);p[_]=n(i[M],a[ct])}return[p,u]}}function HL(n,t,e,i){if(i==="int32"){const a=Int32Array.from(n);return[t,"int32",a]}if(i==="bool"){const a=yp([0],e),[o,u]=Ur((c,f)=>c!==f?1:0)(t,[],n,a,"bool");return[u,"bool",o]}throw new Error(`Error in Cast: failed to cast ${e} to ${i}`)}const qL=Ur(((n,t)=>n+t));function WL(n,t,e,i,a){const o=Zt(i),u=Zo(a,e);for(let c=0;c<n.length;c++){const f=n[c];if(f<0)throw new Error("Input x must be non-negative!");f>=a||(o>0?u[f]+=t[c]:u[f]+=1)}return u}function VL(n,t,e,i=!1){const a=n.shape[0],o=n.shape[1],u=ar([a,e],t.dtype);for(let c=0;c<a;c++)for(let f=0;f<o;f++){const h=n.get(c,f);if(h<0)throw new Error("Input x must be non-negative!");h>=e||(i?u.set(1,c,h):t.size>0?u.set(u.get(c,h)+t.get(c,f),c,h):u.set(u.get(c,h)+1,c,h))}return u}const GL=Ur(((n,t)=>n&t));function il(n){return(t,e,i)=>{const a=Yi(e,t.length);for(let o=0;o<t.length;++o)a[o]=n(t[o],i);return a}}const YL=il(n=>Math.ceil(n));function XL(n,t,e,i){const a=Yi(e,Zt(t));if(i&&e!=="string"){let o=0;n.forEach(u=>{const c=Zt(u.shape);a.set(u.vals,o),o+=c})}else{let o=0;n.forEach(u=>{const c=e==="string"?np(u.vals):u.vals;let f=0;for(let h=0;h<u.shape[0];++h){const p=h*t[1]+o;for(let m=0;m<u.shape[1];++m)a[p+m]=c[f++]}o+=u.shape[1]})}return a}const KL=Ur((n,t)=>n===t?1:0);const QL=il(n=>Math.exp(n));const ZL=il(n=>Math.expm1(n));const JL=il(n=>Math.floor(n));const t8=Ur((n,t)=>Math.floor(n/t));function e8(n,t,e,i,a,o,u,c,f){const h=ar([i,o],e);for(let p=0;p<i;p++){const m=[];let v=0;for(let y=0;y<a;y++){const S=n[p*a+y];v+=S*u[y],m.push(S)}if(v<0||v>=f/o)throw new Error(`Invalid indices: ${m} does not index into ${c}`);for(let y=0;y<o;y++)h.values[p*o+y]=t.get(...t.indexToLoc(v*o+y))}return h}function n8(n,t,e){const i=ar(e,n.dtype);for(let a=0;a<i.size;++a){const u=i.indexToLoc(a).slice(),c=u[0],f=u[2],h=t.locToIndex([c,f]);u[2]=t.values[h];const p=n.locToIndex(u);0<=p&&p<n.values.length&&(i.values[a]=n.values[p])}return i}const i8=Ur((n,t)=>n>t?1:0);const r8=Ur((n,t)=>n>=t?1:0);const a8=Ur((n,t)=>n<t?1:0);const s8=Ur((n,t)=>n<=t?1:0);function o8(n,t,e){const i=(t-n)/(e-1),a=Zo(e,"float32");a[0]=n;for(let o=1;o<a.length;o++)a[o]=a[o-1]+i;return a}const l8=il(n=>Math.log(n));function u8(n,t,e,i){const a=zu(i,Zt(e));for(let o=0;o<a.length;++o){const u=o*t;let c=n[u];for(let f=0;f<t;++f){const h=n[u+f];(Number.isNaN(h)||h>c)&&(c=h)}a[o]=c}return a}const c8=Ur(((n,t)=>Math.max(n,t)));const f8=Ur(((n,t)=>Math.min(n,t)));const Zb=Ur(((n,t)=>n*t));function h8(n,t,e){const i=lN(-1,e);return Zb([],t,i,n,e)}const d8=Ur(((n,t)=>n!==t?1:0));function p8(n,t,e,i,a){const o=t.length,u=Zt(t),c=mr(t),f=mr(a),h=zu(e,Zt(a));for(let p=0;p<u;++p){const m=wg(p,o,c),v=new Array(m.length);for(let S=0;S<v.length;S++)v[S]=m[i[S]];const y=D1(v,o,f);h[y]=n[p]}return h}function m8(n,t,e,i){const[a,o]=wp(n,i),u=ql(t,"int32"),c=Zo(Zt(a),u),f=Zt(o);for(let h=0;h<c.length;++h){const p=h*f;let m=1;for(let v=0;v<f;++v)m*=e[p+v];c[h]=m}return{outVals:c,outShape:a,outDtype:u}}function g8(n,t,e){n.forEach((i,a)=>{if(i<0||i>=e){const o=wg(a,t.length,mr(t)).join(",");throw new Error(`indices[${o}] = ${i} is not in [0, ${e})`)}})}function y8(n,t){for(let e=0;e<n.length;++e){const i=n[e],a=e===n.length-1?t:n[e+1].length;if(i.length===0)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>a)throw new Error("Ragged splits must not point past values");for(let o=1;o<i.length;++o)if(i[o-1]>i[o])throw new Error("Ragged splits must be sorted in ascending order")}}function v8(n,t,e,i){const a=[];let o=0;const u=t.length-1+e.length,c=new Array(u).fill(null).map(()=>[0]);y8(e,i);let f=1;for(let h=0;h<t.length-1;++h){f*=t[h];const p=t[h+1];for(let m=1;m<f+1;++m)c[h].push(m*p)}for(let h=0;h<n.length;++h){let p=n[h],m=n[h]+1;for(let v=0;v<e.length;++v){const y=e[v],S=v+t.length-1;if(S>=0){const N=c[S],A=N[N.length-1]-y[p];for(let _=p;_<m;++_)c[S].push(y[_+1]+A)}p=y[p],m=y[m]}m!==p&&(a.push([p,m]),o+=m-p)}return{outSplits:c,valueSlices:a,numValues:o}}function b8(n){const t=[];for(let e=0;e<n.length;++e){const i=n[e].length,a=Yi("int32",i);t.push(a),n[e].forEach((o,u)=>a[u]=o)}return t}function Ky(n,t){const e=n.slice(0,t);for(;e.length<t;)e.push(1);for(let i=t;i<n.length;i++)e[t-1]*=n[i];return e}function w8(n,t,e,i,a,o){const u=Ky(t,2)[1],c=Ky(o,2)[1];let f=0;for(const h of e)for(let p=h[0];p<h[1];++p){for(let m=0;m<i;++m)a[f*c+m]=n[p*u+m];++f}}function x8(n,t,e,i,a){const o=t.slice();o[0]=a;const u=Yi(e,Zt(o)),c=n.length,f=c===0?0:c/t[0];return w8(n,t,i,f,u,o),[u,o]}function S8(n,t,e,i,a,o,u,c){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const f=t[0][0]-1;if(g8(o,u,f),i.length===0)throw new Error("params.rank must be nonzero");const h=i[0],{outSplits:p,valueSlices:m,numValues:v}=v8(o,u,n,h),y=b8(p),S=x8(e,i,a,m,v);return[y,S[0],S[1]]}const Qy=2147483647;function C8(n,t,e,i,a,o,u){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(u.length>1)throw new Error("deltas must be a scalar or vector");const c=t.length===0,f=a.length===0,h=u.length===0,p=[];c||p.push(t[0]),f||p.push(a[0]),h||p.push(u[0]);for(let A=1;A<p.length;++A)if(p[A]!==p[A-1])throw new Error("starts, limits, and deltas must have the same shape");const m=p.length===0?1:p[0],v=Yi("int32",m+1);v[0]=0;for(let A=0;A<m;++A){const _=c?n[0]:n[A],I=f?i[0]:i[A],D=h?o[0]:o[A];if(D===0)throw new Error("Requires delta != 0");let M;if(D>0&&I<_||D<0&&I>_)M=0;else if(M=Math.ceil(Math.abs((I-_)/D)),M>Qy)throw new Error(`Requires ((limit - start) / delta) <= ${Qy}`);v[A+1]=v[A]+M}const y=v[m],S=Yi(e,y);let N=0;for(let A=0;A<m;++A){const _=v[A+1]-v[A];let I=c?n[0]:n[A];const D=h?o[0]:o[A];for(let M=0;M<_;++M)S[N++]=I,I+=D}return[v,S]}var Ka=so;class rp{constructor(t,e,i,a,o,u,c,f,h,p){this.shape=t,this.shapeShape=e,this.values=i,this.valuesShape=a,this.valuesDType=o,this.defaultValue=u,this.defaultValueShape=c,this.rowPartitionValues=f,this.rowPartitionValuesShapes=h,this.rowPartitionTypes=ek(p),this.raggedRank=nk(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Ka.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Ka.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Ka.VALUE_ROWIDS:return rp.getMaxWidthValueRowID(e);case Ka.ROW_SPLITS:return rp.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Ka[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const e=t.length;if(e===0||e===1)return 0;let i=0;for(let a=0;a<e-1;++a){const o=t[a+1]-t[a];o>i&&(i=o)}return i}static getMaxWidthValueRowID(t){const e=t.length;if(e===0)return 0;let i=0,a=t[0],o=0;for(let u=1;u<e;++u){const c=t[u];c!==a&&(a=c,o=Math.max(u-i,o),i=u)}return Math.max(e-i,o)}tensorShapeFromTensor(t,e,i=!0){if(e.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Jy(t,i)}calculateOutputSize(t){const e=this.valuesShape,i=this.defaultValueShape;ik(i,e);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),u=tk(this.raggedRank,a,e);u[0]<0&&(u[0]=t);for(let c=1;c<=this.raggedRank;++c)u[c]<0&&(u[c]=this.getMaxWidth(c));return u}calculateFirstParentOutputIndex(t,e,i){const a=Math.min(t,i),o=[];let u=0;for(let c=0;c<a;++c,u+=e)o.push(u);for(let c=a;c<t;++c)o.push(-1);return Xt(o.length===t,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(t,e,i,a){const o=t.length,u=[];for(let c=0;c<o-1;++c){const f=t[c+1]-t[c];let h=Math.min(a,f),p=e[c];p===-1&&(h=0);for(let m=0;m<h;++m)u.push(p),p+=i;for(let m=0;m<f-h;++m)u.push(-1)}if(o>0&&u.length!==t[o-1])throw new Error("Invalid row split size.");return u}calculateOutputIndexValueRowID(t,e,i,a){const o=t.length,u=[];if(o===0)return[];let c=0,f=t[0];if(f>=e.length)throw new Error(`Got currentValueRowId=${f}, which is not less than ${e.length}`);let h=e[f];u.push(h);for(let p=1;p<o;++p){const m=t[p];if(m===f)h>=0&&(++c,c<a?h+=i:h=-1);else{if(c=0,f=m,m>=e.length)throw new Error(`Got nextValueRowId=${m} which is not less than ${e.length}`);h=e[m]}u.push(h)}if(u.length!==t.length)throw new Error("Invalid row ids.");return u}calculateOutputIndex(t,e,i,a){const o=this.getRowPartitionTensor(t),u=this.getRowPartitionTypeByDimension(t);switch(u){case Ka.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,e,i,a);case Ka.ROW_SPLITS:if(o.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(o,e,i,a);default:throw new Error(`Unsupported partition type: ${Ka[u]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case Ka.FIRST_DIM_SIZE:return t[0];case Ka.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ka.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ka[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),i=this.calculateOutputSize(e),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let f=a.length-2;f>=0;--f)a[f]=a[f+1]*i[f+1];const o=Jy(i,!1),u=Yi(this.valuesDType,Zt(o));if(a[0]*i[0]>0){let f=this.calculateFirstParentOutputIndex(e,a[0],i[0]);for(let h=1;h<=this.raggedRank;++h)f=this.calculateOutputIndex(h-1,f,a[h],i[h]);this.setOutput(this.raggedRank,f,u,o)}return[o,u]}setOutput(t,e,i,a){if(i.length===0)return;const o=this.values,u=i;let c=a.slice();c=c.slice(t+1);const f=Zt(c),h=e.length;let p=this.defaultValue;if(p.length!==f&&p.length!==1){const S=this.defaultValueShape;Fi(()=>{const N=Bb(p,S);p=h_(N,c).dataSync()})}let m=0,v=0,y=0;for(let S=0;S<=h;++S){let N=S<h?e[S]:-1;if(N===y){++y;continue}if(v<y){const A=o.subarray(m*f),_=u.subarray(v*f),I=(y-v)*f;Zy(_,A,I)}if(S>=h){const A=i.length;N=Math.floor(A/f)}if(N>y)if(this.defaultValue.length===1)u.subarray(y*f,N*f).fill(this.defaultValue[0]),y=N;else for(;N>y;){const A=u.slice(y*f);Zy(A,p,f),++y}N<0?(m=S+1,v=y):(m=S,v=y,y=v+1)}}}function Zy(n,t,e){for(let i=0;i<e;i++)n[i]=t[i]}function Jy(n,t){const e=[];for(let i of n){if(i<0){if(!t)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}e.push(i)}return e}function A8(n,t,e,i,a,o,u,c,f,h){return new rp(n,t,e,i,a,o,u,c,f,h).compute()}function N8(n,t,e,i){const a=n===t,o=n<t&&e<0,u=t<n&&e>1;if(a||o||u)return Zo(0,i);const c=Math.abs(Math.ceil((t-n)/e)),f=Zo(c,i);t<n&&e===1&&(e=-1),f[0]=n;for(let h=1;h<f.length;h++)f[h]=f[h-1]+e;return f}const _8=il(n=>1/Math.sqrt(n));function k8(n,t,e,i,a,o,u,c,f,h){const p=[i/a,a],m=n.values,v=t.values;if(i===0)return ar(e,t.dtype);const y=f instanceof Zd?f:ar(p,t.dtype);typeof f=="string"||typeof f=="number"?y.values.fill(f):typeof f=="boolean"&&y.values.fill(+f);for(let S=0;S<o;S++){const N=[];let A=0;for(let _=0;_<u;_++){const I=m[S*u+_];N.push(I),A+=I*c[_]}if(A<0||A>=i/a)throw new Error(`Invalid indices: ${N} does not index into ${e}`);for(let _=0;_<a;_++)h?y.values[A*a+_]+=v[S*a+_]:y.values[A*a+_]=t.rank===0?v[0]:v[S*a+_]}return y}const E8=il(n=>1/(1+Math.exp(-n)));function L8(n,t,e,i,a){const o=Y_(i,t,e),u=Zt(e),c=mr(i);if(o){const m=X_(t,c);return a==="string"?n.slice(m,m+u):n.subarray(m,m+u)}const f=a==="string"?np(n):n,h=ar(i,a,f),p=ar(e,a);for(let m=0;m<p.size;++m){const v=p.indexToLoc(m),y=v.map((S,N)=>S+t[N]);p.set(h.get(...y),...v)}return a==="string"?Ok(p.values):p.values}function R8(n,t,e,i,a,o,u){const c=t[0],f=o[0],h=new Array(f),p=new Array(c),m=t[1];if(f===0){if(c!==0)throw new Error(Ck(c));const A=Yi(e,0),_=Yi(a,0);return[A,[0,m],_,h,p]}let v=!0,y=0;const S=new Array(f).fill(0);for(let A=0;A<c;++A){const _=n[A*m];if(_<0)throw new Error(Ak(A,_));if(_>=f)throw new Error(Nk(A,_,f));++S[_],v=v&&_>=y,y=_}let N=!0;for(let A=0;A<f;++A){const _=S[A]===0;h[A]=_,N=N&&!_,S[A]=Math.max(S[A],1),A>0&&(S[A]+=S[A-1])}if(N&&v){const A=n,_=i;for(let I=0;I<c;++I)p[I]=I;return[A,[c,m],_,h,p]}else{const A=S[f-1],_=Yi(e,A*m),I=Yi(a,A),D=new Array(f).fill(0);for(let M=0;M<c;++M){const Y=n[M*m],ct=D[Y],it=(Y===0?0:S[Y-1])+ct;D[Y]++;for(let nt=0;nt<m;++nt)_[it*m+nt]=n[M*m+nt];I[it]=i[M],p[M]=it}for(let M=0;M<f;++M)if(D[M]===0){const ct=M===0?0:S[M-1];_[ct*m+0]=M;for(let it=1;it<m;++it)_[ct*m+it]=0;I[ct]=u}return[_,[A,m],I,h,p]}}function I8(n,t,e,i,a){const o=Zt(i),u=t[0],c=a.length,f=[];let h=1,p=-1;for(let A=0;A<c;++A){const _=a[A];if(_===-1){if(p!==-1)throw new Error(_k(p,A));p=A,f.push(1)}else{if(_<0)throw new Error(kk(A,_));h*=_,f.push(_)}}if(p!==-1){if(h<=0)throw new Error(Ek());const A=Math.trunc(o/h);if(h*A!==o)throw new Error(Lk(i,f));f[p]=A}if(Zt(f)!==o)throw new Error(Rk(i,f));const v=i.length,y=[];if(v>0){y[v-1]=1;for(let A=v-2;A>=0;--A)y[A]=y[A+1]*i[A+1]}const S=[];if(c>0){S[c-1]=1;for(let A=c-2;A>=0;--A)S[A]=S[A+1]*f[A+1]}const N=Yi(e,u*c);for(let A=0;A<u;++A){let _=0;for(let I=0;I<v;++I)_+=n[A*v+I]*y[I];for(let I=0;I<c;++I)N[A*c+I]=Math.trunc(_/S[I]),_%=S[I]}return[N,[u,c],f]}function T8(n,t,e,i,a,o=!1,u=0){const c=i.length,f=[t[0],n.length/t[0]],h=f[1],m=c>0?a[c-1]+1:0;if(m<0)throw new Error(By());const v=t.slice();v[0]=m;const y=v.reduce((D,M)=>D*M,1),S=Yi(e,y);if(c===0)return m>0&&S.fill(u),[S,v];if(m<=0)throw new Error(By());let N=0,A=1,_=0,I=a[N];for(;;){let D=0;if(A<c){if(D=a[A],I===D){++A;continue}if(I>=D)throw new Error(Ik())}if(I<0||I>=m)throw new Error(Tk(I,m));I>_&&S.fill(u,_*h,I*h);for(let M=N;M<A;++M){const Y=i[M];if(Y<0||Y>=f[0])throw new Error(Dk(M,i[M],f[0]));for(let ct=0;ct<h;ct++)S[I*h+ct]+=n[Y*h+ct]}if(o)for(let M=0;M<h;M++)S[I*h+M]/=A-N;if(N=A,++A,_=I+1,I=D,A>c)break}return _<m&&S.fill(u,_*h,m*h),[S,v]}const D8=il(n=>Math.sqrt(n));const P8=Ur(((n,t)=>{const e=n-t;return e*e}));const M8=il((n,t)=>{const{pattern:e,replaceGlobal:i,rewrite:a}=t;return n.replace(new RegExp(e,i?"g":""),a)});function O8(n,t,e,i){const a=ar(n,t.dtype);for(let o=0;o<a.size;o++){const u=a.indexToLoc(o),c=new Array(u.length);for(let f=0;f<c.length;f++)c[f]=u[f]*e[f]+i[f];a.set(t.get(...c),...u)}return a}class F8{constructor(t,e,i,a,o,u){this.separator=Mu(t),this.nGramWidths=e,this.leftPad=Mu(i),this.rightPad=Mu(a),this.padWidth=o,this.preserveShort=u}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const i=this.getPadWidth(e);return Math.max(0,t+2*i-e+1)}createNGrams(t,e,i,a,o,u){for(let c=0;c<o;++c){const f=this.getPadWidth(u),h=Math.max(0,f-c),p=Math.max(0,f-(o-(c+1))),m=u-(h+p),v=e+(h>0?0:c-f);let y=0;y+=h*this.leftPad.length;for(let I=0;I<m;++I)y+=t[v+I].length;y+=p*this.rightPad.length;const S=h+p+m-1;y+=S*this.separator.length,i[a+c]=new Uint8Array(y);const N=i[a+c];let A=0;const _=I=>I.forEach(D=>N[A++]=D);for(let I=0;I<h;++I)_(this.leftPad),_(this.separator);for(let I=0;I<m-1;++I)_(t[v+I]),_(this.separator);if(m>0){_(t[v+m-1]);for(let I=0;I<p;++I)_(this.separator),_(this.rightPad)}else{for(let I=0;I<p-1;++I)_(this.rightPad),_(this.separator);_(this.rightPad)}}}compute(t,e){const i=t.length,a=e.length;if(a>0){let f=e[0];if(f!==0)throw new Error(`First split value must be 0, got ${f}`);for(let h=1;h<a;++h){let p=e[h]>=f;if(p=p&&e[h]<=i,!p)throw new Error(`Invalid split value ${e[h]}, must be in [${f}, ${i}]`);f=e[h]}if(f!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${f}`)}const o=a-1,u=Yi("int32",a);if(i===0||a===0){const f=new Array(i);for(let h=0;h<=o;++h)u[h]=0;return[f,u]}u[0]=0;for(let f=1;f<=o;++f){const h=e[f]-e[f-1];let p=0;this.nGramWidths.forEach(m=>{p+=this.getNumNGrams(h,m)}),this.preserveShort&&h>0&&p===0&&(p=1),u[f]=u[f-1]+p}const c=new Array(u[o]);for(let f=0;f<o;++f){const h=e[f];let p=u[f];if(this.nGramWidths.forEach(m=>{const v=e[f+1]-e[f],y=this.getNumNGrams(v,m);this.createNGrams(t,h,c,p,y,m),p+=y}),this.preserveShort&&p===u[f]){const m=e[f+1]-e[f];if(m===0)continue;const v=m+2*this.padWidth;this.createNGrams(t,h,c,p,1,v)}}return[c,u]}}function B8(n,t,e,i,a,o,u,c){return new F8(e,i,a,o,u,c).compute(n,t)}function z8(n,t,e,i){if(!n.length)return;if(t.length===0){for(let o=0;o<n.length;++o)i.push(n.subarray(o,o+1));return}if(t.length===1){const o=t[0];let u=n.indexOf(o);for(;u!==-1;){const c=n.subarray(0,u);(!e||c.length!==0)&&i.push(c),n=n.subarray(u+1),u=n.indexOf(o)}(!e||n.length!==0)&&i.push(n);return}let a=0;for(let o=0;o<n.length+1;o++)if(o===n.length||t.indexOf(n[o])!==-1){const u=n.subarray(a,o);(!e||u.length!==0)&&i.push(u),a=o+1}}function U8(n,t,e){const i=n.length,a=[];let o=0,u=0;const c=new Array(i);for(let v=0;v<i;++v){const y=a.length;z8(n[v],t,e,a);const S=a.length-y;c[v]=S,o+=S,u=Math.max(u,S)}const f=Yi("int32",o*2),h=new Array(o),p=[i,u];let m=0;for(let v=0;v<i;++v)for(let y=0;y<c[v];++y)f[m*2]=v,f[m*2+1]=y,h[m]=a[m],++m;return[f,h,p]}function $8(n,t){const e=Yi("int32",n.length);for(let i=0;i<n.length;++i)e[i]=oN(n[i]).modulo(t).getLowBitsUnsigned();return e}const j8=Ur(((n,t)=>n-t));function H8(n,t){const e=new Array(n.rank);for(let a=0;a<e.length;a++)e[a]=n.shape[a]*t[a];const i=ar(e,n.dtype);for(let a=0;a<i.values.length;++a){const o=i.indexToLoc(a),u=new Array(n.rank);for(let f=0;f<u.length;f++)u[f]=o[f]%n.shape[f];const c=n.locToIndex(u);i.values[a]=n.values[c]}return i}const ch=(n,t)=>{const e=t.value-n.value;return e===0?n.index-t.index:e};function Jb(n,t,e=0,i=n.length-1){for(;i>e;){if(i-e>600){const c=i-e+1,f=t-e+1,h=Math.log(c),p=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*p*(c-p)/c)*Math.sign(f-c/2),v=Math.max(e,Math.floor(t-f*p/c+m)),y=Math.min(i,Math.floor(t+(c-f)*p/c+m));Jb(n,t,v,y)}const a=n[t];let o=e,u=i;for(ih(n,e,t),ch(n[i],a)>0&&ih(n,e,i);o<u;){for(ih(n,o,u),o++,u--;ch(n[o],a)<0;)o=o+1;for(;ch(n[u],a)>0;)u=u-1}ch(n[e],a)===0?ih(n,e,u):(u=u+1,ih(n,u,i)),u<=t&&(e=u+1),t<=u&&(i=u-1)}}function q8(n,t,e,i,a){const o=t[t.length-1],[u,c]=[n.length/o,o],f=zu(e,u*i),h=zu("int32",u*i);for(let m=0;m<u;m++){const v=m*c,y=n.subarray(v,v+c);let S=new Array(y.length);y.forEach((I,D)=>S[D]={value:I,index:D}),i<S.length&&(Jb(S,i),S=S.slice(0,i)),a&&S.sort(ch);const N=m*i,A=f.subarray(N,N+i),_=h.subarray(N,N+i);for(let I=0;I<i;I++)A[I]=S[I].value,_[I]=S[I].index}const p=t.slice();return p[p.length-1]=i,[ar(p,e,f),ar(p,"int32",h)]}function W8(n,t,e,i){const a=Gl(t,e)[0],o=[1,e[0],1];for(let S=0;S<a;S++)o[0]*=e[S];o[1]=e[a];for(let S=a+1;S<e.length;S++)o[2]*=e[S];const u=new Map,c=new Int32Array(e[a]),f=new Zd(o,i,n),h=[],p=o[0]===1&&o[2]===1;for(let S=0;S<e[a];S++){let N;if(p)N=n[S].toString();else{const _=[];for(let I=0;I<o[0];I++)for(let D=0;D<o[2];D++)_.push(f.get(I,S,D));N=_.join(",")}const A=u.get(N);if(A!=null)c[S]=A;else{const _=u.size;u.set(N,_),c[S]=_,h.push(S)}}const m=o.slice();m[1]=u.size;const v=new Zd(m,i);h.forEach((S,N)=>{for(let A=0;A<o[0];A++)for(let _=0;_<o[2];_++)v.set(f.get(A,S,_),A,N,_)});const y=e.slice();return y[a]=m[1],{outputValues:v.values,outputShape:y,indices:c}}const V8=Object.freeze(Object.defineProperty({__proto__:null,addImpl:qL,bincountImpl:WL,bincountReduceImpl:VL,bitwiseAndImpl:GL,castImpl:HL,ceilImpl:YL,concatImpl:XL,equalImpl:KL,expImpl:QL,expm1Impl:ZL,floorDivImpl:t8,floorImpl:JL,gatherNdImpl:e8,gatherV2Impl:n8,greaterEqualImpl:r8,greaterImpl:i8,lessEqualImpl:s8,lessImpl:a8,linSpaceImpl:o8,logImpl:l8,maxImpl:u8,maximumImpl:c8,minimumImpl:f8,multiplyImpl:Zb,negImpl:h8,notEqualImpl:d8,prodImpl:m8,raggedGatherImpl:S8,raggedRangeImpl:C8,raggedTensorToTensorImpl:A8,rangeImpl:N8,rsqrtImpl:_8,scatterImpl:k8,sigmoidImpl:E8,simpleAbsImpl:jL,sliceImpl:L8,sparseFillEmptyRowsImpl:R8,sparseReshapeImpl:I8,sparseSegmentReductionImpl:T8,sqrtImpl:D8,squaredDifferenceImpl:P8,staticRegexReplaceImpl:M8,stridedSliceImpl:O8,stringNGramsImpl:B8,stringSplitImpl:U8,stringToHashBucketFastImpl:$8,subImpl:j8,tileImpl:H8,topKImpl:q8,transposeImpl:p8,uniqueImpl:W8},Symbol.toStringTag,{value:"Module"}));const{addImpl:G8,castImpl:Y8,ceilImpl:X8,concatImpl:K8,equalImpl:Q8,expImpl:Z8,expm1Impl:J8,floorImpl:tR,floorDivImpl:eR,gatherNdImpl:nR,gatherV2Impl:iR,greaterEqualImpl:rR,greaterImpl:aR,lessEqualImpl:sR,lessImpl:oR,logImpl:lR,maxImpl:uR,maximumImpl:cR,minimumImpl:fR,multiplyImpl:hR,negImpl:dR,notEqualImpl:pR,prodImpl:mR,rangeImpl:gR,rsqrtImpl:yR,scatterImpl:vR,simpleAbsImpl:bR,sliceImpl:wR,stridedSliceImpl:xR,stringNGramsImpl:SR,subImpl:CR,tileImpl:AR,topKImpl:NR,transposeImpl:_R}=V8;const kR=pn({opType:qt.ABS,cpuKernelImpl:bR}),ER={kernelName:tb,backendName:"webgpu",kernelFunc:kR};const LR=pn({opType:qt.ACOS}),RR={kernelName:gC,backendName:"webgpu",kernelFunc:LR};const IR=pn({opType:qt.ACOSH}),TR={kernelName:yC,backendName:"webgpu",kernelFunc:IR};const DR=Xi({opType:Ie.ADD,cpuKernelImpl:G8,supportsComplex:!0}),PR={kernelName:Cg,backendName:"webgpu",kernelFunc:DR};class MR{constructor(t){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t[0],this.variableNames=t.map((e,i)=>`T${i}`),this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}getUserCode(){const t=[];this.variableNames.forEach(a=>{t.push(`let v${a} = get${a}ByOutputCoords(coords);`)});const e=this.variableNames.map(a=>`v${a}`).join(" + ");return`
      ${Wt("index")} {
        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if (flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            ${t.join(`
        `)}
            setOutputAtIndex(flatIndex, ${e});
          }
        }
      }
    `}}function OR(n){const{inputs:t,backend:e}=n,i=t;if(i.length===1)return oa({inputs:{x:i[0]},backend:e});const a=i.map(c=>c.dtype).reduce((c,f)=>ql(c,f)),o=i.map(c=>c.shape),u=new MR(o);return e.runWebGPUProgram(u,i,a)}const FR={kernelName:vC,backendName:"webgpu",kernelFunc:OR};class BR{constructor(t,e){this.variableNames=["A"],this.workgroupSize=[16,16,1];const i=new Array(t.length);for(let a=0;a<i.length;a++)i[a]=t[e[a]];this.outputShape=i,this.dispatchLayout={x:[0],y:[1]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}getUserCode(){Xt(this.workgroupSize[0]===this.workgroupSize[1],()=>`Must be a square tile, current tile shape is ${this.workgroupSize[0]} x ${this.workgroupSize[1]}`);const t=this.workgroupSize[0];return`
      var<workgroup> tile : array<array<f32, ${this.workgroupSize[0]+1}>, ${this.workgroupSize[0]}>;
      ${Wt()} {
        var x = i32(workgroupId.x) * ${t} + i32(localId.x);
        var y = i32(workgroupId.y) * ${t} + i32(localId.y);
        let width = uniforms.outShape[0];
        let height = uniforms.outShape[1];
        if (x < width && y < height) {
          tile[localId.y][localId.x] = f32(A[y * width + x]);
        }
        workgroupBarrier();

        x = i32(workgroupId.y) * ${t} + i32(localId.x);
        y = i32(workgroupId.x) * ${t} + i32(localId.y);
        if (x < height && y < width) {
          setOutputAtIndex((y * height + x), tile[localId.x]
            [localId.y]);
        }
      }
    `}}class zR{constructor(t,e){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;const i=new Array(t.length);for(let a=0;a<i.length;a++)i[a]=t[e[a]];this.outputShape=i,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=e,this.shaderKey=`transpose_${e}`}getUserCode(){const t=Ci(this.outputShape.length),e=t3(this.newDim);return`
      ${Wt("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            setOutputAtIndex(flatIndex, A[getIndexFromCoords${this.outputShape.length}D(
              ${t}(${e}), uniforms.aShape)]);
          }
        }
      }
    `}}function t3(n){const t=n.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const e=new Array(t);for(let i=0;i<n.length;i++)e[n[i]]=`coords.${Ko(i)}`;return e.join()}function fo(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{perm:o}=i,u=e,c=a.shape.length,f=new Array(c);for(let p=0;p<f.length;p++)f[p]=a.shape[o[p]];if(e.shouldExecuteOnCPU([a])){const m=u.tensorMap.get(a.dataId).values,v=_R(m,a.shape,a.dtype,o,f);return e.makeTensorInfo(f,a.dtype,v)}if(a.shape.length===2&&el(o,[1,0])){const p=new BR(a.shape,o);return u.runWebGPUProgram(p,[a],a.dtype)}const h=new zR(a.shape,o);return u.runWebGPUProgram(h,[a],a.dtype)}const UR={kernelName:qA,backendName:"webgpu",kernelFunc:fo};class $R{constructor(t,e,i){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[t.batchSize,t.inSize];const[a]=wp(this.inputShape,[1]);this.outputShape=a.length===0?[1]:a,t.inSize>=32768&&i>=512?this.workgroupSize=[512,1,1]:t.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=e,this.shaderKey=`reduce_${e}`}getUserCode(){let t="",e="0.0";const i=this.workgroupSize[0];this.reduceType==="min"||this.reduceType==="max"?(t=`
         if (isnan(candidate)) {
          bestValue = uniforms.NAN;
         } else if (!isnan(bestValue) && candidate ${this.reduceType==="min"?"<":">"} bestValue)
           {  bestValue = candidate; }`,e="f32(x[offset])"):this.reduceType==="sum"||this.reduceType==="mean"?t=" bestValue = bestValue + candidate; ":this.reduceType==="prod"?(t=" bestValue = bestValue * candidate; ",e="1.0"):this.reduceType==="all"?(t=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",e="1.0"):this.reduceType==="any"&&(t=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",e="0.0");const a=this.reduceType==="mean"?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return`
       fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
       }

       ${`
         var<workgroup> xBestValues : array<f32, ${i}>;
       `}
       fn getOffset(outputIndex : i32) -> i32 {
         let outputCoords = getCoordsFromIndex(outputIndex);
         let offset = ${this.outputShape.length===1?"outputCoords":"outputCoords[0]"} * uniforms.reduceSize;
          return offset;
       }
       ${Wt("index")} {
         let outputIndex = index / ${i};
         let offset = getOffset(outputIndex);
         var bestValue = ${e};
         let Length = uniforms.reduceSize;
         let WorkPerThread = DIV_CEIL(u32(Length), ${i}u);
         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;
             k = k + ${i}) {
           let candidate = f32(x[offset + k]);
           ${t}
         }
         xBestValues[localId.x] = bestValue;
         workgroupBarrier();

         var reduceSize = min(u32(Length), ${i}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            ${t}
            xBestValues[localId.x] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (localId.x == 0u && outputIndex < uniforms.size) {
          ${a}
        }
       }
     `}}const jR={mean:"float32",all:"bool",any:"bool"};function Ku(n,t,e,i,a){const o=n.shape.length,u=[],c=Gl(t,n.shape);let f=c;const h=Ih(f,o);let p=n;h!=null&&(p=fo({inputs:{x:n},attrs:{perm:h},backend:a}),f=Th(f.length,o),u.push(p)),Eg(i,f,o);const[m,v]=wp(p.shape,f);let y=m;e&&(y=g_(m,c));let S;if((i==="max"||i==="prod")&&a.shouldExecuteOnCPU([p])){const N=a.tensorMap.get(p.dataId).values;switch(i){case"max":const A=uR(N,Zt(v),y,n.dtype);S=a.makeTensorInfo(y,n.dtype,A);break;case"prod":const{outVals:_,outShape:I,outDtype:D}=mR(p.shape,p.dtype,N,f);S=a.makeTensorInfo(I,D,_);break;default:throw new Error(`${i} CPU implementation is not yet supported.`)}}else{const N=Zt(v),_=Zt(p.shape)/N,I={windowSize:N,inSize:N,batchSize:_,outSize:1},D=jR[i]||wN(n.dtype),M=[{type:"int32",data:[N]}],Y=new $R(I,i,a.device.limits.maxComputeWorkgroupSizeX),ct=a.runWebGPUProgram(Y,[p],D,M);u.push(ct),S=se({inputs:{x:ct},attrs:{shape:y},backend:a})}return u.forEach(N=>a.disposeData(N.dataId)),S}function HR(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{keepDims:o,axis:u}=i;return Ku(a,u,o,"all",e)}const qR={kernelName:bC,backendName:"webgpu",kernelFunc:HR};function WR(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{keepDims:o,axis:u}=i;return Ku(a,u,o,"any",e)}const VR={kernelName:wC,backendName:"webgpu",kernelFunc:WR};class e3{constructor(t,e,i){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;const a=[e];this.op=i==="min"?"<":">";const[o,u]=wp(t,a);this.outputShape=o.length===0?[1]:o,this.dispatchLayout=Jt(this.outputShape),Zt(u)<32?(this.type="plain",this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=Vt(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=t,this.shaderKey=`argMinMax_${this.op}_${this.type}`}getUserCode(){const t=this.workgroupSize[0],e=()=>this.inputShape.length===1?"uniforms.xShape":`uniforms.xShape.${Ko(this.inputShape.length-1)}`,i=()=>{let a="";if(this.outputShape.length===1)this.inputShape.length!==1&&(a+="outputCoords,");else for(let o=0;o<this.outputShape.length;o++)a+=`outputCoords.${Ko(o)},`;return a};return this.type==="shared"?`
      fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
      }

      ${`
      var<workgroup> xBestIndices : array<i32, ${t}>;
      var<workgroup> xBestValues : array<f32, ${t}>;
    `}

      ${Wt("index")} {
        let outputIndex = index / ${t};
        let reduceLength = ${e()};

        var bestIndex = i32(localId.x);
        var bestValue = uniforms.infinityValue;
        let outputCoords = getCoordsFromIndex(outputIndex);
        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;
            k = k + ${t}) {
          let candidate = getX(${i()} k);
          if (!isnan(candidate) && candidate ${this.op} bestValue) {
            bestValue = candidate;
            bestIndex = k;
          }
        }
        xBestValues[localId.x] = bestValue;
        xBestIndices[localId.x] = bestIndex;
        workgroupBarrier();

        var reduceSize = min(u32(reduceLength), ${t}u);
        for (var currentSize = reduceSize / 2u; reduceSize > 1u;
            currentSize = reduceSize / 2u) {
          let interval = DIV_CEIL(reduceSize, 2u);
          if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              xBestValues[localId.x] = bestValue;
              xBestIndices[localId.x] = xBestIndices[localId.x + interval];
            }
          }
          reduceSize = interval;
          workgroupBarrier();
        }

        if (localId.x == 0u && outputIndex < uniforms.size) {
          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);
        }
      }
    `:`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let outputCoords = getCoordsFromIndex(index);
          var bestIndex = 0;
          var bestValue = getX(${i()} 0);
          let reduceLength = ${e()};
          for (var i = 1; i < reduceLength; i++) {
            let candidate = getX(${i()} i);
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              bestIndex = i;
            }
          }
          setOutputAtIndexI32(index, bestIndex);
        }
      }
      `}}function GR(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o}=i;let u=Gl(o,a.shape);const c=Ih(u,a.shape.length);let f=a;const h=[];c!=null&&(f=fo({inputs:{x:a},backend:e,attrs:{perm:c}}),h.push(f),u=Th(u.length,f.shape.length)),Eg("argMax",[u[0]],f.shape.length);const p=new e3(f.shape,u[0],"max"),m=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],v=e.runWebGPUProgram(p,[f],"int32",m);return h.forEach(y=>e.disposeData(y.dataId)),v}const YR={kernelName:xC,backendName:"webgpu",kernelFunc:GR};function XR(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o}=i;let u=Gl(o,a.shape);const c=Ih(u,a.shape.length);let f=a;const h=[];c!=null&&(f=fo({inputs:{x:a},backend:e,attrs:{perm:c}}),h.push(f),u=Th(u.length,f.shape.length)),Eg("argMin",[u[0]],f.shape.length);const p=new e3(f.shape,u[0],"min"),m=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],v=e.runWebGPUProgram(p,[f],"int32",m);return h.forEach(y=>e.disposeData(y.dataId)),v}const KR={kernelName:SC,backendName:"webgpu",kernelFunc:XR};const QR=pn({opType:qt.ASIN}),ZR={kernelName:CC,backendName:"webgpu",kernelFunc:QR};const JR=pn({opType:qt.ASINH}),tI={kernelName:AC,backendName:"webgpu",kernelFunc:JR};const eI=pn({opType:qt.ATAN}),nI={kernelName:NC,backendName:"webgpu",kernelFunc:eI};const iI=Xi({opType:Ie.ATAN2}),rI={kernelName:kC,backendName:"webgpu",kernelFunc:iI};const aI=pn({opType:qt.ATANH}),sI={kernelName:_C,backendName:"webgpu",kernelFunc:aI};class oI{constructor(t){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];

          let xRCCorner = coords.yz * uniforms.strides;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          let value = getX(batch, xRCorner, xCCorner, d);
          setOutputAtIndex(index, value);
        }
      }
    `}}class wh{constructor(t,e,i=!1,a=!1,o=!1){if(this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=e,this.computePositions=i,this.flattenPositions=a,this.includeBatchIndex=o,this.shaderKey=`pool2D_${e}_${i}_${a}_${o}`}getUserCode(){let t;this.poolType==="avg"?t="resultValue = resultValue + value; count = count + 1.0;":this.computePositions?t=`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC"};
      }`:t="resultValue = max(value, resultValue);";let e="resultValue";return this.poolType==="avg"&&(e="resultValue / max(count, 1.0)"),`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];
          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {
            let xR = xRCorner + wR;

            if (xR < 0 || xR >= uniforms.convDims.x) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {
              let xC = xCCorner + wC;
              if (xC < 0 || xC >= uniforms.convDims.y) {
                continue;
              }

              let value = getX(batch, xR, xC, d);
              ${t}
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${e});`}
        }
      }
    `}}class Tg{constructor(t,e,i=!1,a=!1,o=!1){if(this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=e,this.computePositions=i,this.flattenPositions=a,this.includeBatchIndex=o,this.shaderKey=`pool3D_${e}_${i}_${a}_${o}`}getUserCode(){let t;this.poolType==="avg"?t="resultValue += value; count += 1.0;":this.computePositions?t=`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC"};
      }`:t="resultValue = max(value, resultValue);";let e="resultValue";return this.poolType==="avg"&&(e="resultValue / max(count, 1.0)"),`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords.x;
          let ch = coords.u;

          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
          let xDCorner = xCorner.x;
          let xRCorner = xCorner.y;
          let xCCorner = xCorner.z;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {
            let xD = xDCorner + wD;
            if (xD < 0 || xD >= uniforms.convDims.x) {
              continue;
            }

            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {
              let xR = xRCorner + wR;
              if (xR < 0 || xR >= uniforms.convDims.y) {
                continue;
              }

              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {
                let xC = xCCorner + wC;
                if (xC < 0 || xC >= uniforms.convDims.z) {
                  continue;
                }

                let value = getX(batch, xD, xR, xC, ch);
                ${t}
              }
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${e});`}
        }
      }
    `}}function n3(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{reductionIndices:o,keepDims:u}=i;return Ku(a,o,u,"max",e)}const lI={kernelName:B6,backendName:"webgpu",kernelFunc:n3};function i3(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{keepDims:o,axis:u}=i;return Ku(a,u,o,"mean",e)}const uI={kernelName:q6,backendName:"webgpu",kernelFunc:i3};function r3(n,t,e,i){if(t.filterWidth===1&&t.filterHeight===1&&el(t.inShape,t.outShape))return oa({inputs:{x:n},backend:i});if(t.filterWidth===t.inWidth&&t.filterHeight===t.inHeight&&t.batchSize===1&&t.padInfo.type==="VALID"){const u=n.shape.length,c=se({inputs:{x:n},backend:i,attrs:{shape:[n.shape[u-3]*n.shape[u-2],n.shape[u-1]]}});let f;e==="avg"?f=i3({inputs:{x:c},backend:i,attrs:{axis:0,keepDims:!1}}):(Xt(e==="max",()=>`Invalid pool type ${e}`),f=n3({inputs:{x:c},backend:i,attrs:{reductionIndices:0,keepDims:!1}}));const h=se({inputs:{x:f},backend:i,attrs:{shape:t.outShape}});return i.disposeData(c.dataId),i.disposeData(f.dataId),h}let a;const o=[{type:"int32",data:[t.strideHeight,t.strideWidth]}];return t.filterHeight===1&&t.filterWidth===1?a=new oI(t):(e==="avg"?a=new wh(t,"avg"):(Xt(e==="max",()=>`Invalid pool type ${e}`),a=new wh(t,"max")),o.push({type:"int32",data:[t.padInfo.top,t.padInfo.left]},{type:"int32",data:[t.dilationHeight,t.dilationWidth]},{type:"int32",data:[t.inHeight,t.inWidth]},{type:"int32",data:[t.effectiveFilterHeight,t.effectiveFilterWidth]})),i.runWebGPUProgram(a,[n],n.dtype,o)}function cI(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{filterSize:o,strides:u,pad:c,dimRoundingMode:f}=i,p=Rh(a.shape,o,u,1,c,f);return r3(a,p,"avg",e)}const fI={kernelName:EC,backendName:"webgpu",kernelFunc:cI};function hI(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{filterSize:o,strides:u,pad:c,dataFormat:f,dimRoundingMode:h}=i,p=[1,1,1],m=vp(a.shape,o,u,p,c,h,f),v=new Tg(m,"avg"),y=[{type:"int32",data:[m.strideDepth,m.strideHeight,m.strideWidth]},{type:"int32",data:[m.padInfo.front,m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.inDepth,m.inHeight,m.inWidth]},{type:"int32",data:[m.effectiveFilterDepth,m.effectiveFilterHeight,m.effectiveFilterWidth]}];return e.runWebGPUProgram(v,[a],a.dtype,y)}const dI={kernelName:RC,backendName:"webgpu",kernelFunc:hI};class pI{constructor(t){this.variableNames=["dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);

            dotProd = dotProd + dyValue * uniforms.avgMultiplier;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class mI{constructor(t){this.variableNames=["dy"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              dotProd += dyValue * uniforms.avgMultiplier;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}function gI(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,input:o}=t,u=o,{filterSize:c,strides:f,pad:h,dimRoundingMode:p}=i,m=vp(u.shape,c,f,1,h,p),v=new mI(m),y=1/(m.filterDepth*m.filterHeight*m.filterWidth),S=[{type:"int32",data:[m.strideDepth,m.strideHeight,m.strideWidth]},{type:"int32",data:[m.effectiveFilterDepth-1-m.padInfo.front,m.effectiveFilterHeight-1-m.padInfo.top,m.effectiveFilterWidth-1-m.padInfo.left]},{type:"int32",data:[m.effectiveFilterDepth,m.effectiveFilterHeight,m.effectiveFilterWidth]},{type:"int32",data:[m.outDepth]},{type:"int32",data:[m.outHeight]},{type:"int32",data:[m.outWidth]},{type:"float32",data:[y]}];return e.runWebGPUProgram(v,[a],u.dtype,S)}const yI={kernelName:IC,backendName:"webgpu",kernelFunc:gI};function vI(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,input:o}=t,u=o;Kb([a,o],"avgPoolGrad");const{filterSize:c,strides:f,pad:h}=i,p=Rh(u.shape,c,f,1,h),m=new pI(p),v=1/(p.filterHeight*p.filterWidth),y=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.effectiveFilterHeight-1-p.padInfo.top,p.effectiveFilterWidth-1-p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]},{type:"int32",data:[p.outHeight]},{type:"int32",data:[p.outWidth]},{type:"float32",data:[v]}];return e.runWebGPUProgram(m,[a],u.dtype,y)}const bI={kernelName:LC,backendName:"webgpu",kernelFunc:vI};function wI(n){const{inputs:t,backend:e,attrs:i}=n,{a,b:o}=t,{transposeA:u,transposeB:c}=i;return Ap({a,b:o,transposeA:u,transposeB:c,backend:e})}const xI={kernelName:TC,backendName:"webgpu",kernelFunc:wI};class SI{constructor(t,e){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.rank=e.length,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=t,this.uniforms=`start : ${Ci(t.length)}, `,this.shaderKey="slice"}getUserCode(){const t=Ci(this.rank),e=CI(this.rank);let i;return this.start.length===1?i=this.outputShape.map((o,u)=>"sourceLoc = uniforms.start + coords;"):i=this.outputShape.map((o,u)=>`sourceLoc.${V1[u]} = uniforms.start.${Ko(u)} + coords.${V1[u]};`),`
      ${Wt("index")} {
        if (index < uniforms.size) {
          var sourceLoc : ${t};
          let coords = getCoordsFromIndex(index);
          ${i.join(`
`)}
          setOutputAtIndex(index, getSource(${e}));
        }
      }
    `}}const V1=["x","y","z","w","u","v"];function CI(n){if(n===1)return"sourceLoc";if(n<=6)return V1.slice(0,n).map(t=>`sourceLoc.${t}`).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}function yf(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{begin:o,size:u}=i,[c,f]=K_(a,o,u);if(V_(a,c,f),e.shouldExecuteOnCPU([a])||a.dtype==="string"){const m=e.tensorMap.get(a.dataId),v=wR(m.values,c,f,a.shape,a.dtype);return e.makeTensorInfo(f,a.dtype,v)}if(Zt(f)===0)return e.makeTensorInfo(f,a.dtype,[]);const h=new SI(c,f),p=[{type:"int32",data:c}];return e.runWebGPUProgram(h,[a],a.dtype,p)}const AI={kernelName:CA,backendName:"webgpu",kernelFunc:yf};const NI=n=>{const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{blockShape:o,crops:u}=i;Xt(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet");const c=o.reduce((I,D)=>I*D),f=Hb(a.shape,o,c),h=qb(f.length,o.length),p=Wb(a.shape,o,c),m=ak(u,o.length),v=sk(p,u,o.length),y=[],S=se({inputs:{x:a},backend:e,attrs:{shape:f}}),N=fo({inputs:{x:S},backend:e,attrs:{perm:h}}),A=se({inputs:{x:N},backend:e,attrs:{shape:p}}),_=yf({inputs:{x:A},backend:e,attrs:{begin:m,size:v}});return y.push(S),y.push(N),y.push(A),y.forEach(I=>e.disposeData(I.dataId)),_},_I={kernelName:DC,backendName:"webgpu",kernelFunc:NI};const kI=`
  fn bincount_write(index: i32, value: f32) {
    ${Yl("&result[index]","value","float32")}
  }
`,EI=`
  fn bincount_write(index: i32, value: f32) {
    atomicStore(&result[index], bitcast<i32>(value));
  }
`;class a3{constructor(t,e,i=!1){this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=t,this.rank=t.length,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=i,i&&(this.atomic=!1),this.hasWeights=e,this.hasWeights&&this.variableNames.push("w"),this.shaderKey=`bincount_${this.hasWeights}_${this.binaryOutput}_${this.rank}`}getUserCode(){return`
    ${this.binaryOutput?EI:kI}
  ${Wt("index")} {
    ${this.rank===1?`if (index < uniforms.xShape) {
      let indexVal = i32(getX(index));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(index)":"1."};
        bincount_write(indexVal, value);
      }
    }`:`let coord = getCoordsFromIndex(index);
    if (coordsInBounds2D(coord, uniforms.xShape)) {
      let indexVal = i32(getX(coord[0], coord[1]));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1."};
        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);
      }
    }`}
  }
  `}}function LI(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,weights:o}=t,{size:u}=i,c=Zt(a.shape),h=Zt(o.shape)>0,p=[u],m=o.dtype,v=Br({backend:e,attrs:{shape:p,value:0,dtype:m}}),y=new a3([c],h),S=[{type:"int32",data:[u]}],N=h?[a,o]:[a];return e.runWebGPUProgram(y,N,m,S,v)}const RI={kernelName:PC,backendName:"webgpu",kernelFunc:LI};class II{constructor(t){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}getUserCode(){return`
  ${Wt("index")} {
    if (index < uniforms.size) {
      var s0 = 1.0;
      var s1 = 1.0;
      let indexS0 = index - uniforms.size + uniforms.s0Size;
      let indexS1 = index - uniforms.size + uniforms.s1Size;
      if (indexS0 >= 0) {
        s0 = getS0(indexS0);
      }
      if (indexS1 >= 0) {
        s1 = getS1(indexS1);
      }

      if (s0 == 1.0) {
        setOutputAtIndex(index, s1);
      } else if (s1 == 1.0) {
        setOutputAtIndex(index, s0);
      } else if (s0 != s1) {
        setOutputAtIndex(index, uniforms.NAN);
      } else {
        setOutputAtIndex(index, s0);
      }
    }
  }
  `}}function TI(n){const{inputs:t,backend:e}=n,{s0:i,s1:a}=t;if(e.shouldExecuteOnCPU([i,a])){const p=e.tensorMap.get(i.dataId),m=e.tensorMap.get(a.dataId),v=p.values,y=m.values,S=oo(Array.from(v),Array.from(y));return e.makeTensorInfo([S.length],"int32",Int32Array.from(S))}const o=Zt(i.shape),u=Zt(a.shape),c=Math.max(o,u),f=new II(c),h=[{type:"int32",data:[o]},{type:"int32",data:[u]}];return e.runWebGPUProgram(f,[i,a],"int32",h)}const DI={kernelName:MC,backendName:"webgpu",kernelFunc:TI};const s3=Xi({opType:Ie.NOT_EQUAL,dtype:"bool",cpuKernelImpl:pR}),PI={kernelName:Q6,backendName:"webgpu",kernelFunc:s3};function Dh(n){const{inputs:t,backend:e}=n,{input:i}=t,a=e.tensorMap.get(i.dataId);return oa({inputs:{x:a.complexTensorInfos.real},backend:e})}const MI={kernelName:oA,backendName:"webgpu",kernelFunc:Dh};function OI(n,t){const e=new gf(n.shape,qt.TO_INT),i=t.runWebGPUProgram(e,[n],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}function G1(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{dtype:o}=i;if(o==="complex64"){if(a.dtype==="complex64")return oa({inputs:{x:a},backend:e});const u=q1(a.shape),c=G1({inputs:{x:a},backend:e,attrs:{dtype:"float32"}}),f=Xu({inputs:{real:c,imag:u},backend:e});return u.dispose(),e.disposeData(c.dataId),f}if(a.dtype==="complex64"){const u=Dh({inputs:{input:a},backend:e}),c=G1({inputs:{x:u},backend:e,attrs:{dtype:o}});return e.disposeData(u.dataId),c}if(!aC(a.dtype,o)){const u=oa({inputs:{x:a},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:o}}if(e.shouldExecuteOnCPU([a])){const u=e.tensorMap.get(a.dataId).values,[c,f,h]=Y8(u,a.shape,a.dtype,o);return e.makeTensorInfo(c,f,h)}if(o==="int32")return OI(a,e);if(o==="bool"){const u=e.makeTensorInfo([],"bool",zu("bool",1)),f=s3({inputs:{a,b:u},backend:e});return e.disposeData(u.dataId),f}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${o}`)}const FI={kernelName:Ag,backendName:"webgpu",kernelFunc:G1};const BI=pn({opType:qt.CEIL,cpuKernelImpl:X8}),zI={kernelName:OC,backendName:"webgpu",kernelFunc:BI};class UI{constructor(t){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}getUserCode(){return`
      ${Wt("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          var clampedValue = clamp(
              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));
          clampedValue = select(clampedValue, value, isnanVec4(value));
          setOutputAtIndex(index, clampedValue);
        }
      }
    `}}class $I{constructor(t){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}getUserCode(){return`
      ${Wt("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          if (isnan(value)) {
            setOutputAtIndex(index, value);
            return;
          }
          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));
        }
      }
    `}}function jI(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{clipValueMin:o,clipValueMax:u}=i;let c;const f=[{type:"float32",data:[o]},{type:"float32",data:[u]}];return Zt(a.shape)%4===0?c=new UI(a.shape):c=new $I(a.shape),e.runWebGPUProgram(c,[a],a.dtype,f)}const HI={kernelName:FC,backendName:"webgpu",kernelFunc:jI};class qI{constructor(t){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let re = abs(getRealByOutputIndex(index));
        let im = abs(getImagByOutputIndex(index));
        let mx = max(re, im);

        // The length function in wgsl may be not underflow-safe on some GPUs.
        // So the safe solution is to ensure underflow-safety in all cases.
        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));
      }
    }
  `}}function tv(n,t){return{dataId:t.dataId,dtype:t.dtype,shape:n.shape}}function WI(n){const{inputs:t,backend:e}=n,{x:i}=t,a=e.tensorMap.get(i.dataId),o=new qI(i.shape),u=[tv(i,a.complexTensorInfos.real),tv(i,a.complexTensorInfos.imag)];return e.runWebGPUProgram(o,u,u[0].dtype)}const VI={kernelName:nb,backendName:"webgpu",kernelFunc:WI};class GI{constructor(t){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=bh(t,1),this.variableNames=t.map((e,i)=>`T${i}`),this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=t.length-1;for(let e=0;e<this.offsetLength;e++)this.uniforms+=`offset${e} : i32,`;this.shaderKey="concat"}getUserCode(){const t=[];if(this.offsetLength>0){t.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(let o=1;o<this.offsetLength;o++)t.push(`else if (yC < uniforms.offset${[o]}){ setOutputAtCoords(coords.x, coords.y, getT${o}(yR, yC - uniforms.offset${o-1})); }`);const i=this.offsetLength,a=this.offsetLength-1;t.push(`else { setOutputAtCoords(coords.x, coords.y, getT${i}(yR, yC - uniforms.offset${a})); }`)}else t.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return`
      ${Wt("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            let yR = coords.x;
            let yC = coords.y;

            ${t.join(`
        `)}
          }
        }
      }
    `}}function Np(n){const{inputs:t,backend:e}=n,{input:i}=t,a=e.tensorMap.get(i.dataId);return oa({inputs:{x:a.complexTensorInfos.imag},backend:e})}const YI={kernelName:C6,backendName:"webgpu",kernelFunc:Np};function fh(n,t,e){const i=n[0].dtype;if(i==="complex64"){const S=n.map(D=>Dh({inputs:{input:D},backend:e})),N=n.map(D=>Np({inputs:{input:D},backend:e})),A=fh(S,t,e),_=fh(N,t,e),I=Xu({inputs:{real:A,imag:_},backend:e});return S.forEach(D=>e.disposeData(D.dataId)),N.forEach(D=>e.disposeData(D.dataId)),e.disposeData(A.dataId),e.disposeData(_.dataId),I}let a=e.shouldExecuteOnCPU(n);if(i==="string"&&(a=!0),a){const S=n.map(Y=>{const it=[-1,Zt(Y.shape.slice(t))];return se({inputs:{x:Y},backend:e,attrs:{shape:it}})}),N=S.map(Y=>({vals:e.readSync(Y.dataId),shape:Y.shape})),A=bh(S.map(Y=>Y.shape),1),_=S[0].shape[0]===1,I=K8(N,A,i,_),D=bh(n.map(Y=>Y.shape),t),M=e.makeTensorInfo(D,i,I);return S.forEach(Y=>e.disposeData(Y.dataId)),M}const o=e.device.limits.maxStorageBuffersPerShaderStage-1;if(n.length>o){const S=[];for(let A=0;A<n.length;A+=o){const _=n.slice(A,A+o);S.push(fh(_,t,e))}const N=fh(S,t,e);for(const A of S)e.disposeData(A.dataId);return N}const{tensors2D:u,outShape:c}=XI(n,t,e),f=u.map(S=>S.shape),h=new GI(f),p=[],m=new Array(f.length-1);if(m.length>0){m[0]=f[0][1],p.push({type:"int32",data:[m[0]]});for(let S=1;S<m.length;S++)m[S]=m[S-1]+f[S][1],p.push({type:"int32",data:[m[S]]})}const v=e.runWebGPUProgram(h,u,u[0].dtype,p);u.forEach(S=>e.disposeData(S.dataId));const y=se({inputs:{x:v},backend:e,attrs:{shape:c}});return e.disposeData(v.dataId),y}function XI(n,t,e){const i=bh(n.map(o=>o.shape),t);return{tensors2D:n.map(o=>se({inputs:{x:o},backend:e,attrs:{shape:[Zt(o.shape.slice(0,t)),Zt(o.shape.slice(t))]}})),outShape:i}}function o3(n){const{inputs:t,backend:e,attrs:i}=n,{axis:a}=i,o=Gl(a,t[0].shape)[0],u=t.map(h=>h.shape);J_(u,o);const c=bh(t.map(h=>h.shape),o);if(Zt(c)===0)return e.makeTensorInfo(c,t[0].dtype,[]);const f=t.filter(h=>Zt(h.shape)>0);return f.length===1?oa({inputs:{x:f[0]},backend:e}):fh(f,o,e)}const KI={kernelName:BC,backendName:"webgpu",kernelFunc:o3};function QI(n,t,e,i,a=!1,o=null,u=!1,c=4,f=4,h=4){const p=F=>{switch(F){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error(`innerElementSize ${F} is not supported.`)}},m=F=>{switch(F){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error(`innerElementSize ${F} is not supported.`)}},v=n?`
      let coord = vec4<i32>(batch, xRow, xCol, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, xRow, xCol);
      `,y=n?`
      let coords = vec4<i32>(
        batch,
        row / outWidth,
        row % outWidth,
        col);
      `:`
      let coords = vec4<i32>(
        batch,
        row,
        col / outWidth,
        col % outWidth);
      `,S=n?"uniforms.xShape[1]":"uniforms.xShape[2]",N=n?"uniforms.xShape[2]":"uniforms.xShape[3]",A=n?"row":"col",_=n?"col":"row",I=`
      let inChannels = uniforms.wShape[2];
      let outWidth = ${n?"uniforms.outShape[2]":"uniforms.outShape[3]"};
      let outRow = ${A} / outWidth;
      let outCol = ${A} % outWidth;

      let WRow = ${_} / (uniforms.filterDims[1] * inChannels);
      let WCol = ${_} / inChannels % uniforms.filterDims[1];
      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];
      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];
      let xCh = ${_} % inChannels;
      var resData = ${Ye(c)}(0.0);
      // The bounds checking is always needed since we use it to pad zero for
      // the 'same' padding type.
      if (xRow >= 0 && xRow < ${S} && xCol >= 0 && xCol < ${N}) {
        ${v}
        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);
        ${p(c)}
      }
      return resData;`,D=n?t&&i?`
      ${I}`:`
      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        ${I}
      }
      return ${Ye(c)}(0.0);`:i&&e?`
      ${I}`:`
      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {
        ${I}
      }
      return ${Ye(c)}(0.0);`,M=`${m(f)}`,Y=Ye(h),ct=Ye(n?c:f),it=Ye(n?f:c);return`
      ${nl(o,u,h===4,4)}
      fn mm_readA(batch: i32, row : i32, col : i32) -> ${ct} {
        ${n?D:M}
      }

      fn mm_readB(batch: i32, row : i32, col : i32) -> ${it} {
        ${n?M:D}
      }

      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ${Y}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)
        {
        var value = valueIn;
        let outWidth = ${n?"uniforms.outShape[2]":"uniforms.outShape[3]"};
        ${y}
        ${Yu(a,o)}
        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }`}class ZI{constructor(t,e,i,a,o=!1,u=null,c=!1,f=!1){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.outShape,this.isChannelsLast=t.dataFormat==="channelsLast",this.isVec4=((t.inChannels%4===0||t.inChannels%3===0)&&this.isChannelsLast||t.outWidth%4===0&&!this.isChannelsLast)&&t.outChannels%4===0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=Gb(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=Yb(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&t.inChannels%4!==0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),o&&(this.variableNames.push("bias"),this.variableComponents.push(4)),c&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],o&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=f,this.addBias=o,this.activation=u,this.hasPreluActivationWeights=c,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=e%this.tileAOuter===0,this.fitBOuter=i%this.tileBOuter===0,this.fitInner=a%this.tileInner===0,this.shaderKey=`conv2DMM_${this.elementsPerThread}_${this.activation}}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.innerElementSize}_${this.isChannelsLast}_${this.sequentialAccessByThreads}`}getUserCode(){const t=this.isVec4?Sp(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):Cp(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),e=this.isVec4?[this.innerElementSize,4,4]:[1,1,1];return`
    ${QI(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,e[0],e[1],e[2])}
    ${t}
  `}}class JI{constructor(t,e=!1,i=null,a=!1){this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=t.outShape,this.isChannelsLast=t.dataFormat==="channelsLast",this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=e,this.activation=i,this.hasPreluActivationWeights=a,e&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`conv2dnaive_${this.activation}_${this.isChannelsLast}`}getUserCode(){return`
       ${nl(this.activation,this.hasPreluActivationWeights,!1,4)}
       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{
         let coords = vec4<i32>(batch, row, col, chan);
         if (coordsInBounds4D(coords, uniforms.xShape)) {
           return  getX(batch, row, col, chan);
         } else {
          return 0.0;
         }
       }
       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{
         let coords = vec4<i32>(row, col, xChannel, outChannel);
         if(coordsInBounds4D(coords, uniforms.wShape)) {
           return getW(row, col, xChannel, outChannel);
          } else {
            return 0.0;
          }
       }
       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {
         let coords = ${this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);"}
         if (coordsInBounds4D(coords, uniforms.outShape)) {
           var value = valueIn;
           ${Yu(this.addBias,this.activation)}
           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);
         }
       }
       ${Wt("index")} {
         let coords = getOutputCoords();
         let batch = coords[0];
         let outChannel = ${this.isChannelsLast?"coords[3];":"coords[1];"}
         let outRow = ${this.isChannelsLast?"coords[1];":"coords[2];"}
         let outCol = ${this.isChannelsLast?"coords[2];":"coords[3];"}
         var acc : f32 = 0.0;
         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {
           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {
             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];
             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];
             for (var xChannel = 0; xChannel < ${this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"} xChannel = xChannel + 1) {
               ${this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);"}
               let f = readFilt(row, col, xChannel, outChannel);
               acc = acc + v * f;
             }
           }
         }
         writeResult(batch, outRow, outCol, outChannel, acc);
       }
     `}}class tT{constructor(t,e){this.variableNames=["x"],this.uniforms=`pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,
       inChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=e,this.shaderKey=`im2col_${this.isChannelsLast}`}getUserCode(){const t=this.isChannelsLast?1:2,e=this.isChannelsLast?2:3,i=this.isChannelsLast?"coords[1]":"coords[2]",a=this.isChannelsLast?"coords[2]":"coords[1]",o=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return`
    ${Wt("index")} {
      let coords = getCoordsFromIndex(index);
      if(index < uniforms.size) {
        let batch = coords[0];
        let row = ${i};
        let col = ${a};
        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];
        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);
        var value = 0.0;
        if(xRow < uniforms.xShape[${t}] && xRow >= 0) {
          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -
              uniforms.pads[1];
          let xCol = offsetX + uniforms.dilations[1] * ((col %
              uniforms.itemsPerBlockRow) / uniforms.inChannels);
          let ch = col % uniforms.inChannels;
          if(xCol < uniforms.xShape[${e}] && xCol >= 0) {
            value = ${o};
          }
        }
        setOutputAtIndex(index, value);
      }
    }
   `}}function ap(n,t){const e=n.length;return e>=3?t?[...n.slice(0,-3),n[e-3]*n[e-2],n[e-1]]:[...n.slice(0,-3),n[e-3],n[e-2]*n[e-1]]:!t&&e===1&&n[0]>1?[n[0],1]:null}function eT({x:n,filter:t,convInfo:e,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:u=0,activation:c=null}){const f=e.dataFormat==="channelsLast",h=!f,p=!1,m=f&&e.filterHeight===e.inHeight&&e.filterWidth===e.inWidth&&e.padInfo.type==="VALID",v=[];let y,S;if(m){const _=e.inHeight*e.inWidth*e.inChannels;y=se({inputs:{x:n},backend:i,attrs:{shape:[1,e.batchSize,_]}}),S=se({inputs:{x:t},backend:i,attrs:{shape:[1,_,e.outChannels]}})}else y=se({inputs:{x:n},backend:i,attrs:{shape:f?[e.batchSize,e.inHeight*e.inWidth,e.inChannels]:[e.batchSize,e.inChannels,e.inHeight*e.inWidth]}}),S=se({inputs:{x:t},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}});if(v.push(y),v.push(S),o!=null){const _=ap(o.shape,f);_!=null&&(o=se({inputs:{x:o},backend:i,attrs:{shape:_}}),v.push(o))}if(a!=null){const _=ap(a.shape,f);_!=null&&(a=se({inputs:{x:a},backend:i,attrs:{shape:_}}),v.push(a))}const N=Ap({a:f?y:S,b:f?S:y,transposeA:h,transposeB:p,backend:i,bias:a,activation:c,preluActivationWeights:o,leakyreluAlpha:u}),A=se({inputs:{x:N},backend:i,attrs:{shape:e.outShape}});v.push(N);for(const _ of v)i.disposeData(_.dataId);return A}function nT({x:n,filter:t,convInfo:e,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:u=0,activation:c=null}){const{filterWidth:f,filterHeight:h,inChannels:p,strideWidth:m,strideHeight:v,padInfo:y,outWidth:S,outHeight:N,dilationWidth:A,dilationHeight:_,dataFormat:I}=e,D=I==="channelsLast",M=f*h*p,Y=N*S,ct=D?[e.batchSize,Y,M]:[e.batchSize,M,Y],it=new tT(ct,D),nt=[{type:"int32",data:[y.top,y.left]},{type:"int32",data:[v,m]},{type:"int32",data:[_,A]},{type:"int32",data:[S]},{type:"int32",data:[p*f]},{type:"int32",data:[p]}],F=i.runWebGPUProgram(it,[n],n.dtype,nt),G=[];G.push(F);const E=se({inputs:{x:t},backend:i,attrs:{shape:[1,M,-1]}});if(G.push(E),o!=null){const X=ap(o.shape,D);X!=null&&(o=se({inputs:{x:o},backend:i,attrs:{shape:X}}),G.push(o))}if(a!=null){const X=ap(a.shape,D);X!=null&&(a=se({inputs:{x:a},backend:i,attrs:{shape:X}}),G.push(a))}const et=Ap({a:D?F:E,b:D?E:F,transposeA:!D,transposeB:!1,backend:i,bias:a,activation:c,preluActivationWeights:o,leakyreluAlpha:u}),ht=se({inputs:{x:et},backend:i,attrs:{shape:e.outShape}});G.push(et);for(const X of G)i.disposeData(X.dataId);return ht}function l3({x:n,filter:t,convInfo:e,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:u=0,activation:c=null}){const f=a!=null,h=o!=null,p=e.dataFormat==="channelsLast",m=p&&e.filterHeight===e.inHeight&&e.filterWidth===e.inWidth&&e.padInfo.type==="VALID",v=Pe().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!v&&(m||e.filterHeight===1&&e.filterWidth===1&&e.dilationHeight===1&&e.dilationWidth===1&&e.strideHeight===1&&e.strideWidth===1&&(e.padInfo.type==="SAME"||e.padInfo.type==="VALID")))return eT({x:n,filter:t,convInfo:e,backend:i,bias:a,activation:c,preluActivationWeights:o,leakyreluAlpha:u});const y=Pe().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),S=y>-1?y:i.thresholdToIncreaseWorkgroups,N=e.batchSize*Math.ceil(e.outHeight*e.outWidth/32)*Math.ceil(e.outChannels/32);if(Pe().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||N<=S)return nT({x:n,filter:t,convInfo:e,backend:i,bias:a,preluActivationWeights:o,leakyreluAlpha:u,activation:c});let A;const _=[e.padInfo.top,e.padInfo.left],I=[{type:"int32",data:[e.filterHeight,e.filterWidth]},{type:"int32",data:[..._]},{type:"int32",data:[e.strideHeight,e.strideWidth]},{type:"int32",data:[e.dilationHeight,e.dilationWidth]}];if(v)A=new JI(e,f,c,h);else{const ct=p?e.outHeight*e.outWidth:e.outChannels,it=p?e.outChannels:e.outHeight*e.outWidth,nt=e.filterHeight*e.filterWidth*e.inChannels;I.push({type:"int32",data:[ct]},{type:"int32",data:[it]},{type:"int32",data:[nt]});const F=i.adapterInfo.isIntel();A=new ZI(e,ct,it,nt,f,c,h,F)}const D=[],M=[n,t];f&&(!p&&a.shape.length===1&&(a=se({inputs:{x:a},backend:i,attrs:{shape:[a.shape[0],1,1]}}),D.push(a)),M.push(a)),h&&(!p&&o.shape.length===1&&(o=se({inputs:{x:o},backend:i,attrs:{shape:[o.shape[0],1,1]}}),D.push(o)),M.push(o)),c==="leakyrelu"&&(I.push({type:"float32",data:[u]}),A.uniforms+=" alpha : f32,");const Y=i.runWebGPUProgram(A,M,n.dtype,I);for(const ct of D)i.disposeData(ct.dataId);return Y}function iT(n){const{inputs:t,attrs:e,backend:i}=n,{x:a,filter:o}=t,{strides:u,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}=e,m=mf(f),v=po(a.shape,o.shape,u,h,c,p,!1,m);return l3({x:a,filter:o,convInfo:v,backend:i})}const rT={kernelName:zC,backendName:"webgpu",kernelFunc:iT};class aT{constructor(t){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=t.inShape,this.isChannelsLast=t.dataFormat==="channelsLast",this.isVec4=this.isChannelsLast&&t.outChannels%4===0&&t.inChannels%4===0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey=`conv2DDerInput_${this.isChannelsLast}_${this.isVec4}_${this.workPerThread}`}getUserCode(){const t=this.isChannelsLast?1:2,e=this.isChannelsLast?2:3,i=this.isChannelsLast?3:1,a=`
    ${Wt()} {
      let batch = i32(globalId.z) / uniforms.outShape[1];
      let r = i32(globalId.z) % uniforms.outShape[1];
      let c = i32(globalId.y) * ${this.workPerThread};
      let d1 = i32(globalId.x) * 4;

      let dyCorner = vec2<i32>(r, c) - uniforms.pads;

      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
      // ? = to be determined. : = across all values in that axis.
      var dotProd: array<vec4<f32>, ${this.workPerThread}>;
      for (var i = 0; i < ${this.workPerThread}; i++) {
        dotProd[i] = vec4<f32>(0.0);
      }
      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);
        let wRPerm = uniforms.filterDims.x - 1 - wR;
        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||
            fract(dyR) > 0.0) {
          continue;
        }
        let idyR = i32(dyR);

        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);
          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);
          let wCPerm = uniforms.filterDims.y - 1 - wC;
          var bDyCVal = true;
          var bDyCVal2 = true;
          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
              fract(dyC) > 0.0) {
            bDyCVal = false;
          }
          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||
              fract(dyC2) > 0.0) {
            bDyCVal2 = false;
          }

          let idyC = i32(dyC);
          let idyC2 = i32(dyC2);
          if (bDyCVal && bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
              xValue = getDy(batch, idyR, idyC2, d2);
              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),
                                                  dot(xValue, wValue1),
                                                  dot(xValue, wValue2),
                                                  dot(xValue, wValue3));
            }
          } else if (bDyCVal) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
            }
          } else if (bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC2, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[1] = dotProd[1] + tmpval;
            }
          }
        }
      }

      for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
        let coords = vec4<i32>(batch, r, c + i, d1);
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);
        }
      }
    }
    `;return this.isVec4?`
    ${a}
    `:`
    ${Wt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[${i}];

        let dyCorner = vec2<i32>(coords[${t}], coords[${e}]) - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);
          let wRPerm = uniforms.filterDims.x - 1 - wR;
          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||
              wRPerm < 0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);
            let wCPerm = uniforms.filterDims.y - 1 - wC;
            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
                fract(dyC) > 0.0 || wCPerm < 0) {
              continue;
            }
            let idyC = i32(dyC);

            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {
              let xValue = ${this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)"};
              let wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd = dotProd + xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class sT{constructor(t){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=t.dataFormat==="channelsLast",this.shaderKey=`conv2DDerFilter_${this.isChannelsLast}`}getUserCode(){return`
    ${Wt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let d2 = coords[3];

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b = b + 1) {
          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];
            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              if (${this.isChannelsLast}) {
                let dyValue = getDy(b, yR, yC, d2);
                let xValue = getX(b, xR, xC, d1);
                dotProd = dotProd + xValue * dyValue;
              } else {
                let dyValue = getDy(b, d2, yR, yC);
                let xValue = getX(b, d1, xR, xC);
                dotProd = dotProd + xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class oT{constructor(t){this.variableNames=["x","dy"],this.uniforms=`pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,
       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}getUserCode(){return`
    ${Wt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wF = coords.x;
        let wR = coords.y;
        let wC = coords.z;
        let d1 = coords.w;
        let d2 = coords.u;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yF = 0; yF < uniforms.outDepth; yF++) {
            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];
            if (xF < 0 || xF >= uniforms.inDepth) {
              continue;
            }

            for (var yR = 0; yR < uniforms.outHeight; yR++) {
              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];
              if (xR < 0 || xR >= uniforms.inHeight) {
                continue;
              }

              for (var yC = 0; yC < uniforms.outWidth; yC++) {
                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];
                if (xC < 0 || xC >= uniforms.inWidth) {
                  continue;
                }

                let dyValue = getDy(b, yF, yR, yC, d2);
                let xValue = getX(b, xF, xR, xC, d1);
                dotProd += xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class lT{constructor(t){this.variableNames=["dy","W"],this.uniforms=`filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}getUserCode(){return`
    ${Wt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let d1 = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyFCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);
          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {
            continue;
          }
          let idyF = i32(dyF);

          let wFPerm = uniforms.filterDims[0] - 1 - wF;

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            let wRPerm = uniforms.filterDims[1] - 1 - wR;

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let wCPerm = uniforms.filterDims[2] - 1 - wC;

              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {
                let xValue = getDy(batch, idyF, idyR, idyC, d2);
                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}function uT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,dy:o}=t,{strides:u,pad:c,dataFormat:f,dimRoundingMode:h,filterShape:p}=i,m=mf(f),v=po(a.shape,p,u,1,c,h,!1,m),y=new sT(v),S=[{type:"int32",data:[v.padInfo.top,v.padInfo.left]},{type:"int32",data:[v.strideHeight,v.strideWidth]},{type:"int32",data:[v.batchSize]},{type:"int32",data:[v.outHeight]},{type:"int32",data:[v.outWidth]},{type:"int32",data:[v.inHeight]},{type:"int32",data:[v.inWidth]}];return e.runWebGPUProgram(y,[a,o],a.dtype,S)}const cT={kernelName:UC,backendName:"webgpu",kernelFunc:uT};function fT(n=4){const t=o=>{switch(o){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];
            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];
            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];
            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];
            return vec4<f32>(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${o} is not supported.`)}},i=`if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        ${`
      let outRow = row / uniforms.outShape[2];
      let outCol = row % uniforms.outShape[2];

      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];
      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {
        return ${Ye(n)}(0.0);
      }
      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {
        return ${Ye(n)}(0.0);
      }
      let coord = vec4<i32>(
          batch,
          i32(xR),
          i32(xC),
          col % uniforms.outBackprop[3]);
      return x[getIndexFromCoords4D(coord, uniforms.xShape)/${n}];`}
      }
      return ${Ye(n)}(0.0);`;return`
  fn mm_readA(batch: i32, row : i32, col : i32) -> ${Ye(n)} {
    ${i}
  }

  fn mm_readB(batch: i32, row : i32, col : i32) -> ${Ye(n)} {
    let coordX = uniforms.filterDims.x - 1 -
        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
    let coordY = uniforms.filterDims.y - 1 -
        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];
    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&
        coordX >= 0 && coordY >= 0) {
      let rowInner = row % uniforms.outBackprop[3];
      let coord = vec4<i32>(coordX, coordY, col, rowInner);
      ${t(n)}
    }
    return ${Ye(n)}(0.0);
  }

  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ${Ye(n)}) {
    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
      var value = valueInput;
      let outCoord = vec4<i32>(
          batch,
          row / uniforms.outShape[2],
          row % uniforms.outShape[2],
          col);
      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/${n}] = value;
    }
  }`}class hT{constructor(t){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.inShape,Xt(t.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),this.isVec4=t.inChannels%4===0&&t.outChannels%4===0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=Gb(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=Yb(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey=`conv2DDerInputMM_${this.isVec4}_${this.elementsPerThread}`}getUserCode(){const t=this.isVec4?Sp(this.elementsPerThread,this.workgroupSize):Cp(this.elementsPerThread,this.workgroupSize);return`
    ${fT(this.isVec4?4:1)}
    ${t}
    `}}function dT(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,filter:o}=t,{inputShape:u,strides:c,pad:f,dataFormat:h,dimRoundingMode:p}=i,m=mf(h),v=po(u,o.shape,c,1,f,p,!1,m),y=[{type:"int32",data:[v.filterHeight,v.filterWidth]},{type:"int32",data:[v.filterHeight-1-v.padInfo.top,v.filterWidth-1-v.padInfo.left]},{type:"int32",data:[v.strideHeight,v.strideWidth]},{type:"int32",data:[v.batchSize,v.outHeight,v.outWidth,v.outChannels]}];let S;if(Pe().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||v.dataFormat!=="channelsLast")S=new aT(v);else{S=new hT(v);const N=v.inHeight*v.inWidth,A=v.inChannels,_=v.filterHeight*v.filterWidth*v.outChannels;y.push({type:"uint32",data:[N]},{type:"uint32",data:[A]},{type:"uint32",data:[_]})}return e.runWebGPUProgram(S,[a,o],"float32",y)}const pT={kernelName:$C,backendName:"webgpu",kernelFunc:dT};class mT{constructor(t){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords.x;
        let d2 = coords.u;

        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
        let xFCorner = xFRCCorner.x;
        let xRCorner = xFRCCorner.y;
        let xCCorner = xFRCCorner.z;

        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;
        let inputDepthVec4Remainder = uniforms.xShape.u % 4;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let xF = xFCorner + wF * uniforms.dilations[0];
          if (xF < 0 || xF >= uniforms.xShape.y) {
            continue;
          }

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let xR = xRCorner + wR * uniforms.dilations[1];
            if (xR < 0 || xR >= uniforms.xShape.z) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let xC = xCCorner + wC * uniforms.dilations[2];
              if (xC < 0 || xC >= uniforms.xShape.w) {
                continue;
              }

              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {
                let xValues = vec4<f32>(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                let wValues = vec4<f32>(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (inputDepthVec4Remainder == 1) {
                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *
                  getW(wF, wR, wC, inputDepthNearestVec4, d2);
              } else if (inputDepthVec4Remainder == 2) {
                let xValues = vec2<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)
                );
                let wValues = vec2<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (inputDepthVec4Remainder == 3) {
                let xValues = vec3<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)
                );
                let wValues = vec3<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }`}}function gT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o}=t,{strides:u,pad:c,dilations:f}=i,h=bp(a.shape,o.shape,u,f,c),p=[h.padInfo.front,h.padInfo.top,h.padInfo.left],m=[{type:"int32",data:[h.filterDepth,h.filterHeight,h.filterWidth]},{type:"int32",data:[...p]},{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationDepth,h.dilationHeight,h.dilationWidth]}],v=new mT(h),y=ql(a.dtype,o.dtype);return e.runWebGPUProgram(v,[a,o],y,m)}const yT={kernelName:jC,backendName:"webgpu",kernelFunc:gT};function vT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,dy:o}=t,{strides:u,pad:c,filterShape:f}=i,h=bp(a.shape,f,u,1,c),p=new oT(h),m=[{type:"int32",data:[h.padInfo.front,h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.batchSize]},{type:"int32",data:[h.outDepth]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]},{type:"int32",data:[h.inDepth]},{type:"int32",data:[h.inHeight]},{type:"int32",data:[h.inWidth]}];return e.runWebGPUProgram(p,[a,o],o.dtype,m)}const bT={kernelName:HC,backendName:"webgpu",kernelFunc:vT};function wT(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,filter:o}=t,{strides:u,pad:c,inputShape:f}=i,h=bp(f,o.shape,u,1,c),p=new lT(h),m=[{type:"int32",data:[h.filterDepth,h.filterHeight,h.filterWidth]},{type:"int32",data:[h.filterDepth-1-h.padInfo.front,h.filterHeight-1-h.padInfo.top,h.filterWidth-1-h.padInfo.left]},{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.outDepth]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]},{type:"int32",data:[h.outChannels]}];return e.runWebGPUProgram(p,[a,o],a.dtype,m)}const xT={kernelName:qC,backendName:"webgpu",kernelFunc:wT};const ST=pn({opType:qt.COS}),CT={kernelName:WC,backendName:"webgpu",kernelFunc:ST};const AT=pn({opType:qt.COSH}),NT={kernelName:VC,backendName:"webgpu",kernelFunc:AT};class _T{constructor(t,e,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;const[o]=e;this.outputShape=[o,i[0],i[1],t],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId=a==="bilinear"?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey=`cropAndResize_${this.methodId}_${this.cropHeightBiggerThan1}_${this.cropWidthBiggerThan1}`}getUserCode(){const[t,e]=["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],[i,a,o]=this.cropHeightBiggerThan1?[`(${t} / f32(uniforms.outShape[1] - 1))`,"(y2-y1) * height_ratio",`y1*${t} + f32(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${t}`],[u,c,f]=this.cropWidthBiggerThan1?[`(${e} / f32(uniforms.outShape[2] - 1))`,"(x2-x1) * width_ratio",`x1*${e} + f32(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${e}`];return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let height_ratio = f32(${i});
        let width_ratio = f32(${u});
        let b = coords[0];
        let y = coords[1];
        let x = coords[2];
        let d = coords[3];
        // get box vals
        let y1 = getBoxes(b, 0);
        let x1 = getBoxes(b, 1);
        let y2 = getBoxes(b, 2);
        let x2 = getBoxes(b, 3);
        // get image in batch index
        let bInd = i32(round(getBoxInd(b)));
        if(bInd < 0 || bInd >= uniforms.outShape[0]) {
          return;
        }
        let height_scale = ${a};
        let width_scale = ${c};
        let in_y = ${o};
        if( in_y < 0.0 || in_y > ${t} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let in_x = ${f};
        if( in_x < 0.0 || in_x > ${e} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let sourceFracIndexCR = vec2<f32>(in_x,in_y);
        if(${this.methodId} == 1) {
          // Compute the four integer indices.
          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);
          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));
          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);
          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);
          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);
          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);
          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);
          let top = topLeft + (topRight - topLeft) * fracCR.x;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          let newValue = top + (bottom - top) * fracCR.y;
          setOutputAtIndex(index, newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          let sourceNearestCR = vec2<i32>(floor(
            sourceFracIndexCR + vec2<f32>(0.5,0.5)));
          let newValue = getImage(
            bInd, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutputAtIndex(index, newValue);
        }
      }
    }
    `}}const kT=n=>{const{inputs:t,backend:e,attrs:i}=n,{image:a,boxes:o,boxInd:u}=t,{cropSize:c,method:f,extrapolationValue:h}=i,p=new _T(a.shape[3],o.shape,c,f),m=[{type:"float32",data:[h]}];return e.runWebGPUProgram(p,[a,o,u],"float32",m)},ET={kernelName:XC,backendName:"webgpu",kernelFunc:kT};var xh;(function(n){n.Prod="*",n.Sum="+"})(xh||(xh={}));class ev{constructor(t,e,i,a){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=e,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=i,this.reverse=a,this.op=t,this.shaderKey=`cum_${this.op}_${this.exclusive}_${this.reverse}`}getUserCode(){const t=this.outputShape.length,e=this.op===xh.Prod?"1.0":"0.0",i=this.exclusive?e:`getX(${nv(t,"coords",this.op)})`,a=this.outputShape[this.outputShape.length-1];let o="",u="";return this.exclusive?(o=this.reverse?`end != ${a-1}`:"end != 0",u=this.reverse?"end + 1":"end - 1"):(o=this.reverse?`end + pow2 < ${a}`:"end >= pow2",u=this.reverse?"end + pow2":"end - pow2"),`
      ${Wt("index")} {
       if (index < uniforms.size) {
         var coords = getCoordsFromIndex(index);

         let end = ${iv(t,"coords",this.op)};
         var val = ${i};
         let pow2 = i32(pow(2.0, uniforms.index));
         if (${o}) {
           let idx = ${u};
           ${iv(t,"coords",this.op)} = idx;
           val ${this.op}= getX(${nv(t,"coords",this.op)});
         }
         setOutputAtIndex(index, val);
       }
      }
    `}}function nv(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.x, ${t}.y`;if(n===3)return`${t}.x, ${t}.y, ${t}.z`;if(n===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative ${e} for rank ${n} is not yet supported`)}function iv(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.y`;if(n===3)return`${t}.z`;if(n===4)return`${t}.w`;throw Error(`Cumulative ${e} for rank ${n} is not yet supported`)}function u3(n,t,e,i,a,o){const u=t.shape.length,c=Ih([i],u);let f=t;c!=null&&(f=fo({inputs:{x:t},backend:e,attrs:{perm:c}}));const h=Th(1,u)[0];if(h!==u-1)throw new Error(`WebGPU cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${i}`);const p=f.shape[h];let m=oa({inputs:{x:f},backend:e});for(let v=0;v<=Math.ceil(Math.log2(p))-1;v++){const y=new ev(n,f.shape,!1,o),S=m,N=[{type:"float32",data:[v]}];m=e.runWebGPUProgram(y,[m],m.dtype,N),e.disposeData(S.dataId)}if(a){const v=new ev(n,f.shape,a,o),y=m,S=[{type:"float32",data:[0]}];m=e.runWebGPUProgram(v,[m],m.dtype,S),e.disposeData(y.dataId)}if(c!=null){const v=Ub(c),y=fo({inputs:{x:m},backend:e,attrs:{perm:v}});return e.disposeData(m.dataId),e.disposeData(f.dataId),y}return m}function LT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o,exclusive:u,reverse:c}=i;return u3(xh.Prod,a,e,o,u,c)}const RT={kernelName:GC,backendName:"webgpu",kernelFunc:LT};function IT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o,exclusive:u,reverse:c}=i;return u3(xh.Sum,a,e,o,u,c)}const TT={kernelName:YC,backendName:"webgpu",kernelFunc:IT};function DT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,weights:o}=t,{size:u,binaryOutput:c}=i,f=a.shape.length===1,p=Zt(o.shape)>0,m=o.dtype,v=f?[a.shape[0]]:[a.shape[0],a.shape[1]],y=f?[u]:[a.shape[0],u],S=Br({backend:e,attrs:{shape:y,value:0,dtype:m}}),N=new a3(v,p,c),A=[{type:"int32",data:[u]}],_=p?[a,o]:[a];return e.runWebGPUProgram(N,_,m,A,S)}const PT={kernelName:KC,backendName:"webgpu",kernelFunc:DT};class MT{constructor(t,e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`depthToSpace_${e}`,this.dataFormat=e}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let h = ${this.getHeightCoordString()};
          let w = ${this.getWidthCoordString()};
          let d = ${this.getDepthCoordString()};

          let in_h = h / uniforms.blockSize;
          let offset_h = h % uniforms.blockSize;
          let in_w = w / uniforms.blockSize;
          let offset_w = w % uniforms.blockSize;
          let offset_d = (offset_h * uniforms.blockSize + offset_w) *
            ${this.getOutputDepthSize()};
          let in_d = d + offset_d;

          let rlt = ${this.getInputSamplingString()};
          setOutputAtIndex(index, rlt);
        }
      }`}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?"uniforms.outShape[3]":"uniforms.outShape[1]"}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}function OT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{blockSize:o,dataFormat:u}=i,c=a.shape[0],f=u==="NHWC"?a.shape[1]:a.shape[2],h=u==="NHWC"?a.shape[2]:a.shape[3],p=u==="NHWC"?a.shape[3]:a.shape[1],m=f*o,v=h*o,y=p/(o*o),S=u==="NHWC"?[c,m,v,y]:[c,y,m,v],N=[{type:"int32",data:[o]}],A=new MT(S,u);return e.runWebGPUProgram(A,[a],a.dtype,N)}const FT={kernelName:QC,backendName:"webgpu",kernelFunc:OT};class BT{constructor(t,e,i,a=!1,o=null,u=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=t,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),this.addBias=a,this.activation=o,this.hasPreluActivation=u,this.filterHeight=e,this.filterWidth=i,this.shaderKey=`depthwiseNCHW_${this.activation}_${this.filterHeight}_${this.filterWidth}`}getUserCode(){const t=this.filterWidth*this.filterHeight,e=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],i=this.workgroupSize[1]+this.filterHeight-1,a=this.workgroupSize[0]+this.filterWidth-1;return`
      ${nl(this.activation,this.hasPreluActivation,!1,4)}

      var<workgroup> mm_Asub : array<array<f32, ${a}>, ${i}>;
      var<workgroup> mm_Bsub : array<array<f32, ${this.filterWidth}>, ${this.filterHeight}>;
      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {
        var value = 0.0;
        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])
        {
          value = getX(batch, channel, row, col);
        }
        return value;
      }

      ${Wt()} {
        let coords = getOutputCoords();
        let batch = coords[0];
        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;
        let channelMul = uniforms.wShape[3];
        let d1 = coords[1] / channelMul;
        let q = coords[1] % channelMul;

        let inputRowStart = xRCCorner.x;
        let inputColStart = xRCCorner.y;

        let localRow = i32(localId.y);
        let localCol = i32(localId.x);

        // Load one tile of X into local memory.
        for (var inputRow = localRow; inputRow < ${i}; inputRow = inputRow + ${this.workgroupSize[1]}) {
          for (var inputCol = localCol; inputCol < ${a}; inputCol = inputCol + ${this.workgroupSize[0]}) {
            let rowOffset = inputRow - localRow;
            let colOffset = inputCol - localCol;
            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);
          }
        }

        // Load one tile of W into local memory.
        var wIndex = i32(localIndex);
        ${t<e?`if (wIndex < ${t})`:`for(; wIndex < ${t}; wIndex = wIndex + ${e})`}

        {
          let wRow = wIndex / ${this.filterWidth};
          let wCol = wIndex % ${this.filterWidth};
          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);
        }

        workgroupBarrier();

        var value = 0.0;
        for (var wR = 0; wR < ${this.filterHeight}; wR = wR + 1) {
          for (var wC = 0; wC < ${this.filterWidth}; wC = wC + 1) {
            let xVal = mm_Asub[localRow + wR][localCol + wC];
            let wVal = mm_Bsub[wR][wC];
            value = fma(xVal, wVal, value);
          }
        }
        ${Yu(this.addBias,this.activation)}
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}}class c3{constructor(t,e=!1,i=null,a=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=t.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;const o=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=Jt(o),this.dispatch=Vt(this.dispatchLayout,o,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),Xt(t.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),e&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=e,this.activation=i,this.hasPreluActivation=a,this.shaderKey=`depthwiseVec4_${i}_${this.convInfo.filterHeight}_${this.convInfo.filterWidth}_${this.convInfo.strideHeight}_${this.convInfo.strideWidth}_${this.workPerThread}`}getUserCode(){const t=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,e=this.convInfo.strideHeight,i=this.convInfo.strideWidth;return`
      ${nl(this.activation,this.hasPreluActivation,!0,4)}
      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {
        var value = vec4<f32>(0.0);
        if (col >=0 && col < uniforms.inDims[1]) {
          value = getX(batch, row, col, channel);
        }
        return value;
      }

      ${Wt("index")} {
        let width0 = uniforms.outShape[3] / ${this.outputComponent};
        let d1 = (index % width0) * ${this.outputComponent};
        var index1 = index / width0;
        let width1 = uniforms.virtualWidth / ${this.workPerThread};
        let c = (index1 % width1) * ${this.workPerThread};
        index1 = index1 / width1;
        let r = index1 % uniforms.outShape[1];
        let batch = index1 / uniforms.outShape[1];

        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(${e}, ${i}) - uniforms.pads;

        let xRCorner = xRCCorner.x;
        let xCCorner = xRCCorner.y;
        var xVals : array<vec4<f32>, ${t}>;
        var dotProd : array<vec4<f32>, ${this.workPerThread}>;
        for (var i = 0; i < ${this.workPerThread}; i++) {
          dotProd[i] = vec4<f32>(0.0);
        }

        // Use constant instead of uniform can give better performance.
        for (var wR = 0; wR < ${this.convInfo.filterHeight}; wR = wR + 1) {
          let xR = xRCorner + wR;
          if (xR >=0 && xR < uniforms.inDims[0]) {
            for (var i = 0; i < ${t}; i++) {
              xVals[i] = readX(batch, xR, xCCorner + i, d1);
            }
            for (var wC = 0; wC < ${this.convInfo.filterWidth}; wC = wC + 1) {
              let wValue = getW(wR, wC, d1, 0);
              for (var i = 0; i < ${this.workPerThread}; i++) {
                dotProd[i] = fma(xVals[i * ${i} + wC], wValue, dotProd[i]);
              }
            }
          }
        }

        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let coords = vec4<i32>(batch, r, c + i, d1);
          if (coordsInBounds4D(coords, uniforms.outShape)) {
            var value = dotProd[i];
            ${Yu(this.addBias,this.activation)}
            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
          }
        }
      }
    `}}class f3{constructor(t,e=!1,i=null,a=!1){this.variableNames=["x","W"],this.uniforms=`pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,
      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,`,this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=t.dataFormat==="channelsLast",e&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=e,this.activation=i,this.hasPreluActivation=a,this.shaderKey=`depthwise_${this.activation}_${this.isChannelsLast}`}getUserCode(){const t=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return`
      ${nl(this.activation,this.hasPreluActivation,!1,4)}

      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let batch = coords[0];
          let xRCCorner = vec2<i32>(coords.${this.isChannelsLast?"yz":"zw"}) * uniforms.strides - uniforms.pads;
          let d2 = coords[${this.isChannelsLast?3:1}];
          let channelMul = uniforms.wShape[3];
          let d1 = d2 / channelMul;
          let q = d2 % channelMul;

          let inputRowStart = xRCCorner.x;
          let inputColStart = xRCCorner.y;
          let inputRowEnd = inputRowStart + uniforms.filterHeight *
              uniforms.dilations[0];
          let inputColEnd = inputColStart + uniforms.filterWidth *
              uniforms.dilations[1];

          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get
          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all
          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.
          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.
          var value = 0.0;

          // Extract if checking out of for loop for performance.
          if (inputRowStart >= 0 && inputColStart >= 0 &&
            inputRowEnd < uniforms.inDims[0] &&
                inputColEnd < uniforms.inDims[1]) {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  let xVal = ${t};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            } else {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                if (xR < 0 || xR >= uniforms.inDims[0]) {
                  continue;
                }

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  if (xC < 0 || xC >= uniforms.inDims[1]) {
                    continue;
                  }

                  let xVal = ${t};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            }
            ${Yu(this.addBias,this.activation)}
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}}function zT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o}=t,{strides:u,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p}=i,m=mf(f);let v=h;v==null&&(v=[1,1]);const y=po(a.shape,o.shape,u,v,c,p,!0,m),S=[{type:"int32",data:[y.padInfo.top,y.padInfo.left]},{type:"int32",data:[y.inHeight,y.inWidth]}],N=y.dataFormat==="channelsLast";let A;return!N&&y.inHeight>16&&y.inWidth>16&&y.strideHeight===1&&y.strideWidth===1&&y.dilationWidth===1&&y.dilationHeight===1&&y.inChannels===y.outChannels?A=new BT(y.outShape,y.filterHeight,y.filterWidth):N&&y.outHeight>4&&y.outWidth>4&&y.strideWidth<=2&&y.inChannels===y.outChannels&&y.dilationHeight===1&&y.dilationWidth===1&&y.inChannels%4===0?(A=new c3(y),S.push({type:"int32",data:[A.virtualWidth]})):(A=new f3(y),S.push({type:"int32",data:[y.filterHeight]},{type:"int32",data:[y.filterWidth]},{type:"int32",data:[y.strideHeight,y.strideWidth]},{type:"int32",data:[y.dilationHeight,y.dilationWidth]})),e.runWebGPUProgram(A,[a,o],a.dtype,S)}const UT={kernelName:ZC,backendName:"webgpu",kernelFunc:zT};class $T{constructor(t){this.variableNames=["x","dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,
      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.filterShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let dm = coords[3];
        let d2 = d1 * uniforms.channelMul + dm;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yR = 0; yR < uniforms.outHeight; yR++) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];

            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC++) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              let dyValue = getDy(b, yR, yC, d2);
              let xValue = getX(b, xR, xC, d1);
              dotProd += xValue * dyValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class jT{constructor(t){this.variableNames=["dy","W"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[3];
        let dyCorner = coords.yz - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }

          let idyR = i32(dyR);
          let wRPerm = uniforms.filterDims[0] - 1 - wR;

          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }

            let idyC = i32(dyC);
            let wCPerm = uniforms.filterDims[1] - 1 - wC;

            for (var dm = 0; dm < uniforms.channelMul; dm++) {
              let d2 = d1 * uniforms.channelMul + dm;
              let xValue = getDy(batch, idyR, idyC, d2);
              let wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}function HT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,dy:o}=t,{strides:u,dilations:c,pad:f,dimRoundingMode:h,filterShape:p}=i,m=po(a.shape,p,u,c,f,h,!0),v=new $T(m),y=[{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.filterHeight,m.filterWidth]},{type:"int32",data:[m.outHeight]},{type:"int32",data:[m.outWidth]},{type:"int32",data:[m.inHeight]},{type:"int32",data:[m.inWidth]},{type:"int32",data:[m.batchSize]},{type:"int32",data:[m.outChannels/m.inChannels]}];return e.runWebGPUProgram(v,[a,o],"float32",y)}const qT={kernelName:JC,backendName:"webgpu",kernelFunc:HT};function WT(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,filter:o}=t,{strides:u,dilations:c,pad:f,dimRoundingMode:h,inputShape:p}=i,m=po(p,o.shape,u,c,f,h,!0),v=new jT(m),y=[{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.filterHeight-1-m.padInfo.top,m.filterWidth-1-m.padInfo.left]},{type:"int32",data:[m.filterHeight,m.filterWidth]},{type:"int32",data:[m.outHeight]},{type:"int32",data:[m.outWidth]},{type:"int32",data:[m.outChannels/m.inChannels]}];return e.runWebGPUProgram(v,[a,o],a.dtype,y)}const VT={kernelName:t6,backendName:"webgpu",kernelFunc:WT};class GT{constructor(t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,t],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);
          setOutputAtIndex(index, value);
        }
      }
    `}}function YT(n){const{inputs:t,backend:e}=n,{x:i}=t,a=[...i.shape,...i.shape],o=Zt(i.shape),u=se({inputs:{x:i},backend:e,attrs:{shape:[o]}}),c=new GT(o),f=e.runWebGPUProgram(c,[u],u.dtype),h=se({inputs:{x:f},backend:e,attrs:{shape:a}});return e.disposeData(u.dataId),e.disposeData(f.dataId),h}const XT={kernelName:e6,backendName:"webgpu",kernelFunc:YT};class KT{constructor(t){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}getUserCode(){return`
       ${Wt("index")} {
         if (index < uniforms.size) {
           let neg_infinity = -3.4e38;
           let coords = getOutputCoords();
           let batch = coords.x;
           let d1 = coords.w;
           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;
           let hBeg = outTopLeftCorner.x;
           let wBeg = outTopLeftCorner.y;

           var curVal = neg_infinity;
           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {
             let hIn = hBeg + h * uniforms.dilations[0];

             if (hIn >= 0 && hIn < uniforms.xShape[1]) {
               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {
                 let wIn = wBeg + w * uniforms.dilations[1];

                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {
                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);
                   if (val > curVal) {
                     curVal = val;
                   }
                 }
               }
             }
           }

           setOutputAtIndex(index, curVal);
         }
       }
     `}}function QT(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o}=t,{strides:u,pad:c,dilations:f}=i,h=kg(a.shape,o.shape,u,c,"NHWC",f),p=[h.padInfo.top,h.padInfo.left],m=[{type:"int32",data:[h.filterHeight,h.filterWidth]},{type:"int32",data:[...p]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]}],v=new KT(h);return e.runWebGPUProgram(v,[a,o],a.dtype,m)}const ZT={kernelName:n6,backendName:"webgpu",kernelFunc:QT};class JT{constructor(t,e){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(t.outShape),this.dispatch=Vt(this.dispatchLayout,t.outShape,this.workgroupSize),e!=="float32"&&e!=="int32")throw new Error(`Dilation2DBackpropInput only supports float32 and int32
          types, does not support ${e} type.`);this.type=e,this.shaderKey="dilation2DBackpropInput"}getUserCode(){return`
       ${Wt("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var xRMax = 0;
           var xCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     xRMax = xR;
                     xCMax = xC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.xShape[3] *
               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));
           let value = getDy(b, r, c, d);
           ${Yl("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}}class tD{constructor(t,e,i){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t.filterShape,this.dispatchLayout=Jt(t.outShape),this.dispatch=Vt(this.dispatchLayout,t.outShape,this.workgroupSize),i!=="float32"&&i!=="int32")throw new Error(`Dilation2DBackpropFilter only supports float32 and int32
          types, does not support ${i} type.`);this.type=i,this.shaderKey="dilation2DBackpropFilter"}getUserCode(){return`
       ${Wt("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var wRMax = 0;
           var wCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     wRMax = wR;
                     wCMax = wC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);
           let value = getDy(b, r, c, d);
           ${Yl("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}}function eD(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o,dy:u}=t,{strides:c,pad:f,dilations:h}=i,p=kg(a.shape,o.shape,c,f,"NHWC",h),m=o.dtype,v=new tD(p,o.shape,m),y=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[Zt(p.outShape)]}],S=Br({backend:e,attrs:{shape:o.shape,value:0,dtype:m}});return e.runWebGPUProgram(v,[a,o,u],m,y,S)}const nD={kernelName:r6,backendName:"webgpu",kernelFunc:eD};function iD(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o,dy:u}=t,{strides:c,pad:f,dilations:h}=i,p=kg(a.shape,o.shape,c,f,"NHWC",h),m=a.dtype,v=new JT(p,m),y=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[Zt(p.outShape)]}],S=Br({backend:e,attrs:{shape:p.inShape,value:0,dtype:m}});return e.runWebGPUProgram(v,[a,o,u],m,y,S)}const rD={kernelName:i6,backendName:"webgpu",kernelFunc:iD};class aD{constructor(t,e,i){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=ff.DRAW,this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=e,this.textureFormat=i,this.shaderKey=`draw_${e}_${i}`}getUserCode(){let t;const e=this.type==="float32"?"value":"value / 255.0";return t=`
      if (uniforms.numChannels == 1) {
        rgba[0] = ${e};
        rgba[1] = ${e};
        rgba[2] = ${e};
      } else {
        rgba[d] = ${e};
      }`,`
       @group(0) @binding(0) var outImage : texture_storage_2d<${this.textureFormat}, write>;
       ${Wt("index")} {
         if (index < uniforms.size) {
           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);
           for (var d = 0; d < uniforms.numChannels; d = d + 1) {
             let value = f32(inBuf[index * uniforms.numChannels + d]);
             ${t}
           }
           rgba.x = rgba.x * rgba.w;
           rgba.y = rgba.y * rgba.w;
           rgba.z = rgba.z * rgba.w;
           let coords = getCoordsFromIndex(index);
           textureStore(outImage, vec2<i32>(coords.yx), rgba);
         }
       }
      `}}function sD(n){const{inputs:t,backend:e,attrs:i}=n,{image:a}=t,{canvas:o,options:u}=i,[c,f]=a.shape.slice(0,2),{imageOptions:h}=u||{},p=h?.alpha||1,m=e.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",v=[c,f],y=new aD(v,a.dtype,m);o.width=f,o.height=c;const S="webgpu";let N=o.getContext(S),A;N||(A=new OffscreenCanvas(f,c),N=A.getContext(S));const _=a.shape.length===3?a.shape[2]:1;N.configure({device:e.device,format:m,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});const I="int32",D=e.makeTensorInfo(v,I),M=e.tensorMap.get(D.dataId);M.resource=N.getCurrentTexture(),M.external=!0;const Y=[{type:"uint32",data:[_]},{type:"float32",data:[p]}];if(e.runWebGPUProgram(y,[a],I,Y,D),A){const ct=o.getContext("2d");if(!ct)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");ct.drawImage(A,0,0)}return e.disposeData(D.dataId),a}const oD={kernelName:a6,backendName:"webgpu",kernelFunc:sD};const h3=Xi({opType:Ie.MUL,cpuKernelImpl:hR,supportsComplex:!0}),lD={kernelName:ob,backendName:"webgpu",kernelFunc:h3};function d3(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o,keepDims:u}=i;return Ku(a,o,u,"sum",e)}const uD={kernelName:LA,backendName:"webgpu",kernelFunc:d3};function cD(n){const{inputs:t,backend:e,attrs:i}=n,{equation:a}=i,o=t,{allDims:u,summedDims:c,idDims:f}=gk(a,o.length);vk(u.length,f,o);const{path:h,steps:p}=bk(c,f),m=p.length;let v=null,y=u.length;const S=[];for(let N=0;N<m;++N){for(const A of p[N]){const{permutationIndices:_,expandDims:I}=yk(y,f[A]);let D;wk(_)?D=o[A]:(D=fo({inputs:{x:o[A]},backend:e,attrs:{perm:_}}),S.push(D));const M=D.shape.slice();for(let Y=0;Y<I.length;++Y)M.splice(I[Y],0,1);el(D.shape,M)||(D=se({inputs:{x:D},backend:e,attrs:{shape:M}}),S.push(D)),v===null?v=D:(v=h3({inputs:{a:D,b:v},backend:e}),S.push(v))}N<m-1&&(h[N]>=0&&(v=d3({inputs:{x:v},backend:e,attrs:{axis:h[N]-(u.length-y),keepDims:!1}}),S.push(v)),y--)}for(const N of S)N!==v&&e.disposeData(N.dataId);return v}const fD={kernelName:s6,backendName:"webgpu",kernelFunc:cD};const hD=pn({opType:qt.ELU}),dD={kernelName:o6,backendName:"webgpu",kernelFunc:hD};const pD=n=>{const{inputs:t,backend:e}=n,{dy:i,y:a}=t,o=new ip(Ie.ELU_DER,i.shape,a.shape);return e.runWebGPUProgram(o,[i,a],i.dtype)},mD={kernelName:l6,backendName:"webgpu",kernelFunc:pD};const gD=Xi({opType:Ie.EQUAL,dtype:"bool",cpuKernelImpl:Q8}),yD={kernelName:c6,backendName:"webgpu",kernelFunc:gD};const vD=pn({opType:qt.ERF}),bD={kernelName:u6,backendName:"webgpu",kernelFunc:vD};const wD=pn({opType:qt.EXP,cpuKernelImpl:Z8,dtype:"float32"}),xD={kernelName:f6,backendName:"webgpu",kernelFunc:wD};function Y1(n){const{inputs:t,attrs:e,backend:i}=n,{dim:a}=e,{input:o}=t,u=o.shape.length,c=o.shape.slice();let f=a;return a<0&&(Xt(-(u+1)<=a,()=>`Axis must be in the interval [${-(u+1)}, ${u}]`),f=u+a+1),c.splice(f,0,1),se({inputs:{x:o},backend:i,attrs:{shape:c}})}const SD={kernelName:h6,backendName:"webgpu",kernelFunc:Y1};const CD=pn({opType:qt.EXPM1,cpuKernelImpl:J8}),AD={kernelName:d6,backendName:"webgpu",kernelFunc:CD};class rv{constructor(t,e){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=t,this.shaderKey=`fft_${t}`}getUserCode(){return`
    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {
      ${this.component==="real"?"return real * expR - imag * expI;":"return real * expI + imag * expR;"}
    }

    fn mulMatDFT(batch: i32, index: i32) -> f32 {
      let indexRatio = f32(index) / f32(uniforms.realShape[1]);
      let exponentMultiplierTimesIndexRatio =
          uniforms.exponentMultiplier * indexRatio;

      var result = 0.0;

      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {
        // x = (-2|2 * PI / N) * index * i;
        let x = exponentMultiplierTimesIndexRatio * f32(i);
        let expR = cos(x);
        let expI = sin(x);
        let real = getReal(batch, i);
        let imag = getImag(batch, i);

        result = result +
            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;
      }

      return result;
    }

    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));
      }
    }
  `}}function p3(n,t,e){const i=e.tensorMap.get(n.dataId),a=Zt(n.shape),o=n.shape[n.shape.length-1],u=a/o,c=[],f=se({inputs:{x:n},backend:e,attrs:{shape:[u,o]}});c.push(f);const h=f.shape,p=new rv("real",h),m=new rv("imag",h),v=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:h},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:h}],y=t?2*Math.PI:-2*Math.PI,S=t?h[1]:1,N=[{type:"float32",data:[y]},{type:"float32",data:[S]}],A=e.runWebGPUProgram(p,v,"float32",N);c.push(A);const _=e.runWebGPUProgram(m,v,"float32",N);c.push(_);const I=Xu({inputs:{real:A,imag:_},backend:e});c.push(I);const D=se({inputs:{x:I},backend:e,attrs:{shape:n.shape}});return c.forEach(M=>e.disposeData(M.dataId)),D}function ND(n){const{inputs:t,backend:e}=n,{input:i}=t;return p3(i,!1,e)}const _D={kernelName:p6,backendName:"webgpu",kernelFunc:ND};class kD{constructor(t){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let coordX = uniforms.xShape[2] - coords[2] - 1;
          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);
          setOutputAtIndex(index, outputValue);
        }
      }
    `}}const ED={kernelName:m6,backendName:"webgpu",kernelFunc:({inputs:n,backend:t})=>{const{image:e}=n,i=t,a=new kD(e.shape);return i.runWebGPUProgram(a,[e],e.dtype)}};const LD=pn({opType:qt.FLOOR,cpuKernelImpl:tR}),RD={kernelName:g6,backendName:"webgpu",kernelFunc:LD};const ID=Xi({opType:Ie.FLOOR_DIV,cpuKernelImpl:eR,dtype:"int32"}),TD={kernelName:ab,backendName:"webgpu",kernelFunc:ID};class DD{constructor(t,e,i=!1){this.pixelsOpType=ff.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[e,1,1]),this.importVideo=i,this.shaderKey=`fromPixels_${this.importVideo}`}getUserCode(){const t=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return`
      @binding(1) @group(0) var src: ${this.importVideo?"texture_external":"texture_2d<f32>"};
      ${Wt("index")} {
        let flatIndex = index * uniforms.numChannels;
        if (flatIndex < uniforms.size) {
          let coords = getCoordsFromIndex(flatIndex);
          let values = ${t};
          for (var i = 0; i < uniforms.numChannels; i = i + 1) {
            result[flatIndex + i] = i32(floor(255.0 * values[i]));
          }
        }
      }
  `}}const PD={kernelName:YA,backendName:"webgpu",kernelFunc:MD};let Hc,n1=Pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function MD(n){const{inputs:t,backend:e,attrs:i}=n;let{pixels:a}=t;const{numChannels:o}=i;if(a==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");const u=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,c=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,f=typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas,h=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,[p,m]=u?[a.videoWidth,a.videoHeight]:[a.width,a.height],v=[m,p,o],y=Pe().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&u,S=u||c;if(h||f||S){let I;if(y)I=e.device.importExternalTexture({source:a});else{if(S){const tt=Pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Hc==null||tt!==n1)&&(n1=tt,Hc=document.createElement("canvas").getContext("2d",{willReadFrequently:n1})),Hc.canvas.width=p,Hc.canvas.height=m,Hc.drawImage(a,0,0,p,m),a=Hc.canvas}const G=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,B=e.textureManager.acquireTexture(v[1],v[0],"rgba8unorm",G);e.queue.copyExternalImageToTexture({source:a},{texture:B},[v[1],v[0]]),I=B}const D=Zt(v),M=mr(v),Y=new DD(v,o,y),ct=[{type:"uint32",data:[D]},{type:"uint32",data:[o]},{type:"uint32",data:[...M]}],it=e.makeTensorInfo([m,p],"int32"),nt=e.tensorMap.get(it.dataId);nt.resource=I;const F=e.runWebGPUProgram(Y,[it],"int32",ct);return e.disposeData(it.dataId),F}const N=a.data;let A=N;if(o!=null&&o!==4){A=new Uint8Array(a.width*a.height*o);const I=N.length;let D=0;for(let M=0;M<I;M++)M%4<o&&(A[D++]=N[M])}const _=e.makeTensorInfo(v,"int32",new Int32Array(A));return e.uploadToGPU(_.dataId),_}class OD{constructor(t,e,i,a,o){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],oo(t,e),oo(t,i),this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),a!=null&&(oo(t,a),this.variableNames.push("offset")),o!=null&&(oo(t,o),this.variableNames.push("scale")),this.offsetShape=a,this.scaleShape=o,this.shaderKey="batchNorm"}getUserCode(){let t="0.0";this.offsetShape!=null&&(t="getOffsetByOutputIndex(index)");let e="1.0";return this.scaleShape!=null&&(e="getScaleByOutputIndex(index)"),`
      ${Wt("index")} {
        if (index < uniforms.size)
        {
          let xValue = getXByOutputIndex(index);
          let meanValue = getMeanByOutputIndex(index);
          let varianValue = getVarianceByOutputIndex(index);
          let offsetValue = ${t};
          let scaleValue = ${e};
          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));
          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));
        }
      }
  `}}const FD={kernelName:y6,backendName:"webgpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{x:i,scale:a,offset:o,mean:u,variance:c}=n,{varianceEpsilon:f}=t,h=e,p=[i,u,c];let m=null;o!=null&&(m=o.shape,p.push(o));let v=null;a!=null&&(v=a.shape,p.push(a));const y=new OD(i.shape,u.shape,c.shape,m,v),S=[{type:"float32",data:[f]}];return h.runWebGPUProgram(y,p,i.dtype,S)}};function BD(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o,bias:u,preluActivationWeights:c}=t,{strides:f,pad:h,dataFormat:p,dilations:m,dimRoundingMode:v,activation:y,leakyreluAlpha:S}=i,N=mf(p),A=po(a.shape,o.shape,f,m,h,v,!1,N);return l3({x:a,filter:o,convInfo:A,backend:e,bias:u,preluActivationWeights:c,leakyreluAlpha:S,activation:y})}const zD={kernelName:QA,backendName:"webgpu",kernelFunc:BD};function UD(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,filter:o,bias:u,preluActivationWeights:c}=t,{strides:f,pad:h,dilations:p,dimRoundingMode:m,activation:v,leakyreluAlpha:y}=i;let S=p;S==null&&(S=[1,1]),Xt(Fb(f,S),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${f} and dilations '${S}'`);const N=po(a.shape,o.shape,f,S,h,m,!0),A=[a,o],_=u!=null,I=c!=null;_&&A.push(u),I&&A.push(c);const D=[{type:"int32",data:[N.padInfo.top,N.padInfo.left]},{type:"int32",data:[N.inHeight,N.inWidth]}];let M;return N.outHeight>4&&N.outWidth>4&&N.strideWidth<=2&&N.inChannels===N.outChannels&&N.dilationHeight===1&&N.dilationWidth===1&&N.inChannels%4===0?(M=new c3(N,_,v,I),D.push({type:"int32",data:[M.virtualWidth]})):(M=new f3(N,_,v,I),D.push({type:"int32",data:[N.filterHeight]},{type:"int32",data:[N.filterWidth]},{type:"int32",data:[N.strideHeight,N.strideWidth]},{type:"int32",data:[N.dilationHeight,N.dilationWidth]})),v==="leakyrelu"&&(D.push({type:"float32",data:[y]}),M.uniforms+=" alpha : f32,"),e.runWebGPUProgram(M,A,"float32",D)}const $D={kernelName:ZA,backendName:"webgpu",kernelFunc:UD};class jD{constructor(t,e){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`gathernd_${t}`,this.sliceDim=t,this.uniforms=`sliceDim : i32, strides : ${Ci(t)},`}getUserCode(){let t;return this.sliceDim>1?t="uniforms.strides[j]":t="uniforms.strides",`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          var flattenIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexTemp = i32(round(getIndices(coords[0], j)));
            let strideNum = ${t};
            flattenIndex = flattenIndex + indexTemp * strideNum;
          }

          setOutputAtIndex(index, getA(flattenIndex, coords[1]));
        }
      }
      `}}function HD(n){const{inputs:t,backend:e}=n,{params:i,indices:a}=t,o=a.shape,u=o[o.length-1],c=Zt(i.shape),[f,h,p,m]=q_(i,a),v=se({inputs:{x:a},backend:e,attrs:{shape:[h,u]}}),y=se({inputs:{x:i},backend:e,attrs:{shape:[Zt(i.shape)/p,p]}});if(e.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const I=e.readSync(a.dataId),D=e.bufferSync(i),M=nR(I,D,i.dtype,h,u,p,m,i.shape,c);return e.makeTensorInfo(f,i.dtype,M.values)}const S=new jD(u,[h,p]),N=[{type:"int32",data:[u]},{type:"int32",data:m}],A=e.runWebGPUProgram(S,[y,v],y.dtype,N),_=se({inputs:{x:A},backend:e,attrs:{shape:f}});return e.disposeData(v.dataId),e.disposeData(y.dataId),e.disposeData(A.dataId),_}const qD={kernelName:b6,backendName:"webgpu",kernelFunc:HD};class WD{constructor(t,e){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.slice(),this.aShape=t,this.outputShape=e,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}getUserCode(){const t=VD(this.aShape);return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let indexZ = i32(getIndices(resRC.x, resRC.z));
          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);
          setOutputAtIndex(index, inBounds * getA(${t}));
        }
      }
    `}}function VD(n){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],e=[];for(let i=0;i<n.length;i++)i===2?e.push("indexZ"):e.push(`${t[i]}`);return e.join()}function m3(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,indices:o}=t,{axis:u,batchDims:c}=i,f=Gl(u,a.shape)[0],h=Mk(a,o,f,c),p=Zt(o.shape),m=[],v=se({inputs:{x:a},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),y=se({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}});m.push(v),m.push(y);const S=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize];if(e.shouldExecuteOnCPU([a,o])){const D=e.tensorMap.get(y.dataId).values,M=ar(y.shape,y.dtype,D),ct=e.tensorMap.get(v.dataId).values,it=ar(v.shape,v.dtype,ct),nt=iR(it,M,S);return m.forEach(F=>e.disposeData(F.dataId)),e.makeTensorInfo(h.outputShape,nt.dtype,nt.values)}const N=new WD(v.shape,S),A=e.runWebGPUProgram(N,[v,y],v.dtype);m.push(A);const _=se({inputs:{x:A},backend:e,attrs:{shape:h.outputShape}});return m.forEach(I=>e.disposeData(I.dataId)),_}const GD={kernelName:v6,backendName:"webgpu",kernelFunc:m3};const YD=Xi({opType:Ie.GREATER,cpuKernelImpl:aR,dtype:"bool"}),XD={kernelName:w6,backendName:"webgpu",kernelFunc:YD};const KD=Xi({opType:Ie.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:rR}),QD={kernelName:x6,backendName:"webgpu",kernelFunc:KD};function ZD(n){const{inputs:t,backend:e}=n,{input:i}=t;return p3(i,!0,e)}const JD={kernelName:S6,backendName:"webgpu",kernelFunc:ZD};const t7=pn({opType:qt.IS_FINITE,dtype:"bool"}),e7={kernelName:A6,backendName:"webgpu",kernelFunc:t7};const n7=pn({opType:qt.IS_INF,dtype:"bool"}),i7={kernelName:N6,backendName:"webgpu",kernelFunc:n7};const r7=pn({opType:qt.IS_NAN,dtype:"bool"}),a7={kernelName:_6,backendName:"webgpu",kernelFunc:r7};function s7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{alpha:o}=i,u=[{type:"float32",data:[o]}],c=new gf(a.shape,qt.LEAKYRELU,"alpha : f32,");return e.runWebGPUProgram(c,[a],"float32",u)}const o7={kernelName:k6,backendName:"webgpu",kernelFunc:s7};const l7=Xi({opType:Ie.LESS,dtype:"bool",cpuKernelImpl:oR}),u7={kernelName:E6,backendName:"webgpu",kernelFunc:l7};const c7=Xi({opType:Ie.LESS_EQUAL,dtype:"bool",cpuKernelImpl:sR}),f7={kernelName:L6,backendName:"webgpu",kernelFunc:c7};class h7{constructor(t){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);
        }
      }
    `}}function d7(n){const{backend:t,attrs:e}=n,{start:i,stop:a,num:o}=e,u=(a-i)/(o-1),c=new h7(o),f=[{type:"float32",data:[i]},{type:"float32",data:[u]}];return t.runWebGPUProgram(c,[],"float32",f)}const p7={kernelName:R6,backendName:"webgpu",kernelFunc:d7};const m7=pn({opType:qt.LOG,cpuKernelImpl:lR}),g7={kernelName:I6,backendName:"webgpu",kernelFunc:m7};const y7=pn({opType:qt.LOG1P}),v7={kernelName:T6,backendName:"webgpu",kernelFunc:y7};const b7=Xi({opType:Ie.LOGICAL_AND,dtype:"bool"}),w7={kernelName:D6,backendName:"webgpu",kernelFunc:b7};const x7=pn({opType:qt.LOGICAL_NOT}),S7={kernelName:P6,backendName:"webgpu",kernelFunc:x7};const C7=Xi({opType:Ie.LOGICAL_OR}),A7={kernelName:M6,backendName:"webgpu",kernelFunc:C7};const g3=`
  var powValue = 0.0;
  let basis = uniforms.bias + uniforms.alpha * sum;
  if (uniforms.beta == 0.5) {
    powValue = inverseSqrt(basis);
  } else if (uniforms.beta == 1.0) {
    powValue = 1.0 / basis;
  } else {
    powValue = exp(log(basis) * (-uniforms.beta));
  }
`;class N7{constructor(t){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];
        let d = coords[3];

        let x = getX(b, r, c, d);
        var sum = 0.0;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let idx = d + i;
          if (idx >= 0 && idx < uniforms.xShape[3]) {
            let z = getX(b, r, c, idx);
            sum = sum + z * z;
          }
        }
        ${g3}

        setOutputAtIndex(index, x * powValue);
      }
    }
  `}}class _7{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,Xt(e<=this.maxAllowRadius,()=>`Radius must be less than or equal to ${this.maxAllowRadius}, current radius is ${e}`),this.outputShape=t,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=Vt(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}getUserCode(){return`
    var <workgroup>lrnSub: array<f32, ${this.workgroupSize[0]}>;
    const elementsPerWorkgroup = ${this.elementsPerWorkgroup};
    const maxAllowRadius = ${this.maxAllowRadius};

    ${Wt()} {
      let localDepth = i32(localId.x);
      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;
      let xDepth = workgroupDepth + localDepth - maxAllowRadius;
      let b = i32(globalId.z) / uniforms.xShape[1];
      let r = i32(globalId.z) - b * uniforms.xShape[1];
      let c = i32(globalId.y);
      let d = workgroupDepth + localDepth;

      var x = 0.0;
      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {
        x = getX(b, r, c, xDepth);
      }
      lrnSub[localDepth] = x;
      workgroupBarrier();

      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {
        var sum = 0.0;
        let index = localDepth + maxAllowRadius;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let z = lrnSub[index + i];
          sum = sum + z * z;
        }
        ${g3}

        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);
      }
    } `}}function k7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{depthRadius:o,bias:u,alpha:c,beta:f}=i;let h;o>16?h=new N7(a.shape):h=new _7(a.shape,o);const p=[{type:"int32",data:[o]},{type:"float32",data:[u]},{type:"float32",data:[c]},{type:"float32",data:[f]}];return e.runWebGPUProgram(h,[a],a.dtype,p)}const E7={kernelName:O6,backendName:"webgpu",kernelFunc:k7};class L7{constructor(t){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];

        let MIN_DEPTH_BEGIN = 0;
        let MAX_DEPTH_END = uniforms.outShape[3];
        var result = 0.0;
        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {
          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);
          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);

          var norm = 0.0;
          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            } else {
              break;
            }
          }

          norm = uniforms.alpha * norm + uniforms.bias;

          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              var dyi = -2.0 * uniforms.alpha * uniforms.beta
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * uniforms.beta);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            } else {
              break;
            }
          }
        }

        setOutputAtIndex(index, result);
      }
    }
  `}}function R7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,y:o,dy:u}=t,{depthRadius:c,bias:f,alpha:h,beta:p}=i,m=new L7(a.shape),v=[{type:"int32",data:[c]},{type:"float32",data:[f]},{type:"float32",data:[h]},{type:"float32",data:[p]}];return e.runWebGPUProgram(m,[a,o,u],a.dtype,v)}const I7={kernelName:F6,backendName:"webgpu",kernelFunc:R7};const T7=Xi({opType:Ie.MAX,cpuKernelImpl:cR}),D7={kernelName:sb,backendName:"webgpu",kernelFunc:T7};function P7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{filterSize:o,strides:u,pad:c,dimRoundingMode:f}=i,p=Rh(a.shape,o,u,1,c,f);return r3(a,p,"max",e)}const M7={kernelName:z6,backendName:"webgpu",kernelFunc:P7};function O7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{filterSize:o,strides:u,pad:c,dataFormat:f,dimRoundingMode:h}=i,p=[1,1,1],m=vp(a.shape,o,u,p,c,h,f),v=new Tg(m,"max"),y=[{type:"int32",data:[m.strideDepth,m.strideHeight,m.strideWidth]},{type:"int32",data:[m.padInfo.front,m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.inDepth,m.inHeight,m.inWidth]},{type:"int32",data:[m.effectiveFilterDepth,m.effectiveFilterHeight,m.effectiveFilterWidth]}];return e.runWebGPUProgram(v,[a],a.dtype,y)}const F7={kernelName:$6,backendName:"webgpu",kernelFunc:O7};class B7{constructor(t){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);
            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            let curPosValue = wR * uniforms.filterDims[1] + wC;
            let mask = select(0.0, 1.0, maxPosValue == curPosValue);
            dotProd += dyValue * mask;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class z7{constructor(t){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}getUserCode(){return`
      ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;

        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;
              let mask = select(0.0, 1.0, maxPosValue == curPosValue);
              dotProd += dyValue * mask;
            }
          }
        }

        setOutputAtIndex(index, dotProd);
      }
    }
    `}}function U7(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,input:o}=t,u=o,{filterSize:c,strides:f,pad:h,dimRoundingMode:p}=i,m=[1,1,1],v=vp(u.shape,c,f,m,h,p),y=new Tg(v,"max",!0);let S=[{type:"int32",data:[v.strideDepth,v.strideHeight,v.strideWidth]},{type:"int32",data:[v.padInfo.front,v.padInfo.top,v.padInfo.left]},{type:"int32",data:[v.inDepth,v.inHeight,v.inWidth]},{type:"int32",data:[v.effectiveFilterDepth,v.effectiveFilterHeight,v.effectiveFilterWidth]}];const N=e.runWebGPUProgram(y,[u],"int32",S),A=new z7(v);S=[{type:"int32",data:[v.strideDepth,v.strideHeight,v.strideWidth]},{type:"int32",data:[v.effectiveFilterDepth-1-v.padInfo.front,v.effectiveFilterHeight-1-v.padInfo.top,v.effectiveFilterWidth-1-v.padInfo.left]},{type:"int32",data:[v.effectiveFilterDepth,v.effectiveFilterHeight,v.effectiveFilterWidth]},{type:"int32",data:[v.outDepth]},{type:"int32",data:[v.outHeight]},{type:"int32",data:[v.outWidth]}];const _=e.runWebGPUProgram(A,[a,N],u.dtype,S);return e.disposeData(N.dataId),_}const $7={kernelName:j6,backendName:"webgpu",kernelFunc:U7};function j7(n){const{inputs:t,backend:e,attrs:i}=n,{dy:a,input:o,output:u}=t,c=o;Kb([o,u],"maxPoolGrad");const{filterSize:f,strides:h,pad:p,dimRoundingMode:m}=i,v=Rh(c.shape,f,h,1,p,m),y=new wh(v,"max",!0);let S=[{type:"int32",data:[v.strideHeight,v.strideWidth]},{type:"int32",data:[v.padInfo.top,v.padInfo.left]},{type:"int32",data:[v.dilationHeight,v.dilationWidth]},{type:"int32",data:[v.inHeight,v.inWidth]},{type:"int32",data:[v.effectiveFilterHeight,v.effectiveFilterWidth]}];const N=e.runWebGPUProgram(y,[c],"int32",S),A=new B7(v);S=[{type:"int32",data:[v.strideHeight,v.strideWidth]},{type:"int32",data:[v.effectiveFilterHeight-1-v.padInfo.top,v.effectiveFilterWidth-1-v.padInfo.left]},{type:"int32",data:[v.dilationHeight,v.dilationWidth]},{type:"int32",data:[v.effectiveFilterHeight,v.effectiveFilterWidth]},{type:"int32",data:[v.outHeight]},{type:"int32",data:[v.outWidth]}];const _=e.runWebGPUProgram(A,[a,N],c.dtype,S);return e.disposeData(N.dataId),_}const H7={kernelName:U6,backendName:"webgpu",kernelFunc:j7};function q7(n){const{inputs:t,backend:e,attrs:i}=n,{filterSize:a,strides:o,pad:u,includeBatchInIndex:c}=i,{x:f}=t;Xt(f.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${f.shape.length}.`);const h=[1,1];Xt(Fb(o,h),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const p=Rh(f.shape,a,o,h,u),m=[{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.padInfo.top,p.padInfo.left]},{type:"int32",data:[p.dilationHeight,p.dilationWidth]},{type:"int32",data:[p.inHeight,p.inWidth]},{type:"int32",data:[p.effectiveFilterHeight,p.effectiveFilterWidth]}];let v=new wh(p,"max",!1);const y=e.runWebGPUProgram(v,[f],f.dtype,m);v=new wh(p,"max",!0,!0,c);const S=e.runWebGPUProgram(v,[f],"int32",m);return[y,S]}const W7={kernelName:H6,backendName:"webgpu",kernelFunc:q7};function V7(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o,keepDims:u}=i;return Ku(a,o,u,"min",e)}const G7={kernelName:W6,backendName:"webgpu",kernelFunc:V7};const Y7=Xi({opType:Ie.MIN,cpuKernelImpl:fR}),X7={kernelName:V6,backendName:"webgpu",kernelFunc:Y7};class K7{constructor(t,e,i){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.map((a,o)=>a[0]+t[o]+a[1]),this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=t,e.map((a,o)=>{this.uniforms+=` pad${o} : vec2<i32>,`}),this.offset=i==="reflect"?0:1,this.shaderKey=`mirrorPad_${i}`}getUserCode(){const t=this.xShape.length,e=this.xShape.map((h,p)=>`uniforms.pad${p}[0]`).join(","),i=this.xShape.map((h,p)=>`uniforms.pad${p}[0] + uniforms.xShape${t>1?`[${p}]`:""}`).join(","),a=t===1?"start":"start[i]",o=t===1?"end":"end[i]",u=t===1?"outC":"outC[i]",c=Ci(t),f=t>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t):"coords";return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let start = ${c}(${e});
          let end = ${c}(${i});
          var outC = getCoordsFromIndex(index);
          for (var i = 0; i < ${t}; i = i + 1) {
            if (${u} < ${a}) {
              ${u} = ${a} * 2 - ${u} - ${this.offset};
            } else if(${u} >= ${o}) {
              ${u} = (${o} - 1) * 2 - ${u} + ${this.offset};
            }
          }
          let coords = outC - start;
          setOutputAtIndex(index, getX(${f}));
        }
      }
    `}}const Q7={kernelName:G6,backendName:"webgpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{x:i}=n,{paddings:a,mode:o}=t,u=e,c=a.map(p=>({type:"int32",data:[p[0],p[1]]})),f=new K7(i.shape,a,o);return u.runWebGPUProgram(f,[i],i.dtype,c)}};const Z7=Xi({opType:Ie.MOD}),J7={kernelName:Y6,backendName:"webgpu",kernelFunc:Z7};class tP{constructor(t,e){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,e],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}getUserCode(){return`
    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {
      let HASHSCALE1 = 443.8975;
      let p = resultUV * seed;
      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);
      p3 = p3 + dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Wt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords[0];

        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),
            f32(coords[0]) / f32(uniforms.outShape[0]));
        let r = random(uniforms.seed, resUV);
        var cdf = 0.0;
        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {
          cdf = cdf + getProbs(batch, i);

          if (r < cdf) {
            setOutputAtIndexI32(index, i);
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);
      }
    }
  `}}class eP{constructor(t){this.variableNames=["logits"],this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}getUserCode(){return`
    var<workgroup> buf : array<f32, ${this.workgroupSize[0]}>;
    var<workgroup> rowMaxShared : f32;
    var<workgroup> rowSumShared : f32;
    const blockSize = ${this.workgroupSize[0]};
    ${Wt("index")} {
      let row = index / blockSize;
      let tid = i32(localId.x);
      let cols = uniforms.outShape[1];

      var threadMax = -3.402823e+38f;
      for (var col = tid; col < cols; col += blockSize) {
        let value = getLogits(row, col);
        threadMax = max(threadMax, value);
      }
      if (tid < cols) {
        buf[tid] = threadMax;
      }
      workgroupBarrier();

      var reduceSize = min(cols, blockSize);
      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
        reduceSize = currSize + (reduceSize & 1);
        if (tid < currSize) {
          buf[tid] = max(buf[tid], buf[tid + reduceSize]);
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowMaxShared = buf[0];
      }
      workgroupBarrier();

      var threadSum = 0.0;
      for (var col = tid; col < cols; col += blockSize) {
        let subExp = exp(getLogits(row, col) - rowMaxShared);
        threadSum += subExp;
      }
      buf[tid] = threadSum;
      workgroupBarrier();

      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {
        if (tid < currSize) {
          buf[tid] = buf[tid] + buf[tid + currSize];
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowSumShared = buf[0];
      }
      workgroupBarrier();

      for (var col = tid; col < cols; col += blockSize) {
        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;
        setOutputAtCoords(row, col, value);
      }
  }
    `}}function y3(n){const{inputs:t,backend:e,attrs:i}=n,{logits:a}=t,{dim:o}=i,u=se({inputs:{x:a},backend:e,attrs:{shape:[Zt(a.shape)/a.shape[o],a.shape[o]]}}),c=new eP(u.shape),f=e.runWebGPUProgram(c,[u],a.dtype),h=se({inputs:{x:f},backend:e,attrs:{shape:a.shape}});return e.disposeData(u.dataId),e.disposeData(f.dataId),h}const nP={kernelName:TA,backendName:"webgpu",kernelFunc:y3};function iP(n){const{inputs:t,backend:e,attrs:i}=n,{logits:a}=t,{numSamples:o,seed:u,normalized:c}=i,f=c?a:y3({inputs:{logits:a},backend:e,attrs:{dim:a.shape.length-1}}),h=f.shape[0],p=f.shape[1],m=new tP(h,o),v=[{type:"float32",data:[u]},{type:"int32",data:[p]}],y=e.runWebGPUProgram(m,[f],"int32",v);return c||e.disposeData(f.dataId),y}const rP={kernelName:X6,backendName:"webgpu",kernelFunc:iP};function aP(n){const{inputs:t,backend:e}=n,{x:i}=t;if(e.shouldExecuteOnCPU([i])){const o=e.tensorMap.get(i.dataId),[u,c]=dR(o.values,i.shape,i.dtype);return e.makeTensorInfo(c,i.dtype,u)}const a=new gf(i.shape,qt.NEG);return e.runWebGPUProgram(a,[i],i.dtype)}const sP={kernelName:K6,backendName:"webgpu",kernelFunc:aP};function oP(n){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:e,attrs:i}=n,{boxes:a,scores:o}=t,{maxOutputSize:u,iouThreshold:c,scoreThreshold:f}=i,h=e.readSync(a.dataId),p=e.readSync(o.dataId),{selectedIndices:m}=E_(h,p,u,c,f);return e.makeTensorInfo([m.length],"int32",new Int32Array(m))}const lP={kernelName:Z6,backendName:"webgpu",kernelFunc:oP};function uP(n){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:e,attrs:i}=n,{boxes:a,scores:o}=t,{maxOutputSize:u,iouThreshold:c,scoreThreshold:f,softNmsSigma:h}=i,p=e.readSync(a.dataId),m=e.readSync(o.dataId),v=u,y=c,S=f,N=h,{selectedIndices:A,selectedScores:_}=L_(p,m,v,y,S,N);return[e.makeTensorInfo([A.length],"int32",new Int32Array(A)),e.makeTensorInfo([_.length],"float32",new Float32Array(_))]}const cP={kernelName:J6,backendName:"webgpu",kernelFunc:uP};class fP{constructor(t,e){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t,e],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}getUserCode(){return`
      ${Wt("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,
                                      f32(i32(round(getX(coords.x))) == coords.y)));
        }
      }
    `}}function hP(n){const{inputs:t,backend:e,attrs:i}=n,{indices:a}=t,{dtype:o,depth:u,onValue:c,offValue:f}=i,h=Zt(a.shape),p=new fP(h,u),m=se({inputs:{x:a},backend:e,attrs:{shape:[h]}}),v=[{type:"float32",data:[c]},{type:"float32",data:[f]}],y=e.runWebGPUProgram(p,[m],o,v);e.disposeData(m.dataId);const S=[...a.shape,u],N=se({inputs:{x:y},backend:e,attrs:{shape:S}});return e.disposeData(y.dataId),N}const dP={kernelName:eA,backendName:"webgpu",kernelFunc:hP};function sp(n){const{inputs:t,backend:e}=n,{x:i}=t;if(i.dtype==="complex64"){const a=Dh({inputs:{input:i},backend:e}),o=sp({inputs:{x:a},backend:e}),u=Np({inputs:{input:i},backend:e}),c=sp({inputs:{x:u},backend:e}),f=Xu({inputs:{real:o,imag:c},backend:e});return e.disposeData(a.dataId),e.disposeData(o.dataId),e.disposeData(u.dataId),e.disposeData(c.dataId),f}else return Br({attrs:{shape:i.shape,dtype:i.dtype,value:i.dtype==="string"?"":0},backend:e})}const pP={kernelName:db,backendName:"webgpu",kernelFunc:sp};function v3(n){const{inputs:t,backend:e}=n,{x:i}=t;if(i.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(i.dtype==="complex64"){const a=Dh({inputs:{input:i},backend:e}),o=v3({inputs:{x:a},backend:e}),u=Np({inputs:{input:i},backend:e}),c=sp({inputs:{x:u},backend:e}),f=Xu({inputs:{real:o,imag:c},backend:e});return e.disposeData(a.dataId),e.disposeData(o.dataId),e.disposeData(u.dataId),e.disposeData(c.dataId),f}else return Br({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:e})}const mP={kernelName:tA,backendName:"webgpu",kernelFunc:v3};function gP(n){const{inputs:t,backend:e,attrs:i}=n,{axis:a}=i;if(t.length===1)return Y1({inputs:{input:t[0]},backend:e,attrs:{dim:a}});const o=t[0].shape,u=t[0].dtype;t.forEach(p=>{K5(o,p.shape,"All tensors passed to stack must have matching shapes"),Xt(u===p.dtype,()=>"All tensors passed to stack must have matching dtypes")});const c=[],f=t.map(p=>{const m=Y1({inputs:{input:p},backend:e,attrs:{dim:a}});return c.push(m),m}),h=o3({inputs:f,backend:e,attrs:{axis:a}});return c.forEach(p=>e.disposeData(p.dataId)),h}const yP={kernelName:nA,backendName:"webgpu",kernelFunc:gP};function b3(n,t=!1){const e=n.length,i=Ci(e),a=n.map((m,v)=>`uniforms.pad${v}[0]`).join(","),o=n.map((m,v)=>`uniforms.pad${v}[0] + uniforms.xShape${e>1?`[${v}]`:""}`).join(","),u=e>1?`${i}(${a})`:`${a}`,c=e>1?`${i}(${o})`:`${o}`,f=e>1?"any(paddedCoords < start)":"paddedCoords < start",h=e>1?"any(paddedCoords >= end)":"paddedCoords >= end",p=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return`
        let start = ${u};
        let end = ${c};
        if (${f} || ${h}) {
          setOutputAtIndex(index, ${t?0:"uniforms.constantValue"});
        } else {
          let coords = paddedCoords - start;
          setOutputAtIndex(index, getX(${p}));
        }
  `}class vP{constructor(t,e){this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.map((i,a)=>i[0]+t[a]+i[1]),this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),e.map((i,a)=>{this.uniforms+=` pad${a} : vec2<i32>,`}),this.xShape=t,this.shaderKey="pad"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let paddedCoords = getCoordsFromIndex(index);
          ${b3(this.xShape)}
        }
      }
    `}}const bP=n=>{const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{paddings:o,constantValue:u}=i;if(o.every(h=>el(h,[0,0])))return oa({inputs:{x:a},backend:e});if(Zt(a.shape)===0){const h=o.map((p,m)=>p[0]+a.shape[m]+p[1]);return Br({backend:e,attrs:{shape:h,value:u,dtype:a.dtype}})}const c=[{type:"float32",data:[u]}];o.map(h=>c.push({type:"int32",data:[h[0],h[1]]}));const f=new vP(a.shape,o);return e.runWebGPUProgram(f,[a],a.dtype,c)},wP={kernelName:iA,backendName:"webgpu",kernelFunc:bP};const xP=Xi({opType:Ie.POW}),SP={kernelName:lb,backendName:"webgpu",kernelFunc:xP};function CP(n){const{inputs:t,backend:e}=n,{x:i,alpha:a}=t,o=new ip(Ie.PRELU,i.shape,a.shape);return e.runWebGPUProgram(o,[i,a],"float32")}const AP={kernelName:rA,backendName:"webgpu",kernelFunc:CP};function NP(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{axis:o,keepDims:u}=i;return Ku(a,o,u,"prod",e)}const _P={kernelName:aA,backendName:"webgpu",kernelFunc:NP};const kP=n=>{const{backend:t,attrs:e}=n,{start:i,stop:a,step:o,dtype:u}=e,c=gR(i,a,o,u);return t.makeTensorInfo([c.length],u,c)},EP={kernelName:sA,backendName:"webgpu",kernelFunc:kP};const LP=Xi({opType:Ie.DIV}),RP={kernelName:ib,backendName:"webgpu",kernelFunc:LP};const IP=pn({opType:qt.RECIPROCAL}),TP={kernelName:lA,backendName:"webgpu",kernelFunc:IP};const DP=pn({opType:qt.RELU}),PP={kernelName:uA,backendName:"webgpu",kernelFunc:DP};const MP=pn({opType:qt.RELU6}),OP={kernelName:pA,backendName:"webgpu",kernelFunc:MP};class FP{constructor(t,e,i){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],e,i,t[3]],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC =
            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *
            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);

          // Compute the four integer indices.
          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);
          let sourceCeilRC = vec2<i32>(
            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));

          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);
          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);
          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);
          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);

          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);

          let top = topLeft + (topRight - topLeft) * fracRC.y;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
          let newValue = top + (bottom - top) * fracRC.x;

          setOutputAtIndex(index, newValue);
        }
      }
    `}}function BP(n){const{inputs:t,backend:e,attrs:i}=n,{images:a}=t,{alignCorners:o,size:u,halfPixelCenters:c}=i,[f,h]=u,p=o&&f>1?1:0,m=o&&h>1?1:0,y=[{type:"float32",data:[p,m]},{type:"float32",data:[c?.5:0]}],S=new FP(a.shape,f,h);return e.runWebGPUProgram(S,[a],"float32",y)}const zP={kernelName:hA,backendName:"webgpu",kernelFunc:BP};class UP{constructor(t,e){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,
       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=e,this.shaderKey=`resizeBilinearBackprop_${e}`}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let dxR = f32(dyR) * uniforms.heightScale;
              let topDxRIndex = i32(floor(dxR));
              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));
              let dxRLerp = dxR - f32(topDxRIndex);
              let inverseDxRLerp = 1.0 - dxRLerp;

              let dxC = f32(dyC) * uniforms.widthScale;
              let leftDxCIndex = i32(floor(dxC));
              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));
              let dxCLerp = dxC - f32(leftDxCIndex);
              let inverseDxCLerp = 1.0 - dxCLerp;

              if (r == topDxRIndex && c == leftDxCIndex) {
                // topLeft
                accumulator +=
                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
              }

              if (r == topDxRIndex && c == rightDxCIndex) {
                // topRight
                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
              }

              if (r == bottomDxRIndex && c == leftDxCIndex) {
                // bottomLeft
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
              }

              if (r == bottomDxRIndex && c == rightDxCIndex) {
                // bottomRight
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}}function $P(n){const{inputs:t,backend:e,attrs:i}=n,{images:a,dy:o}=t,{alignCorners:u}=i,[,c,f]=a.shape,[,h,p]=o.shape,m=[u&&h>1?c-1:c,u&&p>1?f-1:f],v=[u&&h>1?h-1:h,u&&p>1?p-1:p],y=m[0]/v[0],S=m[1]/v[1],N=1/y,A=1/S,_=Math.ceil(N)*2+2,I=Math.ceil(A)*2+2,D=new UP(a.shape,u),M=[{type:"int32",data:m},{type:"int32",data:v},{type:"float32",data:[y]},{type:"float32",data:[S]},{type:"float32",data:[N]},{type:"float32",data:[A]},{type:"int32",data:[_]},{type:"int32",data:[I]}];return e.runWebGPUProgram(D,[o],o.dtype,M)}const jP={kernelName:dA,backendName:"webgpu",kernelFunc:$P};class HP{constructor(t,e,i,a){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],e,i,t[3]],this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=a,this.shaderKey=`resizeNearest_${a}`}getUserCode(){let t;return this.halfPixelCenters?t="max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":t="vec2<f32>(rc) * effectiveInputOverOutputRatioRC",`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC = ${t};

          // Compute the coordinators of nearest neighbor point.
          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));
          let sourceNearestRC = vec2<i32>(
            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));
          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);

          setOutputAtIndex(index, newValue);
        }
      }
    `}}function qP(n){const{inputs:t,backend:e,attrs:i}=n,{images:a}=t,{alignCorners:o,halfPixelCenters:u,size:c}=i,[f,h]=c,p=o&&f>1?1:0,m=o&&h>1?1:0,y=[{type:"float32",data:[p,m]},{type:"float32",data:[o?.5:0]}],S=new HP(a.shape,f,h,u);return e.runWebGPUProgram(S,[a],a.dtype,y)}const WP={kernelName:cA,backendName:"webgpu",kernelFunc:qP};class VP{constructor(t,e){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,
       winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=e,this.shaderKey=`resizeNearestNeigborBackprop_${e}`}getUserCode(){return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *
                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));

              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *
                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));

              let sourceNearestRow =
                  i32(min(f32(uniforms.outShape[1] - 1),
                  ${this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)"}));

              let sourceNearestCol =
                  i32(min(f32(uniforms.outShape[2] - 1),
                  ${this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)"}));

              if (r == sourceNearestRow && c == sourceNearestCol) {
                accumulator += getDy(b, dyR, dyC, d);
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}}function GP(n){const{inputs:t,backend:e,attrs:i}=n,{images:a,dy:o}=t,{alignCorners:u}=i,[,c,f]=a.shape,[,h,p]=o.shape,m=[u&&h>1?c-1:c,u&&p>1?f-1:f],v=[u&&h>1?h-1:h,u&&p>1?p-1:p],y=m[0]/v[0],S=m[1]/v[1],N=1/y,A=1/S,_=Math.ceil(N)*2+2,I=Math.ceil(A)*2+2,D=new VP(a.shape,u),M=[{type:"int32",data:m},{type:"int32",data:v},{type:"float32",data:[N]},{type:"float32",data:[A]},{type:"int32",data:[_]},{type:"int32",data:[I]}];return e.runWebGPUProgram(D,[o],o.dtype,M)}const YP={kernelName:fA,backendName:"webgpu",kernelFunc:GP};class XP{constructor(t){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}getUserCode(){return`
      
      // Using uniform variables as judging conditions, so the function has
      // coherent execution within all threads.
      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {
        var reverseCoords = coords;
        if (uniforms.axis[0] == 1) {
          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;
        }
        if (uniforms.axis[1] == 1) {
          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;
        }
        if (uniforms.axis[2] == 1) {
          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;
        }
        if (uniforms.axis[3] == 1) {
          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;
        }

        return reverseCoords;
      }
    
      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let reverseCoords = getReverseCoords(coords);
          setOutputAtIndex(index, getX(reverseCoords[0],
              reverseCoords[1], reverseCoords[2], reverseCoords[3]));
        }
      }
    `}}function KP(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{dims:o}=i,u=a.shape.length;if(u===0)return oa({inputs:{x:a},backend:e});const c=a.shape,f=[1,1,1,1];c.forEach((A,_)=>{const I=_+4-u;f[I]=A});const h=Gl(o,a.shape),p=[0,0,0,0];h.forEach(A=>{const _=A+4-u;p[_]=1});const m=[{type:"int32",data:p}],v=se({inputs:{x:a},backend:e,attrs:{shape:f}}),y=new XP(f),S=e.runWebGPUProgram(y,[v],v.dtype,m);e.disposeData(v.dataId);const N=se({inputs:{x:S},backend:e,attrs:{shape:c}});return e.disposeData(S.dataId),N}const QP={kernelName:mA,backendName:"webgpu",kernelFunc:KP};class ZP{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`centerX : f32, centerY : f32, sinRadians : f32,
          cosRadians : f32,`,this.shaderKey="rotate",this.outputShape=t,typeof e=="number"?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}getUserCode(){return`
        ${Wt("index")} {
          if (index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *
                uniforms.sinRadians;
            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *
                uniforms.cosRadians;
            let coordX = i32(round(coordXFloat + uniforms.centerX));
            let coordY = i32(round(coordYFloat + uniforms.centerY));
            ${this.fillSnippet}
            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&
                coordY < uniforms.xShape[1]) {
              outputValue = getX(coords[0], coordY, coordX, coords[3]);
            }
            setOutputAtIndex(index, outputValue);
          }
        }
      `}}const JP={kernelName:XA,backendName:"webgpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{image:i}=n,{radians:a,fillValue:o,center:u}=t,c=e,f=new ZP(i.shape,o),[h,p]=rk(u,i.shape[1],i.shape[2]),m=[{type:"float32",data:[h]},{type:"float32",data:[p]},{type:"float32",data:[Math.sin(a)]},{type:"float32",data:[Math.cos(a)]}];return typeof o=="number"?m.push({type:"float32",data:[Number.parseFloat(o.toFixed(2))]}):m.push({type:"float32",data:o}),c.runWebGPUProgram(f,[i],i.dtype,m)}};const tM=pn({opType:qt.ROUND}),eM={kernelName:gA,backendName:"webgpu",kernelFunc:tM};const nM=pn({opType:qt.RSQRT,cpuKernelImpl:yR}),iM={kernelName:yA,backendName:"webgpu",kernelFunc:nM};class dh{constructor(t,e,i,a,o,u,c,f=!0){this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=u,this.type=c,this.sumDupeIndices=f,this.dispatchLayout=Jt(t),this.dispatch=Vt(this.dispatchLayout,t,this.workgroupSize),this.sliceDimGreaterThanOne=e>1,this.shaderKey=`scatter_${i}_${a}_${this.sliceDimGreaterThanOne}_${c}_${f}_${o.length}`;const h=Ci(o.length);this.uniforms=`sliceDim : i32, strides: ${h}, updatesSize: i32,`,this.updatesRank=a,this.indicesRank=i}getUserCode(){let t="";this.indicesRank===1?t="coords[0]":this.indicesRank===2&&(t="coords[0], j");const e=`getIndices(${t})`,i=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides";let a="",o="";this.dispatchLayout.x.length===1?(a="flattenedIndex",o=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {
        return index;
      }
      `):this.dispatchLayout.x.length===2&&(a="vec2<i32>(flattenedIndex, coords[1])",o=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {
        // N.B. |updates| could be a scalar tensor, conceptually representing a
        // 2D tensor with all values equal to that. By design, its size must be
        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|
        // gives the other.
        let sliceSize = uniforms.outShape[1];
        let d0 = index / sliceSize;
        let d1 = index - d0 * sliceSize;
        return vec2<i32>(d0, d1);
      }
      `);const c=`getUpdates(${Array.from({length:this.updatesRank},(h,p)=>`coords[${p}]`).join(", ")})`;return`
    ${o}
      ${Wt("index")} {
        if (index < uniforms.updatesSize) {
          let coords = getUpdatesCoordsFromFlatIndex(index);
          var flattenedIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexInside = i32(round(${e}));
            flattenedIndex = flattenedIndex + indexInside * ${i};
          }
          let updateValue =
              ${Tu(this.type)}(${c});
          let flatIndex = getOutputIndexFromCoords(${a});

          ${this.sumDupeIndices?Yl("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));"}
        }
      }`}}function rM(n){const{inputs:t,backend:e,attrs:i}=n,{indices:a,updates:o}=t,{shape:u}=i,{sliceRank:c,numUpdates:f,sliceSize:h,strides:p,outputSize:m}=Lg(o,a,u),v=[m/h,h];if(m===0)return e.makeTensorInfo(u,a.dtype);const y=se({inputs:{x:a},backend:e,attrs:{shape:[f,c]}}),S=se({inputs:{x:o},backend:e,attrs:{shape:[f,h]}}),N=S.dtype,A=Br({backend:e,attrs:{shape:v,value:0,dtype:N}}),_=Zt(S.shape),I=[{type:"int32",data:[c]},{type:"int32",data:p},{type:"int32",data:[_]}],D=new dh(S.shape,c,y.shape.length,S.shape.length,p,v,N),M=e.runWebGPUProgram(D,[S,y],N,I,A),Y=se({inputs:{x:M},backend:e,attrs:{shape:u}});return e.disposeData(y.dataId),e.disposeData(S.dataId),e.disposeData(M.dataId),Y}const aM={kernelName:vA,backendName:"webgpu",kernelFunc:rM};class sM{constructor(t,e){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=e,this.shaderKey=`search_sorted_${e}`}getUserCode(){return`
      fn findBound(batch: i32, value: f32) -> i32 {
        var left = i32(0);
        var right = uniforms.numInputs;
        while (left < right) {
          var mid = (left + right) / 2;
          if (getSortedSequence(batch, mid) ${this.side==="left"?"<":"<="} value) {
            left = mid + 1;
          } else {
            right = mid;
          }
        }
        return right;
      }

      ${Wt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let value = getValuesByOutputIndex(index);
          setOutputAtIndexI32(index, findBound(coords[0], value));
        }
      }
    `}}function oM(n){const{inputs:t,backend:e,attrs:i}=n,{sortedSequence:a,values:o}=t,{side:u}=i,c=new sM([o.shape[0],o.shape[1]],u),f=[{type:"int32",data:[a.shape[1]]}];return e.runWebGPUProgram(c,[a,o],"int32",f)}const lM={kernelName:wA,backendName:"webgpu",kernelFunc:oM};class uM{constructor(t,e,i){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=t,this.rank=i,this.shaderKey="select"}getUserCode(){let t,e;if(this.rank>4)throw Error(`Where for rank ${this.rank} is not yet supported`);if(this.rank===1)e="resRC",t="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[];for(let c=0;c<this.outputShape.length;c++)u.push(`${a[c]}`),c<this.cRank&&o.push(`${a[c]}`);t=o.join(),e=u.join()}return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let cVal = getC(${t});
          if (cVal >= 1.0) {
            setOutputAtIndex(index, getA(${e}));
          } else {
            setOutputAtIndex(index, getB(${e}));
          }
        }
      }
    `}}function cM(n){const{inputs:t,backend:e}=n,{condition:i,t:a,e:o}=t,u=new uM(i.shape.length,a.shape,a.shape.length);return e.runWebGPUProgram(u,[i,a,o],ql(a.dtype,o.dtype))}const fM={kernelName:xA,backendName:"webgpu",kernelFunc:cM};const hM=pn({opType:qt.SELU}),dM={kernelName:SA,backendName:"webgpu",kernelFunc:hM};const pM=pn({opType:qt.SIGMOID}),mM={kernelName:kA,backendName:"webgpu",kernelFunc:pM};const gM=pn({opType:qt.SIGN}),yM={kernelName:_A,backendName:"webgpu",kernelFunc:gM};const vM=pn({opType:qt.SIN}),bM={kernelName:AA,backendName:"webgpu",kernelFunc:vM};const wM=pn({opType:qt.SINH}),xM={kernelName:NA,backendName:"webgpu",kernelFunc:wM};const SM=pn({opType:qt.SOFTPLUS}),CM={kernelName:EA,backendName:"webgpu",kernelFunc:SM};class AM{constructor(t,e,i,a,o,u){this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;const c=new Array(a.length);for(let f=0;f<c.length;f++)c[f]=a[o[f]];this.outputShape=c,this.newDim=o,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=t,this.paddedXShape=e,this.uniforms+=`reshapedPaddedXShape : ${Ci(a.length)}, paddedXShapeStrides : ${Ci(u)}, `,i.map((f,h)=>{this.uniforms+=` pad${h} : vec2<i32>,`}),this.shaderKey=`spaceToBatchND_${o}`}getUserCode(){const t=Ci(this.outputShape.length),e=t3(this.newDim);return`
      ${jd(this.paddedXShape,"PaddedX")}
      ${Wt("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let switchedIndex = getIndexFromCoords${this.outputShape.length}D(${t}(${e}), uniforms.reshapedPaddedXShape);
          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);
          ${b3(this.xShape,!0)}
        }
      }
    `}}const NM=n=>{const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{blockShape:o,paddings:u}=i;Xt(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet");const c=o.reduce((I,D)=>I*D),f=[[0,0]];f.push(...u);for(let I=1+o.length;I<a.shape.length;++I)f.push([0,0]);const h=f.map((I,D)=>I[0]+a.shape[D]+I[1]),p=Hb(h,o,c,!1),m=qb(p.length,o.length,!1),v=Wb(h,o,c,!1),y=mr(h),S=new AM(a.shape,h,f,p,m,y.length),N=[{type:"int32",data:p},{type:"int32",data:y}];f.map(I=>N.push({type:"int32",data:[I[0],I[1]]}));const A=e.runWebGPUProgram(S,[a],a.dtype,N),_=se({inputs:{x:A},backend:e,attrs:{shape:v}});return e.disposeData(A.dataId),_},_M={kernelName:RA,backendName:"webgpu",kernelFunc:NM};class kM{constructor(t,e,i){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=t,this.type=i,this.dispatchLayout=Jt([e]),this.dispatch=Vt(this.dispatchLayout,[e],this.workgroupSize),this.shaderKey="sparseSegmentSum"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.sparseSize) {
        let indexInSegmentIds = index / uniforms.segmentSize;
        let indexInSegment = index % uniforms.segmentSize;
        let indexInInput = indices[indexInSegmentIds];
        let segmentId = segmentIds[indexInSegmentIds];

        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];
        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;
        ${Yl("&result[outIndex]","value",this.type)}
      }
    }
  `}}class EM{constructor(t,e){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[t],this.dispatchLayout=Jt(e),this.dispatch=Vt(this.dispatchLayout,e,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.segmentIdsShape) {
        let segmentId = segmentIds[index];
        ${Yl("&result[segmentId]","1","int32")}
      }
    }
  `}}class LM{constructor(t,e){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.type=e,this.dispatchLayout=Jt(t),this.dispatch=Vt(this.dispatchLayout,t,this.workgroupSize),this.shaderKey="sparseSegmentMean"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.size) {
        let segmentId = index / uniforms.segmentSize;
        let count = sameSegmentIdCount[segmentId];
        if (count != 0) {
          ${this.type==="float32"?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);"}
        }
      }
    }
  `}}function w3(n,t,e,i=!1,a){const u=Zt(n.shape)/n.shape[0],c=n.dtype,f=Zt(t.shape),h=a.readSync(e.dataId),m=f>0?h[f-1]+1:0;let v;const y=n.shape.slice();y[0]=m;const S=f*u,N=Br({backend:a,attrs:{shape:y,value:0,dtype:c}});v=new kM(y,S,c);let A=[{type:"int32",data:[u]},{type:"int32",data:[S]}];const _=a.runWebGPUProgram(v,[n,t,e],c,A,N);if(i)return _;const I=Br({backend:a,attrs:{shape:[m],value:0,dtype:"int32"}});v=new EM(m,e.shape);const D=a.runWebGPUProgram(v,[e],"int32",null,I),M=Br({backend:a,attrs:{shape:y,value:0,dtype:c}});v=new LM(y,c),A=[{type:"int32",data:[u]}];const Y=a.runWebGPUProgram(v,[_,D],c,A,M);return a.disposeData(_.dataId),a.disposeData(D.dataId),Y}function RM(n){const{inputs:t,backend:e}=n,{data:i,indices:a,segmentIds:o}=t;return w3(i,a,o,!1,e)}const IM={kernelName:DA,backendName:"webgpu",kernelFunc:RM};function TM(n){const{inputs:t,backend:e}=n,{data:i,indices:a,segmentIds:o}=t;return w3(i,a,o,!0,e)}const DM={kernelName:PA,backendName:"webgpu",kernelFunc:TM};class PM{constructor(t,e){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;const i=new Array(t.length);for(let a=0;a<i.length;a++)i[a]=t[a]*e[a];this.outputShape=i,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}getUserCode(){const t=MM(this.rank,"uniforms.");return`
      ${Wt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          setOutputAtIndex(index, getA(${t}));
        }
      }
    `}}function MM(n,t=""){if(n>=5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`(resRC % ${t}aShape)`;const e=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let a=0;a<n;a++)i.push(`(${e[a]} % ${t}aShape[${a}])`);return i.join()}function Dg(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{reps:o}=i;if(e.shouldExecuteOnCPU([a])||a.dtype==="string"||a.shape.length>=5){const f=e.readSync(a.dataId),h=a.dtype==="string"?f.map(v=>lf(v)):f,p=ar(a.shape,a.dtype,h),m=AR(p,o);return e.makeTensorInfo(m.shape,m.dtype,m.values)}const u=new PM(a.shape,o);return e.runWebGPUProgram(u,[a],a.dtype)}const OM={kernelName:hb,backendName:"webgpu",kernelFunc:Dg};function FM(n){const{inputs:t,backend:e,attrs:i}=n,{sparseIndices:a,sparseValues:o,defaultValue:u}=t,{outputShape:c}=i,{sliceRank:f,numUpdates:h,sliceSize:p,strides:m,outputSize:v}=Lg(o,a,c),y=!1;if(o.dtype==="string"){const nt=e.bufferSync(a),F=e.bufferSync(o),G=lf(e.readSync(u.dataId)[0]),E=vR(nt,F,c,v,p,h,f,m,G,y);return e.makeTensorInfo(c,E.dtype,E.values)}const S=[v/p,p],N=se({inputs:{x:a},backend:e,attrs:{shape:[h,f]}}),A=o.shape.length?se({inputs:{x:o},backend:e,attrs:{shape:[h,p]}}):oa({inputs:{x:o},backend:e}),_=A.dtype,I=e.makeTensorInfo([],_,Zo(1,_)),D=se({inputs:{x:u},backend:e,attrs:{shape:Array(S.length).fill(1)}}),M=Dg({inputs:{x:D},backend:e,attrs:{reps:S}}),Y=Zt([h,p]),ct=[{type:"int32",data:[f]},{type:"int32",data:m},{type:"int32",data:[Y]}];switch(h){case 0:break;case 1:{const nt=new dh([h,p],f,N.shape.length,A.shape.length,m,S,_,y);e.runWebGPUProgram(nt,[A,N],_,ct,M)}break;default:{const nt=new dh([h,p],f,N.shape.length,I.shape.length,m,S,_,y);e.runWebGPUProgram(nt,[I,N],_,ct,M)}{const nt=new dh([h,p],f,N.shape.length,A.shape.length,m,S,_);e.runWebGPUProgram(nt,[A,N],_,ct,M)}}const it=se({inputs:{x:M},backend:e,attrs:{shape:c}});return e.disposeData(N.dataId),e.disposeData(A.dataId),e.disposeData(D.dataId),e.disposeData(I.dataId),e.disposeData(M.dataId),it}const BM={kernelName:MA,backendName:"webgpu",kernelFunc:FM};function zM(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{numOrSizeSplits:o,axis:u}=i,c=Gl(u,a.shape)[0],f=Sk(a,o,c),h=a.shape.length,p=new Array(h).fill(0),m=a.shape.slice();return f.map(v=>{const y=[...m];y[c]=v;const S=yf({inputs:{x:a},backend:e,attrs:{begin:p,size:y}});return p[c]+=v,S})}const UM={kernelName:IA,backendName:"webgpu",kernelFunc:zM};const $M=pn({opType:qt.SQRT}),jM={kernelName:cb,backendName:"webgpu",kernelFunc:$M};const HM={kernelName:FA,backendName:"webgpu",kernelFunc:({inputs:n,backend:t})=>{const{x:e}=n,i=t,a=new gf(e.shape,qt.SQUARE);return i.runWebGPUProgram(a,[e],e.dtype)}};const qM=Xi({opType:Ie.SQUARED_DIFFERENCE}),WM={kernelName:OA,backendName:"webgpu",kernelFunc:qM};function VM({inputs:n,attrs:t,backend:e}){const{x:i}=n,a=new gf(i.shape,qt.STEP,"stepAlpha : f32,"),o=[{type:"float32",data:[t.alpha]}];return e.runWebGPUProgram(a,[i],i.dtype,o)}const GM={kernelName:GA,backendName:"webgpu",kernelFunc:VM};class YM{constructor(t){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);const e=Ci(this.outputShape.length);this.uniforms=`begin : ${e},  strides : ${e}, `,this.shaderKey="stridedSlice"}getUserCode(){const t=this.outputShape.length;let e="";if(t===1)e="coords * uniforms.strides + uniforms.begin";else{let a=0;e=this.outputShape.map((o,u)=>(a++,this.outputShape.length===1?`coords * uniforms.strides[${u}] + uniforms.begin[${u}]`:`coords[${a-1}] * uniforms.strides[${u}] + uniforms.begin[${u}]`)).join(",")}return`
       ${Wt("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index);
           setOutputAtIndex(index, getX(${e}));
         }
       }
     `}}function XM(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{begin:o,end:u,strides:c,beginMask:f,endMask:h,ellipsisMask:p,newAxisMask:m,shrinkAxisMask:v}=i,{finalShapeSparse:y,finalShape:S,isIdentity:N,sliceDim0:A,isSimpleSlice:_,begin:I,end:D,strides:M}=Q_(a.shape,o,u,c,f,h,p,m,v);let Y;if(N)Y=se({inputs:{x:a},backend:e,attrs:{shape:S}});else if(A||_){Xt(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const ct=G_(I,D,M),it=yf({inputs:{x:a},backend:e,attrs:{begin:I,size:ct}});Y=se({inputs:{x:it},backend:e,attrs:{shape:S}}),e.disposeData(it.dataId)}else if(e.shouldExecuteOnCPU([a])){const it=e.readSync(a.dataId),nt=ar(a.shape,a.dtype,it),F=xR(y,nt,M,I);Y=e.makeTensorInfo(S,a.dtype,F.values)}else{const it=new YM(y),nt=[{type:"int32",data:I},{type:"int32",data:M}],F=e.runWebGPUProgram(it,[a],a.dtype,nt);Y=se({inputs:{x:F},backend:e,attrs:{shape:S}}),e.disposeData(F.dataId)}return Y}const KM={kernelName:BA,backendName:"webgpu",kernelFunc:XM};function QM(n){const{inputs:t,backend:e,attrs:i}=n,{separator:a,nGramWidths:o,leftPad:u,rightPad:c,padWidth:f,preserveShortSequences:h}=i,{data:p,dataSplits:m}=t,v=e.readSync(p.dataId),y=e.readSync(m.dataId),[S,N]=SR(v,y,a,o,u,c,f,h);return[e.makeTensorInfo([S.length],"string",S),e.makeTensorInfo(m.shape,"int32",N)]}const ZM={kernelName:zA,backendName:"webgpu",kernelFunc:QM};const JM=Xi({opType:Ie.SUB,cpuKernelImpl:CR,supportsComplex:!0}),tO={kernelName:fb,backendName:"webgpu",kernelFunc:JM};const eO=pn({opType:qt.TAN}),nO={kernelName:UA,backendName:"webgpu",kernelFunc:eO};const iO=pn({opType:qt.TANH}),rO={kernelName:$A,backendName:"webgpu",kernelFunc:iO};function aO(n){const{inputs:t,backend:e,attrs:i}=n,{tensor:a,indices:o,updates:u}=t,{sliceRank:c,numUpdates:f,sliceSize:h,strides:p,outputSize:m}=Lg(u,o,a.shape),v=[m/h,h];if(m===0)return e.makeTensorInfo(a.shape,o.dtype);const y=[],S=se({inputs:{x:o},backend:e,attrs:{shape:[f,c]}});y.push(S);const N=se({inputs:{x:u},backend:e,attrs:{shape:[f,h]}});y.push(N);const A=se({inputs:{x:a},backend:e,attrs:{shape:v}});y.push(A);const _=Dg({inputs:{x:A},backend:e,attrs:{reps:Array(v.length).fill(1)}}),I=new dh([f,h],c,S.shape.length,N.shape.length,p,v,a.dtype,!1),D=Zt([f,h]),M=[{type:"int32",data:[c]},{type:"int32",data:p},{type:"int32",data:[D]}],Y=e.runWebGPUProgram(I,[N,S],A.dtype,M,_);y.push(Y);const ct=se({inputs:{x:Y},backend:e,attrs:{shape:a.shape}});return y.forEach(it=>e.disposeData(it.dataId)),ct}const sO={kernelName:bA,backendName:"webgpu",kernelFunc:aO};class oO{constructor(t){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`inputSize : i32, firstPass : i32, negativeInf : f32,
        dir : i32, inc : i32,`,this.shaderKey="swap"}getUserCode(){return`
        ${Wt("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // We compare elements pair-wise within a group of size 2 * inc.
            // The comparing rule for each group alternates between ascending
            // and descending. Within each group, we compare each pair at
            // positions i and i+inc. To decide whether an element at position i
            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
            // inc, it is in the first half of the group, we denote it as x0,
            // otherwise we denote it as x1.
            // For example, as shown in the Bitonic top K paper referenced
            // above, Figure5(a) shows that element[1] is in the second half of
            // the group when group size is 2, but it is in the first half of
            // the group when group size is 4.
            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;
            var i = 0;
            if (isFirstInPair) {
              i = elemIdx;
            } else {
              i = elemIdx - uniforms.inc;
            }

            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }

            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.inc;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.inc));
            }

            var x0 = f32(0.0);
            var x1 = f32(0.0);
            if (i0 < uniforms.inputSize) {
              x0 = getX(batch, i0);
            } else {
              x0 = uniforms.negativeInf;
            }
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = uniforms.negativeInf;
            }

            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;
            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
            if (reverse == isGreater) {
              // Elements in opposite order of direction
              let iTemp = i0;
              i0 = i1;
              i1 = iTemp;
            }
            if (isFirstInPair) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}}class lO{constructor(t){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}getUserCode(){return`
        ${Wt("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // The output size is half of the previous size.
            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _
            // (k=4), we only need to output the indices at positions |, the
            // indices at positions _ can be thrown away, see Figure5(b) After
            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced
            // above.
            // For example, the paper shows we only need to output the orange
            // bars. The output sequence should look like this | | | | | | | |.
            // Because the sequence is halved, to map the output index back to
            // the previous sequence to find the corresponding value, we need
            // to double the index. When we double the index, we basically
            // interpolate a position, so 2i looks like
            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k
            // position of each 2k positions by - elemIdx % k. E.g. for output
            // at index 4,5,6,7, we want to get the corresponding element at
            // original index 8,9,10,11, for output at index 8,9,10,11,
            // we want to get the corresponding element at original index
            // 16,17,18,19, so on and so forth.

            var i = 0;
            if (elemIdx < uniforms.k) {
              i = elemIdx;
            } else {
              i = elemIdx * 2 - elemIdx % uniforms.k;
            }
            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }
            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.k;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.k));
            }

            let x0 = getX(batch, i0);
            var x1 = f32(0.0);
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = x0;
            }

            if (x0 >= x1) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}}function qc(n,t){t!==null&&n.disposeData(t.dataId)}function av(n){let t=1;for(;t<n;)t*=2;return t}function uO(n){const{inputs:t,backend:e,attrs:i}=n,{x:a}=t,{k:o,sorted:u}=i,c=a.shape,f=c[c.length-1];if(e.shouldExecuteOnCPU([a])){const Y=e.readSync(a.dataId),[ct,it]=NR(Y,c,a.dtype,o,u);return[e.makeTensorInfo(ct.shape,ct.dtype,ct.values),e.makeTensorInfo(it.shape,it.dtype,it.values)]}if(o===0)return c[c.length-1]=0,[e.makeTensorInfo(c,a.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(f===1)return[a,Br({attrs:{shape:c,dtype:"int32",value:0},backend:e})];const p=Zt(c)/f,m=se({inputs:{x:a},attrs:{shape:[p,f]},backend:e}),v=av(o),y=av(f);let S=null;const N=()=>S===null?[m,m]:[m,S],A=(Y,ct,it)=>{const nt=N(),F=new oO(it),E=[{type:"int32",data:[f]},{type:"int32",data:[S===null?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[Y]},{type:"int32",data:[ct]}],B=S;S=e.runWebGPUProgram(F,nt,"int32",E),qc(e,B)};for(let Y=1;Y<v;Y*=2){const ct=Y*2;for(let it=Y;it>=1;it/=2)A(ct,it,[p,y])}for(let Y=y;Y>v;Y/=2){const ct=N(),it=new lO([p,Y/2]),F=[{type:"int32",data:[f]},{type:"int32",data:[S===null?1:0]},{type:"int32",data:[v]}],G=S;S=e.runWebGPUProgram(it,ct,"int32",F),qc(e,G);const E=v/2,B=E*2;for(let tt=E;tt>=1;tt/=2)A(B,tt,S.shape)}let _=S;S=yf({inputs:{x:S},backend:e,attrs:{begin:0,size:[p,o]}}),qc(e,_);let I=m3({inputs:{x:m,indices:S},backend:e,attrs:{axis:1,batchDims:1}});qc(e,m);const D=c.slice(0,-1);D.push(o),_=S,S=se({inputs:{x:S},attrs:{shape:D},backend:e}),qc(e,_);const M=I;return I=se({inputs:{x:I},attrs:{shape:D},backend:e}),qc(e,M),[I,S]}const cO={kernelName:jA,backendName:"webgpu",kernelFunc:uO};class fO{constructor(t){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=Jt(this.outputShape),this.dispatch=Vt(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}getUserCode(){return`
          fn mapCoord(outCoord : f32, len : f32) -> f32{
            var inCoord = outCoord;
            if(uniforms.fillModeId == 2) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  if (inCoord < sz2) {
                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +
                    inCoord;
                  }
                  if (inCoord < -len) {
                    inCoord = inCoord + sz2;
                  } else {
                    inCoord = -inCoord - 1.0;
                  }
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));
                  if (inCoord >= len) {
                    inCoord = sz2 - inCoord - 1.0;
                  }
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 3) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 4) {
              return clamp(outCoord, 0.0, len - 1.0);
            }
            return outCoord;
          }
          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,
            channel : i32) -> f32 {
            var outputValue : f32;
            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {
                outputValue = getImage(batch, coordY, coordX, channel);
            } else {
              outputValue = uniforms.fillValue;
            }
            return outputValue;
          }

          ${Wt("index")} {
            if (index < uniforms.size) {
              let coords = getCoordsFromIndex(index);
              var outputValue : f32;
              let batch = coords[0];
              let x = coords[2];
              let y = coords[1];
              let channel = coords[3];
              let xf = f32(x);
              let yf = f32(y);
              let a1 = getTransforms(batch, 0);
              let a2 = getTransforms(batch, 1);
              let a3 = getTransforms(batch, 2);
              let b1 = getTransforms(batch, 3);
              let b2 = getTransforms(batch, 4);
              let b3 = getTransforms(batch, 5);
              let c1 = getTransforms(batch, 6);
              let c2 = getTransforms(batch, 7);
              let projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = uniforms.fillValue;
              } else {
                let inX = (a1 * xf + a2 * yf + a3) / projection;
                let inY = (b1 * xf + b2 * yf + b3) / projection;
                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));
                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));

                if (uniforms.interpolationModeId == 1) {
                  let coordY = i32(round(mapY));
                  let coordX = i32(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  let yFloor = floor(mapY);
                  let xFloor = floor(mapX);
                  let yCeil = yFloor + 1.0;
                  let xCeil = xFloor + 1.0;
                  let valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);
                  let valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutputAtIndex(index, outputValue);
            }
          }
        `}}function hO(n){const{inputs:t,backend:e,attrs:i}=n,{image:a,transforms:o}=t,{interpolation:u,fillMode:c,fillValue:f,outputShape:h}=i,[p,m,v,y]=a.shape,[S,N]=h??[m,v],A=[p,S,N,y],_=new fO(A),I=u==="nearest"?1:2;let D;switch(c){case"constant":D=1;break;case"reflect":D=2;break;case"wrap":D=3;break;case"nearest":D=4;break;default:D=1;break}const M=[{type:"int32",data:[I]},{type:"int32",data:[D]},{type:"float32",data:[f]}];return e.runWebGPUProgram(_,[a,o],"float32",M)}const dO={kernelName:HA,backendName:"webgpu",kernelFunc:hO};function pO(n){const{inputs:t,backend:e,attrs:i}=n,{value:a}=t;let{axis:o}=i;o<0&&(o+=a.shape.length);const u=a,c=u.shape.length,f=a.shape[o],h=new Array(c-1);let p=0;for(let N=0;N<c;N++)N!==o&&(h[p++]=u.shape[N]);const m=[],v=new Array(c).fill(0),y=u.shape.slice();y[o]=1;const S=new Array(f);for(let N=0;N<S.length;N++){v[o]=N;const A=yf({inputs:{x:u},backend:e,attrs:{begin:v,size:y}}),_=se({inputs:{x:A},backend:e,attrs:{shape:h}});S[N]=_,m.push(A)}return m.forEach(N=>e.disposeData(N.dataId)),S}const mO={kernelName:WA,backendName:"webgpu",kernelFunc:pO};class gO{constructor(t,e,i){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e,this.dispatchLayout=Jt(t),this.dispatch=Vt(this.dispatchLayout,t,this.workgroupSize),i!=="float32"&&i!=="int32")throw new Error(`UnsortedSegmentSum only supports float32 and int32
              types, does not support ${i} type.`);this.type=i,this.shaderKey="unsortedSegmentSum"}getUserCode(){return`
    ${Wt("index")} {
      if (index < uniforms.xSize) {
        let coords = getXCoordsFromIndex(index);
        let b = coords[0];
        let inCol = coords[1];

        let segmentId = i32(getSegmentIds(inCol));
        if (segmentId >= 0) {
          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;
          let value = getX(b, inCol);

          ${Yl("&result[flatIndex]","value",this.type)}
        }
      }
    }
  `}}function yO(n){const{inputs:t,backend:e,attrs:i}=n,{x:a,segmentIds:o}=t,{numSegments:u}=i,c=a.shape.length,f=[];let h=0;const p=Ih([h],c);let m=a;p!=null&&(m=fo({inputs:{x:a},backend:e,attrs:{perm:p}}),f.push(m),h=Th(1,c)[0]);const v=Pk(m.shape,h,u),y=Zt([m.shape[h]]),S=se({inputs:{x:m},backend:e,attrs:{shape:[-1,y]}});f.push(S);const N=a.dtype,A=[S.shape[0],u],_=Br({backend:e,attrs:{shape:A,value:0,dtype:N}}),I=new gO(S.shape,A,N),D=[{type:"int32",data:[u]},{type:"int32",data:[Zt(S.shape)]}],M=e.runWebGPUProgram(I,[S,o],N,D,_),Y=se({inputs:{x:M},backend:e,attrs:{shape:v}});f.push(M);let ct=Y;if(p!=null){f.push(Y);const it=Ub(p);ct=fo({inputs:{x:ct},backend:e,attrs:{perm:it}})}return f.forEach(it=>e.disposeData(it.dataId)),ct}const vO={kernelName:VA,backendName:"webgpu",kernelFunc:yO};const bO=[zL,ER,RR,TR,PR,FR,qR,VR,YR,KR,ZR,tI,nI,rI,sI,fI,dI,yI,bI,xI,_I,RI,DI,FI,zI,HI,$L,VI,KI,rT,cT,pT,yT,bT,xT,CT,NT,ET,RT,TT,PT,FT,qT,VT,UT,XT,ZT,nD,rD,oD,fD,dD,mD,yD,bD,xD,SD,AD,_D,OL,ED,PD,RD,TD,FD,zD,$D,qD,GD,XD,QD,UL,JD,YI,e7,i7,a7,o7,u7,f7,p7,v7,g7,w7,S7,A7,E7,I7,lI,D7,M7,H7,F7,$7,W7,uI,G7,X7,Q7,J7,rP,lD,sP,lP,cP,PI,dP,mP,yP,wP,SP,AP,_P,EP,MI,RP,TP,PP,OP,FL,zP,jP,WP,YP,QP,JP,eM,iM,aM,lM,fM,dM,mM,yM,bM,xM,AI,GM,KM,ZM,nP,CM,_M,IM,DM,BM,UM,jM,HM,WM,tO,uD,nO,rO,sO,OM,cO,dO,UR,mO,vO,pP];for(const n of bO)tN(n);var x3=function(n,t){return(x3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])})(n,t)};function S3(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}x3(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var X1=function(){return(X1=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}).apply(this,arguments)};function hh(n,t,e){if(e||arguments.length===2)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return n.concat(i||Array.prototype.slice.call(t))}var C3=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],wO=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],xO={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},SO={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},CO=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],AO=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]],sv,Qa,A3=(function(){function n(t){(function(e){if(e.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but "+"encountered ".concat(e.maxTracks));if(e.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but "+"encountered ".concat(e.maxAge));if(e.keypointTrackerParams!==void 0){if(e.keypointTrackerParams.keypointConfidenceThreshold<0||e.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+"".concat(e.keypointTrackerParams.keypointConfidenceThreshold));if(e.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but "+"encountered ".concat(e.keypointTrackerParams.minNumberOfKeypoints));for(var i=0,a=e.keypointTrackerParams.keypointFalloff;i<a.length;i++){var o=a[i];if(o<=0)throw new Error("Must specify each keypoint falloff parameterto be positive "+"but encountered ".concat(o))}}})(t),this.tracks=[],this.maxTracks=t.maxTracks,this.maxAge=1e3*t.maxAge,this.minSimilarity=t.minSimilarity,this.nextID=1}return n.prototype.apply=function(t,e){this.filterOldTracks(e);var i=this.computeSimilarity(t);return this.assignTracks(t,i,e),this.updateTracks(e),t},n.prototype.getTracks=function(){return this.tracks.slice()},n.prototype.getTrackIDs=function(){return new Set(this.tracks.map((function(t){return t.id})))},n.prototype.filterOldTracks=function(t){var e=this;this.tracks=this.tracks.filter((function(i){return t-i.lastTimestamp<=e.maxAge}))},n.prototype.assignTracks=function(t,e,i){for(var a=Array.from(Array(e[0].length).keys()),o=[],u=0,c=Array.from(Array(t.length).keys());u<c.length;u++){var f=c[u];if(a.length!==0){for(var h=-1,p=-1,m=0,v=a;m<v.length;m++){var y=v[m],S=e[f][y];S>=this.minSimilarity&&S>p&&(h=y,p=S)}if(h>=0){var N=this.tracks[h];N=Object.assign(N,this.createTrack(t[f],i,N.id)),t[f].id=N.id;var A=a.indexOf(h);a.splice(A,1)}else o.push(f)}else o.push(f)}for(var _=0,I=o;_<I.length;_++){f=I[_];var D=this.createTrack(t[f],i);this.tracks.push(D),t[f].id=D.id}},n.prototype.updateTracks=function(t){this.tracks.sort((function(e,i){return i.lastTimestamp-e.lastTimestamp})),this.tracks=this.tracks.slice(0,this.maxTracks)},n.prototype.createTrack=function(t,e,i){var a={id:i||this.nextTrackID(),lastTimestamp:e,keypoints:hh([],t.keypoints,!0).map((function(o){return X1({},o)}))};return t.box!==void 0&&(a.box=X1({},t.box)),a},n.prototype.nextTrackID=function(){var t=this.nextID;return this.nextID+=1,t},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tracks=this.tracks.filter((function(i){return!t.includes(i.id)}))},n.prototype.reset=function(){this.tracks=[]},n})();(function(n){function t(e){return n.call(this,e)||this}return S3(t,n),t.prototype.computeSimilarity=function(e){var i=this;return e.length===0||this.tracks.length===0?[[]]:e.map((function(a){return i.tracks.map((function(o){return i.iou(a,o)}))}))},t.prototype.iou=function(e,i){var a=Math.max(e.box.xMin,i.box.xMin),o=Math.max(e.box.yMin,i.box.yMin),u=Math.min(e.box.xMax,i.box.xMax),c=Math.min(e.box.yMax,i.box.yMax);if(a>=u||o>=c)return 0;var f=(u-a)*(c-o);return f/(e.box.width*e.box.height+i.box.width*i.box.height-f)},t})(A3);(function(n){function t(e){var i=n.call(this,e)||this;return i.keypointThreshold=e.keypointTrackerParams.keypointConfidenceThreshold,i.keypointFalloff=e.keypointTrackerParams.keypointFalloff,i.minNumKeyoints=e.keypointTrackerParams.minNumberOfKeypoints,i}return S3(t,n),t.prototype.computeSimilarity=function(e){if(e.length===0||this.tracks.length===0)return[[]];for(var i=[],a=0,o=e;a<o.length;a++){for(var u=o[a],c=[],f=0,h=this.tracks;f<h.length;f++){var p=h[f];c.push(this.oks(u,p))}i.push(c)}return i},t.prototype.oks=function(e,i){for(var a=this.area(i.keypoints)+1e-6,o=0,u=0,c=0;c<e.keypoints.length;++c){var f=e.keypoints[c],h=i.keypoints[c];if(!(f.score<this.keypointThreshold||h.score<this.keypointThreshold)){u+=1;var p=Math.pow(f.x-h.x,2)+Math.pow(f.y-h.y,2),m=2*this.keypointFalloff[c];o+=Math.exp(-1*p/(2*a*Math.pow(m,2)))}}return u<this.minNumKeyoints?0:o/u},t.prototype.area=function(e){var i=this,a=e.filter((function(f){return f.score>i.keypointThreshold})),o=Math.min.apply(Math,hh([1],a.map((function(f){return f.x})),!1)),u=Math.max.apply(Math,hh([0],a.map((function(f){return f.x})),!1)),c=Math.min.apply(Math,hh([1],a.map((function(f){return f.y})),!1));return(u-o)*(Math.max.apply(Math,hh([0],a.map((function(f){return f.y})),!1))-c)},t})(A3);function NO(n){switch(n){case Qa.BlazePose:return wO.reduce((function(t,e,i){return t[e]=i,t}),{});case Qa.PoseNet:case Qa.MoveNet:return C3.reduce((function(t,e,i){return t[e]=i,t}),{});default:throw new Error("Model ".concat(n," is not supported."))}}(function(n){n.Keypoint="keypoint",n.BoundingBox="boundingBox"})(sv||(sv={})),(function(n){n.MoveNet="MoveNet",n.BlazePose="BlazePose",n.PoseNet="PoseNet"})(Qa||(Qa={}));var _O=Object.freeze({__proto__:null,getKeypointIndexBySide:function(n){switch(n){case Qa.BlazePose:return xO;case Qa.PoseNet:case Qa.MoveNet:return SO;default:throw new Error("Model ".concat(n," is not supported."))}},getAdjacentPairs:function(n){switch(n){case Qa.BlazePose:return AO;case Qa.PoseNet:case Qa.MoveNet:return CO;default:throw new Error("Model ".concat(n," is not supported."))}},getKeypointIndexByName:NO}),ov=C3.reduce((function(n,t,e){return n[t]=e,n}),{}),N3=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map((function(n){var t=n[0],e=n[1];return[ov[t],ov[e]]}));N3.map((function(n){return n[1]}));N3.map((function(n){return n[0]}));const kO=()=>{const{isSessionActive:n,endSession:t,sessionStartTime:e,logPose:i,currentPose:a,practitionerName:o}=bg(),{videoRef:u,startCamera:c,stopCamera:f,stream:h}=G5(),{poses:p,isModelLoaded:m}=Y4(u,n),v=Nt.useRef(null),y=Nh(),[S,N]=Nt.useState("00:00");Nt.useEffect(()=>(h||c(),()=>{}),[c,h]),Nt.useEffect(()=>{if(!n||!e)return;const _=setInterval(()=>{const D=Math.floor((new Date-e)/1e3),M=Math.floor(D/60).toString().padStart(2,"0"),Y=(D%60).toString().padStart(2,"0");N(`${M}:${Y}`)},1e3);return()=>clearInterval(_)},[n,e]),Nt.useEffect(()=>{if(!v.current||!u.current||p.length===0)return;const _=v.current,I=_.getContext("2d"),D=u.current;_.width=D.videoWidth,_.height=D.videoHeight,I.clearRect(0,0,_.width,_.height),p.forEach(M=>{M.keypoints.forEach(it=>{it.score>.3&&(I.beginPath(),I.arc(it.x,it.y,5,0,2*Math.PI),I.fillStyle="#D4A373",I.fill(),I.strokeStyle="#fff",I.stroke())});const Y=_O.getAdjacentPairs(Qa.MoveNet);I.strokeStyle="#FAEDCD",I.lineWidth=2,Y.forEach(([it,nt])=>{const F=M.keypoints[it],G=M.keypoints[nt];F.score>.3&&G.score>.3&&(I.beginPath(),I.moveTo(F.x,F.y),I.lineTo(G.x,G.y),I.stroke())});const ct=K4(M.keypoints);i(ct.name,ct.confidence)})},[p,i]);const A=()=>{console.log("Ending session...");try{t(),f(),console.log("Navigating to report..."),y("/report")}catch(_){console.error("Error ending session:",_),y("/report")}};return Ut.jsxs("div",{className:"relative h-screen w-full bg-stone-900 overflow-hidden flex flex-col",children:[Ut.jsxs("div",{className:"relative flex-1 flex items-center justify-center",children:[Ut.jsx("video",{ref:u,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover transform -scale-x-100"}),Ut.jsx("canvas",{ref:v,className:"absolute inset-0 w-full h-full object-cover transform -scale-x-100 pointer-events-none"}),!m&&Ut.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-50",children:Ut.jsx("div",{className:"text-white text-xl animate-pulse",children:"Loading AI Model..."})})]}),Ut.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6 text-white",children:Ut.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[Ut.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[Ut.jsxs("div",{className:"flex items-center gap-2 text-ayur-secondary text-sm mb-1",children:[Ut.jsx(O4,{size:16}),Ut.jsx("span",{children:"Duration"})]}),Ut.jsx("div",{className:"text-3xl font-mono font-bold",children:S})]}),Ut.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10 md:col-span-2",children:[Ut.jsxs("div",{className:"flex items-center gap-2 text-ayur-secondary text-sm mb-1",children:[Ut.jsx(R4,{size:16}),Ut.jsx("span",{children:"Detected Asana"})]}),Ut.jsx("div",{className:"text-3xl font-serif font-bold truncate",children:a.name})]}),Ut.jsxs("div",{className:"flex flex-col gap-4",children:[Ut.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[Ut.jsxs("div",{className:"flex items-center gap-2 text-ayur-secondary text-sm mb-1",children:[Ut.jsx(V4,{size:16}),Ut.jsx("span",{children:"Confidence"})]}),Ut.jsxs("div",{className:"flex items-end gap-2",children:[Ut.jsxs("span",{className:"text-3xl font-mono font-bold",children:[(a.confidence*100).toFixed(0),"%"]}),Ut.jsx("div",{className:"h-2 flex-1 bg-white/20 rounded-full mb-2",children:Ut.jsx("div",{className:"h-full bg-ayur-primary rounded-full transition-all duration-300",style:{width:`${a.confidence*100}%`}})})]})]}),Ut.jsxs("button",{onClick:A,className:"w-full py-3 bg-red-500/80 hover:bg-red-600 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all backdrop-blur-sm",children:[Ut.jsx(P4,{size:20}),"End Session"]})]})]})}),Ut.jsxs("div",{className:"absolute top-20 left-4 bg-black/50 text-white text-xs p-2 rounded pointer-events-none",children:[Ut.jsxs("p",{children:["Model: ",m?"Loaded":"Loading..."]}),Ut.jsxs("p",{children:["Poses Detected: ",p.length]})]})]})},EO="modulepreload",LO=function(n){return"/"+n},lv={},i1=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){let f=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(e.map(h=>{if(h=LO(h),h in lv)return;lv[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":EO,p||(v.as="script"),v.crossOrigin="",v.href=h,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((y,S)=>{v.addEventListener("load",y),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};function Tn(n){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(n)}var Ds=Uint8Array,Ea=Uint16Array,Pg=Int32Array,Mg=new Ds([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Og=new Ds([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uv=new Ds([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_3=function(n,t){for(var e=new Ea(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var a=new Pg(e[30]),i=1;i<30;++i)for(var o=e[i];o<e[i+1];++o)a[o]=o-e[i]<<5|i;return{b:e,r:a}},k3=_3(Mg,2),RO=k3.b,K1=k3.r;RO[28]=258,K1[258]=28;var IO=_3(Og,0),cv=IO.r,Q1=new Ea(32768);for(var Zn=0;Zn<32768;++Zn){var zl=(Zn&43690)>>1|(Zn&21845)<<1;zl=(zl&52428)>>2|(zl&13107)<<2,zl=(zl&61680)>>4|(zl&3855)<<4,Q1[Zn]=((zl&65280)>>8|(zl&255)<<8)>>1}var ph=(function(n,t,e){for(var i=n.length,a=0,o=new Ea(t);a<i;++a)n[a]&&++o[n[a]-1];var u=new Ea(t);for(a=1;a<t;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(e){c=new Ea(1<<t);var f=15-t;for(a=0;a<i;++a)if(n[a])for(var h=a<<4|n[a],p=t-n[a],m=u[n[a]-1]++<<p,v=m|(1<<p)-1;m<=v;++m)c[Q1[m]>>f]=h}else for(c=new Ea(i),a=0;a<i;++a)n[a]&&(c[a]=Q1[u[n[a]-1]++]>>15-n[a]);return c}),qu=new Ds(288);for(var Zn=0;Zn<144;++Zn)qu[Zn]=8;for(var Zn=144;Zn<256;++Zn)qu[Zn]=9;for(var Zn=256;Zn<280;++Zn)qu[Zn]=7;for(var Zn=280;Zn<288;++Zn)qu[Zn]=8;var op=new Ds(32);for(var Zn=0;Zn<32;++Zn)op[Zn]=5;var TO=ph(qu,9,0),DO=ph(op,5,0),E3=function(n){return(n+7)/8|0},PO=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new Ds(n.subarray(t,e))},qo=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},ah=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},r1=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var a=e.length,o=e.slice();if(!a)return{t:R3,l:0};if(a==1){var u=new Ds(e[0].s+1);return u[e[0].s]=1,{t:u,l:1}}e.sort(function(Y,ct){return Y.f-ct.f}),e.push({s:-1,f:25001});var c=e[0],f=e[1],h=0,p=1,m=2;for(e[0]={s:-1,f:c.f+f.f,l:c,r:f};p!=a-1;)c=e[e[h].f<e[m].f?h++:m++],f=e[h!=p&&e[h].f<e[m].f?h++:m++],e[p++]={s:-1,f:c.f+f.f,l:c,r:f};for(var v=o[0].s,i=1;i<a;++i)o[i].s>v&&(v=o[i].s);var y=new Ea(v+1),S=Z1(e[p-1],y,0);if(S>t){var i=0,N=0,A=S-t,_=1<<A;for(o.sort(function(ct,it){return y[it.s]-y[ct.s]||ct.f-it.f});i<a;++i){var I=o[i].s;if(y[I]>t)N+=_-(1<<S-y[I]),y[I]=t;else break}for(N>>=A;N>0;){var D=o[i].s;y[D]<t?N-=1<<t-y[D]++-1:++i}for(;i>=0&&N;--i){var M=o[i].s;y[M]==t&&(--y[M],++N)}S=t}return{t:new Ds(y),l:S}},Z1=function(n,t,e){return n.s==-1?Math.max(Z1(n.l,t,e+1),Z1(n.r,t,e+1)):t[n.s]=e},fv=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new Ea(++t),i=0,a=n[0],o=1,u=function(f){e[i++]=f},c=1;c<=t;++c)if(n[c]==a&&c!=t)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[c]}return{c:e.subarray(0,i),n:t}},sh=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},L3=function(n,t,e){var i=e.length,a=E3(t+2);n[a]=i&255,n[a+1]=i>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<i;++o)n[a+o+4]=e[o];return(a+4+i)*8},hv=function(n,t,e,i,a,o,u,c,f,h,p){qo(t,p++,e),++a[256];for(var m=r1(a,15),v=m.t,y=m.l,S=r1(o,15),N=S.t,A=S.l,_=fv(v),I=_.c,D=_.n,M=fv(N),Y=M.c,ct=M.n,it=new Ea(19),nt=0;nt<I.length;++nt)++it[I[nt]&31];for(var nt=0;nt<Y.length;++nt)++it[Y[nt]&31];for(var F=r1(it,7),G=F.t,E=F.l,B=19;B>4&&!G[uv[B-1]];--B);var tt=h+5<<3,et=sh(a,qu)+sh(o,op)+u,ht=sh(a,v)+sh(o,N)+u+14+3*B+sh(it,G)+2*it[16]+3*it[17]+7*it[18];if(f>=0&&tt<=et&&tt<=ht)return L3(t,p,n.subarray(f,f+h));var X,lt,st,vt;if(qo(t,p,1+(ht<et)),p+=2,ht<et){X=ph(v,y,0),lt=v,st=ph(N,A,0),vt=N;var Et=ph(G,E,0);qo(t,p,D-257),qo(t,p+5,ct-1),qo(t,p+10,B-4),p+=14;for(var nt=0;nt<B;++nt)qo(t,p+3*nt,G[uv[nt]]);p+=3*B;for(var q=[I,Y],T=0;T<2;++T)for(var j=q[T],nt=0;nt<j.length;++nt){var V=j[nt]&31;qo(t,p,Et[V]),p+=G[V],V>15&&(qo(t,p,j[nt]>>5&127),p+=j[nt]>>12)}}else X=TO,lt=qu,st=DO,vt=op;for(var nt=0;nt<c;++nt){var rt=i[nt];if(rt>255){var V=rt>>18&31;ah(t,p,X[V+257]),p+=lt[V+257],V>7&&(qo(t,p,rt>>23&31),p+=Mg[V]);var ot=rt&31;ah(t,p,st[ot]),p+=vt[ot],ot>3&&(ah(t,p,rt>>5&8191),p+=Og[ot])}else ah(t,p,X[rt]),p+=lt[rt]}return ah(t,p,X[256]),p+lt[256]},MO=new Pg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R3=new Ds(0),OO=function(n,t,e,i,a,o){var u=o.z||n.length,c=new Ds(i+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(i,c.length-a),h=o.l,p=(o.r||0)&7;if(t){p&&(f[0]=o.r>>3);for(var m=MO[t-1],v=m>>13,y=m&8191,S=(1<<e)-1,N=o.p||new Ea(32768),A=o.h||new Ea(S+1),_=Math.ceil(e/3),I=2*_,D=function(ue){return(n[ue]^n[ue+1]<<_^n[ue+2]<<I)&S},M=new Pg(25e3),Y=new Ea(288),ct=new Ea(32),it=0,nt=0,F=o.i||0,G=0,E=o.w||0,B=0;F+2<u;++F){var tt=D(F),et=F&32767,ht=A[tt];if(N[et]=ht,A[tt]=et,E<=F){var X=u-F;if((it>7e3||G>24576)&&(X>423||!h)){p=hv(n,f,0,M,Y,ct,nt,G,B,F-B,p),G=it=nt=0,B=F;for(var lt=0;lt<286;++lt)Y[lt]=0;for(var lt=0;lt<30;++lt)ct[lt]=0}var st=2,vt=0,Et=y,q=et-ht&32767;if(X>2&&tt==D(F-q))for(var T=Math.min(v,X)-1,j=Math.min(32767,F),V=Math.min(258,X);q<=j&&--Et&&et!=ht;){if(n[F+st]==n[F+st-q]){for(var rt=0;rt<V&&n[F+rt]==n[F+rt-q];++rt);if(rt>st){if(st=rt,vt=q,rt>T)break;for(var ot=Math.min(q,rt-2),mt=0,lt=0;lt<ot;++lt){var kt=F-q+lt&32767,At=N[kt],Mt=kt-At&32767;Mt>mt&&(mt=Mt,ht=kt)}}}et=ht,ht=N[et],q+=et-ht&32767}if(vt){M[G++]=268435456|K1[st]<<18|cv[vt];var Ht=K1[st]&31,Kt=cv[vt]&31;nt+=Mg[Ht]+Og[Kt],++Y[257+Ht],++ct[Kt],E=F+st,++it}else M[G++]=n[F],++Y[n[F]]}}for(F=Math.max(F,E);F<u;++F)M[G++]=n[F],++Y[n[F]];p=hv(n,f,h,M,Y,ct,nt,G,B,F-B,p),h||(o.r=p&7|f[p/8|0]<<3,p-=7,o.h=A,o.p=N,o.i=F,o.w=E)}else{for(var F=o.w||0;F<u+h;F+=65535){var Qt=F+65535;Qt>=u&&(f[p/8|0]=h,Qt=u),p=L3(f,p+1,n.subarray(F,Qt))}o.i=u}return PO(c,0,i+E3(p)+a)},I3=function(){var n=1,t=0;return{p:function(e){for(var i=n,a=t,o=e.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=i+=e[u];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}n=i,t=a},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},FO=function(n,t,e,i,a){if(!a&&(a={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),u=new Ds(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return OO(n,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,a)},T3=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},BO=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var a=I3();a.p(t.dictionary),T3(n,2,a.d())}};function J1(n,t){t||(t={});var e=I3();e.p(n);var i=FO(n,t,t.dictionary?6:2,4);return BO(i,t),T3(i,i.length-4,e.d()),i}var zO=typeof TextDecoder<"u"&&new TextDecoder,UO=0;try{zO.decode(R3,{stream:!0}),UO=1}catch{}function $O(n){if(Array.isArray(n))return n}function jO(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,a,o,u,c=[],f=!0,h=!1;try{if(o=(e=e.call(n)).next,t!==0)for(;!(f=(i=o.call(e)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(p){h=!0,a=p}finally{try{if(!f&&e.return!=null&&(u=e.return(),Object(u)!==u))return}finally{if(h)throw a}}return c}}function dv(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function HO(n,t){if(n){if(typeof n=="string")return dv(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?dv(n,t):void 0}}function qO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pv(n,t){return $O(n)||jO(n,t)||HO(n,t)||qO()}function mv(n,t="utf8"){return new TextDecoder(t).decode(n)}const WO=new TextEncoder;function VO(n){return WO.encode(n)}const GO=1024*8,YO=(()=>{const n=new Uint8Array(4),t=new Uint32Array(n.buffer);return!((t[0]=1)&n[0])})(),a1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Fg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=GO,e={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const a=e.offset?e.offset>>>0:0,o=t.byteLength-a;let u=a;(ArrayBuffer.isView(t)||t instanceof Fg)&&(t.byteLength!==t.buffer.byteLength&&(u=t.byteOffset+a),t=t.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const i=a1[e].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+i);if(this.littleEndian===YO&&e!=="uint8"&&e!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+i));c.reverse();const f=new a1[e](c.buffer);return this.offset+=i,f.reverse(),f}const u=new a1[e](o);return this.offset+=i,u}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let i=0;i<t;i++)e+=this.readChar();return e}readUtf8(t=1){return mv(this.readBytes(t))}decodeText(t=1,e="utf8"){return mv(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(VO(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vf(n){let t=n.length;for(;--t>=0;)n[t]=0}const XO=3,KO=258,D3=29,QO=256,ZO=QO+1+D3,P3=30,JO=512,tF=new Array((ZO+2)*2);vf(tF);const eF=new Array(P3*2);vf(eF);const nF=new Array(JO);vf(nF);const iF=new Array(KO-XO+1);vf(iF);const rF=new Array(D3);vf(rF);const aF=new Array(P3);vf(aF);const sF=(n,t,e,i)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;e!==0;){u=e>2e3?2e3:e,e-=u;do a=a+t[i++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var tg=sF;const oF=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},lF=new Uint32Array(oF()),uF=(n,t,e,i)=>{const a=lF,o=i+e;n^=-1;for(let u=i;u<o;u++)n=n>>>8^a[(n^t[u])&255];return n^-1};var no=uF,eg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M3={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cF=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var fF=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const i in e)cF(e,i)&&(n[i]=e[i])}}return n},hF=n=>{let t=0;for(let i=0,a=n.length;i<a;i++)t+=n[i].length;const e=new Uint8Array(t);for(let i=0,a=0,o=n.length;i<o;i++){let u=n[i];e.set(u,a),a+=u.length}return e},O3={assign:fF,flattenChunks:hF};let F3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{F3=!1}const Sh=new Uint8Array(256);for(let n=0;n<256;n++)Sh[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Sh[254]=Sh[254]=1;var dF=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,a,o,u=n.length,c=0;for(a=0;a<u;a++)e=n.charCodeAt(a),(e&64512)===55296&&a+1<u&&(i=n.charCodeAt(a+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),a++)),c+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(c),o=0,a=0;o<c;a++)e=n.charCodeAt(a),(e&64512)===55296&&a+1<u&&(i=n.charCodeAt(a+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),a++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t};const pF=(n,t)=>{if(t<65534&&n.subarray&&F3)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e};var mF=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,a;const o=new Array(e*2);for(a=0,i=0;i<e;){let u=n[i++];if(u<128){o[a++]=u;continue}let c=Sh[u];if(c>4){o[a++]=65533,i+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&i<e;)u=u<<6|n[i++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return pF(o,a)},gF=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Sh[n[e]]>t?e:t},ng={string2buf:dF,buf2string:mF,utf8border:gF};function yF(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vF=yF;const Ld=16209,bF=16191;var wF=function(t,e){let i,a,o,u,c,f,h,p,m,v,y,S,N,A,_,I,D,M,Y,ct,it,nt,F,G;const E=t.state;i=t.next_in,F=t.input,a=i+(t.avail_in-5),o=t.next_out,G=t.output,u=o-(e-t.avail_out),c=o+(t.avail_out-257),f=E.dmax,h=E.wsize,p=E.whave,m=E.wnext,v=E.window,y=E.hold,S=E.bits,N=E.lencode,A=E.distcode,_=(1<<E.lenbits)-1,I=(1<<E.distbits)-1;t:do{S<15&&(y+=F[i++]<<S,S+=8,y+=F[i++]<<S,S+=8),D=N[y&_];e:for(;;){if(M=D>>>24,y>>>=M,S-=M,M=D>>>16&255,M===0)G[o++]=D&65535;else if(M&16){Y=D&65535,M&=15,M&&(S<M&&(y+=F[i++]<<S,S+=8),Y+=y&(1<<M)-1,y>>>=M,S-=M),S<15&&(y+=F[i++]<<S,S+=8,y+=F[i++]<<S,S+=8),D=A[y&I];n:for(;;){if(M=D>>>24,y>>>=M,S-=M,M=D>>>16&255,M&16){if(ct=D&65535,M&=15,S<M&&(y+=F[i++]<<S,S+=8,S<M&&(y+=F[i++]<<S,S+=8)),ct+=y&(1<<M)-1,ct>f){t.msg="invalid distance too far back",E.mode=Ld;break t}if(y>>>=M,S-=M,M=o-u,ct>M){if(M=ct-M,M>p&&E.sane){t.msg="invalid distance too far back",E.mode=Ld;break t}if(it=0,nt=v,m===0){if(it+=h-M,M<Y){Y-=M;do G[o++]=v[it++];while(--M);it=o-ct,nt=G}}else if(m<M){if(it+=h+m-M,M-=m,M<Y){Y-=M;do G[o++]=v[it++];while(--M);if(it=0,m<Y){M=m,Y-=M;do G[o++]=v[it++];while(--M);it=o-ct,nt=G}}}else if(it+=m-M,M<Y){Y-=M;do G[o++]=v[it++];while(--M);it=o-ct,nt=G}for(;Y>2;)G[o++]=nt[it++],G[o++]=nt[it++],G[o++]=nt[it++],Y-=3;Y&&(G[o++]=nt[it++],Y>1&&(G[o++]=nt[it++]))}else{it=o-ct;do G[o++]=G[it++],G[o++]=G[it++],G[o++]=G[it++],Y-=3;while(Y>2);Y&&(G[o++]=G[it++],Y>1&&(G[o++]=G[it++]))}}else if((M&64)===0){D=A[(D&65535)+(y&(1<<M)-1)];continue n}else{t.msg="invalid distance code",E.mode=Ld;break t}break}}else if((M&64)===0){D=N[(D&65535)+(y&(1<<M)-1)];continue e}else if(M&32){E.mode=bF;break t}else{t.msg="invalid literal/length code",E.mode=Ld;break t}break}}while(i<a&&o<c);Y=S>>3,i-=Y,S-=Y<<3,y&=(1<<S)-1,t.next_in=i,t.next_out=o,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=o<c?257+(c-o):257-(o-c),E.hold=y,E.bits=S};const Wc=15,gv=852,yv=592,vv=0,s1=1,bv=2,xF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),SF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),CF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),AF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),NF=(n,t,e,i,a,o,u,c)=>{const f=c.bits;let h=0,p=0,m=0,v=0,y=0,S=0,N=0,A=0,_=0,I=0,D,M,Y,ct,it,nt=null,F;const G=new Uint16Array(Wc+1),E=new Uint16Array(Wc+1);let B=null,tt,et,ht;for(h=0;h<=Wc;h++)G[h]=0;for(p=0;p<i;p++)G[t[e+p]]++;for(y=f,v=Wc;v>=1&&G[v]===0;v--);if(y>v&&(y=v),v===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(m=1;m<v&&G[m]===0;m++);for(y<m&&(y=m),A=1,h=1;h<=Wc;h++)if(A<<=1,A-=G[h],A<0)return-1;if(A>0&&(n===vv||v!==1))return-1;for(E[1]=0,h=1;h<Wc;h++)E[h+1]=E[h]+G[h];for(p=0;p<i;p++)t[e+p]!==0&&(u[E[t[e+p]]++]=p);if(n===vv?(nt=B=u,F=20):n===s1?(nt=xF,B=SF,F=257):(nt=CF,B=AF,F=0),I=0,p=0,h=m,it=o,S=y,N=0,Y=-1,_=1<<y,ct=_-1,n===s1&&_>gv||n===bv&&_>yv)return 1;for(;;){tt=h-N,u[p]+1<F?(et=0,ht=u[p]):u[p]>=F?(et=B[u[p]-F],ht=nt[u[p]-F]):(et=96,ht=0),D=1<<h-N,M=1<<S,m=M;do M-=D,a[it+(I>>N)+M]=tt<<24|et<<16|ht|0;while(M!==0);for(D=1<<h-1;I&D;)D>>=1;if(D!==0?(I&=D-1,I+=D):I=0,p++,--G[h]===0){if(h===v)break;h=t[e+u[p]]}if(h>y&&(I&ct)!==Y){for(N===0&&(N=y),it+=m,S=h-N,A=1<<S;S+N<v&&(A-=G[S+N],!(A<=0));)S++,A<<=1;if(_+=1<<S,n===s1&&_>gv||n===bv&&_>yv)return 1;Y=I&ct,a[Y]=y<<24|S<<16|it-o|0}}return I!==0&&(a[it+I]=h-N<<24|64<<16|0),c.bits=y,0};var mh=NF;const _F=0,B3=1,z3=2,{Z_FINISH:wv,Z_BLOCK:kF,Z_TREES:Rd,Z_OK:Wu,Z_STREAM_END:EF,Z_NEED_DICT:LF,Z_STREAM_ERROR:ts,Z_DATA_ERROR:U3,Z_MEM_ERROR:$3,Z_BUF_ERROR:RF,Z_DEFLATED:xv}=M3,_p=16180,Sv=16181,Cv=16182,Av=16183,Nv=16184,_v=16185,kv=16186,Ev=16187,Lv=16188,Rv=16189,lp=16190,Wo=16191,o1=16192,Iv=16193,l1=16194,Tv=16195,Dv=16196,Pv=16197,Mv=16198,Id=16199,Td=16200,Ov=16201,Fv=16202,Bv=16203,zv=16204,Uv=16205,u1=16206,$v=16207,jv=16208,ii=16209,j3=16210,H3=16211,IF=852,TF=592,DF=15,PF=DF,Hv=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function MF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qu=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<_p||t.mode>H3?1:0},q3=n=>{if(Qu(n))return ts;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=_p,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(IF),t.distcode=t.distdyn=new Int32Array(TF),t.sane=1,t.back=-1,Wu},W3=n=>{if(Qu(n))return ts;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,q3(n)},V3=(n,t)=>{let e;if(Qu(n))return ts;const i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ts:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,W3(n))},G3=(n,t)=>{if(!n)return ts;const e=new MF;n.state=e,e.strm=n,e.window=null,e.mode=_p;const i=V3(n,t);return i!==Wu&&(n.state=null),i},OF=n=>G3(n,PF);let qv=!0,c1,f1;const FF=n=>{if(qv){c1=new Int32Array(512),f1=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(mh(B3,n.lens,0,288,c1,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;mh(z3,n.lens,0,32,f1,0,n.work,{bits:5}),qv=!1}n.lencode=c1,n.lenbits=9,n.distcode=f1,n.distbits=5},Y3=(n,t,e,i)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>i&&(a=i),o.window.set(t.subarray(e-i,e-i+a),o.wnext),i-=a,i?(o.window.set(t.subarray(e-i,e),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},BF=(n,t)=>{let e,i,a,o,u,c,f,h,p,m,v,y,S,N,A=0,_,I,D,M,Y,ct,it,nt;const F=new Uint8Array(4);let G,E;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qu(n)||!n.output||!n.input&&n.avail_in!==0)return ts;e=n.state,e.mode===Wo&&(e.mode=o1),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,i=n.input,c=n.avail_in,h=e.hold,p=e.bits,m=c,v=f,nt=Wu;t:for(;;)switch(e.mode){case _p:if(e.wrap===0){e.mode=o1;break}for(;p<16;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(e.wrap&2&&h===35615){e.wbits===0&&(e.wbits=15),e.check=0,F[0]=h&255,F[1]=h>>>8&255,e.check=no(e.check,F,2,0),h=0,p=0,e.mode=Sv;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((h&255)<<8)+(h>>8))%31){n.msg="incorrect header check",e.mode=ii;break}if((h&15)!==xv){n.msg="unknown compression method",e.mode=ii;break}if(h>>>=4,p-=4,it=(h&15)+8,e.wbits===0&&(e.wbits=it),it>15||it>e.wbits){n.msg="invalid window size",e.mode=ii;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=h&512?Rv:Wo,h=0,p=0;break;case Sv:for(;p<16;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(e.flags=h,(e.flags&255)!==xv){n.msg="unknown compression method",e.mode=ii;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=ii;break}e.head&&(e.head.text=h>>8&1),e.flags&512&&e.wrap&4&&(F[0]=h&255,F[1]=h>>>8&255,e.check=no(e.check,F,2,0)),h=0,p=0,e.mode=Cv;case Cv:for(;p<32;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.head&&(e.head.time=h),e.flags&512&&e.wrap&4&&(F[0]=h&255,F[1]=h>>>8&255,F[2]=h>>>16&255,F[3]=h>>>24&255,e.check=no(e.check,F,4,0)),h=0,p=0,e.mode=Av;case Av:for(;p<16;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.head&&(e.head.xflags=h&255,e.head.os=h>>8),e.flags&512&&e.wrap&4&&(F[0]=h&255,F[1]=h>>>8&255,e.check=no(e.check,F,2,0)),h=0,p=0,e.mode=Nv;case Nv:if(e.flags&1024){for(;p<16;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.length=h,e.head&&(e.head.extra_len=h),e.flags&512&&e.wrap&4&&(F[0]=h&255,F[1]=h>>>8&255,e.check=no(e.check,F,2,0)),h=0,p=0}else e.head&&(e.head.extra=null);e.mode=_v;case _v:if(e.flags&1024&&(y=e.length,y>c&&(y=c),y&&(e.head&&(it=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(o,o+y),it)),e.flags&512&&e.wrap&4&&(e.check=no(e.check,i,y,o)),c-=y,o+=y,e.length-=y),e.length))break t;e.length=0,e.mode=kv;case kv:if(e.flags&2048){if(c===0)break t;y=0;do it=i[o+y++],e.head&&it&&e.length<65536&&(e.head.name+=String.fromCharCode(it));while(it&&y<c);if(e.flags&512&&e.wrap&4&&(e.check=no(e.check,i,y,o)),c-=y,o+=y,it)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Ev;case Ev:if(e.flags&4096){if(c===0)break t;y=0;do it=i[o+y++],e.head&&it&&e.length<65536&&(e.head.comment+=String.fromCharCode(it));while(it&&y<c);if(e.flags&512&&e.wrap&4&&(e.check=no(e.check,i,y,o)),c-=y,o+=y,it)break t}else e.head&&(e.head.comment=null);e.mode=Lv;case Lv:if(e.flags&512){for(;p<16;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(e.wrap&4&&h!==(e.check&65535)){n.msg="header crc mismatch",e.mode=ii;break}h=0,p=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Wo;break;case Rv:for(;p<32;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}n.adler=e.check=Hv(h),h=0,p=0,e.mode=lp;case lp:if(e.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,e.hold=h,e.bits=p,LF;n.adler=e.check=1,e.mode=Wo;case Wo:if(t===kF||t===Rd)break t;case o1:if(e.last){h>>>=p&7,p-=p&7,e.mode=u1;break}for(;p<3;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}switch(e.last=h&1,h>>>=1,p-=1,h&3){case 0:e.mode=Iv;break;case 1:if(FF(e),e.mode=Id,t===Rd){h>>>=2,p-=2;break t}break;case 2:e.mode=Dv;break;case 3:n.msg="invalid block type",e.mode=ii}h>>>=2,p-=2;break;case Iv:for(h>>>=p&7,p-=p&7;p<32;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if((h&65535)!==(h>>>16^65535)){n.msg="invalid stored block lengths",e.mode=ii;break}if(e.length=h&65535,h=0,p=0,e.mode=l1,t===Rd)break t;case l1:e.mode=Tv;case Tv:if(y=e.length,y){if(y>c&&(y=c),y>f&&(y=f),y===0)break t;a.set(i.subarray(o,o+y),u),c-=y,o+=y,f-=y,u+=y,e.length-=y;break}e.mode=Wo;break;case Dv:for(;p<14;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(e.nlen=(h&31)+257,h>>>=5,p-=5,e.ndist=(h&31)+1,h>>>=5,p-=5,e.ncode=(h&15)+4,h>>>=4,p-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=ii;break}e.have=0,e.mode=Pv;case Pv:for(;e.have<e.ncode;){for(;p<3;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.lens[B[e.have++]]=h&7,h>>>=3,p-=3}for(;e.have<19;)e.lens[B[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,G={bits:e.lenbits},nt=mh(_F,e.lens,0,19,e.lencode,0,e.work,G),e.lenbits=G.bits,nt){n.msg="invalid code lengths set",e.mode=ii;break}e.have=0,e.mode=Mv;case Mv:for(;e.have<e.nlen+e.ndist;){for(;A=e.lencode[h&(1<<e.lenbits)-1],_=A>>>24,I=A>>>16&255,D=A&65535,!(_<=p);){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(D<16)h>>>=_,p-=_,e.lens[e.have++]=D;else{if(D===16){for(E=_+2;p<E;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(h>>>=_,p-=_,e.have===0){n.msg="invalid bit length repeat",e.mode=ii;break}it=e.lens[e.have-1],y=3+(h&3),h>>>=2,p-=2}else if(D===17){for(E=_+3;p<E;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}h>>>=_,p-=_,it=0,y=3+(h&7),h>>>=3,p-=3}else{for(E=_+7;p<E;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}h>>>=_,p-=_,it=0,y=11+(h&127),h>>>=7,p-=7}if(e.have+y>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=ii;break}for(;y--;)e.lens[e.have++]=it}}if(e.mode===ii)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=ii;break}if(e.lenbits=9,G={bits:e.lenbits},nt=mh(B3,e.lens,0,e.nlen,e.lencode,0,e.work,G),e.lenbits=G.bits,nt){n.msg="invalid literal/lengths set",e.mode=ii;break}if(e.distbits=6,e.distcode=e.distdyn,G={bits:e.distbits},nt=mh(z3,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,G),e.distbits=G.bits,nt){n.msg="invalid distances set",e.mode=ii;break}if(e.mode=Id,t===Rd)break t;case Id:e.mode=Td;case Td:if(c>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,e.hold=h,e.bits=p,wF(n,v),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,i=n.input,c=n.avail_in,h=e.hold,p=e.bits,e.mode===Wo&&(e.back=-1);break}for(e.back=0;A=e.lencode[h&(1<<e.lenbits)-1],_=A>>>24,I=A>>>16&255,D=A&65535,!(_<=p);){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(I&&(I&240)===0){for(M=_,Y=I,ct=D;A=e.lencode[ct+((h&(1<<M+Y)-1)>>M)],_=A>>>24,I=A>>>16&255,D=A&65535,!(M+_<=p);){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}h>>>=M,p-=M,e.back+=M}if(h>>>=_,p-=_,e.back+=_,e.length=D,I===0){e.mode=Uv;break}if(I&32){e.back=-1,e.mode=Wo;break}if(I&64){n.msg="invalid literal/length code",e.mode=ii;break}e.extra=I&15,e.mode=Ov;case Ov:if(e.extra){for(E=e.extra;p<E;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.length+=h&(1<<e.extra)-1,h>>>=e.extra,p-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Fv;case Fv:for(;A=e.distcode[h&(1<<e.distbits)-1],_=A>>>24,I=A>>>16&255,D=A&65535,!(_<=p);){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if((I&240)===0){for(M=_,Y=I,ct=D;A=e.distcode[ct+((h&(1<<M+Y)-1)>>M)],_=A>>>24,I=A>>>16&255,D=A&65535,!(M+_<=p);){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}h>>>=M,p-=M,e.back+=M}if(h>>>=_,p-=_,e.back+=_,I&64){n.msg="invalid distance code",e.mode=ii;break}e.offset=D,e.extra=I&15,e.mode=Bv;case Bv:if(e.extra){for(E=e.extra;p<E;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}e.offset+=h&(1<<e.extra)-1,h>>>=e.extra,p-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=ii;break}e.mode=zv;case zv:if(f===0)break t;if(y=v-f,e.offset>y){if(y=e.offset-y,y>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=ii;break}y>e.wnext?(y-=e.wnext,S=e.wsize-y):S=e.wnext-y,y>e.length&&(y=e.length),N=e.window}else N=a,S=u-e.offset,y=e.length;y>f&&(y=f),f-=y,e.length-=y;do a[u++]=N[S++];while(--y);e.length===0&&(e.mode=Td);break;case Uv:if(f===0)break t;a[u++]=e.length,f--,e.mode=Td;break;case u1:if(e.wrap){for(;p<32;){if(c===0)break t;c--,h|=i[o++]<<p,p+=8}if(v-=f,n.total_out+=v,e.total+=v,e.wrap&4&&v&&(n.adler=e.check=e.flags?no(e.check,a,v,u-v):tg(e.check,a,v,u-v)),v=f,e.wrap&4&&(e.flags?h:Hv(h))!==e.check){n.msg="incorrect data check",e.mode=ii;break}h=0,p=0}e.mode=$v;case $v:if(e.wrap&&e.flags){for(;p<32;){if(c===0)break t;c--,h+=i[o++]<<p,p+=8}if(e.wrap&4&&h!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=ii;break}h=0,p=0}e.mode=jv;case jv:nt=EF;break t;case ii:nt=U3;break t;case j3:return $3;case H3:default:return ts}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,e.hold=h,e.bits=p,(e.wsize||v!==n.avail_out&&e.mode<ii&&(e.mode<u1||t!==wv))&&Y3(n,n.output,n.next_out,v-n.avail_out),m-=n.avail_in,v-=n.avail_out,n.total_in+=m,n.total_out+=v,e.total+=v,e.wrap&4&&v&&(n.adler=e.check=e.flags?no(e.check,a,v,n.next_out-v):tg(e.check,a,v,n.next_out-v)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Wo?128:0)+(e.mode===Id||e.mode===l1?256:0),(m===0&&v===0||t===wv)&&nt===Wu&&(nt=RF),nt},zF=n=>{if(Qu(n))return ts;let t=n.state;return t.window&&(t.window=null),n.state=null,Wu},UF=(n,t)=>{if(Qu(n))return ts;const e=n.state;return(e.wrap&2)===0?ts:(e.head=t,t.done=!1,Wu)},$F=(n,t)=>{const e=t.length;let i,a,o;return Qu(n)||(i=n.state,i.wrap!==0&&i.mode!==lp)?ts:i.mode===lp&&(a=1,a=tg(a,t,e,0),a!==i.check)?U3:(o=Y3(n,t,e,e),o?(i.mode=j3,$3):(i.havedict=1,Wu))};var jF=W3,HF=V3,qF=q3,WF=OF,VF=G3,GF=BF,YF=zF,XF=UF,KF=$F,QF="pako inflate (from Nodeca project)",Vo={inflateReset:jF,inflateReset2:HF,inflateResetKeep:qF,inflateInit:WF,inflateInit2:VF,inflate:GF,inflateEnd:YF,inflateGetHeader:XF,inflateSetDictionary:KF,inflateInfo:QF};function ZF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var JF=ZF;const X3=Object.prototype.toString,{Z_NO_FLUSH:tB,Z_FINISH:eB,Z_OK:Ch,Z_STREAM_END:h1,Z_NEED_DICT:d1,Z_STREAM_ERROR:nB,Z_DATA_ERROR:Wv,Z_MEM_ERROR:iB}=M3;function Ph(n){this.options=O3.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vF,this.strm.avail_out=0;let e=Vo.inflateInit2(this.strm,t.windowBits);if(e!==Ch)throw new Error(eg[e]);if(this.header=new JF,Vo.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ng.string2buf(t.dictionary):X3.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Vo.inflateSetDictionary(this.strm,t.dictionary),e!==Ch)))throw new Error(eg[e])}Ph.prototype.push=function(n,t){const e=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?eB:tB,X3.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),o=Vo.inflate(e,u),o===d1&&a&&(o=Vo.inflateSetDictionary(e,a),o===Ch?o=Vo.inflate(e,u):o===Wv&&(o=d1));e.avail_in>0&&o===h1&&e.state.wrap>0&&n[e.next_in]!==0;)Vo.inflateReset(e),o=Vo.inflate(e,u);switch(o){case nB:case Wv:case d1:case iB:return this.onEnd(o),this.ended=!0,!1}if(c=e.avail_out,e.next_out&&(e.avail_out===0||o===h1))if(this.options.to==="string"){let f=ng.utf8border(e.output,e.next_out),h=e.next_out-f,p=ng.buf2string(e.output,f);e.next_out=h,e.avail_out=i-h,h&&e.output.set(e.output.subarray(f,f+h),0),this.onData(p)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===Ch&&c===0)){if(o===h1)return o=Vo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Ph.prototype.onData=function(n){this.chunks.push(n)};Ph.prototype.onEnd=function(n){n===Ch&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=O3.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function rB(n,t){const e=new Ph(t);if(e.push(n),e.err)throw e.msg||eg[e.err];return e.result}var aB=Ph,sB=rB,oB={Inflate:aB,inflate:sB};const{Inflate:lB,inflate:uB}=oB;var Vv=lB,cB=uB;const K3=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;K3[n]=t}const Gv=4294967295;function fB(n,t,e){let i=n;for(let a=0;a<e;a++)i=K3[(i^t[a])&255]^i>>>8;return i}function hB(n,t){return(fB(Gv,n,t)^Gv)>>>0}function Yv(n,t,e){const i=n.readUint32(),a=hB(new Uint8Array(n.buffer,n.byteOffset+n.offset-t-4,t),t);if(a!==i)throw new Error(`CRC mismatch for chunk ${e}. Expected ${i}, found ${a}`)}function Q3(n,t,e){for(let i=0;i<e;i++)t[i]=n[i]}function Z3(n,t,e,i){let a=0;for(;a<i;a++)t[a]=n[a];for(;a<e;a++)t[a]=n[a]+t[a-i]&255}function J3(n,t,e,i){let a=0;if(e.length===0)for(;a<i;a++)t[a]=n[a];else for(;a<i;a++)t[a]=n[a]+e[a]&255}function tw(n,t,e,i,a){let o=0;if(e.length===0){for(;o<a;o++)t[o]=n[o];for(;o<i;o++)t[o]=n[o]+(t[o-a]>>1)&255}else{for(;o<a;o++)t[o]=n[o]+(e[o]>>1)&255;for(;o<i;o++)t[o]=n[o]+(t[o-a]+e[o]>>1)&255}}function ew(n,t,e,i,a){let o=0;if(e.length===0){for(;o<a;o++)t[o]=n[o];for(;o<i;o++)t[o]=n[o]+t[o-a]&255}else{for(;o<a;o++)t[o]=n[o]+e[o]&255;for(;o<i;o++)t[o]=n[o]+dB(t[o-a],e[o],e[o-a])&255}}function dB(n,t,e){const i=n+t-e,a=Math.abs(i-n),o=Math.abs(i-t),u=Math.abs(i-e);return a<=o&&a<=u?n:o<=u?t:e}function pB(n,t,e,i,a,o){switch(n){case 0:Q3(t,e,a);break;case 1:Z3(t,e,a,o);break;case 2:J3(t,e,i,a);break;case 3:tw(t,e,i,a,o);break;case 4:ew(t,e,i,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const mB=new Uint16Array([255]),gB=new Uint8Array(mB.buffer),yB=gB[0]===255;function vB(n){const{data:t,width:e,height:i,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(i*e*c);let h=0;for(let p=0;p<7;p++){const m=u[p],v=Math.ceil((e-m.x)/m.xStep),y=Math.ceil((i-m.y)/m.yStep);if(v<=0||y<=0)continue;const S=v*c,N=new Uint8Array(S);for(let A=0;A<y;A++){const _=t[h++],I=t.subarray(h,h+S);h+=S;const D=new Uint8Array(S);pB(_,I,D,N,S,c),N.set(D);for(let M=0;M<v;M++){const Y=m.x+M*m.xStep,ct=m.y+A*m.yStep;if(!(Y>=e||ct>=i))for(let it=0;it<c;it++)f[(ct*e+Y)*c+it]=D[M*c+it]}}}if(o===16){const p=new Uint16Array(f.buffer);if(yB)for(let m=0;m<p.length;m++)p[m]=bB(p[m]);return p}else return f}function bB(n){return(n&255)<<8|n>>8&255}const wB=new Uint16Array([255]),xB=new Uint8Array(wB.buffer),SB=xB[0]===255,CB=new Uint8Array(0);function Xv(n){const{data:t,width:e,height:i,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*e),f=new Uint8Array(i*c);let h=CB,p=0,m,v;for(let y=0;y<i;y++){switch(m=t.subarray(p+1,p+1+c),v=f.subarray(y*c,(y+1)*c),t[p]){case 0:Q3(m,v,c);break;case 1:Z3(m,v,c,u);break;case 2:J3(m,v,h,c);break;case 3:tw(m,v,h,c,u);break;case 4:ew(m,v,h,c,u);break;default:throw new Error(`Unsupported filter: ${t[p]}`)}h=v,p+=c+1}if(o===16){const y=new Uint16Array(f.buffer);if(SB)for(let S=0;S<y.length;S++)y[S]=AB(y[S]);return y}else return f}function AB(n){return(n&255)<<8|n>>8&255}const Hd=Uint8Array.of(137,80,78,71,13,10,26,10);function Kv(n){if(!NB(n.readBytes(Hd.length)))throw new Error("wrong PNG signature")}function NB(n){if(n.length<Hd.length)return!1;for(let t=0;t<Hd.length;t++)if(n[t]!==Hd[t])return!1;return!0}const _B="tEXt",kB=0,nw=new TextDecoder("latin1");function EB(n){if(RB(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const LB=/^[\u0000-\u00FF]*$/;function RB(n){if(!LB.test(n))throw new Error("invalid latin1 text")}function IB(n,t,e){const i=iw(t);n[i]=TB(t,e-i.length-1)}function iw(n){for(n.mark();n.readByte()!==kB;);const t=n.offset;n.reset();const e=nw.decode(n.readBytes(t-n.offset-1));return n.skip(1),EB(e),e}function TB(n,t){return nw.decode(n.readBytes(t))}const ka={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},p1={UNKNOWN:-1,DEFLATE:0},Qv={UNKNOWN:-1,ADAPTIVE:0},m1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Dd={NONE:0,BACKGROUND:1,PREVIOUS:2},g1={SOURCE:0,OVER:1};class DB extends Fg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,e={}){super(t);const{checkCrc:i=!1}=e;this._checkCrc=i,this._inflator=new Vv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=p1.UNKNOWN,this._filterMethod=Qv.UNKNOWN,this._interlaceMethod=m1.UNKNOWN,this._colorType=ka.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Kv(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeChunk(t,e)}return this.decodeImage(),this._png}decodeApng(){for(Kv(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeApngChunk(t,e)}return this.decodeApngImage(),this._apng}decodeChunk(t,e){const i=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case _B:IB(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?Yv(this,t+4,e):this.skip(4)}decodeApngChunk(t,e){const i=this.offset;switch(e!=="fdAT"&&e!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),e){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,e),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?Yv(this,t+4,e):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=PB(this.readUint8());const e=this.readUint8();this._colorType=e;let i;switch(e){case ka.GREYSCALE:i=1;break;case ka.TRUECOLOUR:i=3;break;case ka.INDEXED_COLOUR:i=1;break;case ka.GREYSCALE_ALPHA:i=2;break;case ka.TRUECOLOUR_ALPHA:i=4;break;case ka.UNKNOWN:default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==p1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<e;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const e=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let e=t,i=this.offset+this.byteOffset;if(i+=4,e-=4,this._inflator.push(new Uint8Array(this.buffer,i,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ka.GREYSCALE:case ka.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break}case ka.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const i=this.readByte();this._palette[e].push(i)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}case ka.UNKNOWN:case ka.GREYSCALE_ALPHA:case ka.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const e=iw(this),i=this.readUint8();if(i!==p1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(t-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:cB(a)}}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:e,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const e={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=Xv({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)e.data=i.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(i,a,e),this.addFrameDataToCanvas(e,i)}this._apng.frames.push(e)}}return this._apng}disposeFrame(t,e,i){switch(t.disposeOp){case Dd.NONE:break;case Dd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*t.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[u+c]=0}break;case Dd.PREVIOUS:i.data.set(e.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,e){const i=1<<this._png.depth,a=(o,u)=>{const c=((o+e.yOffset)*this._png.width+e.xOffset+u)*this._png.channels,f=(o*e.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(e.blendOp){case g1.SOURCE:for(let o=0;o<e.height;o++)for(let u=0;u<e.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let h=0;h<this._png.channels;h++)t.data[c+h]=e.data[f+h]}break;case g1.OVER:for(let o=0;o<e.height;o++)for(let u=0;u<e.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let h=0;h<this._png.channels;h++){const p=e.data[f+this._png.channels-1]/i,m=h%(this._png.channels-1)===0?1:e.data[f+h],v=Math.floor(p*m+(1-p)*t.data[c+h]);t.data[c+h]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Qv.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===m1.NO_INTERLACE)this._png.data=Xv({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===m1.ADAM7)this._png.data=vB({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,e=this._frames.at(-1);e?e.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Dd.NONE,blendOp:g1.SOURCE,data:t}),this._inflator=new Vv,this._writingDataChunks=!1}}function PB(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Zv;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Zv||(Zv={}));function MB(n,t){return new DB(n,t).decode()}var Fe=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function y1(){Fe.console&&typeof Fe.console.log=="function"&&Fe.console.log.apply(Fe.console,arguments)}var Hn={log:y1,warn:function(n){Fe.console&&(typeof Fe.console.warn=="function"?Fe.console.warn.apply(Fe.console,arguments):y1.call(null,arguments))},error:function(n){Fe.console&&(typeof Fe.console.error=="function"?Fe.console.error.apply(Fe.console,arguments):y1(n))}};function v1(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Lu(i.response,t,e)},i.onerror=function(){Hn.error("could not download file")},i.send()}function Jv(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Pd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Lu=Fe.saveAs||((typeof window>"u"?"undefined":Tn(window))!=="object"||window!==Fe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=Fe.URL||Fe.webkitURL,a=document.createElement("a");t=t||n.name||"download",a.download=t,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?Jv(a.href)?v1(n,t,e):Pd(a,a.target="_blank"):Pd(a)):(a.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){Pd(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(Jv(n))v1(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Pd(i)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Tn(o)!=="object"&&(Hn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return v1(n,t,e);var a=n.type==="application/octet-stream",o=/constructor/i.test(Fe.HTMLElement)||Fe.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Tn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},c.readAsDataURL(n)}else{var f=Fe.URL||Fe.webkitURL,h=f.createObjectURL(n);i?i.location=h:location.href=h,i=null,setTimeout(function(){f.revokeObjectURL(h)},4e4)}});function rw(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<e.length;i++){var a=e[i].re,o=e[i].process,u=a.exec(n);u&&(t=o(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),h.length==1&&(h="0"+h),"#"+c+f+h}}var qd=Fe.atob.bind(Fe),t5=Fe.btoa.bind(Fe);function b1(n,t){var e=n[0],i=n[1],a=n[2],o=n[3];e=wr(e,i,a,o,t[0],7,-680876936),o=wr(o,e,i,a,t[1],12,-389564586),a=wr(a,o,e,i,t[2],17,606105819),i=wr(i,a,o,e,t[3],22,-1044525330),e=wr(e,i,a,o,t[4],7,-176418897),o=wr(o,e,i,a,t[5],12,1200080426),a=wr(a,o,e,i,t[6],17,-1473231341),i=wr(i,a,o,e,t[7],22,-45705983),e=wr(e,i,a,o,t[8],7,1770035416),o=wr(o,e,i,a,t[9],12,-1958414417),a=wr(a,o,e,i,t[10],17,-42063),i=wr(i,a,o,e,t[11],22,-1990404162),e=wr(e,i,a,o,t[12],7,1804603682),o=wr(o,e,i,a,t[13],12,-40341101),a=wr(a,o,e,i,t[14],17,-1502002290),e=xr(e,i=wr(i,a,o,e,t[15],22,1236535329),a,o,t[1],5,-165796510),o=xr(o,e,i,a,t[6],9,-1069501632),a=xr(a,o,e,i,t[11],14,643717713),i=xr(i,a,o,e,t[0],20,-373897302),e=xr(e,i,a,o,t[5],5,-701558691),o=xr(o,e,i,a,t[10],9,38016083),a=xr(a,o,e,i,t[15],14,-660478335),i=xr(i,a,o,e,t[4],20,-405537848),e=xr(e,i,a,o,t[9],5,568446438),o=xr(o,e,i,a,t[14],9,-1019803690),a=xr(a,o,e,i,t[3],14,-187363961),i=xr(i,a,o,e,t[8],20,1163531501),e=xr(e,i,a,o,t[13],5,-1444681467),o=xr(o,e,i,a,t[2],9,-51403784),a=xr(a,o,e,i,t[7],14,1735328473),e=Sr(e,i=xr(i,a,o,e,t[12],20,-1926607734),a,o,t[5],4,-378558),o=Sr(o,e,i,a,t[8],11,-2022574463),a=Sr(a,o,e,i,t[11],16,1839030562),i=Sr(i,a,o,e,t[14],23,-35309556),e=Sr(e,i,a,o,t[1],4,-1530992060),o=Sr(o,e,i,a,t[4],11,1272893353),a=Sr(a,o,e,i,t[7],16,-155497632),i=Sr(i,a,o,e,t[10],23,-1094730640),e=Sr(e,i,a,o,t[13],4,681279174),o=Sr(o,e,i,a,t[0],11,-358537222),a=Sr(a,o,e,i,t[3],16,-722521979),i=Sr(i,a,o,e,t[6],23,76029189),e=Sr(e,i,a,o,t[9],4,-640364487),o=Sr(o,e,i,a,t[12],11,-421815835),a=Sr(a,o,e,i,t[15],16,530742520),e=Cr(e,i=Sr(i,a,o,e,t[2],23,-995338651),a,o,t[0],6,-198630844),o=Cr(o,e,i,a,t[7],10,1126891415),a=Cr(a,o,e,i,t[14],15,-1416354905),i=Cr(i,a,o,e,t[5],21,-57434055),e=Cr(e,i,a,o,t[12],6,1700485571),o=Cr(o,e,i,a,t[3],10,-1894986606),a=Cr(a,o,e,i,t[10],15,-1051523),i=Cr(i,a,o,e,t[1],21,-2054922799),e=Cr(e,i,a,o,t[8],6,1873313359),o=Cr(o,e,i,a,t[15],10,-30611744),a=Cr(a,o,e,i,t[6],15,-1560198380),i=Cr(i,a,o,e,t[13],21,1309151649),e=Cr(e,i,a,o,t[4],6,-145523070),o=Cr(o,e,i,a,t[11],10,-1120210379),a=Cr(a,o,e,i,t[2],15,718787259),i=Cr(i,a,o,e,t[9],21,-343485551),n[0]=jl(e,n[0]),n[1]=jl(i,n[1]),n[2]=jl(a,n[2]),n[3]=jl(o,n[3])}function kp(n,t,e,i,a,o){return t=jl(jl(t,n),jl(i,o)),jl(t<<a|t>>>32-a,e)}function wr(n,t,e,i,a,o,u){return kp(t&e|~t&i,n,t,a,o,u)}function xr(n,t,e,i,a,o,u){return kp(t&i|e&~i,n,t,a,o,u)}function Sr(n,t,e,i,a,o,u){return kp(t^e^i,n,t,a,o,u)}function Cr(n,t,e,i,a,o,u){return kp(e^(t|~i),n,t,a,o,u)}function aw(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)b1(i,OB(n.substring(t-64,t)));n=n.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(b1(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*e,b1(i,a),i}function OB(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var e5="0123456789abcdef".split("");function FB(n){for(var t="",e=0;e<4;e++)t+=e5[n>>8*e+4&15]+e5[n>>8*e&15];return t}function BB(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ig(n){return aw(n).map(BB).join("")}var zB=(function(n){for(var t=0;t<n.length;t++)n[t]=FB(n[t]);return n.join("")})(aw("hello"))!="5d41402abc4b2a76b9719d911017c592";function jl(n,t){if(zB){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}function rg(n,t){var e,i,a,o;if(n!==e){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var h=0;for(f=0;f<256;f++){var p=c[f];h=(h+p+u.charCodeAt(f))%256,c[f]=c[h],c[h]=p}e=n,i=c}else c=i;var m=t.length,v=0,y=0,S="";for(f=0;f<m;f++)y=(y+(p=c[v=(v+1)%256]))%256,c[v]=c[y],c[y]=p,u=c[(c[v]+c[y])%256],S+=String.fromCharCode(t.charCodeAt(f)^u);return S}var n5={print:4,modify:8,copy:16,"annot-forms":32};function Qc(n,t,e,i){this.v=1,this.r=2;var a=192;n.forEach(function(c){if(n5.perm!==void 0)throw new Error("Invalid permission: "+c);a+=n5[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),u=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=ig(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=rg(this.encryptionKey,this.padding)}function Zc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var a=n.charCodeAt(i);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[i]}return t}function i5(n){if(Tn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,a){if(a=a||!1,typeof e!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var o=Math.random().toString(35);return t[e][o]=[i,!!a],o},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var o in t[e]){var u=t[e][o];try{u[0].apply(n,i)}catch(c){Fe.console&&Hn.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function up(n){if(!(this instanceof up))return new up(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function sw(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Du(n,t,e,i,a){if(!(this instanceof Du))return new Du(n,t,e,i,a);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,sw.call(this,i,a)}function Jc(n,t,e,i,a){if(!(this instanceof Jc))return new Jc(n,t,e,i,a);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,sw.call(this,i,a)}function me(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,h="S",p=null;Tn(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,a=n.format||a,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),h=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),i=i||"mm",e=(""+(e||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,v={},y={internal:{},__private__:{}};y.__private__.PubSub=i5;var S="1.3",N=y.__private__.getPdfVersion=function(){return S};y.__private__.setPdfVersion=function(C){S=C};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return A};var _=y.__private__.getPageFormat=function(C){return A[C]};a=a||"a4";var I="compat",D="advanced",M=I;function Y(){this.saveGraphicsState(),K(new ye(ze,0,0,-ze,0,fs()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),h="n",M=D}function ct(){this.restoreGraphicsState(),h="S",M=I}var it=y.__private__.combineFontStyleAndFontWeight=function(C,P){if(C=="bold"&&P=="normal"||C=="bold"&&P==400||C=="normal"&&P=="italic"||C=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(C=P==400||P==="normal"?C==="italic"?"italic":"normal":P!=700&&P!=="bold"||C!=="normal"?(P==700?"bold":P)+""+C:"bold"),C};y.advancedAPI=function(C){var P=M===I;return P&&Y.call(this),typeof C!="function"||(C(this),P&&ct.call(this)),this},y.compatAPI=function(C){var P=M===D;return P&&ct.call(this),typeof C!="function"||(C(this),P&&Y.call(this)),this},y.isAdvancedAPI=function(){return M===D};var nt,F=function(C){if(M!==D)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=y.roundToPrecision=y.__private__.roundToPrecision=function(C,P){var J=t||P;if(isNaN(C)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(J).replace(/0+$/,"")};nt=y.hpf=y.__private__.hpf=typeof f=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,f)}:f==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,16)};var E=y.f2=y.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return G(C,2)},B=y.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return G(C,3)},tt=y.scale=y.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return M===I?C*ze:M===D?C:void 0},et=function(C){return tt((function(P){return M===I?fs()-P:M===D?P:void 0})(C))};y.__private__.setPrecision=y.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var ht,X="00000000000000000000000000000000",lt=y.__private__.getFileId=function(){return X},st=y.__private__.setFileId=function(C){return X=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ai=new Qc(p.userPermissions,p.userPassword,p.ownerPassword,X)),X};y.setFileId=function(C){return st(C),this},y.getFileId=function(){return lt()};var vt=y.__private__.convertDateToPDFDate=function(C){var P=C.getTimezoneOffset(),J=P<0?"+":"-",ut=Math.floor(Math.abs(P/60)),gt=Math.abs(P%60),Dt=[J,V(ut),"'",V(gt),"'"].join("");return["D:",C.getFullYear(),V(C.getMonth()+1),V(C.getDate()),V(C.getHours()),V(C.getMinutes()),V(C.getSeconds()),Dt].join("")},Et=y.__private__.convertPDFDateToDate=function(C){var P=parseInt(C.substr(2,4),10),J=parseInt(C.substr(6,2),10)-1,ut=parseInt(C.substr(8,2),10),gt=parseInt(C.substr(10,2),10),Dt=parseInt(C.substr(12,2),10),zt=parseInt(C.substr(14,2),10);return new Date(P,J,ut,gt,Dt,zt,0)},q=y.__private__.setCreationDate=function(C){var P;if(C===void 0&&(C=new Date),C instanceof Date)P=vt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=C}return ht=P},T=y.__private__.getCreationDate=function(C){var P=ht;return C==="jsDate"&&(P=Et(ht)),P};y.setCreationDate=function(C){return q(C),this},y.getCreationDate=function(C){return T(C)};var j,V=y.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},rt=y.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},ot=0,mt=[],kt=[],At=0,Mt=[],Ht=[],Kt=!1,Qt=kt;y.__private__.setCustomOutputDestination=function(C){Kt=!0,Qt=C};var ue=function(C){Kt||(Qt=C)};y.__private__.resetCustomOutputDestination=function(){Kt=!1,Qt=kt};var K=y.__private__.out=function(C){return C=C.toString(),At+=C.length+1,Qt.push(C),Qt},Yt=y.__private__.write=function(C){return K(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},Ge=y.__private__.getArrayBuffer=function(C){for(var P=C.length,J=new ArrayBuffer(P),ut=new Uint8Array(J);P--;)ut[P]=C.charCodeAt(P);return J},Ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Ce};var $t=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(C){return $t=M===D?C/ze:C,this};var be,ne=y.__private__.getFontSize=y.getFontSize=function(){return M===I?$t:$t*ze},Ae=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(C){return Ae=C,this},y.__private__.getR2L=y.getR2L=function(){return Ae};var ge,Ue=y.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))be=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');be=C}else be=parseInt(C,10)};y.__private__.getZoomMode=function(){return be};var Je,Be=y.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');ge=C};y.__private__.getPageMode=function(){return ge};var tn=y.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Je=C};y.__private__.getLayoutMode=function(){return Je},y.__private__.setDisplayMode=y.setDisplayMode=function(C,P,J){return Ue(C),tn(P),Be(J),this};var Xe={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(C){if(Object.keys(Xe).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xe[C]},y.__private__.getDocumentProperties=function(){return Xe},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(C){for(var P in Xe)Xe.hasOwnProperty(P)&&C[P]&&(Xe[P]=C[P]);return this},y.__private__.setDocumentProperty=function(C,P){if(Object.keys(Xe).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xe[C]=P};var ce,ze,de,si,Ze,Ne={},Te={},en=[],we={},Dn={},Ee={},De={},_n=null,We=0,pe=[],un=new i5(y),ua=n.hotfixes||[],Ki={},Ia={},$r=[],ye=function C(P,J,ut,gt,Dt,zt){if(!(this instanceof C))return new C(P,J,ut,gt,Dt,zt);isNaN(P)&&(P=1),isNaN(J)&&(J=0),isNaN(ut)&&(ut=0),isNaN(gt)&&(gt=1),isNaN(Dt)&&(Dt=0),isNaN(zt)&&(zt=0),this._matrix=[P,J,ut,gt,Dt,zt]};Object.defineProperty(ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ye.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(nt).join(C)},ye.prototype.multiply=function(C){var P=C.sx*this.sx+C.shy*this.shx,J=C.sx*this.shy+C.shy*this.sy,ut=C.shx*this.sx+C.sy*this.shx,gt=C.shx*this.shy+C.sy*this.sy,Dt=C.tx*this.sx+C.ty*this.shx+this.tx,zt=C.tx*this.shy+C.ty*this.sy+this.ty;return new ye(P,J,ut,gt,Dt,zt)},ye.prototype.decompose=function(){var C=this.sx,P=this.shy,J=this.shx,ut=this.sy,gt=this.tx,Dt=this.ty,zt=Math.sqrt(C*C+P*P),re=(C/=zt)*J+(P/=zt)*ut;J-=C*re,ut-=P*re;var fe=Math.sqrt(J*J+ut*ut);return re/=fe,C*(ut/=fe)<P*(J/=fe)&&(C=-C,P=-P,re=-re,zt=-zt),{scale:new ye(zt,0,0,fe,0,0),translate:new ye(1,0,0,1,gt,Dt),rotate:new ye(C,P,-P,C,0,0),skew:new ye(1,0,re,1,0,0)}},ye.prototype.toString=function(C){return this.join(" ")},ye.prototype.inversed=function(){var C=this.sx,P=this.shy,J=this.shx,ut=this.sy,gt=this.tx,Dt=this.ty,zt=1/(C*ut-P*J),re=ut*zt,fe=-P*zt,Re=-J*zt,$e=C*zt;return new ye(re,fe,Re,$e,-re*gt-Re*Dt,-fe*gt-$e*Dt)},ye.prototype.applyToPoint=function(C){var P=C.x*this.sx+C.y*this.shx+this.tx,J=C.x*this.shy+C.y*this.sy+this.ty;return new qr(P,J)},ye.prototype.applyToRectangle=function(C){var P=this.applyToPoint(C),J=this.applyToPoint(new qr(C.x+C.w,C.y+C.h));return new ss(P.x,P.y,J.x-P.x,J.y-P.y)},ye.prototype.clone=function(){var C=this.sx,P=this.shy,J=this.shx,ut=this.sy,gt=this.tx,Dt=this.ty;return new ye(C,P,J,ut,gt,Dt)},y.Matrix=ye;var ns=y.matrixMult=function(C,P){return P.multiply(C)},Ta=new ye(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Ta;var _r=function(C,P){if(!Dn[C]){var J=(P instanceof Du?"Sh":"P")+(Object.keys(we).length+1).toString(10);P.id=J,Dn[C]=J,we[J]=P,un.publish("addPattern",P)}};y.ShadingPattern=Du,y.TilingPattern=Jc,y.addShadingPattern=function(C,P){return F("addShadingPattern()"),_r(C,P),this},y.beginTilingPattern=function(C){F("beginTilingPattern()"),So(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},y.endTilingPattern=function(C,P){F("endTilingPattern()"),P.stream=Ht[j].join(`
`),_r(C,P),un.publish("endTilingPattern",P),$r.pop().restore()};var kr,Wn=y.__private__.newObject=function(){var C=di();return Ii(C,!0),C},di=y.__private__.newObjectDeferred=function(){return ot++,mt[ot]=function(){return At},ot},Ii=function(C,P){return P=typeof P=="boolean"&&P,mt[C]=At,P&&K(C+" 0 obj"),C},Os=y.__private__.newAdditionalObject=function(){var C={objId:di(),content:""};return Mt.push(C),C},sr=di(),kn=di(),Vn=y.__private__.decodeColorString=function(C){var P=C.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length!==5||P[4]!=="k"&&P[4]!=="K"||(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var J=parseFloat(P[0]);P=[J,J,J,"r"]}for(var ut="#",gt=0;gt<3;gt++)ut+=("0"+Math.floor(255*parseFloat(P[gt])).toString(16)).slice(-2);return ut},Qi=y.__private__.encodeColorString=function(C){var P;typeof C=="string"&&(C={ch1:C});var J=C.ch1,ut=C.ch2,gt=C.ch3,Dt=C.ch4,zt=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var re=new rw(J);if(re.ok)J=re.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var fe=parseInt(J.substr(1),16);J=fe>>16&255,ut=fe>>8&255,gt=255&fe}if(ut===void 0||Dt===void 0&&J===ut&&ut===gt)P=typeof J=="string"?J+" "+zt[0]:C.precision===2?E(J/255)+" "+zt[0]:B(J/255)+" "+zt[0];else if(Dt===void 0||Tn(Dt)==="object"){if(Dt&&!isNaN(Dt.a)&&Dt.a===0)return["1.","1.","1.",zt[1]].join(" ");P=typeof J=="string"?[J,ut,gt,zt[1]].join(" "):C.precision===2?[E(J/255),E(ut/255),E(gt/255),zt[1]].join(" "):[B(J/255),B(ut/255),B(gt/255),zt[1]].join(" ")}else P=typeof J=="string"?[J,ut,gt,Dt,zt[2]].join(" "):C.precision===2?[E(J),E(ut),E(gt),E(Dt),zt[2]].join(" "):[B(J),B(ut),B(gt),B(Dt),zt[2]].join(" ");return P},Er=y.__private__.getFilters=function(){return u},jr=y.__private__.putStream=function(C){var P=(C=C||{}).data||"",J=C.filters||Er(),ut=C.alreadyAppliedFilters||[],gt=C.addLength1||!1,Dt=P.length,zt=C.objectId,re=function(Ni){return Ni};if(p!==null&&zt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(re=Ai.encryptor(zt,0));var fe={};J===!0&&(J=["FlateEncode"]);var Re=C.additionalKeyValues||[],$e=(fe=me.API.processDataByFilters!==void 0?me.API.processDataByFilters(P,J):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(ut)?ut.join(" "):ut.toString());if(fe.data.length!==0&&(Re.push({key:"Length",value:fe.data.length}),gt===!0&&Re.push({key:"Length1",value:Dt})),$e.length!=0)if($e.split("/").length-1==1)Re.push({key:"Filter",value:$e});else{Re.push({key:"Filter",value:"["+$e+"]"});for(var cn=0;cn<Re.length;cn+=1)if(Re[cn].key==="DecodeParms"){for(var Gn=[],li=0;li<fe.reverseChain.split("/").length-1;li+=1)Gn.push("null");Gn.push(Re[cn].value),Re[cn].value="["+Gn.join(" ")+"]"}}K("<<");for(var Pn=0;Pn<Re.length;Pn++)K("/"+Re[Pn].key+" "+Re[Pn].value);K(">>"),fe.data.length!==0&&(K("stream"),K(re(fe.data)),K("endstream"))},go=y.__private__.putPage=function(C){var P=C.number,J=C.data,ut=C.objId,gt=C.contentsObjId;Ii(ut,!0),K("<</Type /Page"),K("/Parent "+C.rootDictionaryObjId+" 0 R"),K("/Resources "+C.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(nt(C.mediaBox.bottomLeftX))+" "+parseFloat(nt(C.mediaBox.bottomLeftY))+" "+nt(C.mediaBox.topRightX)+" "+nt(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&K("/CropBox ["+nt(C.cropBox.bottomLeftX)+" "+nt(C.cropBox.bottomLeftY)+" "+nt(C.cropBox.topRightX)+" "+nt(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&K("/BleedBox ["+nt(C.bleedBox.bottomLeftX)+" "+nt(C.bleedBox.bottomLeftY)+" "+nt(C.bleedBox.topRightX)+" "+nt(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&K("/TrimBox ["+nt(C.trimBox.bottomLeftX)+" "+nt(C.trimBox.bottomLeftY)+" "+nt(C.trimBox.topRightX)+" "+nt(C.trimBox.topRightY)+"]"),C.artBox!==null&&K("/ArtBox ["+nt(C.artBox.bottomLeftX)+" "+nt(C.artBox.bottomLeftY)+" "+nt(C.artBox.topRightX)+" "+nt(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&K("/UserUnit "+C.userUnit),un.publish("putPage",{objId:ut,pageContext:pe[P],pageNumber:P,page:J}),K("/Contents "+gt+" 0 R"),K(">>"),K("endobj");var Dt=J.join(`
`);return M===D&&(Dt+=`
Q`),Ii(gt,!0),jr({data:Dt,filters:Er(),objectId:gt}),K("endobj"),ut},ca=y.__private__.putPages=function(){var C,P,J=[];for(C=1;C<=We;C++)pe[C].objId=di(),pe[C].contentsObjId=di();for(C=1;C<=We;C++)J.push(go({number:C,data:Ht[C],objId:pe[C].objId,contentsObjId:pe[C].contentsObjId,mediaBox:pe[C].mediaBox,cropBox:pe[C].cropBox,bleedBox:pe[C].bleedBox,trimBox:pe[C].trimBox,artBox:pe[C].artBox,userUnit:pe[C].userUnit,rootDictionaryObjId:sr,resourceDictionaryObjId:kn}));Ii(sr,!0),K("<</Type /Pages");var ut="/Kids [";for(P=0;P<We;P++)ut+=J[P]+" 0 R ";K(ut+"]"),K("/Count "+We),K(">>"),K("endobj"),un.publish("postPutPages")},fa=function(C){un.publish("putFont",{font:C,out:K,newObject:Wn,putStream:jr}),C.isAlreadyPutted!==!0&&(C.objectNumber=Wn(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Zc(C.postScriptName)),K("/Subtype /Type1"),typeof C.encoding=="string"&&K("/Encoding /"+C.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},Fs=function(C){C.objectNumber=Wn();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[nt(C.x),nt(C.y),nt(C.x+C.width),nt(C.y+C.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var J=C.pages[1].join(`
`);jr({data:J,additionalKeyValues:P,objectId:C.objectNumber}),K("endobj")},ha=function(C,P){P||(P=21);var J=Wn(),ut=(function(zt,re){var fe,Re=[],$e=1/(re-1);for(fe=0;fe<1;fe+=$e)Re.push(fe);if(Re.push(1),zt[0].offset!=0){var cn={offset:0,color:zt[0].color};zt.unshift(cn)}if(zt[zt.length-1].offset!=1){var Gn={offset:1,color:zt[zt.length-1].color};zt.push(Gn)}for(var li="",Pn=0,Ni=0;Ni<Re.length;Ni++){for(fe=Re[Ni];fe>zt[Pn+1].offset;)Pn++;var mi=zt[Pn].offset,zi=(fe-mi)/(zt[Pn+1].offset-mi),hs=zt[Pn].color,va=zt[Pn+1].color;li+=rt(Math.round((1-zi)*hs[0]+zi*va[0]).toString(16))+rt(Math.round((1-zi)*hs[1]+zi*va[1]).toString(16))+rt(Math.round((1-zi)*hs[2]+zi*va[2]).toString(16))}return li.trim()})(C.colors,P),gt=[];gt.push({key:"FunctionType",value:"0"}),gt.push({key:"Domain",value:"[0.0 1.0]"}),gt.push({key:"Size",value:"["+P+"]"}),gt.push({key:"BitsPerSample",value:"8"}),gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jr({data:ut,additionalKeyValues:gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),K("endobj"),C.objectNumber=Wn(),K("<< /ShadingType "+C.type),K("/ColorSpace /DeviceRGB");var Dt="/Coords ["+nt(parseFloat(C.coords[0]))+" "+nt(parseFloat(C.coords[1]))+" ";C.type===2?Dt+=nt(parseFloat(C.coords[2]))+" "+nt(parseFloat(C.coords[3])):Dt+=nt(parseFloat(C.coords[2]))+" "+nt(parseFloat(C.coords[3]))+" "+nt(parseFloat(C.coords[4]))+" "+nt(parseFloat(C.coords[5])),K(Dt+="]"),C.matrix&&K("/Matrix ["+C.matrix.toString()+"]"),K("/Function "+J+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},da=function(C,P){var J=di(),ut=Wn();P.push({resourcesOid:J,objectOid:ut}),C.objectNumber=ut;var gt=[];gt.push({key:"Type",value:"/Pattern"}),gt.push({key:"PatternType",value:"1"}),gt.push({key:"PaintType",value:"1"}),gt.push({key:"TilingType",value:"1"}),gt.push({key:"BBox",value:"["+C.boundingBox.map(nt).join(" ")+"]"}),gt.push({key:"XStep",value:nt(C.xStep)}),gt.push({key:"YStep",value:nt(C.yStep)}),gt.push({key:"Resources",value:J+" 0 R"}),C.matrix&&gt.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),jr({data:C.stream,additionalKeyValues:gt,objectId:C.objectNumber}),K("endobj")},yo=function(C){for(var P in C.objectNumber=Wn(),K("<<"),C)switch(P){case"opacity":K("/ca "+E(C[P]));break;case"stroke-opacity":K("/CA "+E(C[P]))}K(">>"),K("endobj")},Da=function(C){Ii(C.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var P in K("/Font <<"),Ne)Ne.hasOwnProperty(P)&&(m===!1||m===!0&&v.hasOwnProperty(P))&&K("/"+P+" "+Ne[P].objectNumber+" 0 R");K(">>")})(),(function(){if(Object.keys(we).length>0){for(var P in K("/Shading <<"),we)we.hasOwnProperty(P)&&we[P]instanceof Du&&we[P].objectNumber>=0&&K("/"+P+" "+we[P].objectNumber+" 0 R");un.publish("putShadingPatternDict"),K(">>")}})(),(function(P){if(Object.keys(we).length>0){for(var J in K("/Pattern <<"),we)we.hasOwnProperty(J)&&we[J]instanceof y.TilingPattern&&we[J].objectNumber>=0&&we[J].objectNumber<P&&K("/"+J+" "+we[J].objectNumber+" 0 R");un.publish("putTilingPatternDict"),K(">>")}})(C.objectOid),(function(){if(Object.keys(Ee).length>0){var P;for(P in K("/ExtGState <<"),Ee)Ee.hasOwnProperty(P)&&Ee[P].objectNumber>=0&&K("/"+P+" "+Ee[P].objectNumber+" 0 R");un.publish("putGStateDict"),K(">>")}})(),(function(){for(var P in K("/XObject <<"),Ki)Ki.hasOwnProperty(P)&&Ki[P].objectNumber>=0&&K("/"+P+" "+Ki[P].objectNumber+" 0 R");un.publish("putXobjectDict"),K(">>")})(),K(">>"),K("endobj")},oi=function(C){Te[C.fontName]=Te[C.fontName]||{},Te[C.fontName][C.fontStyle]=C.id},Xl=function(C,P,J,ut,gt){var Dt={id:"F"+(Object.keys(Ne).length+1).toString(10),postScriptName:C,fontName:P,fontStyle:J,encoding:ut,isStandardFont:gt||!1,metadata:{}};return un.publish("addFont",{font:Dt,instance:this}),Ne[Dt.id]=Dt,oi(Dt),Dt.id},Lr=y.__private__.pdfEscape=y.pdfEscape=function(C,P){return(function(J,ut){var gt,Dt,zt,re,fe,Re,$e,cn,Gn;if(zt=(ut=ut||{}).sourceEncoding||"Unicode",fe=ut.outputEncoding,(ut.autoencode||fe)&&Ne[ce].metadata&&Ne[ce].metadata[zt]&&Ne[ce].metadata[zt].encoding&&(re=Ne[ce].metadata[zt].encoding,!fe&&Ne[ce].encoding&&(fe=Ne[ce].encoding),!fe&&re.codePages&&(fe=re.codePages[0]),typeof fe=="string"&&(fe=re[fe]),fe)){for($e=!1,Re=[],gt=0,Dt=J.length;gt<Dt;gt++)(cn=fe[J.charCodeAt(gt)])?Re.push(String.fromCharCode(cn)):Re.push(J[gt]),Re[gt].charCodeAt(0)>>8&&($e=!0);J=Re.join("")}for(gt=J.length;$e===void 0&&gt!==0;)J.charCodeAt(gt-1)>>8&&($e=!0),gt--;if(!$e)return J;for(Re=ut.noBOM?[]:[254,255],gt=0,Dt=J.length;gt<Dt;gt++){if((Gn=(cn=J.charCodeAt(gt))>>8)>>8)throw new Error("Character at position "+gt+" of string '"+J+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Re.push(Gn),Re.push(cn-(Gn<<8))}return String.fromCharCode.apply(void 0,Re)})(C,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pa=y.__private__.beginPage=function(C){Ht[++We]=[],pe[We]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},Ql(We),ue(Ht[j])},is=function(C,P){var J,ut,gt;switch(e=P||e,typeof C=="string"&&(J=_(C.toLowerCase()),Array.isArray(J)&&(ut=J[0],gt=J[1])),Array.isArray(C)&&(ut=C[0]*ze,gt=C[1]*ze),isNaN(ut)&&(ut=a[0],gt=a[1]),(ut>14400||gt>14400)&&(Hn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ut=Math.min(14400,ut),gt=Math.min(14400,gt)),a=[ut,gt],e.substr(0,1)){case"l":gt>ut&&(a=[gt,ut]);break;case"p":ut>gt&&(a=[gt,ut])}pa(a),_e(bo),K(Tr),sl!==0&&K(sl+" J"),Ti!==0&&K(Ti+" j"),un.publish("addPage",{pageNumber:We})},Kl=function(C){C>0&&C<=We&&(Ht.splice(C,1),pe.splice(C,1),We--,j>We&&(j=We),this.setPage(j))},Ql=function(C){C>0&&C<=We&&(j=C)},Zl=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ht.length-1},Ju=function(C,P,J){var ut,gt=void 0;return J=J||{},C=C!==void 0?C:Ne[ce].fontName,P=P!==void 0?P:Ne[ce].fontStyle,ut=C.toLowerCase(),Te[ut]!==void 0&&Te[ut][P]!==void 0?gt=Te[ut][P]:Te[C]!==void 0&&Te[C][P]!==void 0?gt=Te[C][P]:J.disableWarning===!1&&Hn.warn("Unable to look up font label for font '"+C+"', '"+P+"'. Refer to getFontList() for available fonts."),gt||J.noFallback||(gt=Te.times[P])==null&&(gt=Te.times.normal),gt},Rr=y.__private__.putInfo=function(){var C=Wn(),P=function(ut){return ut};for(var J in p!==null&&(P=Ai.encryptor(C,0)),K("<<"),K("/Producer ("+Lr(P("jsPDF "+me.version))+")"),Xe)Xe.hasOwnProperty(J)&&Xe[J]&&K("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+Lr(P(Xe[J]))+")");K("/CreationDate ("+Lr(P(ht))+")"),K(">>"),K("endobj")},rs=y.__private__.putCatalog=function(C){var P=(C=C||{}).rootDictionaryObjId||sr;switch(Wn(),K("<<"),K("/Type /Catalog"),K("/Pages "+P+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+be;J.substr(J.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&K("/OpenAction [3 0 R /XYZ null null "+E(be)+"]")}switch(Je||(Je="continuous"),Je){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}ge&&K("/PageMode /"+ge),un.publish("putCatalog"),K(">>"),K("endobj")},ma=y.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(ot+1)),K("/Root "+ot+" 0 R"),K("/Info "+(ot-1)+" 0 R"),p!==null&&K("/Encrypt "+Ai.oid+" 0 R"),K("/ID [ <"+X+"> <"+X+"> ]"),K(">>")},vn=y.__private__.putHeader=function(){K("%PDF-"+S),K("%")},Jl=y.__private__.putXRef=function(){var C="0000000000";K("xref"),K("0 "+(ot+1)),K("0000000000 65535 f ");for(var P=1;P<=ot;P++)typeof mt[P]=="function"?K((C+mt[P]()).slice(-10)+" 00000 n "):mt[P]!==void 0?K((C+mt[P]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},Pa=y.__private__.buildDocument=function(){var C;ot=0,At=0,kt=[],mt=[],Mt=[],sr=di(),kn=di(),ue(kt),un.publish("buildDocument"),vn(),ca(),(function(){un.publish("putAdditionalObjects");for(var J=0;J<Mt.length;J++){var ut=Mt[J];Ii(ut.objId,!0),K(ut.content),K("endobj")}un.publish("postPutAdditionalObjects")})(),C=[],(function(){for(var J in Ne)Ne.hasOwnProperty(J)&&(m===!1||m===!0&&v.hasOwnProperty(J))&&fa(Ne[J])})(),(function(){var J;for(J in Ee)Ee.hasOwnProperty(J)&&yo(Ee[J])})(),(function(){for(var J in Ki)Ki.hasOwnProperty(J)&&Fs(Ki[J])})(),(function(J){var ut;for(ut in we)we.hasOwnProperty(ut)&&(we[ut]instanceof Du?ha(we[ut]):we[ut]instanceof Jc&&da(we[ut],J))})(C),un.publish("putResources"),C.forEach(Da),Da({resourcesOid:kn,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources"),p!==null&&(Ai.oid=Wn(),K("<<"),K("/Filter /Standard"),K("/V "+Ai.v),K("/R "+Ai.r),K("/U <"+Ai.toHexString(Ai.U)+">"),K("/O <"+Ai.toHexString(Ai.O)+">"),K("/P "+Ai.P),K(">>"),K("endobj")),Rr(),rs();var P=At;return Jl(),ma(),K("startxref"),K(""+P),K("%%EOF"),ue(Ht[j]),kt.join(`
`)},Bs=y.__private__.getBlob=function(C){return new Blob([Ge(C)],{type:"application/pdf"})},tu=y.output=y.__private__.output=(kr=function(C,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",C){case void 0:return Pa();case"save":y.save(P.filename);break;case"arraybuffer":return Ge(Pa());case"blob":return Bs(Pa());case"bloburi":case"bloburl":if(Fe.URL!==void 0&&typeof Fe.URL.createObjectURL=="function")return Fe.URL&&Fe.URL.createObjectURL(Bs(Pa()))||void 0;Hn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ut=Pa();try{J=t5(ut)}catch{J=t5(unescape(encodeURIComponent(ut)))}return"data:application/pdf;filename="+P.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fe)==="[object Window]"){var gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(gt=P.pdfObjectUrl,Dt="");var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+gt+'"'+Dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",re=Fe.open();return re!==null&&re.document.write(zt),re}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fe)==="[object Window]"){var fe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',Re=Fe.open();if(Re!==null){Re.document.write(fe);var $e=this;Re.document.documentElement.querySelector("#pdfViewer").onload=function(){Re.document.title=P.filename,Re.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($e.output("bloburl"))}}return Re}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',Gn=Fe.open();if(Gn!==null&&(Gn.document.write(cn),Gn.document.title=P.filename),Gn||typeof safari>"u")return Gn;break;case"datauri":case"dataurl":return Fe.document.location.href=this.output("datauristring",P);default:return null}},kr.foo=function(){try{return kr.apply(this,arguments)}catch(J){var C=J.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var P="Error in function "+C.split(`
`)[0].split("<")[0]+": "+J.message;if(!Fe.console)throw new Error(P);Fe.console.error(P,J),Fe.alert&&alert(P)}},kr.foo.bar=kr,kr.foo),or=function(C){return Array.isArray(ua)===!0&&ua.indexOf(C)>-1};switch(i){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=or("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ze=i}var Ai=null;q(),st();var pi=y.__private__.getPageInfo=y.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pe[C].objId,pageNumber:C,pageContext:pe[C]}},rl=y.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in pe)if(pe[P].objId===C)break;return pi(P)},tc=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:pe[j].objId,pageNumber:j,pageContext:pe[j]}};y.addPage=function(){return is.apply(this,arguments),this},y.setPage=function(){return Ql.apply(this,arguments),ue.call(this,Ht[j]),this},y.insertPage=function(C){return this.addPage(),this.movePage(j,C),this},y.movePage=function(C,P){var J,ut;if(C>P){J=Ht[C],ut=pe[C];for(var gt=C;gt>P;gt--)Ht[gt]=Ht[gt-1],pe[gt]=pe[gt-1];Ht[P]=J,pe[P]=ut,this.setPage(P)}else if(C<P){J=Ht[C],ut=pe[C];for(var Dt=C;Dt<P;Dt++)Ht[Dt]=Ht[Dt+1],pe[Dt]=pe[Dt+1];Ht[P]=J,pe[P]=ut,this.setPage(P)}return this},y.deletePage=function(){return Kl.apply(this,arguments),this},y.__private__.text=y.text=function(C,P,J,ut,gt){var Dt,zt,re,fe,Re,$e,cn,Gn,li,Pn=(ut=ut||{}).scope||this;if(typeof C=="number"&&typeof P=="number"&&(typeof J=="string"||Array.isArray(J))){var Ni=J;J=P,P=C,C=Ni}if(arguments[3]instanceof ye==0?(re=arguments[4],fe=arguments[5],Tn(cn=arguments[3])==="object"&&cn!==null||(typeof re=="string"&&(fe=re,re=null),typeof cn=="string"&&(fe=cn,cn=null),typeof cn=="number"&&(re=cn,cn=null),ut={flags:cn,angle:re,align:fe})):(F("The transform parameter of text() with a Matrix value"),li=gt),isNaN(P)||isNaN(J)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Pn;var mi,zi="",hs=typeof ut.lineHeightFactor=="number"?ut.lineHeightFactor:as,va=Pn.internal.scaleFactor;function ds(bn){return bn=bn.split("	").join(Array(ut.TabLen||9).join(" ")),Lr(bn,cn)}function uu(bn){for(var fn,Mn=bn.concat(),ci=[],qa=Mn.length;qa--;)typeof(fn=Mn.shift())=="string"?ci.push(fn):Array.isArray(bn)&&(fn.length===1||fn[1]===void 0&&fn[2]===void 0)?ci.push(fn[0]):ci.push([fn[0],fn[1],fn[2]]);return ci}function ll(bn,fn){var Mn;if(typeof bn=="string")Mn=fn(bn)[0];else if(Array.isArray(bn)){for(var ci,qa,Sa=bn.concat(),_o=[],hu=Sa.length;hu--;)typeof(ci=Sa.shift())=="string"?_o.push(fn(ci)[0]):Array.isArray(ci)&&typeof ci[0]=="string"&&(qa=fn(ci[0],ci[1],ci[2]),_o.push([qa[0],qa[1],qa[2]]));Mn=_o}return Mn}var Fa=!1,ba=!0;if(typeof C=="string")Fa=!0;else if(Array.isArray(C)){var Ao=C.concat();zt=[];for(var ps,Di=Ao.length;Di--;)(typeof(ps=Ao.shift())!="string"||Array.isArray(ps)&&typeof ps[0]!="string")&&(ba=!1);Fa=ba}if(Fa===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var Us=$t/Pn.internal.scaleFactor,$s=Us*(hs-1);switch(ut.baseline){case"bottom":J-=$s;break;case"top":J+=Us-$s;break;case"hanging":J+=Us-2*$s;break;case"middle":J+=Us/2-$s}if(($e=ut.maxWidth||0)>0&&(typeof C=="string"?C=Pn.splitTextToSize(C,$e):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(bn,fn){return bn.concat(Pn.splitTextToSize(fn,$e))},[]))),Dt={text:C,x:P,y:J,options:ut,mutex:{pdfEscape:Lr,activeFontKey:ce,fonts:Ne,activeFontSize:$t}},un.publish("preProcessText",Dt),C=Dt.text,re=(ut=Dt.options).angle,li instanceof ye==0&&re&&typeof re=="number"){re*=Math.PI/180,ut.rotationDirection===0&&(re=-re),M===D&&(re=-re);var ul=Math.cos(re),Ba=Math.sin(re);li=new ye(ul,Ba,-Ba,ul,0,0)}else re&&re instanceof ye&&(li=re);M!==D||li||(li=Ta),(Re=ut.charSpace||Hr)!==void 0&&(zi+=nt(tt(Re))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Gn=ut.horizontalScale)!==void 0&&(zi+=nt(100*Gn)+` Tz
`),ut.lang;var ur=-1,ms=ut.renderingMode!==void 0?ut.renderingMode:ut.stroke,cl=Pn.internal.getCurrentPageInfo().pageContext;switch(ms){case 0:case!1:case"fill":ur=0;break;case 1:case!0:case"stroke":ur=1;break;case 2:case"fillThenStroke":ur=2;break;case 3:case"invisible":ur=3;break;case 4:case"fillAndAddForClipping":ur=4;break;case 5:case"strokeAndAddPathForClipping":ur=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ur=6;break;case 7:case"addToPathForClipping":ur=7}var cu=cl.usedRenderingMode!==void 0?cl.usedRenderingMode:-1;ur!==-1?zi+=ur+` Tr
`:cu!==-1&&(zi+=`0 Tr
`),ur!==-1&&(cl.usedRenderingMode=ur),fe=ut.align||"left";var Dr,wa=$t*hs,gs=Pn.internal.pageSize.getWidth(),fu=Ne[ce];Re=ut.charSpace||Hr,$e=ut.maxWidth||0,cn=Object.assign({autoencode:!0,noBOM:!0},ut.flags);var xa=[],js=function(bn){return Pn.getStringUnitWidth(bn,{font:fu,charSpace:Re,fontSize:$t,doKerning:!1})*$t/va};if(Object.prototype.toString.call(C)==="[object Array]"){var yr;zt=uu(C),fe!=="left"&&(Dr=zt.map(js));var cr,za=0;if(fe==="right"){P-=Dr[0],C=[],Di=zt.length;for(var Ua=0;Ua<Di;Ua++)Ua===0?(cr=Ir(P),yr=Bi(J)):(cr=tt(za-Dr[Ua]),yr=-wa),C.push([zt[Ua],cr,yr]),za=Dr[Ua]}else if(fe==="center"){P-=Dr[0]/2,C=[],Di=zt.length;for(var ys=0;ys<Di;ys++)ys===0?(cr=Ir(P),yr=Bi(J)):(cr=tt((za-Dr[ys])/2),yr=-wa),C.push([zt[ys],cr,yr]),za=Dr[ys]}else if(fe==="left"){C=[],Di=zt.length;for(var fl=0;fl<Di;fl++)C.push(zt[fl])}else if(fe==="justify"&&fu.encoding==="Identity-H"){C=[],Di=zt.length,$e=$e!==0?$e:gs;for(var hl=0,ui=0;ui<Di;ui++)if(yr=ui===0?Bi(J):-wa,cr=ui===0?Ir(P):hl,ui<Di-1){var uc=tt(($e-Dr[ui])/(zt[ui].split(" ").length-1)),$a=zt[ui].split(" ");C.push([$a[0]+" ",cr,yr]),hl=0;for(var ja=1;ja<$a.length;ja++){var Ui=(js($a[ja-1]+" "+$a[ja])-js($a[ja]))*va+uc;ja==$a.length-1?C.push([$a[ja],Ui,0]):C.push([$a[ja]+" ",Ui,0]),hl-=Ui}}else C.push([zt[ui],cr,yr]);C.push(["",hl,0])}else{if(fe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Di=zt.length,$e=$e!==0?$e:gs,ui=0;ui<Di;ui++){yr=ui===0?Bi(J):-wa,cr=ui===0?Ir(P):0;var vs=zt[ui].split(" ").length-1,dl=vs>0?($e-Dr[ui])/vs:0;ui<Di-1?xa.push(nt(tt(dl))):xa.push(0),C.push([zt[ui],cr,yr])}}}(typeof ut.R2L=="boolean"?ut.R2L:Ae)===!0&&(C=ll(C,function(bn,fn,Mn){return[bn.split("").reverse().join(""),fn,Mn]})),Dt={text:C,x:P,y:J,options:ut,mutex:{pdfEscape:Lr,activeFontKey:ce,fonts:Ne,activeFontSize:$t}},un.publish("postProcessText",Dt),C=Dt.text,mi=Dt.mutex.isHex||!1;var pl=Ne[ce].encoding;pl!=="WinAnsiEncoding"&&pl!=="StandardEncoding"||(C=ll(C,function(bn,fn,Mn){return[ds(bn),fn,Mn]})),zt=uu(C),C=[];for(var bs,ws,Ha,No=Array.isArray(zt[0])?1:0,Pr="",xs=function(bn,fn,Mn){var ci="";return Mn instanceof ye?(Mn=typeof ut.angle=="number"?ns(Mn,new ye(1,0,0,1,bn,fn)):ns(new ye(1,0,0,1,bn,fn),Mn),M===D&&(Mn=ns(new ye(1,0,0,-1,0,0),Mn)),ci=Mn.join(" ")+` Tm
`):ci=nt(bn)+" "+nt(fn)+` Td
`,ci},Zi=0;Zi<zt.length;Zi++){switch(Pr="",No){case 1:Ha=(mi?"<":"(")+zt[Zi][0]+(mi?">":")"),bs=parseFloat(zt[Zi][1]),ws=parseFloat(zt[Zi][2]);break;case 0:Ha=(mi?"<":"(")+zt[Zi]+(mi?">":")"),bs=Ir(P),ws=Bi(J)}xa!==void 0&&xa[Zi]!==void 0&&(Pr=xa[Zi]+` Tw
`),Zi===0?C.push(Pr+xs(bs,ws,li)+Ha):No===0?C.push(Pr+Ha):No===1&&C.push(Pr+xs(bs,ws,li)+Ha)}C=No===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Wr=`BT
/`;return Wr+=ce+" "+$t+` Tf
`,Wr+=nt($t*hs)+` TL
`,Wr+=Ma+`
`,Wr+=zi,Wr+=C,K(Wr+="ET"),v[ce]=!0,Pn};var eu=y.__private__.clip=y.clip=function(C){return K(C==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return eu("evenodd")},y.__private__.discardPath=y.discardPath=function(){return K("n"),this};var lr=y.__private__.isValidStyle=function(C){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(P=!0),P};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(C){return lr(C)&&(h=C),this};var nu=y.__private__.getStyle=y.getStyle=function(C){var P=h;switch(C){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=C}return P},iu=y.close=function(){return K("h"),this};y.stroke=function(){return K("S"),this},y.fill=function(C){return ga("f",C),this},y.fillEvenOdd=function(C){return ga("f*",C),this},y.fillStroke=function(C){return ga("B",C),this},y.fillStrokeEvenOdd=function(C){return ga("B*",C),this};var ga=function(C,P){Tn(P)==="object"?nc(P,C):K(C)},vo=function(C){C===null||M===D&&C===void 0||(C=nu(C),K(C))};function ec(C,P,J,ut,gt){var Dt=new Jc(P||this.boundingBox,J||this.xStep,ut||this.yStep,this.gState,gt||this.matrix);Dt.stream=this.stream;var zt=C+"$$"+this.cloneIndex+++"$$";return _r(zt,Dt),Dt}var nc=function(C,P){var J=Dn[C.key],ut=we[J];if(ut instanceof Du)K("q"),K(ru(P)),ut.gState&&y.setGState(ut.gState),K(C.matrix.toString()+" cm"),K("/"+J+" sh"),K("Q");else if(ut instanceof Jc){var gt=new ye(1,0,0,-1,0,fs());C.matrix&&(gt=gt.multiply(C.matrix||Ta),J=ec.call(ut,C.key,C.boundingBox,C.xStep,C.yStep,gt).id),K("q"),K("/Pattern cs"),K("/"+J+" scn"),ut.gState&&y.setGState(ut.gState),K(P),K("Q")}},ru=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},au=y.moveTo=function(C,P){return K(nt(tt(C))+" "+nt(et(P))+" m"),this},ic=y.lineTo=function(C,P){return K(nt(tt(C))+" "+nt(et(P))+" l"),this},gr=y.curveTo=function(C,P,J,ut,gt,Dt){return K([nt(tt(C)),nt(et(P)),nt(tt(J)),nt(et(ut)),nt(tt(gt)),nt(et(Dt)),"c"].join(" ")),this};y.__private__.line=y.line=function(C,P,J,ut,gt){if(isNaN(C)||isNaN(P)||isNaN(J)||isNaN(ut)||!lr(gt))throw new Error("Invalid arguments passed to jsPDF.line");return M===I?this.lines([[J-C,ut-P]],C,P,[1,1],gt||"S"):this.lines([[J-C,ut-P]],C,P,[1,1]).stroke()},y.__private__.lines=y.lines=function(C,P,J,ut,gt,Dt){var zt,re,fe,Re,$e,cn,Gn,li,Pn,Ni,mi,zi;if(typeof C=="number"&&(zi=J,J=P,P=C,C=zi),ut=ut||[1,1],Dt=Dt||!1,isNaN(P)||isNaN(J)||!Array.isArray(C)||!Array.isArray(ut)||!lr(gt)||typeof Dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(au(P,J),zt=ut[0],re=ut[1],Re=C.length,Ni=P,mi=J,fe=0;fe<Re;fe++)($e=C[fe]).length===2?(Ni=$e[0]*zt+Ni,mi=$e[1]*re+mi,ic(Ni,mi)):(cn=$e[0]*zt+Ni,Gn=$e[1]*re+mi,li=$e[2]*zt+Ni,Pn=$e[3]*re+mi,Ni=$e[4]*zt+Ni,mi=$e[5]*re+mi,gr(cn,Gn,li,Pn,Ni,mi));return Dt&&iu(),vo(gt),this},y.path=function(C){for(var P=0;P<C.length;P++){var J=C[P],ut=J.c;switch(J.op){case"m":au(ut[0],ut[1]);break;case"l":ic(ut[0],ut[1]);break;case"c":gr.apply(this,ut);break;case"h":iu()}}return this},y.__private__.rect=y.rect=function(C,P,J,ut,gt){if(isNaN(C)||isNaN(P)||isNaN(J)||isNaN(ut)||!lr(gt))throw new Error("Invalid arguments passed to jsPDF.rect");return M===I&&(ut=-ut),K([nt(tt(C)),nt(et(P)),nt(tt(J)),nt(tt(ut)),"re"].join(" ")),vo(gt),this},y.__private__.triangle=y.triangle=function(C,P,J,ut,gt,Dt,zt){if(isNaN(C)||isNaN(P)||isNaN(J)||isNaN(ut)||isNaN(gt)||isNaN(Dt)||!lr(zt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-C,ut-P],[gt-J,Dt-ut],[C-gt,P-Dt]],C,P,[1,1],zt,!0),this},y.__private__.roundedRect=y.roundedRect=function(C,P,J,ut,gt,Dt,zt){if(isNaN(C)||isNaN(P)||isNaN(J)||isNaN(ut)||isNaN(gt)||isNaN(Dt)||!lr(zt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var re=4/3*(Math.SQRT2-1);return gt=Math.min(gt,.5*J),Dt=Math.min(Dt,.5*ut),this.lines([[J-2*gt,0],[gt*re,0,gt,Dt-Dt*re,gt,Dt],[0,ut-2*Dt],[0,Dt*re,-gt*re,Dt,-gt,Dt],[2*gt-J,0],[-gt*re,0,-gt,-Dt*re,-gt,-Dt],[0,2*Dt-ut],[0,-Dt*re,gt*re,-Dt,gt,-Dt]],C+gt,P,[1,1],zt,!0),this},y.__private__.ellipse=y.ellipse=function(C,P,J,ut,gt){if(isNaN(C)||isNaN(P)||isNaN(J)||isNaN(ut)||!lr(gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Dt=4/3*(Math.SQRT2-1)*J,zt=4/3*(Math.SQRT2-1)*ut;return au(C+J,P),gr(C+J,P-zt,C+Dt,P-ut,C,P-ut),gr(C-Dt,P-ut,C-J,P-zt,C-J,P),gr(C-J,P+zt,C-Dt,P+ut,C,P+ut),gr(C+Dt,P+ut,C+J,P+zt,C+J,P),vo(gt),this},y.__private__.circle=y.circle=function(C,P,J,ut){if(isNaN(C)||isNaN(P)||isNaN(J)||!lr(ut))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,P,J,J,ut)},y.setFont=function(C,P,J){return J&&(P=it(P,J)),ce=Ju(C,P,{disableWarning:!1}),this};var ya=y.__private__.getFont=y.getFont=function(){return Ne[Ju.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var C,P,J={};for(C in Te)if(Te.hasOwnProperty(C))for(P in J[C]=[],Te[C])Te[C].hasOwnProperty(P)&&J[C].push(P);return J},y.addFont=function(C,P,J,ut,gt){var Dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Dt.indexOf(arguments[3])!==-1?gt=arguments[3]:arguments[3]&&Dt.indexOf(arguments[3])==-1&&(J=it(J,ut)),Xl.call(this,C,P,J,gt=gt||"Identity-H")};var as,bo=n.lineWidth||.200025,zs=y.__private__.getLineWidth=y.getLineWidth=function(){return bo},_e=y.__private__.setLineWidth=y.setLineWidth=function(C){return bo=C,K(nt(tt(C))+" w"),this};y.__private__.setLineDash=me.API.setLineDash=me.API.setLineDashPattern=function(C,P){if(C=C||[],P=P||0,isNaN(P)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(J){return nt(tt(J))}).join(" "),P=nt(tt(P)),K("["+C+"] "+P+" d"),this};var rc=y.__private__.getLineHeight=y.getLineHeight=function(){return $t*as};y.__private__.getLineHeight=y.getLineHeight=function(){return $t*as};var su=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(as=C),this},ac=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return as};su(n.lineHeight);var Ir=y.__private__.getHorizontalCoordinate=function(C){return tt(C)},Bi=y.__private__.getVerticalCoordinate=function(C){return M===D?C:pe[j].mediaBox.topRightY-pe[j].mediaBox.bottomLeftY-tt(C)},ou=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(C){return nt(Ir(C))},wo=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(C){return nt(Bi(C))},Tr=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Vn(Tr)},y.__private__.setStrokeColor=y.setDrawColor=function(C,P,J,ut){return Tr=Qi({ch1:C,ch2:P,ch3:J,ch4:ut,pdfColorType:"draw",precision:2}),K(Tr),this};var xo=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Vn(xo)},y.__private__.setFillColor=y.setFillColor=function(C,P,J,ut){return xo=Qi({ch1:C,ch2:P,ch3:J,ch4:ut,pdfColorType:"fill",precision:2}),K(xo),this};var Ma=n.textColor||"0 g",sc=y.__private__.getTextColor=y.getTextColor=function(){return Vn(Ma)};y.__private__.setTextColor=y.setTextColor=function(C,P,J,ut){return Ma=Qi({ch1:C,ch2:P,ch3:J,ch4:ut,pdfColorType:"text",precision:3}),this};var Hr=n.charSpace,al=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(Hr||0)};y.__private__.setCharSpace=y.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hr=C,this};var sl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(C){var P=y.CapJoinStyles[C];if(P===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sl=P,K(P+" J"),this};var Ti=0;y.__private__.setLineJoin=y.setLineJoin=function(C){var P=y.CapJoinStyles[C];if(P===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ti=P,K(P+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(nt(tt(C))+" M"),this},y.GState=up,y.setGState=function(C){(C=typeof C=="string"?Ee[De[C]]:Oa(null,C)).equals(_n)||(K("/"+C.id+" gs"),_n=C)};var Oa=function(C,P){if(!C||!De[C]){var J=!1;for(var ut in Ee)if(Ee.hasOwnProperty(ut)&&Ee[ut].equals(P)){J=!0;break}if(J)P=Ee[ut];else{var gt="GS"+(Object.keys(Ee).length+1).toString(10);Ee[gt]=P,P.id=gt}return C&&(De[C]=P.id),un.publish("addGState",P),P}};y.addGState=function(C,P){return Oa(C,P),this},y.saveGraphicsState=function(){return K("q"),en.push({key:ce,size:$t,color:Ma}),this},y.restoreGraphicsState=function(){K("Q");var C=en.pop();return ce=C.key,$t=C.size,Ma=C.color,_n=null,this},y.setCurrentTransformationMatrix=function(C){return K(C.toString()+" cm"),this},y.comment=function(C){return K("#"+C),this};var qr=function(C,P){var J=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(Dt){isNaN(Dt)||(J=parseFloat(Dt))}});var ut=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ut},set:function(Dt){isNaN(Dt)||(ut=parseFloat(Dt))}});var gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return gt},set:function(Dt){gt=Dt.toString()}}),this},ss=function(C,P,J,ut){qr.call(this,C,P),this.type="rect";var gt=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return gt},set:function(zt){isNaN(zt)||(gt=parseFloat(zt))}});var Dt=ut||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Dt},set:function(zt){isNaN(zt)||(Dt=parseFloat(zt))}}),this},ol=function(){this.page=We,this.currentPage=j,this.pages=Ht.slice(0),this.pagesContext=pe.slice(0),this.x=de,this.y=si,this.matrix=Ze,this.width=ls(j),this.height=lu(j),this.outputDestination=Qt,this.id="",this.objectNumber=-1};ol.prototype.restore=function(){We=this.page,j=this.currentPage,pe=this.pagesContext,Ht=this.pages,de=this.x,si=this.y,Ze=this.matrix,Co(j,this.width),us(j,this.height),Qt=this.outputDestination};var So=function(C,P,J,ut,gt){$r.push(new ol),We=j=0,Ht=[],de=C,si=P,Ze=gt,pa([J,ut])};for(var os in y.beginFormObject=function(C,P,J,ut,gt){return So(C,P,J,ut,gt),this},y.endFormObject=function(C){return(function(P){if(Ia[P])$r.pop().restore();else{var J=new ol,ut="Xo"+(Object.keys(Ki).length+1).toString(10);J.id=ut,Ia[P]=ut,Ki[ut]=J,un.publish("addFormObject",J),$r.pop().restore()}})(C),this},y.doFormObject=function(C,P){var J=Ki[Ia[C]];return K("q"),K(P.toString()+" cm"),K("/"+J.id+" Do"),K("Q"),this},y.getFormObject=function(C){var P=Ki[Ia[C]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},y.save=function(C,P){return C=C||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(Lu(Bs(Pa()),C),typeof Lu.unload=="function"&&Fe.setTimeout&&setTimeout(Lu.unload,911),this):new Promise(function(J,ut){try{var gt=Lu(Bs(Pa()),C);typeof Lu.unload=="function"&&Fe.setTimeout&&setTimeout(Lu.unload,911),J(gt)}catch(Dt){ut(Dt.message)}})},me.API)me.API.hasOwnProperty(os)&&(os==="events"&&me.API.events.length?(function(C,P){var J,ut,gt;for(gt=P.length-1;gt!==-1;gt--)J=P[gt][0],ut=P[gt][1],C.subscribe.apply(C,[J].concat(typeof ut=="function"?[ut]:ut))})(un,me.API.events):y[os]=me.API[os]);function ls(C){return pe[C].mediaBox.topRightX-pe[C].mediaBox.bottomLeftX}function Co(C,P){pe[C].mediaBox.topRightX=P+pe[C].mediaBox.bottomLeftX}function lu(C){return pe[C].mediaBox.topRightY-pe[C].mediaBox.bottomLeftY}function us(C,P){pe[C].mediaBox.topRightY=P+pe[C].mediaBox.bottomLeftY}var cs=y.getPageWidth=function(C){return ls(C=C||j)/ze},oc=y.setPageWidth=function(C,P){Co(C,P*ze)},fs=y.getPageHeight=function(C){return lu(C=C||j)/ze},lc=y.setPageHeight=function(C,P){us(C,P*ze)};return y.internal={pdfEscape:Lr,getStyle:nu,getFont:ya,getFontSize:ne,getCharSpace:al,getTextColor:sc,getLineHeight:rc,getLineHeightFactor:ac,getLineWidth:zs,write:Yt,getHorizontalCoordinate:Ir,getVerticalCoordinate:Bi,getCoordinateString:ou,getVerticalCoordinateString:wo,collections:{},newObject:Wn,newAdditionalObject:Os,newObjectDeferred:di,newObjectDeferredBegin:Ii,getFilters:Er,putStream:jr,events:un,scaleFactor:ze,pageSize:{getWidth:function(){return cs(j)},setWidth:function(C){oc(j,C)},getHeight:function(){return fs(j)},setHeight:function(C){lc(j,C)}},encryptionOptions:p,encryption:Ai,getEncryptor:function(C){return p!==null?Ai.encryptor(C,0):function(P){return P}},output:tu,getNumberOfPages:Zl,get pages(){return Ht},out:K,f2:E,f3:B,getPageInfo:pi,getPageInfoByObjId:rl,getCurrentPageInfo:tc,getPDFVersion:N,Point:qr,Rectangle:ss,Matrix:ye,hasHotfix:or},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return cs(j)},set:function(C){oc(j,C)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return fs(j)},set:function(C){lc(j,C)},enumerable:!0,configurable:!0}),(function(C){for(var P=0,J=Ce.length;P<J;P++){var ut=Xl.call(this,C[P][0],C[P][1],C[P][2],Ce[P][3],!0);m===!1&&(v[ut]=!0);var gt=C[P][0].split("-");oi({id:ut,fontName:gt[0],fontStyle:gt[1]||""})}un.publish("addFonts",{fonts:Ne,dictionary:Te})}).call(y,Ce),ce="F1",is(a,e),un.publish("initialized"),y}Qc.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Qc.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Qc.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Qc.prototype.processOwnerPassword=function(n,t){return rg(ig(t).substr(0,5),n)},Qc.prototype.encryptor=function(n,t){var e=ig(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return rg(e,i)}},up.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||Tn(n)!==Tn(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},me.API={events:[]},me.version="3.0.4";var Si=me.API,Bg=1,Zu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qe=function(n){return n.toFixed(2)},Ul=function(n){return n.toFixed(5)};Si.__acroform__={};var la=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},r5=function(n){return n*Bg},io=function(n){var t=new lw,e=le.internal.getHeight(n)||0,i=le.internal.getWidth(n)||0;return t.BBox=[0,0,Number(qe(i)),Number(qe(e))],t},UB=Si.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<t},$B=Si.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<t)},jB=Si.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},Ei=Si.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jB(n,t-1)},Li=Si.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return UB(n,t-1)},Ri=Si.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $B(n,t-1)},HB=Si.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],c=n[3],f={};return f.lowerLeft_X=e(a)||0,f.lowerLeft_Y=i(o+c)||0,f.upperRight_X=e(a+u)||0,f.upperRight_Y=i(o)||0,[Number(qe(f.lowerLeft_X)),Number(qe(f.lowerLeft_Y)),Number(qe(f.upperRight_X)),Number(qe(f.upperRight_Y))]},qB=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=ag(n,e),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+a+" "+qe(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=io(n);return o.scope=n.scope,o.stream=t.join(`
`),o}},ag=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=n.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var o=e,u=le.internal.getHeight(n)||0;u=u<0?-u:u;var c=le.internal.getWidth(n)||0;c=c<0?-c:c;var f=function(E,B,tt){if(E+1<a.length){var et=B+" "+a[E+1][0];return Md(et,n,tt).width<=c-4}return!1};o++;t:for(;o>0;){t="",o--;var h,p,m=Md("3",n,o).height,v=n.multiline?u-o:(u-m)/2,y=v+=2,S=0,N=0,A=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Md(t,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var _="",I=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var M=!1;if(a[D].length!==1&&A!==a[D].length-1){if((m+2)*(I+2)+2>u)continue t;_+=a[D][A],M=!0,N=D,D--}else{_=(_+=a[D][A]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var Y=parseInt(D),ct=f(Y,_,o),it=D>=a.length-1;if(ct&&!it){_+=" ",A=0;continue}if(ct||it){if(it)N=Y;else if(n.multiline&&(m+2)*(I+2)+2>u)continue t}else{if(!n.multiline||(m+2)*(I+2)+2>u)continue t;N=Y}}for(var nt="",F=S;F<=N;F++){var G=a[F];if(n.multiline){if(F===N){nt+=G[A]+" ",A=(A+1)%G.length;continue}if(F===S){nt+=G[G.length-1]+" ";continue}}nt+=G[0]+" "}switch(nt=nt.substr(nt.length-1)==" "?nt.substr(0,nt.length-1):nt,p=Md(nt,n,o).width,n.textAlign){case"right":h=c-p-2;break;case"center":h=(c-p)/2;break;default:h=2}t+=qe(h)+" "+qe(y)+` Td
`,t+="("+Zu(nt)+`) Tj
`,t+=-qe(h)+` 0 Td
`,y=-(o+2),p=0,S=M?N:N+1,I++,_=""}break}return i.text=t,i.fontSize=o,i},Md=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:a}},WB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VB=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},GB=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ps.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(WB)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Bg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new uw,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.objId=void 0,o.hasAnnotation&&VB(o,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,a){var o=!i;for(var u in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(u)){var c=i[u],f=[],h=c.Rect;if(c.Rect&&(c.Rect=HB(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=le.createDefaultAppearanceStream(c),Tn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=qB(c);f.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var m="";for(var v in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(v)){var y=c.appearanceStreamContent[v];if(m+="/"+v+" ",m+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var S=y[u];typeof S=="function"&&(S=S.call(a,c)),m+="/"+u+" "+S+" ",a.internal.acroformPlugin.xForms.indexOf(S)>=0||a.internal.acroformPlugin.xForms.push(S)}}else typeof(S=y)=="function"&&(S=S.call(a,c)),m+="/"+u+" "+S,a.internal.acroformPlugin.xForms.indexOf(S)>=0||a.internal.acroformPlugin.xForms.push(S);m+=">>"}f.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(N,A){for(var _ in N)if(N.hasOwnProperty(_)){var I=_,D=N[_];A.internal.newObjectDeferredBegin(D.objId,!0),Tn(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete N[I]}})(a.internal.acroformPlugin.xForms,a)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},ow=Si.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),Tn(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),a+="("+Zu(i(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w1=function(n,t,e){var i=function(a){return a};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),"("+Zu(i(n))+")"},lo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lo.prototype.toString=function(){return this.objId+" 0 R"},lo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},lo.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],a=this[i];a&&(Array.isArray(a)?n.push({key:i,value:ow(a,this.objId,this.scope)}):a instanceof lo?(a.scope=this.scope,n.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:i,value:a}))}return n};var lw=function(){lo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};la(lw,lo);var uw=function(){lo.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Zu(e(n))+")"}},set:function(e){n=e}})};la(uw,lo);var Ps=function n(){lo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ei(t,3)},set:function(_){_?this.F=Li(t,3):this.F=Ri(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');e=_}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(_){i=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(_){i[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(_){i[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(_){i[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(_){i[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof cp)return;o="FieldObject"+n.FieldNum++}var _=function(I){return I};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Zu(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Bg:h},set:function(_){h=_}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof cp||this instanceof Bu))return w1(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=_}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof rr==0?w1(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof rr==0?_.substr(0,1)==="("?Vc(_.substr(1,_.length-2)):Vc(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr==1?Vc(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof rr==1?"/"+_:_}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof rr==0?w1(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof rr==0?_.substr(0,1)==="("?Vc(_.substr(1,_.length-2)):Vc(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr==1?Vc(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof rr==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(_){_=!!_,N=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(_){S=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,1)},set:function(_){_?this.Ff=Li(this.Ff,1):this.Ff=Ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,2)},set:function(_){_?this.Ff=Li(this.Ff,2):this.Ff=Ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,3)},set:function(_){_?this.Ff=Li(this.Ff,3):this.Ff=Ri(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');A=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(A){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};la(Ps,lo);var nf=function(){Ps.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ow(t,this.objId,this.scope)},set:function(e){var i,a;a=[],typeof(i=e)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,h=[];f=u.exec(o);)h.push(f[c]);return h})(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,18)},set:function(e){e?this.Ff=Li(this.Ff,18):this.Ff=Ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Li(this.Ff,19):this.Ff=Ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,20)},set:function(e){e?(this.Ff=Li(this.Ff,20),t.sort()):this.Ff=Ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,22)},set:function(e){e?this.Ff=Li(this.Ff,22):this.Ff=Ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(e){e?this.Ff=Li(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,27)},set:function(e){e?this.Ff=Li(this.Ff,27):this.Ff=Ri(this.Ff,27)}}),this.hasAppearanceStream=!1};la(nf,Ps);var rf=function(){nf.call(this),this.fontName="helvetica",this.combo=!1};la(rf,nf);var af=function(){rf.call(this),this.combo=!0};la(af,rf);var Wd=function(){af.call(this),this.edit=!0};la(Wd,af);var rr=function(){Ps.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,15)},set:function(e){e?this.Ff=Li(this.Ff,15):this.Ff=Ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,16)},set:function(e){e?this.Ff=Li(this.Ff,16):this.Ff=Ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,17)},set:function(e){e?this.Ff=Li(this.Ff,17):this.Ff=Ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(e){e?this.Ff=Li(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(o){return o};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+Zu(e(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(e){Tn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};la(rr,Ps);var Vd=function(){rr.call(this),this.pushButton=!0};la(Vd,rr);var sf=function(){rr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};la(sf,rr);var cp=function(){var n,t;Ps.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),i)u.push("/"+o+" ("+Zu(a(i[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Tn(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(a){e="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=le.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};la(cp,Ps),sf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},sf.prototype.createOption=function(n){var t=new cp;return t.Parent=this,t.optionName=n,this.Kids.push(t),YB.call(this.scope,t),t};var Gd=function(){rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=le.CheckBox.createAppearanceStream()};la(Gd,rr);var Bu=function(){Ps.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,13)},set:function(t){t?this.Ff=Li(this.Ff,13):this.Ff=Ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,21)},set:function(t){t?this.Ff=Li(this.Ff,21):this.Ff=Ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(t){t?this.Ff=Li(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,24)},set:function(t){t?this.Ff=Li(this.Ff,24):this.Ff=Ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,25)},set:function(t){t?this.Ff=Li(this.Ff,25):this.Ff=Ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(t){t?this.Ff=Li(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};la(Bu,Ps);var Yd=function(){Bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,14)},set:function(n){n?this.Ff=Li(this.Ff,14):this.Ff=Ri(this.Ff,14)}}),this.password=!0};la(Yd,Bu);var le={CheckBox:{createAppearanceStream:function(){return{N:{On:le.CheckBox.YesNormal},D:{On:le.CheckBox.YesPushDown,Off:le.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=io(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=ag(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+qe(le.internal.getWidth(n))+" "+qe(le.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+qe(o.fontSize)+" Tf "+a),e.push("BT"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=io(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=[],o=le.internal.getHeight(n),u=le.internal.getWidth(n),c=ag(n,n.caption);return a.push("1 g"),a.push("0 0 "+qe(u)+" "+qe(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+qe(u-1)+" "+qe(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+e+" "+qe(c.fontSize)+" Tf "+i),a.push(c.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(n){var t=io(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qe(le.internal.getWidth(n))+" "+qe(le.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:le.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=le.RadioButton.Circle.YesNormal,t.D[n]=le.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=io(n);t.scope=n.scope;var e=[],i=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=le.internal.Bezier_C,o=Number((i*a).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Ul(le.internal.getWidth(n)/2)+" "+Ul(le.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=io(n);t.scope=n.scope;var e=[],i=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*le.internal.Bezier_C).toFixed(5)),u=Number((i*le.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Ul(le.internal.getWidth(n)/2)+" "+Ul(le.internal.getHeight(n)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),e.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),e.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),e.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Ul(le.internal.getWidth(n)/2)+" "+Ul(le.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),e.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),e.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),e.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=io(n);t.scope=n.scope;var e=[],i=le.internal.getWidth(n)<=le.internal.getHeight(n)?le.internal.getWidth(n)/4:le.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*le.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Ul(le.internal.getWidth(n)/2)+" "+Ul(le.internal.getHeight(n)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),e.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),e.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),e.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:le.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=le.RadioButton.Cross.YesNormal,t.D[n]=le.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=io(n);t.scope=n.scope;var e=[],i=le.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+qe(le.internal.getWidth(n)-2)+" "+qe(le.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(qe(i.x1.x)+" "+qe(i.x1.y)+" m"),e.push(qe(i.x2.x)+" "+qe(i.x2.y)+" l"),e.push(qe(i.x4.x)+" "+qe(i.x4.y)+" m"),e.push(qe(i.x3.x)+" "+qe(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=io(n);t.scope=n.scope;var e=le.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+qe(le.internal.getWidth(n))+" "+qe(le.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+qe(le.internal.getWidth(n)-2)+" "+qe(le.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(qe(e.x1.x)+" "+qe(e.x1.y)+" m"),i.push(qe(e.x2.x)+" "+qe(e.x2.y)+" l"),i.push(qe(e.x4.x)+" "+qe(e.x4.y)+" m"),i.push(qe(e.x3.x)+" "+qe(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=io(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qe(le.internal.getWidth(n))+" "+qe(le.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};le.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=le.internal.getWidth(n),e=le.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},le.internal.getWidth=function(n){var t=0;return Tn(n)==="object"&&(t=r5(n.Rect[2])),t},le.internal.getHeight=function(n){var t=0;return Tn(n)==="object"&&(t=r5(n.Rect[3])),t};var YB=Si.addField=function(n){if(GB(this,n),!(n instanceof Ps))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Si.AcroFormChoiceField=nf,Si.AcroFormListBox=rf,Si.AcroFormComboBox=af,Si.AcroFormEditBox=Wd,Si.AcroFormButton=rr,Si.AcroFormPushButton=Vd,Si.AcroFormRadioButton=sf,Si.AcroFormCheckBox=Gd,Si.AcroFormTextField=Bu,Si.AcroFormPasswordField=Yd,Si.AcroFormAppearance=le,Si.AcroForm={ChoiceField:nf,ListBox:rf,ComboBox:af,EditBox:Wd,Button:rr,PushButton:Vd,RadioButton:sf,CheckBox:Gd,TextField:Bu,PasswordField:Yd,Appearance:le},me.AcroForm={ChoiceField:nf,ListBox:rf,ComboBox:af,EditBox:Wd,Button:rr,PushButton:Vd,RadioButton:sf,CheckBox:Gd,TextField:Bu,PasswordField:Yd,Appearance:le};me.AcroForm;function cw(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){var t="addImage_";n.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(E,B){var tt,et,ht,X,lt,st=e;if((B=B||e)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(ct(E))for(lt in i)for(ht=i[lt],tt=0;tt<ht.length;tt+=1){for(X=!0,et=0;et<ht[tt].length;et+=1)if(ht[tt][et]!==void 0&&ht[tt][et]!==E[et]){X=!1;break}if(X===!0){st=lt;break}}else for(lt in i)for(ht=i[lt],tt=0;tt<ht.length;tt+=1){for(X=!0,et=0;et<ht[tt].length;et+=1)if(ht[tt][et]!==void 0&&ht[tt][et]!==E.charCodeAt(et)){X=!1;break}if(X===!0){st=lt;break}}return st===e&&B!==e&&(st=B),st},o=function E(B){for(var tt=this.internal.write,et=this.internal.putStream,ht=(0,this.internal.getFilters)();ht.indexOf("FlateEncode")!==-1;)ht.splice(ht.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:B.width}),X.push({key:"Height",value:B.height}),B.colorSpace===_.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===_.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var lt="",st=0,vt=B.transparency.length;st<vt;st++)lt+=B.transparency[st]+" "+B.transparency[st]+" ";X.push({key:"Mask",value:"["+lt+"]"})}B.sMask!==void 0&&X.push({key:"SMask",value:B.objectId+1+" 0 R"});var Et=B.filter!==void 0?["/"+B.filter]:void 0;if(et({data:B.data,additionalKeyValues:X,alreadyAppliedFilters:Et,objectId:B.objectId}),tt("endobj"),"sMask"in B&&B.sMask!==void 0){var q,T=(q=B.sMaskBitsPerComponent)!==null&&q!==void 0?q:B.bitsPerComponent,j={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:T,data:B.sMask};"filter"in B&&(j.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(T," /Columns ").concat(B.width),j.filter=B.filter),E.call(this,j)}if(B.colorSpace===_.INDEXED){var V=this.internal.newObject();et({data:nt(new Uint8Array(B.palette)),objectId:V}),tt("endobj")}},u=function(){var E=this.internal.collections[t+"images"];for(var B in E)o.call(this,E[B])},c=function(){var E,B=this.internal.collections[t+"images"],tt=this.internal.write;for(var et in B)tt("/I"+(E=B[et]).index,E.objectId,"0","R")},f=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var E=this.internal.collections[t+"images"];return f.call(this),E},p=function(){return Object.keys(this.internal.collections[t+"images"]).length},m=function(E){return typeof n["process"+E.toUpperCase()]=="function"},v=function(E){return Tn(E)==="object"&&E.nodeType===1},y=function(E,B){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var tt=""+E.getAttribute("src");if(tt.indexOf("data:image/")===0)return qd(unescape(tt).split("base64,").pop());var et=n.loadFile(tt,!0);if(et!==void 0)return et}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var ht;switch(B){case"PNG":ht="image/png";break;case"WEBP":ht="image/webp";break;default:ht="image/jpeg"}return qd(E.toDataURL(ht,1).split("base64,").pop())}},S=function(E){var B=this.internal.collections[t+"images"];if(B){for(var tt in B)if(E===B[tt].alias)return B[tt]}},N=function(E,B,tt){return E||B||(E=-96,B=-96),E<0&&(E=-1*tt.width*72/E/this.internal.scaleFactor),B<0&&(B=-1*tt.height*72/B/this.internal.scaleFactor),E===0&&(E=B*tt.width/tt.height),B===0&&(B=E*tt.height/tt.width),[E,B]},A=function(E,B,tt,et,ht,X){var lt=N.call(this,tt,et,ht),st=this.internal.getCoordinateString,vt=this.internal.getVerticalCoordinateString,Et=h.call(this);if(tt=lt[0],et=lt[1],Et[ht.index]=ht,X){X*=Math.PI/180;var q=Math.cos(X),T=Math.sin(X),j=function(rt){return rt.toFixed(4)},V=[j(q),j(T),j(-1*T),j(q),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,st(E),vt(B+et),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([st(tt),"0","0",st(et),"0","0","cm"].join(" "))):this.internal.write([st(tt),"0","0",st(et),st(E),vt(B+et),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ht.index+" Do"),this.internal.write("Q")},_=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(E){var B,tt,et=0;if(typeof E=="string")for(tt=E.length,B=0;B<tt;B++)et=(et<<5)-et+E.charCodeAt(B),et|=0;else if(ct(E))for(tt=E.byteLength/2,B=0;B<tt;B++)et=(et<<5)-et+E[B],et|=0;return et},M=n.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var B=!0;return E.length===0&&(B=!1),E.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(B=!1),B},Y=n.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var B=E.indexOf(",");return B<0?null:E.substring(0,B).trim().endsWith("base64")?E.substring(B+1):null};n.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var ct=n.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},it=n.__addimage__.binaryStringToUint8Array=function(E){for(var B=E.length,tt=new Uint8Array(B),et=0;et<B;et++)tt[et]=E.charCodeAt(et);return tt},nt=n.__addimage__.arrayBufferToBinaryString=function(E){for(var B="",tt=ct(E)?E:new Uint8Array(E),et=0;et<tt.length;et+=8192)B+=String.fromCharCode.apply(null,tt.subarray(et,et+8192));return B};n.addImage=function(){var E,B,tt,et,ht,X,lt,st,vt;if(typeof arguments[1]=="number"?(B=e,tt=arguments[1],et=arguments[2],ht=arguments[3],X=arguments[4],lt=arguments[5],st=arguments[6],vt=arguments[7]):(B=arguments[1],tt=arguments[2],et=arguments[3],ht=arguments[4],X=arguments[5],lt=arguments[6],st=arguments[7],vt=arguments[8]),Tn(E=arguments[0])==="object"&&!v(E)&&"imageData"in E){var Et=E;E=Et.imageData,B=Et.format||B||e,tt=Et.x||tt||0,et=Et.y||et||0,ht=Et.w||Et.width||ht,X=Et.h||Et.height||X,lt=Et.alias||lt,st=Et.compression||st,vt=Et.rotation||Et.angle||vt}var q=this.internal.getFilters();if(st===void 0&&q.indexOf("FlateEncode")!==-1&&(st="SLOW"),isNaN(tt)||isNaN(et))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var T=F.call(this,E,B,lt,st);return A.call(this,tt,et,ht,X,T,vt),this};var F=function(E,B,tt,et){var ht,X,lt;if(typeof E=="string"&&a(E)===e){E=unescape(E);var st=G(E,!1);(st!==""||(st=n.loadFile(E,!0))!==void 0)&&(E=st)}if(v(E)&&(E=y(E,B)),B=a(E,B),!m(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((lt=tt)==null||lt.length===0)&&(tt=(function(vt){return typeof vt=="string"||ct(vt)?D(vt):ct(vt.data)?D(vt.data):null})(E)),(ht=S.call(this,tt))||(E instanceof Uint8Array||B==="RGBA"||(X=E,E=it(E)),ht=this["process"+B.toUpperCase()](E,p.call(this),tt,(function(vt){return vt&&typeof vt=="string"&&(vt=vt.toUpperCase()),vt in n.image_compression?vt:I.NONE})(et),X)),!ht)throw new Error("An unknown error occurred whilst processing the image.");return ht},G=n.__addimage__.convertBase64ToBinaryString=function(E,B){B=typeof B!="boolean"||B;var tt,et="";if(typeof E=="string"){var ht;tt=(ht=Y(E))!==null&&ht!==void 0?ht:E;try{et=qd(tt)}catch(X){if(B)throw M(tt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};n.getImageProperties=function(E){var B,tt,et="";if(v(E)&&(E=y(E)),typeof E=="string"&&a(E)===e&&((et=G(E,!1))===""&&(et=n.loadFile(E)||""),E=et),tt=a(E),!m(tt))throw new Error("addImage does not support files of type '"+tt+"', please ensure that a plugin for '"+tt+"' support is added.");if(E instanceof Uint8Array||(E=it(E)),!(B=this["process"+tt.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=tt,B}})(me.API),(function(n){var t=function(e){if(e!==void 0&&e!="")return!0};me.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(e.objId),h=e.pageContext.annotations,p=!1,m=0;m<h.length&&!p;m++)switch((i=h[m]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){i=h[v];var y=this.internal.pdfEscape,S=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(N.objId),I=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+y(_(i.contents))+")",o+=" /Popup "+A.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(_(I))+") >>",N.content=o;var D=N.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(o+=" /Open true"),o+=" >>",A.content=o,this.internal.write(N.objId,"0 R",A.objId,"0 R");break;case"freetext":a="/Rect ["+u(i.bounds.x)+" "+c(i.bounds.y)+" "+u(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var M=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(S(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var Y=this.annotations._nameMap[i.options.name];i.options.pageNumber=Y.page,i.options.top=Y.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(S(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;default:var ct=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+ct+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(e),y:h(i),w:f(e+a),h:h(i+o)},options:u,type:"link"})},n.textWithLink=function(e,i,a,o){var u,c,f=this.getTextWidth(e),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(e,c).length;u=Math.ceil(h*p)}else c=f,u=h;return this.text(e,i,a,o),a+=.2*h,o.align==="center"&&(i-=f/2),o.align==="right"&&(i-=f),this.link(i,a-h,c,u,o),f},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}})(me.API),(function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=n.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&o(N)&&t[N.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&a.indexOf(N.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&o(N)&&t[N.charCodeAt(0)].length>=1};var h=n.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&o(N)&&t[N.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&o(N)&&t[N.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&o(N)&&t[N.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(N){var A=0,_=e,I="",D=0;for(A=0;A<N.length;A+=1)_[N.charCodeAt(A)]!==void 0?(D++,typeof(_=_[N.charCodeAt(A)])=="number"&&(I+=String.fromCharCode(_),_=e,D=0),A===N.length-1&&(_=e,I+=N.charAt(A-(D-1)),A-=D-1,D=0)):(_=e,I+=N.charAt(A-D),A-=D,D=0);return I};n.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&i[N.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(N,A,_){return u(N)?o(N)===!1?-1:!h(N)||!u(A)&&!u(_)||!u(_)&&c(A)||c(N)&&!u(A)||c(N)&&f(A)||c(N)&&c(A)?0:p(N)&&u(A)&&!c(A)&&u(_)&&h(_)?3:c(N)||!u(_)?1:2:-1},y=function(N){var A=0,_=0,I=0,D="",M="",Y="",ct=(N=N||"").split("\\s+"),it=[];for(A=0;A<ct.length;A+=1){for(it.push(""),_=0;_<ct[A].length;_+=1)D=ct[A][_],M=ct[A][_-1],Y=ct[A][_+1],u(D)?(I=v(D,M,Y),it[A]+=I!==-1?String.fromCharCode(t[D.charCodeAt(0)][I]):D):it[A]+=D;it[A]=m(it[A])}return it.join(" ")},S=n.__arabicParser__.processArabic=n.processArabic=function(){var N,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(A)){var I=0;for(_=[],I=0;I<A.length;I+=1)Array.isArray(A[I])?_.push([y(A[I][0]),A[I][1],A[I][2]]):_.push([y(A[I])]);N=_}else N=y(A);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};n.events.push(["preProcessText",S])})(me.API),me.API.autoPrint=function(n){var t;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(c){e=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var a;if((e=e||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(me.API),(function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(N){v=N}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(N){S=N}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return i.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,h){i.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,y=0,S=0,N=0,A=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var _=h.maxWidth;_>0?typeof f=="string"?f=this.splitTextToSize(f,_):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(D,M){return D.concat(A.splitTextToSize(M,_))},[])):f=Array.isArray(f)?f:[f];for(var I=0;I<f.length;I++)y<(N=this.getStringUnitWidth(f[I],{font:m})*p)&&(y=N);return y!==0&&(S=f.length),{w:y/=v,h:Math.max((S*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===f.lineNumber?(f.x=(h.x||0)+(h.width||0),f.y=h.y||0):h.y+h.height+f.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=m.top,y&&v&&(this.printHeaderRow(f.lineNumber,!0),f.y+=v[0].height)):f.y=h.y+h.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,e===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-p,f.y+p,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+p,{align:"center",baseline:"top",maxWidth:f.width-p-p}):this.text(f.text,f.x+p,f.y+p,{align:"left",baseline:"top",maxWidth:f.width-p-p})),this.internal.__cell__.lastCell=f,this};n.table=function(f,h,p,m,v){if(i.call(this),!p)throw new Error("No data for PDF table.");var y,S,N,A,_=[],I=[],D=[],M={},Y={},ct=[],it=[],nt=(v=v||{}).autoSize||!1,F=v.printHeaders!==!1,G=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,E=v.margins||Object.assign({width:this.getPageWidth()},t),B=typeof v.padding=="number"?v.padding:3,tt=v.headerBackgroundColor||"#c8c8c8",et=v.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=tt,this.internal.__cell__.headerTextColor=et,this.setFontSize(G),m==null)I=_=Object.keys(p[0]),D=_.map(function(){return"left"});else if(Array.isArray(m)&&Tn(m[0])==="object")for(_=m.map(function(Et){return Et.name}),I=m.map(function(Et){return Et.prompt||Et.name||""}),D=m.map(function(Et){return Et.align||"left"}),y=0;y<m.length;y+=1)Y[m[y].name]=.7499990551181103*m[y].width;else Array.isArray(m)&&typeof m[0]=="string"&&(I=_=m,D=_.map(function(){return"left"}));if(nt||Array.isArray(m)&&typeof m[0]=="string")for(y=0;y<_.length;y+=1){for(M[A=_[y]]=p.map(function(Et){return Et[A]}),this.setFont(void 0,"bold"),ct.push(this.getTextDimensions(I[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=M[A],this.setFont(void 0,"normal"),N=0;N<S.length;N+=1)ct.push(this.getTextDimensions(S[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[A]=Math.max.apply(null,ct)+B+B,ct=[]}if(F){var ht={};for(y=0;y<_.length;y+=1)ht[_[y]]={},ht[_[y]].text=I[y],ht[_[y]].align=D[y];var X=c.call(this,ht,Y);it=_.map(function(Et){return new o(f,h,Y[Et],X,ht[Et].text,void 0,ht[Et].align)}),this.setTableHeaderRow(it),this.printHeaderRow(1,!1)}var lt=m.reduce(function(Et,q){return Et[q.name]=q.align,Et},{});for(y=0;y<p.length;y+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:y,data:p[y]},this);var st=c.call(this,p[y],Y);for(N=0;N<_.length;N+=1){var vt=p[y][_[N]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:y,col:N,data:vt},this),u.call(this,new o(f,h,Y[_[N]],st,vt,y+2,lt[_[N]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=h,this};var c=function(f,h){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(f).map(function(y){var S=f[y];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,h[y]-p-p)},this).map(function(y){return this.getLineHeightFactor()*y.length*m/v+p+p},this).reduce(function(y,S){return Math.max(y,S)},0)};n.setTableHeaderRow=function(f){i.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){p=this.internal.__cell__.tableHeaderRow[y].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,v.push(p)),p.lineNumber=f;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}})(me.API);var fw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],sg=cw(hw),dw=[100,200,300,400,500,600,700,800,900],XB=cw(dw);function x1(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=(function(o){return fw[o=o||"normal"]?o:"normal"})(n.style),i=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof sg[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:t,style:e,weight:i,stretch:a,src:n.src||[],ref:n.ref||{name:t,style:[a,e,i].join(" ")}}}function a5(n,t,e,i){var a;for(a=e;a>=0&&a<t.length;a+=i)if(n[t[a]])return n[t[a]];for(a=e;a>=0&&a<t.length;a-=i)if(n[t[a]])return n[t[a]]}var KB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function l5(n){return n.trimLeft()}function QB(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function ZB(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Od,u5,c5,Gc,Fd,f5,h5,d5,S1=["times"];function p5(n,t,e,i,a){var o=4,u=g5;switch(a){case me.API.image_compression.FAST:o=1,u=m5;break;case me.API.image_compression.MEDIUM:o=6,u=y5;break;case me.API.image_compression.SLOW:o=9,u=v5}n=(function(f,h,p,m){for(var v,y=f.length/h,S=new Uint8Array(f.length+y),N=[JB,m5,g5,y5,v5],A=0;A<y;A+=1){var _=A*h,I=f.subarray(_,_+h);if(m)S.set(m(I,p,v),_+A);else{for(var D=N.length,M=[],Y=0;Y<D;Y+=1)M[Y]=N[Y](I,p,v);var ct=ez(M.concat());S.set(M[ct],_+A)}v=I}return S})(n,t,Math.ceil(e*i/8),u);var c=J1(n,{level:o});return me.API.__addimage__.arrayBufferToBinaryString(c)}function JB(n){var t=Array.apply([],n);return t.unshift(0),t}function m5(n,t){var e=n.length,i=[];i[0]=1;for(var a=0;a<e;a+=1){var o=n[a-t]||0;i[a+1]=n[a]-o+256&255}return i}function g5(n,t,e){var i=n.length,a=[];a[0]=2;for(var o=0;o<i;o+=1){var u=e&&e[o]||0;a[o+1]=n[o]-u+256&255}return a}function y5(n,t,e){var i=n.length,a=[];a[0]=3;for(var o=0;o<i;o+=1){var u=n[o-t]||0,c=e&&e[o]||0;a[o+1]=n[o]+256-(u+c>>>1)&255}return a}function v5(n,t,e){var i=n.length,a=[];a[0]=4;for(var o=0;o<i;o+=1){var u=tz(n[o-t]||0,e&&e[o]||0,e&&e[o-t]||0);a[o+1]=n[o]-u+256&255}return a}function tz(n,t,e){if(n===t&&t===e)return n;var i=Math.abs(t-e),a=Math.abs(n-e),o=Math.abs(n+t-e-e);return i<=a&&i<=o?n:a<=o?t:e}function ez(n){var t=n.map(function(e){return e.reduce(function(i,a){return i+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function C1(n,t,e){var i=t*e,a=Math.floor(i/8),o=16-(i-8*a+e),u=(1<<e)-1;return pw(n,a)>>o&u}function b5(n,t,e,i){var a=e*i,o=Math.floor(a/8),u=16-(a-8*o+i),c=(1<<i)-1,f=(t&c)<<u;(function(h,p,m){if(p+1<h.byteLength)h.setUint16(p,m,!1);else{var v=m>>8&255;h.setUint8(p,v)}})(n,o,pw(n,o)&~(c<<u)&65535|f)}function pw(n,t){return t+1<n.byteLength?n.getUint16(t,!1):n.getUint8(t)<<8}function nz(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,a=n[t++],o=a>>7,u=1<<1+(7&a);n[t++],n[t++];var c=null,f=null;o&&(c=t,f=u,t+=3*u);var h=!0,p=[],m=0,v=null,y=0,S=null;for(this.width=e,this.height=i;h&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,S=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=n[t++];m=n[t++]|n[t++]<<8,v=n[t++],1&N||(v=null),y=N>>2&7,t++;break;case 254:for(;;){if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var A=n[t++]|n[t++]<<8,_=n[t++]|n[t++]<<8,I=n[t++]|n[t++]<<8,D=n[t++]|n[t++]<<8,M=n[t++],Y=M>>6&1,ct=1<<1+(7&M),it=c,nt=f,F=!1;M>>7&&(F=!0,it=t,nt=ct,t+=3*ct);var G=t;for(t++;;){var E;if(!((E=n[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}p.push({x:A,y:_,width:I,height:D,has_local_palette:F,palette_offset:it,palette_size:nt,data_offset:G,data_length:t-G,transparent_index:v,interlaced:!!Y,delay:m,disposal:y});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return S},this.frameInfo=function(B){if(B<0||B>=p.length)throw new Error("Frame index out of range.");return p[B]},this.decodeAndBlitFrameBGRA=function(B,tt){var et=this.frameInfo(B),ht=et.width*et.height,X=new Uint8Array(ht);w5(n,et.data_offset,X,ht);var lt=et.palette_offset,st=et.transparent_index;st===null&&(st=256);var vt=et.width,Et=e-vt,q=vt,T=4*(et.y*e+et.x),j=4*((et.y+et.height)*e+et.x),V=T,rt=4*Et;et.interlaced===!0&&(rt+=4*e*7);for(var ot=8,mt=0,kt=X.length;mt<kt;++mt){var At=X[mt];if(q===0&&(q=vt,(V+=rt)>=j&&(rt=4*Et+4*e*(ot-1),V=T+(vt+Et)*(ot<<1),ot>>=1)),At===st)V+=4;else{var Mt=n[lt+3*At],Ht=n[lt+3*At+1],Kt=n[lt+3*At+2];tt[V++]=Kt,tt[V++]=Ht,tt[V++]=Mt,tt[V++]=255}--q}},this.decodeAndBlitFrameRGBA=function(B,tt){var et=this.frameInfo(B),ht=et.width*et.height,X=new Uint8Array(ht);w5(n,et.data_offset,X,ht);var lt=et.palette_offset,st=et.transparent_index;st===null&&(st=256);var vt=et.width,Et=e-vt,q=vt,T=4*(et.y*e+et.x),j=4*((et.y+et.height)*e+et.x),V=T,rt=4*Et;et.interlaced===!0&&(rt+=4*e*7);for(var ot=8,mt=0,kt=X.length;mt<kt;++mt){var At=X[mt];if(q===0&&(q=vt,(V+=rt)>=j&&(rt=4*Et+4*e*(ot-1),V=T+(vt+Et)*(ot<<1),ot>>=1)),At===st)V+=4;else{var Mt=n[lt+3*At],Ht=n[lt+3*At+1],Kt=n[lt+3*At+2];tt[V++]=Mt,tt[V++]=Ht,tt[V++]=Kt,tt[V++]=255}--q}}}function w5(n,t,e,i){for(var a=n[t++],o=1<<a,u=o+1,c=u+1,f=a+1,h=(1<<f)-1,p=0,m=0,v=0,y=n[t++],S=new Int32Array(4096),N=null;;){for(;p<16&&y!==0;)m|=n[t++]<<p,p+=8,y===1?y=n[t++]:--y;if(p<f)break;var A=m&h;if(m>>=f,p-=f,A!==o){if(A===u)break;for(var _=A<c?A:N,I=0,D=_;D>o;)D=S[D]>>8,++I;var M=D;if(v+I+(_!==A?1:0)>i)return void Hn.log("Warning, gif stream longer than expected.");e[v++]=M;var Y=v+=I;for(_!==A&&(e[v++]=M),D=_;I--;)D=S[D],e[--Y]=255&D,D>>=8;N!==null&&c<4096&&(S[c++]=N<<8|M,c>=h+1&&f<12&&(++f,h=h<<1|1)),N=A}else c=u+1,h=(1<<(f=a+1))-1,N=null}return v!==i&&Hn.log("Warning, gif stream shorter than expected."),e}function A1(n){var t,e,i,a,o,u=Math.floor,c=new Array(64),f=new Array(64),h=new Array(64),p=new Array(64),m=new Array(65535),v=new Array(65535),y=new Array(64),S=new Array(64),N=[],A=0,_=7,I=new Array(64),D=new Array(64),M=new Array(64),Y=new Array(256),ct=new Array(2048),it=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],nt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],tt=[0,1,2,3,4,5,6,7,8,9,10,11],et=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ht=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(T,j){for(var V=0,rt=0,ot=new Array,mt=1;mt<=16;mt++){for(var kt=1;kt<=T[mt];kt++)ot[j[rt]]=[],ot[j[rt]][0]=V,ot[j[rt]][1]=mt,rt++,V++;V*=2}return ot}function lt(T){for(var j=T[0],V=T[1]-1;V>=0;)j&1<<V&&(A|=1<<_),V--,--_<0&&(A==255?(st(255),st(0)):st(A),_=7,A=0)}function st(T){N.push(T)}function vt(T){st(T>>8&255),st(255&T)}function Et(T,j,V,rt,ot){for(var mt,kt=ot[0],At=ot[240],Mt=(function($t,be){var ne,Ae,ge,Ue,Je,Be,tn,Xe,ce,ze,de=0;for(ce=0;ce<8;++ce){ne=$t[de],Ae=$t[de+1],ge=$t[de+2],Ue=$t[de+3],Je=$t[de+4],Be=$t[de+5],tn=$t[de+6];var si=ne+(Xe=$t[de+7]),Ze=ne-Xe,Ne=Ae+tn,Te=Ae-tn,en=ge+Be,we=ge-Be,Dn=Ue+Je,Ee=Ue-Je,De=si+Dn,_n=si-Dn,We=Ne+en,pe=Ne-en;$t[de]=De+We,$t[de+4]=De-We;var un=.707106781*(pe+_n);$t[de+2]=_n+un,$t[de+6]=_n-un;var ua=.382683433*((De=Ee+we)-(pe=Te+Ze)),Ki=.5411961*De+ua,Ia=1.306562965*pe+ua,$r=.707106781*(We=we+Te),ye=Ze+$r,ns=Ze-$r;$t[de+5]=ns+Ki,$t[de+3]=ns-Ki,$t[de+1]=ye+Ia,$t[de+7]=ye-Ia,de+=8}for(de=0,ce=0;ce<8;++ce){ne=$t[de],Ae=$t[de+8],ge=$t[de+16],Ue=$t[de+24],Je=$t[de+32],Be=$t[de+40],tn=$t[de+48];var Ta=ne+(Xe=$t[de+56]),_r=ne-Xe,kr=Ae+tn,Wn=Ae-tn,di=ge+Be,Ii=ge-Be,Os=Ue+Je,sr=Ue-Je,kn=Ta+Os,Vn=Ta-Os,Qi=kr+di,Er=kr-di;$t[de]=kn+Qi,$t[de+32]=kn-Qi;var jr=.707106781*(Er+Vn);$t[de+16]=Vn+jr,$t[de+48]=Vn-jr;var go=.382683433*((kn=sr+Ii)-(Er=Wn+_r)),ca=.5411961*kn+go,fa=1.306562965*Er+go,Fs=.707106781*(Qi=Ii+Wn),ha=_r+Fs,da=_r-Fs;$t[de+40]=da+ca,$t[de+24]=da-ca,$t[de+8]=ha+fa,$t[de+56]=ha-fa,de++}for(ce=0;ce<64;++ce)ze=$t[ce]*be[ce],y[ce]=ze>0?ze+.5|0:ze-.5|0;return y})(T,j),Ht=0;Ht<64;++Ht)S[it[Ht]]=Mt[Ht];var Kt=S[0]-V;V=S[0],Kt==0?lt(rt[0]):(lt(rt[v[mt=32767+Kt]]),lt(m[mt]));for(var Qt=63;Qt>0&&S[Qt]==0;)Qt--;if(Qt==0)return lt(kt),V;for(var ue,K=1;K<=Qt;){for(var Yt=K;S[K]==0&&K<=Qt;)++K;var Ge=K-Yt;if(Ge>=16){ue=Ge>>4;for(var Ce=1;Ce<=ue;++Ce)lt(At);Ge&=15}mt=32767+S[K],lt(ot[(Ge<<4)+v[mt]]),lt(m[mt]),K++}return Qt!=63&&lt(kt),V}function q(T){T=Math.min(Math.max(T,1),100),o!=T&&((function(j){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],rt=0;rt<64;rt++){var ot=u((V[rt]*j+50)/100);ot=Math.min(Math.max(ot,1),255),c[it[rt]]=ot}for(var mt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],kt=0;kt<64;kt++){var At=u((mt[kt]*j+50)/100);At=Math.min(Math.max(At,1),255),f[it[kt]]=At}for(var Mt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ht=0,Kt=0;Kt<8;Kt++)for(var Qt=0;Qt<8;Qt++)h[Ht]=1/(c[it[Ht]]*Mt[Kt]*Mt[Qt]*8),p[Ht]=1/(f[it[Ht]]*Mt[Kt]*Mt[Qt]*8),Ht++})(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),o=T)}this.encode=function(T,j){j&&q(j),N=new Array,A=0,_=7,vt(65496),vt(65504),vt(16),st(74),st(70),st(73),st(70),st(0),st(1),st(1),st(0),vt(1),vt(1),st(0),st(0),(function(){vt(65499),vt(132),st(0);for(var Ae=0;Ae<64;Ae++)st(c[Ae]);st(1);for(var ge=0;ge<64;ge++)st(f[ge])})(),(function(Ae,ge){vt(65472),vt(17),st(8),vt(ge),vt(Ae),st(3),st(1),st(17),st(0),st(2),st(17),st(1),st(3),st(17),st(1)})(T.width,T.height),(function(){vt(65476),vt(418),st(0);for(var Ae=0;Ae<16;Ae++)st(nt[Ae+1]);for(var ge=0;ge<=11;ge++)st(F[ge]);st(16);for(var Ue=0;Ue<16;Ue++)st(G[Ue+1]);for(var Je=0;Je<=161;Je++)st(E[Je]);st(1);for(var Be=0;Be<16;Be++)st(B[Be+1]);for(var tn=0;tn<=11;tn++)st(tt[tn]);st(17);for(var Xe=0;Xe<16;Xe++)st(et[Xe+1]);for(var ce=0;ce<=161;ce++)st(ht[ce])})(),vt(65498),vt(12),st(3),st(1),st(0),st(2),st(17),st(3),st(17),st(0),st(63),st(0);var V=0,rt=0,ot=0;A=0,_=7,this.encode.displayName="_encode_";for(var mt,kt,At,Mt,Ht,Kt,Qt,ue,K,Yt=T.data,Ge=T.width,Ce=T.height,$t=4*Ge,be=0;be<Ce;){for(mt=0;mt<$t;){for(Ht=$t*be+mt,Qt=-1,ue=0,K=0;K<64;K++)Kt=Ht+(ue=K>>3)*$t+(Qt=4*(7&K)),be+ue>=Ce&&(Kt-=$t*(be+1+ue-Ce)),mt+Qt>=$t&&(Kt-=mt+Qt-$t+4),kt=Yt[Kt++],At=Yt[Kt++],Mt=Yt[Kt++],I[K]=(ct[kt]+ct[At+256|0]+ct[Mt+512|0]>>16)-128,D[K]=(ct[kt+768|0]+ct[At+1024|0]+ct[Mt+1280|0]>>16)-128,M[K]=(ct[kt+1280|0]+ct[At+1536|0]+ct[Mt+1792|0]>>16)-128;V=Et(I,h,V,t,i),rt=Et(D,p,rt,e,a),ot=Et(M,p,ot,e,a),mt+=32}be+=8}if(_>=0){var ne=[];ne[1]=_+1,ne[0]=(1<<_+1)-1,lt(ne)}return vt(65497),new Uint8Array(N)},n=n||50,(function(){for(var T=String.fromCharCode,j=0;j<256;j++)Y[j]=T(j)})(),t=X(nt,F),e=X(B,tt),i=X(G,E),a=X(et,ht),(function(){for(var T=1,j=2,V=1;V<=15;V++){for(var rt=T;rt<j;rt++)v[32767+rt]=V,m[32767+rt]=[],m[32767+rt][1]=V,m[32767+rt][0]=rt;for(var ot=-(j-1);ot<=-T;ot++)v[32767+ot]=V,m[32767+ot]=[],m[32767+ot][1]=V,m[32767+ot][0]=j-1+ot;T<<=1,j<<=1}})(),(function(){for(var T=0;T<256;T++)ct[T]=19595*T,ct[T+256|0]=38470*T,ct[T+512|0]=7471*T+32768,ct[T+768|0]=-11059*T,ct[T+1024|0]=-21709*T,ct[T+1280|0]=32768*T+8421375,ct[T+1536|0]=-27439*T,ct[T+1792|0]=-5329*T})(),q(n)}function Rs(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function x5(n){function t(F){if(!F)throw Error("assert :P")}function e(F,G,E){for(var B=0;4>B;B++)if(F[G+B]!=E.charCodeAt(B))return!0;return!1}function i(F,G,E,B,tt){for(var et=0;et<tt;et++)F[G+et]=E[B+et]}function a(F,G,E,B){for(var tt=0;tt<B;tt++)F[G+tt]=E}function o(F){return new Int32Array(F)}function u(F,G){for(var E=[],B=0;B<F;B++)E.push(new G);return E}function c(F,G){var E=[];return(function B(tt,et,ht){for(var X=ht[et],lt=0;lt<X&&(tt.push(ht.length>et+1?[]:new G),!(ht.length<et+1));lt++)B(tt[lt],et+1,ht)})(E,0,F),E}var f=function(){var F=this;function G(g,w){for(var k=1<<w-1>>>0;g&k;)k>>>=1;return k?(g&k-1)+k:g}function E(g,w,k,L,O){t(!(L%k));do g[w+(L-=k)]=O;while(0<L)}function B(g,w,k,L,O){if(t(2328>=O),512>=O)var z=o(512);else if((z=o(O))==null)return 0;return(function(U,H,W,Z,ft,xt){var Q,pt,bt=H,It=1<<W,wt=o(16),Rt=o(16);for(t(ft!=0),t(Z!=null),t(U!=null),t(0<W),pt=0;pt<ft;++pt){if(15<Z[pt])return 0;++wt[Z[pt]]}if(wt[0]==ft)return 0;for(Rt[1]=0,Q=1;15>Q;++Q){if(wt[Q]>1<<Q)return 0;Rt[Q+1]=Rt[Q]+wt[Q]}for(pt=0;pt<ft;++pt)Q=Z[pt],0<Z[pt]&&(xt[Rt[Q]++]=pt);if(Rt[15]==1)return(Z=new tt).g=0,Z.value=xt[0],E(U,bt,1,It,Z),It;var Pt,jt=-1,Bt=It-1,oe=0,te=1,Oe=1,ie=1<<W;for(pt=0,Q=1,ft=2;Q<=W;++Q,ft<<=1){if(te+=Oe<<=1,0>(Oe-=wt[Q]))return 0;for(;0<wt[Q];--wt[Q])(Z=new tt).g=Q,Z.value=xt[pt++],E(U,bt+oe,ft,ie,Z),oe=G(oe,Q)}for(Q=W+1,ft=2;15>=Q;++Q,ft<<=1){if(te+=Oe<<=1,0>(Oe-=wt[Q]))return 0;for(;0<wt[Q];--wt[Q]){if(Z=new tt,(oe&Bt)!=jt){for(bt+=ie,Pt=1<<(jt=Q)-W;15>jt&&!(0>=(Pt-=wt[jt]));)++jt,Pt<<=1;It+=ie=1<<(Pt=jt-W),U[H+(jt=oe&Bt)].g=Pt+W,U[H+jt].value=bt-H-jt}Z.g=Q-W,Z.value=xt[pt++],E(U,bt+(oe>>W),ft,ie,Z),oe=G(oe,Q)}}return te!=2*Rt[15]-1?0:It})(g,w,k,L,O,z)}function tt(){this.value=this.g=0}function et(){this.value=this.g=0}function ht(){this.G=u(5,tt),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(js,et)}function X(g,w,k,L){t(g!=null),t(w!=null),t(2147483648>L),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=k,g.Jd=w,g.Yc=k+L,g.Zc=4<=L?k+L-4+1:k,kt(g)}function lt(g,w){for(var k=0;0<w--;)k|=Mt(g,128)<<w;return k}function st(g,w){var k=lt(g,w);return At(g)?-k:k}function vt(g,w,k,L){var O,z=0;for(t(g!=null),t(w!=null),t(4294967288>L),g.Sb=L,g.Ra=0,g.u=0,g.h=0,4<L&&(L=4),O=0;O<L;++O)z+=w[k+O]<<8*O;g.Ra=z,g.bb=L,g.oa=w,g.pa=k}function Et(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<za-8>>>0,++g.bb,g.u-=8;rt(g)&&(g.h=1,g.u=0)}function q(g,w){if(t(0<=w),!g.h&&w<=cr){var k=V(g)&yr[w];return g.u+=w,Et(g),k}return g.h=1,g.u=0}function T(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(g){return g.Ra>>>(g.u&za-1)>>>0}function rt(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>za}function ot(g,w){g.u=w,g.h=rt(g)}function mt(g){g.u>=Ua&&(t(g.u>=Ua),Et(g))}function kt(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function At(g){return lt(g,1)}function Mt(g,w){var k=g.Ca;0>g.b&&kt(g);var L=g.b,O=k*w>>>8,z=(g.I>>>L>O)+0;for(z?(k-=O,g.I-=O+1<<L>>>0):k=O+1,L=k,O=0;256<=L;)O+=8,L>>=8;return L=7^O+ys[L],g.b-=L,g.Ca=(k<<L)-1,z}function Ht(g,w,k){g[w+0]=k>>24&255,g[w+1]=k>>16&255,g[w+2]=k>>8&255,g[w+3]=255&k}function Kt(g,w){return g[w+0]|g[w+1]<<8}function Qt(g,w){return Kt(g,w)|g[w+2]<<16}function ue(g,w){return Kt(g,w)|Kt(g,w+2)<<16}function K(g,w){var k=1<<w;return t(g!=null),t(0<w),g.X=o(k),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function Yt(g,w){t(g!=null),t(w!=null),t(g.Xa==w.Xa),i(w.X,0,g.X,0,1<<w.Xa)}function Ge(){this.X=[],this.Xa=this.Mb=0}function Ce(g,w,k,L){t(k!=null),t(L!=null);var O=k[0],z=L[0];return O==0&&(O=(g*z+w/2)/w),z==0&&(z=(w*O+g/2)/g),0>=O||0>=z?0:(k[0]=O,L[0]=z,1)}function $t(g,w){return g+(1<<w)-1>>>w}function be(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function ne(g,w){F[w]=function(k,L,O,z,U,H,W){var Z;for(Z=0;Z<U;++Z){var ft=F[g](H[W+Z-1],O,z+Z);H[W+Z]=be(k[L+Z],ft)}}}function Ae(){this.ud=this.hd=this.jd=0}function ge(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Ue(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Je(g,w){return Ue(g+(g-w+.5>>1))}function Be(g,w,k){return Math.abs(w-k)-Math.abs(g-k)}function tn(g,w,k,L,O,z,U){for(L=z[U-1],k=0;k<O;++k)z[U+k]=L=be(g[w+k],L)}function Xe(g,w,k,L,O){var z;for(z=0;z<k;++z){var U=g[w+z],H=U>>8&255,W=16711935&(W=(W=16711935&U)+((H<<16)+H));L[O+z]=(4278255360&U)+W>>>0}}function ce(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function ze(g,w,k,L,O,z){var U;for(U=0;U<L;++U){var H=w[k+U],W=H>>>8,Z=H,ft=255&(ft=(ft=H>>>16)+((g.jd<<24>>24)*(W<<24>>24)>>>5));Z=255&(Z=(Z+=(g.hd<<24>>24)*(W<<24>>24)>>>5)+((g.ud<<24>>24)*(ft<<24>>24)>>>5)),O[z+U]=(4278255360&H)+(ft<<16)+Z}}function de(g,w,k,L,O){F[w]=function(z,U,H,W,Z,ft,xt,Q,pt){for(W=xt;W<Q;++W)for(xt=0;xt<pt;++xt)Z[ft++]=O(H[L(z[U++])])},F[g]=function(z,U,H,W,Z,ft,xt){var Q=8>>z.b,pt=z.Ea,bt=z.K[0],It=z.w;if(8>Q)for(z=(1<<z.b)-1,It=(1<<Q)-1;U<H;++U){var wt,Rt=0;for(wt=0;wt<pt;++wt)wt&z||(Rt=L(W[Z++])),ft[xt++]=O(bt[Rt&It]),Rt>>=Q}else F["VP8LMapColor"+k](W,Z,bt,It,ft,xt,U,H,pt)}}function si(g,w,k,L,O){for(k=w+k;w<k;){var z=g[w++];L[O++]=z>>16&255,L[O++]=z>>8&255,L[O++]=255&z}}function Ze(g,w,k,L,O){for(k=w+k;w<k;){var z=g[w++];L[O++]=z>>16&255,L[O++]=z>>8&255,L[O++]=255&z,L[O++]=z>>24&255}}function Ne(g,w,k,L,O){for(k=w+k;w<k;){var z=(U=g[w++])>>16&240|U>>12&15,U=240&U|U>>28&15;L[O++]=z,L[O++]=U}}function Te(g,w,k,L,O){for(k=w+k;w<k;){var z=(U=g[w++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;L[O++]=z,L[O++]=U}}function en(g,w,k,L,O){for(k=w+k;w<k;){var z=g[w++];L[O++]=255&z,L[O++]=z>>8&255,L[O++]=z>>16&255}}function we(g,w,k,L,O,z){if(z==0)for(k=w+k;w<k;)Ht(L,((z=g[w++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),O+=32;else i(L,O,g,w,k)}function Dn(g,w){F[w][0]=F[g+"0"],F[w][1]=F[g+"1"],F[w][2]=F[g+"2"],F[w][3]=F[g+"3"],F[w][4]=F[g+"4"],F[w][5]=F[g+"5"],F[w][6]=F[g+"6"],F[w][7]=F[g+"7"],F[w][8]=F[g+"8"],F[w][9]=F[g+"9"],F[w][10]=F[g+"10"],F[w][11]=F[g+"11"],F[w][12]=F[g+"12"],F[w][13]=F[g+"13"],F[w][14]=F[g+"0"],F[w][15]=F[g+"0"]}function Ee(g){return g==vu||g==pc||g==gl||g==mc}function De(){this.eb=[],this.size=this.A=this.fb=0}function _n(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function We(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new De,this.f.kb=new _n,this.sd=null}function pe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ua(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Ki(g,w){var k=g.T,L=w.ba.f.RGBA,O=L.eb,z=L.fb+g.ka*L.A,U=Hi[w.ba.S],H=g.y,W=g.O,Z=g.f,ft=g.N,xt=g.ea,Q=g.W,pt=w.cc,bt=w.dc,It=w.Mc,wt=w.Nc,Rt=g.ka,Pt=g.ka+g.T,jt=g.U,Bt=jt+1>>1;for(Rt==0?U(H,W,null,null,Z,ft,xt,Q,Z,ft,xt,Q,O,z,null,null,jt):(U(w.ec,w.fc,H,W,pt,bt,It,wt,Z,ft,xt,Q,O,z-L.A,O,z,jt),++k);Rt+2<Pt;Rt+=2)pt=Z,bt=ft,It=xt,wt=Q,ft+=g.Rc,Q+=g.Rc,z+=2*L.A,U(H,(W+=2*g.fa)-g.fa,H,W,pt,bt,It,wt,Z,ft,xt,Q,O,z-L.A,O,z,jt);return W+=g.fa,g.j+Pt<g.o?(i(w.ec,w.fc,H,W,jt),i(w.cc,w.dc,Z,ft,Bt),i(w.Mc,w.Nc,xt,Q,Bt),k--):1&Pt||U(H,W,null,null,Z,ft,xt,Q,Z,ft,xt,Q,O,z+L.A,null,null,jt),k}function Ia(g,w,k){var L=g.F,O=[g.J];if(L!=null){var z=g.U,U=w.ba.S,H=U==yu||U==gl;w=w.ba.f.RGBA;var W=[0],Z=g.ka;W[0]=g.T,g.Kb&&(Z==0?--W[0]:(--Z,O[0]-=g.width),g.j+g.ka+g.T==g.o&&(W[0]=g.o-g.j-Z));var ft=w.eb;Z=w.fb+Z*w.A,g=du(L,O[0],g.width,z,W,ft,Z+(H?0:3),w.A),t(k==W),g&&Ee(U)&&ko(ft,Z,H,z,W,w.A)}return 0}function $r(g){var w=g.ma,k=w.ba.S,L=11>k,O=k==tr||k==Gr||k==yu||k==ml||k==12||Ee(k);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!gs(w.Oa,g,O?11:12))return 0;if(O&&Ee(k)&&uu(),g.da)alert("todo:use_scaling");else{if(L){if(w.Ib=ua,g.Kb){if(k=g.U+1>>1,w.memory=o(g.U+2*k),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+k,w.Ib=Ki,uu()}}else alert("todo:EmitYUV");O&&(w.Jb=Ia,L&&va())}if(L&&!Xs){for(g=0;256>g;++g)qi[g]=89858*(g-128)+bl>>Jr,Lp[g]=-22014*(g-128)+bl,Uh[g]=-45773*(g-128),wc[g]=113618*(g-128)+bl>>Jr;for(g=Io;g<Ys;++g)w=76283*(g-16)+bl>>Jr,Rp[g-Io]=Rr(w,255),Ip[g-Io]=Rr(w+8>>4,15);Xs=1}return 1}function ye(g){var w=g.ma,k=g.U,L=g.T;return t(!(1&g.ka)),0>=k||0>=L?0:(k=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,k),w.Dc+=k,1)}function ns(g){g.ma.memory=null}function Ta(g,w,k,L){return q(g,8)!=47?0:(w[0]=q(g,14)+1,k[0]=q(g,14)+1,L[0]=q(g,1),q(g,3)!=0?0:!g.h)}function _r(g,w){if(4>g)return g+1;var k=g-2>>1;return(2+(1&g)<<k)+q(w,k)+1}function kr(g,w){return 120<w?w-120:1<=(k=((k=Xr[w-1])>>4)*g+(8-(15&k)))?k:1;var k}function Wn(g,w,k){var L=V(k),O=g[w+=255&L].g-8;return 0<O&&(ot(k,k.u+8),L=V(k),w+=g[w].value,w+=L&(1<<O)-1),ot(k,k.u+g[w].g),g[w].value}function di(g,w,k){return k.g+=g.g,k.value+=g.value<<w>>>0,t(8>=k.g),g.g}function Ii(g,w,k){var L=g.xc;return t((w=L==0?0:g.vc[g.md*(k>>L)+(w>>L)])<g.Wb),g.Ya[w]}function Os(g,w,k,L){var O=g.ab,z=g.c*w,U=g.C;w=U+w;var H=k,W=L;for(L=g.Ta,k=g.Ua;0<O--;){var Z=g.gc[O],ft=U,xt=w,Q=H,pt=W,bt=(W=L,H=k,Z.Ea);switch(t(ft<xt),t(xt<=Z.nc),Z.hc){case 2:ui(Q,pt,(xt-ft)*bt,W,H);break;case 0:var It=ft,wt=xt,Rt=W,Pt=H,jt=(ie=Z).Ea;It==0&&(fl(Q,pt,null,null,1,Rt,Pt),tn(Q,pt+1,0,0,jt-1,Rt,Pt+1),pt+=jt,Pt+=jt,++It);for(var Bt=1<<ie.b,oe=Bt-1,te=$t(jt,ie.b),Oe=ie.K,ie=ie.w+(It>>ie.b)*te;It<wt;){var nn=Oe,$n=ie,je=1;for(hl(Q,pt,Rt,Pt-jt,1,Rt,Pt);je<jt;){var ee=(je&~oe)+Bt;ee>jt&&(ee=jt),(0,vs[nn[$n++]>>8&15])(Q,pt+ +je,Rt,Pt+je-jt,ee-je,Rt,Pt+je),je=ee}pt+=jt,Pt+=jt,++It&oe||(ie+=te)}xt!=Z.nc&&i(W,H-bt,W,H+(xt-ft-1)*bt,bt);break;case 1:for(bt=Q,wt=pt,jt=(Q=Z.Ea)-(Pt=Q&~(Rt=(pt=1<<Z.b)-1)),It=$t(Q,Z.b),Bt=Z.K,Z=Z.w+(ft>>Z.b)*It;ft<xt;){for(oe=Bt,te=Z,Oe=new Ae,ie=wt+Pt,nn=wt+Q;wt<ie;)ce(oe[te++],Oe),dl(Oe,bt,wt,pt,W,H),wt+=pt,H+=pt;wt<nn&&(ce(oe[te++],Oe),dl(Oe,bt,wt,jt,W,H),wt+=jt,H+=jt),++ft&Rt||(Z+=It)}break;case 3:if(Q==W&&pt==H&&0<Z.b){for(wt=W,Q=bt=H+(xt-ft)*bt-(Pt=(xt-ft)*$t(Z.Ea,Z.b)),pt=W,Rt=H,It=[],Pt=(jt=Pt)-1;0<=Pt;--Pt)It[Pt]=pt[Rt+Pt];for(Pt=jt-1;0<=Pt;--Pt)wt[Q+Pt]=It[Pt];uc(Z,ft,xt,W,bt,W,H)}else uc(Z,ft,xt,Q,pt,W,H)}H=L,W=k}W!=k&&i(L,k,H,W,z)}function sr(g,w){var k=g.V,L=g.Ba+g.c*g.C,O=w-g.C;if(t(w<=g.l.o),t(16>=O),0<O){var z=g.l,U=g.Ta,H=g.Ua,W=z.width;if(Os(g,O,k,L),O=H=[H],t((k=g.C)<(L=w)),t(z.v<z.va),L>z.o&&(L=z.o),k<z.j){var Z=z.j-k;k=z.j,O[0]+=Z*W}if(k>=L?k=0:(O[0]+=4*z.v,z.ka=k-z.j,z.U=z.va-z.v,z.T=L-k,k=1),k){if(H=H[0],11>(k=g.ca).S){var ft=k.f.RGBA,xt=(L=k.S,O=z.U,z=z.T,Z=ft.eb,ft.A),Q=z;for(ft=ft.fb+g.Ma*ft.A;0<Q--;){var pt=U,bt=H,It=O,wt=Z,Rt=ft;switch(L){case hc:pl(pt,bt,It,wt,Rt);break;case tr:bs(pt,bt,It,wt,Rt);break;case vu:bs(pt,bt,It,wt,Rt),ko(wt,Rt,0,It,1,0);break;case dc:No(pt,bt,It,wt,Rt);break;case Gr:we(pt,bt,It,wt,Rt,1);break;case pc:we(pt,bt,It,wt,Rt,1),ko(wt,Rt,0,It,1,0);break;case yu:we(pt,bt,It,wt,Rt,0);break;case gl:we(pt,bt,It,wt,Rt,0),ko(wt,Rt,1,It,1,0);break;case ml:ws(pt,bt,It,wt,Rt);break;case mc:ws(pt,bt,It,wt,Rt),Vr(wt,Rt,It,1,0);break;case Hs:Ha(pt,bt,It,wt,Rt);break;default:t(0)}H+=W,ft+=xt}g.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=k.height)}}g.C=w,t(g.C<=g.i)}function kn(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var k=g.Ya[w].G,L=g.Ya[w].H;if(0<k[1][L[1]+0].g||0<k[2][L[2]+0].g||0<k[3][L[3]+0].g)return 0}return 1}function Vn(g,w,k,L,O,z){if(g.Z!=0){var U=g.qd,H=g.rd;for(t(Cs[g.Z]!=null);w<k;++w)Cs[g.Z](U,H,L,O,L,O,z),U=L,H=O,O+=z;g.qd=U,g.rd=H}}function Qi(g,w){var k=g.l.ma,L=k.Z==0||k.Z==1?g.l.j:g.C;if(L=g.C<L?L:g.C,t(w<=g.l.o),w>L){var O=g.l.width,z=k.ca,U=k.tb+O*L,H=g.V,W=g.Ba+g.c*L,Z=g.gc;t(g.ab==1),t(Z[0].hc==3),ja(Z[0],L,w,H,W,z,U),Vn(k,L,w,z,U,O)}g.C=g.Ma=w}function Er(g,w,k,L,O,z,U){var H=g.$/L,W=g.$%L,Z=g.m,ft=g.s,xt=k+g.$,Q=xt;O=k+L*O;var pt=k+L*z,bt=280+ft.ua,It=g.Pb?H:16777216,wt=0<ft.ua?ft.Wa:null,Rt=ft.wc,Pt=xt<pt?Ii(ft,W,H):null;t(g.C<z),t(pt<=O);var jt=!1;t:for(;;){for(;jt||xt<pt;){var Bt=0;if(H>=It){var oe=xt-k;t((It=g).Pb),It.wd=It.m,It.xd=oe,0<It.s.ua&&Yt(It.s.Wa,It.s.vb),It=H+qs}if(W&Rt||(Pt=Ii(ft,W,H)),t(Pt!=null),Pt.Qb&&(w[xt]=Pt.qb,jt=!0),!jt)if(mt(Z),Pt.jc){Bt=Z,oe=w;var te=xt,Oe=Pt.pd[V(Bt)&js-1];t(Pt.jc),256>Oe.g?(ot(Bt,Bt.u+Oe.g),oe[te]=Oe.value,Bt=0):(ot(Bt,Bt.u+Oe.g-256),t(256<=Oe.value),Bt=Oe.value),Bt==0&&(jt=!0)}else Bt=Wn(Pt.G[0],Pt.H[0],Z);if(Z.h)break;if(jt||256>Bt){if(!jt)if(Pt.nd)w[xt]=(Pt.qb|Bt<<8)>>>0;else{if(mt(Z),jt=Wn(Pt.G[1],Pt.H[1],Z),mt(Z),oe=Wn(Pt.G[2],Pt.H[2],Z),te=Wn(Pt.G[3],Pt.H[3],Z),Z.h)break;w[xt]=(te<<24|jt<<16|Bt<<8|oe)>>>0}if(jt=!1,++xt,++W>=L&&(W=0,++H,U!=null&&H<=z&&!(H%16)&&U(g,H),wt!=null))for(;Q<xt;)Bt=w[Q++],wt.X[(506832829*Bt&4294967295)>>>wt.Mb]=Bt}else if(280>Bt){if(Bt=_r(Bt-256,Z),oe=Wn(Pt.G[4],Pt.H[4],Z),mt(Z),oe=kr(L,oe=_r(oe,Z)),Z.h)break;if(xt-k<oe||O-xt<Bt)break t;for(te=0;te<Bt;++te)w[xt+te]=w[xt+te-oe];for(xt+=Bt,W+=Bt;W>=L;)W-=L,++H,U!=null&&H<=z&&!(H%16)&&U(g,H);if(t(xt<=O),W&Rt&&(Pt=Ii(ft,W,H)),wt!=null)for(;Q<xt;)Bt=w[Q++],wt.X[(506832829*Bt&4294967295)>>>wt.Mb]=Bt}else{if(!(Bt<bt))break t;for(jt=Bt-280,t(wt!=null);Q<xt;)Bt=w[Q++],wt.X[(506832829*Bt&4294967295)>>>wt.Mb]=Bt;Bt=xt,t(!(jt>>>(oe=wt).Xa)),w[Bt]=oe.X[jt],jt=!0}jt||t(Z.h==rt(Z))}if(g.Pb&&Z.h&&xt<O)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Yt(g.s.vb,g.s.Wa);else{if(Z.h)break t;U?.(g,H>z?z:H),g.a=0,g.$=xt-k}return 1}return g.a=3,0}function jr(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,t(g!=null)}function go(){var g=new Re;return g==null?null:(g.a=0,g.xb=Cf,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),ui=Xe,dl=ze,pl=si,bs=Ze,ws=Ne,Ha=Te,No=en,F.VP8LMapColor32b=$a,F.VP8LMapColor8b=Ui,g)}function ca(g,w,k,L,O){var z=1,U=[g],H=[w],W=L.m,Z=L.s,ft=null,xt=0;t:for(;;){if(k)for(;z&&q(W,1);){var Q=U,pt=H,bt=L,It=1,wt=bt.m,Rt=bt.gc[bt.ab],Pt=q(wt,2);if(bt.Oc&1<<Pt)z=0;else{switch(bt.Oc|=1<<Pt,Rt.hc=Pt,Rt.Ea=Q[0],Rt.nc=pt[0],Rt.K=[null],++bt.ab,t(4>=bt.ab),Pt){case 0:case 1:Rt.b=q(wt,3)+2,It=ca($t(Rt.Ea,Rt.b),$t(Rt.nc,Rt.b),0,bt,Rt.K),Rt.K=Rt.K[0];break;case 3:var jt,Bt=q(wt,8)+1,oe=16<Bt?0:4<Bt?1:2<Bt?2:3;if(Q[0]=$t(Rt.Ea,oe),Rt.b=oe,jt=It=ca(Bt,1,0,bt,Rt.K)){var te,Oe=Bt,ie=Rt,nn=1<<(8>>ie.b),$n=o(nn);if($n==null)jt=0;else{var je=ie.K[0],ee=ie.w;for($n[0]=ie.K[0][0],te=1;te<1*Oe;++te)$n[te]=be(je[ee+te],$n[te-1]);for(;te<4*nn;++te)$n[te]=0;ie.K[0]=null,ie.K[0]=$n,jt=1}}It=jt;break;case 2:break;default:t(0)}z=It}}if(U=U[0],H=H[0],z&&q(W,1)&&!(z=1<=(xt=q(W,4))&&11>=xt)){L.a=3;break t}var Gt;if(Gt=z)e:{var Yn,ke,Ve,Cn=L,_i=U,Wi=H,On=xt,gi=k,er=Cn.m,yi=Cn.s,Qe=[null],mn=1,Xn=0,wn=Kr[On];n:for(;;){if(gi&&q(er,1)){var ki=q(er,3)+2,Kn=$t(_i,ki),gn=$t(Wi,ki),hi=Kn*gn;if(!ca(Kn,gn,0,Cn,Qe))break n;for(Qe=Qe[0],yi.xc=ki,Yn=0;Yn<hi;++Yn){var An=Qe[Yn]>>8&65535;Qe[Yn]=An,An>=mn&&(mn=An+1)}}if(er.h)break n;for(ke=0;5>ke;++ke){var vi=Lo[ke];!ke&&0<On&&(vi+=1<<On),Xn<vi&&(Xn=vi)}var bi=u(mn*wn,tt),En=mn,hn=u(En,ht);if(hn==null)var nr=null;else t(65536>=En),nr=hn;var ti=o(Xn);if(nr==null||ti==null||bi==null){Cn.a=1;break n}var ve=bi;for(Yn=Ve=0;Yn<mn;++Yn){var xe=nr[Yn],yn=xe.G,vr=xe.H,ta=0,hr=1,wi=0;for(ke=0;5>ke;++ke){vi=Lo[ke],yn[ke]=ve,vr[ke]=Ve,!ke&&0<On&&(vi+=1<<On);r:{var Ks,Qs=vi,Sc=Cn,Fn=ti,Nf=ve,_f=Ve,Cc=0,As=Sc.m,Tp=q(As,1);if(a(Fn,0,0,Qs),Tp){var kf=q(As,1)+1,Ef=q(As,1),Ac=q(As,Ef==0?1:8);Fn[Ac]=1,kf==2&&(Fn[Ac=q(As,8)]=1);var Pi=1}else{var ei=o(19),Su=q(As,4)+4;if(19<Su){Sc.a=3;var Zs=0;break r}for(Ks=0;Ks<Su;++Ks)ei[bu[Ks]]=q(As,3);var xl=void 0,To=void 0,Va=Sc,Nc=ei,Sl=Qs,_c=Fn,kc=0,Ns=Va.m,Lf=8,Rf=u(128,tt);i:for(;B(Rf,0,7,Nc,19);){if(q(Ns,1)){var $h=2+2*q(Ns,3);if((xl=2+q(Ns,$h))>Sl)break i}else xl=Sl;for(To=0;To<Sl&&xl--;){mt(Ns);var If=Rf[0+(127&V(Ns))];ot(Ns,Ns.u+If.g);var Js=If.value;if(16>Js)_c[To++]=Js,Js!=0&&(Lf=Js);else{var jh=Js==16,Hh=Js-16,qh=yl[Hh],Tf=q(Ns,Yr[Hh])+qh;if(To+Tf>Sl)break i;for(var Wh=jh?Lf:0;0<Tf--;)_c[To++]=Wh}}kc=1;break i}kc||(Va.a=3),Pi=kc}(Pi=Pi&&!As.h)&&(Cc=B(Nf,_f,8,Fn,Qs)),Pi&&Cc!=0?Zs=Cc:(Sc.a=3,Zs=0)}if(Zs==0)break n;if(hr&&gc[ke]==1&&(hr=ve[Ve].g==0),ta+=ve[Ve].g,Ve+=Zs,3>=ke){var Do,Ec=ti[0];for(Do=1;Do<vi;++Do)ti[Do]>Ec&&(Ec=ti[Do]);wi+=Ec}}if(xe.nd=hr,xe.Qb=0,hr&&(xe.qb=(yn[3][vr[3]+0].value<<24|yn[1][vr[1]+0].value<<16|yn[2][vr[2]+0].value)>>>0,ta==0&&256>yn[0][vr[0]+0].value&&(xe.Qb=1,xe.qb+=yn[0][vr[0]+0].value<<8)),xe.jc=!xe.Qb&&6>wi,xe.jc){var Cu,Ga=xe;for(Cu=0;Cu<js;++Cu){var _s=Cu,ks=Ga.pd[_s],Lc=Ga.G[0][Ga.H[0]+_s];256<=Lc.value?(ks.g=Lc.g+256,ks.value=Lc.value):(ks.g=0,ks.value=0,_s>>=di(Lc,8,ks),_s>>=di(Ga.G[1][Ga.H[1]+_s],16,ks),_s>>=di(Ga.G[2][Ga.H[2]+_s],0,ks),di(Ga.G[3][Ga.H[3]+_s],24,ks))}}}yi.vc=Qe,yi.Wb=mn,yi.Ya=nr,yi.yc=bi,Gt=1;break e}Gt=0}if(!(z=Gt)){L.a=3;break t}if(0<xt){if(Z.ua=1<<xt,!K(Z.Wa,xt)){L.a=1,z=0;break t}}else Z.ua=0;var Rc=L,Po=U,Vh=H,Cl=Rc.s,Al=Cl.xc;if(Rc.c=Po,Rc.i=Vh,Cl.md=$t(Po,Al),Cl.wc=Al==0?-1:(1<<Al)-1,k){L.xb=Ws;break t}if((ft=o(U*H))==null){L.a=1,z=0;break t}z=(z=Er(L,ft,0,U,H,H,null))&&!W.h;break t}return z?(O!=null?O[0]=ft:(t(ft==null),t(k)),L.$=0,k||jr(Z)):jr(Z),z}function fa(g,w){var k=g.c*g.i,L=k+w+16*w;return t(g.c<=w),g.V=o(L),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+k+w,1)}function Fs(g,w){var k=g.C,L=w-k,O=g.V,z=g.Ba+g.c*k;for(t(w<=g.l.o);0<L;){var U=16<L?16:L,H=g.l.ma,W=g.l.width,Z=W*U,ft=H.ca,xt=H.tb+W*k,Q=g.Ta,pt=g.Ua;Os(g,U,O,z),Mr(Q,pt,ft,xt,Z),Vn(H,k,k+U,ft,xt,W),L-=U,O+=U*g.c,k+=U}t(k==w),g.C=g.Ma=w}function ha(){this.ub=this.yd=this.td=this.Rb=0}function da(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function yo(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Da(){this.Yb=(function(){var g=[];return(function w(k,L,O){for(var z=O[L],U=0;U<z&&(k.push(O.length>L+1?[]:0),!(O.length<L+1));U++)w(k[U],L+1,O)})(g,0,[3,11]),g})()}function oi(){this.jb=o(3),this.Wc=c([4,8],Da),this.Xc=c([4,17],Da)}function Xl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Lr(){this.ld=this.La=this.dd=this.tc=0}function pa(){this.Na=this.la=0}function is(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Kl(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ql(){this.uc=this.M=this.Nb=0,this.wa=Array(new Lr),this.Y=0,this.ya=Array(new Kl),this.aa=0,this.l=new rs}function Zl(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ju(){this.cb=this.a=0,this.sc="",this.m=new T,this.Od=new ha,this.Kc=new da,this.ed=new Xl,this.Qa=new yo,this.Ic=this.$c=this.Aa=0,this.D=new Ql,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,T),this.ia=0,this.pb=u(4,is),this.Pa=new oi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zl),this.Hd=0,this.rb=Array(new pa),this.sb=0,this.wa=Array(new Lr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Kl),this.L=this.aa=0,this.gd=c([4,2],Lr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rr(g,w){return 0>g?0:g>w?w:g}function rs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ma(){var g=new Ju;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Or||(Or=Bs)),g}function vn(g,w,k){return g.a==0&&(g.a=w,g.sc=k,g.cb=0),0}function Jl(g,w,k){return 3<=k&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function Pa(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return vn(g,2,"null VP8Io passed to VP8GetHeaders()");var k=w.data,L=w.w,O=w.ha;if(4>O)return vn(g,7,"Truncated header.");var z=k[L+0]|k[L+1]<<8|k[L+2]<<16,U=g.Od;if(U.Rb=!(1&z),U.td=z>>1&7,U.yd=z>>4&1,U.ub=z>>5,3<U.td)return vn(g,3,"Incorrect keyframe parameters.");if(!U.yd)return vn(g,4,"Frame not displayable.");L+=3,O-=3;var H=g.Kc;if(U.Rb){if(7>O)return vn(g,7,"cannot parse picture header");if(!Jl(k,L,O))return vn(g,3,"Bad code word");H.c=16383&(k[L+4]<<8|k[L+3]),H.Td=k[L+4]>>6,H.i=16383&(k[L+6]<<8|k[L+5]),H.Ud=k[L+6]>>6,L+=7,O-=7,g.za=H.c+15>>4,g.Ub=H.i+15>>4,w.width=H.c,w.height=H.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,a((z=g.Pa).jb,0,255,z.jb.length),t((z=g.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,a(z.Zb,0,0,z.Zb.length),a(z.Lb,0,0,z.Lb)}if(U.ub>O)return vn(g,7,"bad partition length");X(z=g.m,k,L,U.ub),L+=U.ub,O-=U.ub,U.Rb&&(H.Ld=At(z),H.Kd=At(z)),H=g.Qa;var W,Z=g.Pa;if(t(z!=null),t(H!=null),H.Cb=At(z),H.Cb){if(H.Bb=At(z),At(z)){for(H.Fb=At(z),W=0;4>W;++W)H.Zb[W]=At(z)?st(z,7):0;for(W=0;4>W;++W)H.Lb[W]=At(z)?st(z,6):0}if(H.Bb)for(W=0;3>W;++W)Z.jb[W]=At(z)?lt(z,8):255}else H.Bb=0;if(z.Ka)return vn(g,3,"cannot parse segment header");if((H=g.ed).zd=At(z),H.Tb=lt(z,6),H.wb=lt(z,3),H.Pc=At(z),H.Pc&&At(z)){for(Z=0;4>Z;++Z)At(z)&&(H.vd[Z]=st(z,6));for(Z=0;4>Z;++Z)At(z)&&(H.od[Z]=st(z,6))}if(g.L=H.Tb==0?0:H.zd?1:2,z.Ka)return vn(g,3,"cannot parse filter header");var ft=O;if(O=W=L,L=W+ft,H=ft,g.Xb=(1<<lt(g.m,2))-1,ft<3*(Z=g.Xb))k=7;else{for(W+=3*Z,H-=3*Z,ft=0;ft<Z;++ft){var xt=k[O+0]|k[O+1]<<8|k[O+2]<<16;xt>H&&(xt=H),X(g.Jc[+ft],k,W,xt),W+=xt,H-=xt,O+=3}X(g.Jc[+Z],k,W,H),k=W<L?0:5}if(k!=0)return vn(g,k,"cannot parse partitions");for(k=lt(W=g.m,7),O=At(W)?st(W,4):0,L=At(W)?st(W,4):0,H=At(W)?st(W,4):0,Z=At(W)?st(W,4):0,W=At(W)?st(W,4):0,ft=g.Qa,xt=0;4>xt;++xt){if(ft.Cb){var Q=ft.Zb[xt];ft.Fb||(Q+=k)}else{if(0<xt){g.pb[xt]=g.pb[0];continue}Q=k}var pt=g.pb[xt];pt.Sc[0]=Qr[Rr(Q+O,127)],pt.Sc[1]=Zr[Rr(Q+0,127)],pt.Eb[0]=2*Qr[Rr(Q+L,127)],pt.Eb[1]=101581*Zr[Rr(Q+H,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=Qr[Rr(Q+Z,117)],pt.Qc[1]=Zr[Rr(Q+W,127)],pt.lc=Q+W}if(!U.Rb)return vn(g,4,"Not a key frame.");for(At(z),U=g.Pa,k=0;4>k;++k){for(O=0;8>O;++O)for(L=0;3>L;++L)for(H=0;11>H;++H)Z=Mt(z,Un[k][O][L][H])?lt(z,8):zh[k][O][L][H],U.Wc[k][O].Yb[L][H]=Z;for(O=0;17>O;++O)U.Xc[k][O]=U.Wc[k][rn[O]]}return g.kc=At(z),g.kc&&(g.Bd=lt(z,8)),g.cb=1}function Bs(g,w,k,L,O,z,U){var H=w[O].Yb[k];for(k=0;16>O;++O){if(!Mt(g,H[k+0]))return O;for(;!Mt(g,H[k+1]);)if(H=w[++O].Yb[0],k=0,O==16)return 16;var W=w[O+1].Yb;if(Mt(g,H[k+2])){var Z=g,ft=0;if(Mt(Z,(Q=H)[(xt=k)+3]))if(Mt(Z,Q[xt+6])){for(H=0,xt=2*(ft=Mt(Z,Q[xt+8]))+(Q=Mt(Z,Q[xt+9+ft])),ft=0,Q=Bh[xt];Q[H];++H)ft+=ft+Mt(Z,Q[H]);ft+=3+(8<<xt)}else Mt(Z,Q[xt+7])?(ft=7+2*Mt(Z,165),ft+=Mt(Z,145)):ft=5+Mt(Z,159);else ft=Mt(Z,Q[xt+4])?3+Mt(Z,Q[xt+5]):2;H=W[2]}else ft=1,H=W[1];W=U+Sf[O],0>(Z=g).b&&kt(Z);var xt,Q=Z.b,pt=(xt=Z.Ca>>1)-(Z.I>>Q)>>31;--Z.b,Z.Ca+=pt,Z.Ca|=1,Z.I-=(xt+1&pt)<<Q,z[W]=((ft^pt)-pt)*L[(0<O)+0]}return 16}function tu(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,a(g.zc,0,0,g.zc.length),g.ja=0}function or(g,w,k,L,O){O=g[w+k+32*L]+(O>>3),g[w+k+32*L]=-256&O?0>O?0:255:O}function Ai(g,w,k,L,O,z){or(g,w,0,k,L+O),or(g,w,1,k,L+z),or(g,w,2,k,L-z),or(g,w,3,k,L-O)}function pi(g){return(20091*g>>16)+g}function rl(g,w,k,L){var O,z=0,U=o(16);for(O=0;4>O;++O){var H=g[w+0]+g[w+8],W=g[w+0]-g[w+8],Z=(35468*g[w+4]>>16)-pi(g[w+12]),ft=pi(g[w+4])+(35468*g[w+12]>>16);U[z+0]=H+ft,U[z+1]=W+Z,U[z+2]=W-Z,U[z+3]=H-ft,z+=4,w++}for(O=z=0;4>O;++O)H=(g=U[z+0]+4)+U[z+8],W=g-U[z+8],Z=(35468*U[z+4]>>16)-pi(U[z+12]),or(k,L,0,0,H+(ft=pi(U[z+4])+(35468*U[z+12]>>16))),or(k,L,1,0,W+Z),or(k,L,2,0,W-Z),or(k,L,3,0,H-ft),z++,L+=32}function tc(g,w,k,L){var O=g[w+0]+4,z=35468*g[w+4]>>16,U=pi(g[w+4]),H=35468*g[w+1]>>16;Ai(k,L,0,O+U,g=pi(g[w+1]),H),Ai(k,L,1,O+z,g,H),Ai(k,L,2,O-z,g,H),Ai(k,L,3,O-U,g,H)}function eu(g,w,k,L,O){rl(g,w,k,L),O&&rl(g,w+16,k,L+4)}function lr(g,w,k,L){xs(g,w+0,k,L,1),xs(g,w+32,k,L+128,1)}function nu(g,w,k,L){var O;for(g=g[w+0]+4,O=0;4>O;++O)for(w=0;4>w;++w)or(k,L,w,O,g)}function iu(g,w,k,L){g[w+0]&&bn(g,w+0,k,L),g[w+16]&&bn(g,w+16,k,L+4),g[w+32]&&bn(g,w+32,k,L+128),g[w+48]&&bn(g,w+48,k,L+128+4)}function ga(g,w,k,L){var O,z=o(16);for(O=0;4>O;++O){var U=g[w+0+O]+g[w+12+O],H=g[w+4+O]+g[w+8+O],W=g[w+4+O]-g[w+8+O],Z=g[w+0+O]-g[w+12+O];z[0+O]=U+H,z[8+O]=U-H,z[4+O]=Z+W,z[12+O]=Z-W}for(O=0;4>O;++O)U=(g=z[0+4*O]+3)+z[3+4*O],H=z[1+4*O]+z[2+4*O],W=z[1+4*O]-z[2+4*O],Z=g-z[3+4*O],k[L+0]=U+H>>3,k[L+16]=Z+W>>3,k[L+32]=U-H>>3,k[L+48]=Z-W>>3,L+=64}function vo(g,w,k){var L,O=w-32,z=Ji,U=255-g[O-1];for(L=0;L<k;++L){var H,W=z,Z=U+g[w-1];for(H=0;H<k;++H)g[w+H]=W[Z+g[O+H]];w+=32}}function ec(g,w){vo(g,w,4)}function nc(g,w){vo(g,w,8)}function ru(g,w){vo(g,w,16)}function au(g,w){var k;for(k=0;16>k;++k)i(g,w+32*k,g,w-32,16)}function ic(g,w){var k;for(k=16;0<k;--k)a(g,w,g[w-1],16),w+=32}function gr(g,w,k){var L;for(L=0;16>L;++L)a(w,k+32*L,g,16)}function ya(g,w){var k,L=16;for(k=0;16>k;++k)L+=g[w-1+32*k]+g[w+k-32];gr(L>>5,g,w)}function as(g,w){var k,L=8;for(k=0;16>k;++k)L+=g[w-1+32*k];gr(L>>4,g,w)}function bo(g,w){var k,L=8;for(k=0;16>k;++k)L+=g[w+k-32];gr(L>>4,g,w)}function zs(g,w){gr(128,g,w)}function _e(g,w,k){return g+2*w+k+2>>2}function rc(g,w){var k,L=w-32;for(L=new Uint8Array([_e(g[L-1],g[L+0],g[L+1]),_e(g[L+0],g[L+1],g[L+2]),_e(g[L+1],g[L+2],g[L+3]),_e(g[L+2],g[L+3],g[L+4])]),k=0;4>k;++k)i(g,w+32*k,L,0,L.length)}function su(g,w){var k=g[w-1],L=g[w-1+32],O=g[w-1+64],z=g[w-1+96];Ht(g,w+0,16843009*_e(g[w-1-32],k,L)),Ht(g,w+32,16843009*_e(k,L,O)),Ht(g,w+64,16843009*_e(L,O,z)),Ht(g,w+96,16843009*_e(O,z,z))}function ac(g,w){var k,L=4;for(k=0;4>k;++k)L+=g[w+k-32]+g[w-1+32*k];for(L>>=3,k=0;4>k;++k)a(g,w+32*k,L,4)}function Ir(g,w){var k=g[w-1+0],L=g[w-1+32],O=g[w-1+64],z=g[w-1-32],U=g[w+0-32],H=g[w+1-32],W=g[w+2-32],Z=g[w+3-32];g[w+0+96]=_e(L,O,g[w-1+96]),g[w+1+96]=g[w+0+64]=_e(k,L,O),g[w+2+96]=g[w+1+64]=g[w+0+32]=_e(z,k,L),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=_e(U,z,k),g[w+3+64]=g[w+2+32]=g[w+1+0]=_e(H,U,z),g[w+3+32]=g[w+2+0]=_e(W,H,U),g[w+3+0]=_e(Z,W,H)}function Bi(g,w){var k=g[w+1-32],L=g[w+2-32],O=g[w+3-32],z=g[w+4-32],U=g[w+5-32],H=g[w+6-32],W=g[w+7-32];g[w+0+0]=_e(g[w+0-32],k,L),g[w+1+0]=g[w+0+32]=_e(k,L,O),g[w+2+0]=g[w+1+32]=g[w+0+64]=_e(L,O,z),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=_e(O,z,U),g[w+3+32]=g[w+2+64]=g[w+1+96]=_e(z,U,H),g[w+3+64]=g[w+2+96]=_e(U,H,W),g[w+3+96]=_e(H,W,W)}function ou(g,w){var k=g[w-1+0],L=g[w-1+32],O=g[w-1+64],z=g[w-1-32],U=g[w+0-32],H=g[w+1-32],W=g[w+2-32],Z=g[w+3-32];g[w+0+0]=g[w+1+64]=z+U+1>>1,g[w+1+0]=g[w+2+64]=U+H+1>>1,g[w+2+0]=g[w+3+64]=H+W+1>>1,g[w+3+0]=W+Z+1>>1,g[w+0+96]=_e(O,L,k),g[w+0+64]=_e(L,k,z),g[w+0+32]=g[w+1+96]=_e(k,z,U),g[w+1+32]=g[w+2+96]=_e(z,U,H),g[w+2+32]=g[w+3+96]=_e(U,H,W),g[w+3+32]=_e(H,W,Z)}function wo(g,w){var k=g[w+0-32],L=g[w+1-32],O=g[w+2-32],z=g[w+3-32],U=g[w+4-32],H=g[w+5-32],W=g[w+6-32],Z=g[w+7-32];g[w+0+0]=k+L+1>>1,g[w+1+0]=g[w+0+64]=L+O+1>>1,g[w+2+0]=g[w+1+64]=O+z+1>>1,g[w+3+0]=g[w+2+64]=z+U+1>>1,g[w+0+32]=_e(k,L,O),g[w+1+32]=g[w+0+96]=_e(L,O,z),g[w+2+32]=g[w+1+96]=_e(O,z,U),g[w+3+32]=g[w+2+96]=_e(z,U,H),g[w+3+64]=_e(U,H,W),g[w+3+96]=_e(H,W,Z)}function Tr(g,w){var k=g[w-1+0],L=g[w-1+32],O=g[w-1+64],z=g[w-1+96];g[w+0+0]=k+L+1>>1,g[w+2+0]=g[w+0+32]=L+O+1>>1,g[w+2+32]=g[w+0+64]=O+z+1>>1,g[w+1+0]=_e(k,L,O),g[w+3+0]=g[w+1+32]=_e(L,O,z),g[w+3+32]=g[w+1+64]=_e(O,z,z),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=z}function xo(g,w){var k=g[w-1+0],L=g[w-1+32],O=g[w-1+64],z=g[w-1+96],U=g[w-1-32],H=g[w+0-32],W=g[w+1-32],Z=g[w+2-32];g[w+0+0]=g[w+2+32]=k+U+1>>1,g[w+0+32]=g[w+2+64]=L+k+1>>1,g[w+0+64]=g[w+2+96]=O+L+1>>1,g[w+0+96]=z+O+1>>1,g[w+3+0]=_e(H,W,Z),g[w+2+0]=_e(U,H,W),g[w+1+0]=g[w+3+32]=_e(k,U,H),g[w+1+32]=g[w+3+64]=_e(L,k,U),g[w+1+64]=g[w+3+96]=_e(O,L,k),g[w+1+96]=_e(z,O,L)}function Ma(g,w){var k;for(k=0;8>k;++k)i(g,w+32*k,g,w-32,8)}function sc(g,w){var k;for(k=0;8>k;++k)a(g,w,g[w-1],8),w+=32}function Hr(g,w,k){var L;for(L=0;8>L;++L)a(w,k+32*L,g,8)}function al(g,w){var k,L=8;for(k=0;8>k;++k)L+=g[w+k-32]+g[w-1+32*k];Hr(L>>4,g,w)}function sl(g,w){var k,L=4;for(k=0;8>k;++k)L+=g[w+k-32];Hr(L>>3,g,w)}function Ti(g,w){var k,L=4;for(k=0;8>k;++k)L+=g[w-1+32*k];Hr(L>>3,g,w)}function Oa(g,w){Hr(128,g,w)}function qr(g,w,k){var L=g[w-k],O=g[w+0],z=3*(O-L)+Ss[1020+g[w-2*k]-g[w+k]],U=gu[112+(z+4>>3)];g[w-k]=Ji[255+L+gu[112+(z+3>>3)]],g[w+0]=Ji[255+O-U]}function ss(g,w,k,L){var O=g[w+0],z=g[w+k];return $i[255+g[w-2*k]-g[w-k]]>L||$i[255+z-O]>L}function ol(g,w,k,L){return 4*$i[255+g[w-k]-g[w+0]]+$i[255+g[w-2*k]-g[w+k]]<=L}function So(g,w,k,L,O){var z=g[w-3*k],U=g[w-2*k],H=g[w-k],W=g[w+0],Z=g[w+k],ft=g[w+2*k],xt=g[w+3*k];return 4*$i[255+H-W]+$i[255+U-Z]>L?0:$i[255+g[w-4*k]-z]<=O&&$i[255+z-U]<=O&&$i[255+U-H]<=O&&$i[255+xt-ft]<=O&&$i[255+ft-Z]<=O&&$i[255+Z-W]<=O}function os(g,w,k,L){var O=2*L+1;for(L=0;16>L;++L)ol(g,w+L,k,O)&&qr(g,w+L,k)}function ls(g,w,k,L){var O=2*L+1;for(L=0;16>L;++L)ol(g,w+L*k,1,O)&&qr(g,w+L*k,1)}function Co(g,w,k,L){var O;for(O=3;0<O;--O)os(g,w+=4*k,k,L)}function lu(g,w,k,L){var O;for(O=3;0<O;--O)ls(g,w+=4,k,L)}function us(g,w,k,L,O,z,U,H){for(z=2*z+1;0<O--;){if(So(g,w,k,z,U))if(ss(g,w,k,H))qr(g,w,k);else{var W=g,Z=w,ft=k,xt=W[Z-2*ft],Q=W[Z-ft],pt=W[Z+0],bt=W[Z+ft],It=W[Z+2*ft],wt=27*(Pt=Ss[1020+3*(pt-Q)+Ss[1020+xt-bt]])+63>>7,Rt=18*Pt+63>>7,Pt=9*Pt+63>>7;W[Z-3*ft]=Ji[255+W[Z-3*ft]+Pt],W[Z-2*ft]=Ji[255+xt+Rt],W[Z-ft]=Ji[255+Q+wt],W[Z+0]=Ji[255+pt-wt],W[Z+ft]=Ji[255+bt-Rt],W[Z+2*ft]=Ji[255+It-Pt]}w+=L}}function cs(g,w,k,L,O,z,U,H){for(z=2*z+1;0<O--;){if(So(g,w,k,z,U))if(ss(g,w,k,H))qr(g,w,k);else{var W=g,Z=w,ft=k,xt=W[Z-ft],Q=W[Z+0],pt=W[Z+ft],bt=gu[112+(4+(It=3*(Q-xt))>>3)],It=gu[112+(It+3>>3)],wt=bt+1>>1;W[Z-2*ft]=Ji[255+W[Z-2*ft]+wt],W[Z-ft]=Ji[255+xt+It],W[Z+0]=Ji[255+Q-bt],W[Z+ft]=Ji[255+pt-wt]}w+=L}}function oc(g,w,k,L,O,z){us(g,w,k,1,16,L,O,z)}function fs(g,w,k,L,O,z){us(g,w,1,k,16,L,O,z)}function lc(g,w,k,L,O,z){var U;for(U=3;0<U;--U)cs(g,w+=4*k,k,1,16,L,O,z)}function C(g,w,k,L,O,z){var U;for(U=3;0<U;--U)cs(g,w+=4,1,k,16,L,O,z)}function P(g,w,k,L,O,z,U,H){us(g,w,O,1,8,z,U,H),us(k,L,O,1,8,z,U,H)}function J(g,w,k,L,O,z,U,H){us(g,w,1,O,8,z,U,H),us(k,L,1,O,8,z,U,H)}function ut(g,w,k,L,O,z,U,H){cs(g,w+4*O,O,1,8,z,U,H),cs(k,L+4*O,O,1,8,z,U,H)}function gt(g,w,k,L,O,z,U,H){cs(g,w+4,1,O,8,z,U,H),cs(k,L+4,1,O,8,z,U,H)}function Dt(){this.ba=new We,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function re(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function fe(){this.ua=0,this.Wa=new Ge,this.vb=new Ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ht,this.yc=new tt}function Re(){this.xb=this.a=0,this.l=new rs,this.ca=new We,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new fe,this.ab=0,this.gc=u(4,re),this.Oc=0}function $e(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new rs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(g,w,k,L,O,z,U){for(g=g==null?0:g[w+0],w=0;w<U;++w)O[z+w]=g+k[L+w]&255,g=O[z+w]}function Gn(g,w,k,L,O,z,U){var H;if(g==null)cn(null,null,k,L,O,z,U);else for(H=0;H<U;++H)O[z+H]=g[w+H]+k[L+H]&255}function li(g,w,k,L,O,z,U){if(g==null)cn(null,null,k,L,O,z,U);else{var H,W=g[w+0],Z=W,ft=W;for(H=0;H<U;++H)Z=ft+(W=g[w+H])-Z,ft=k[L+H]+(-256&Z?0>Z?0:255:Z)&255,Z=W,O[z+H]=ft}}function Pn(g,w,k,L){var O=w.width,z=w.o;if(t(g!=null&&w!=null),0>k||0>=L||k+L>z)return null;if(!g.Cc){if(g.ga==null){var U;if(g.ga=new $e,(U=g.ga==null)||(U=w.width*w.o,t(g.Gb.length==0),g.Gb=o(U),g.Uc=0,g.Gb==null?U=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,U=1),U=!U),!U){U=g.ga;var H=g.Fa,W=g.P,Z=g.qc,ft=g.mb,xt=g.nb,Q=W+1,pt=Z-1,bt=U.l;if(t(H!=null&&ft!=null&&w!=null),Cs[0]=null,Cs[1]=cn,Cs[2]=Gn,Cs[3]=li,U.ca=ft,U.tb=xt,U.c=w.width,U.i=w.height,t(0<U.c&&0<U.i),1>=Z)w=0;else if(U.$a=3&H[W+0],U.Z=H[W+0]>>2&3,U.Lc=H[W+0]>>4&3,W=H[W+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||W)w=0;else if(bt.put=ye,bt.ac=$r,bt.bc=ns,bt.ma=U,bt.width=w.width,bt.height=w.height,bt.Da=w.Da,bt.v=w.v,bt.va=w.va,bt.j=w.j,bt.o=w.o,U.$a)t:{t(U.$a==1),w=go();e:for(;;){if(w==null){w=0;break t}if(t(U!=null),U.mc=w,w.c=U.c,w.i=U.i,w.l=U.l,w.l.ma=U,w.l.width=U.c,w.l.height=U.i,w.a=0,vt(w.m,H,Q,pt),!ca(U.c,U.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&kn(w.s)?(U.ic=1,H=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o(H),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(U.ic=0,w=fa(w,U.c)),!w))break e;w=1;break t}U.mc=null,w=0}else w=pt>=U.c*U.i;U=!w}if(U)return null;g.ga.Lc!=1?g.Ga=0:L=z-k}t(g.ga!=null),t(k+L<=z);t:{if(w=(H=g.ga).c,z=H.l.o,H.$a==0){if(Q=g.rc,pt=g.Vc,bt=g.Fa,W=g.P+1+k*w,Z=g.mb,ft=g.nb+k*w,t(W<=g.P+g.qc),H.Z!=0)for(t(Cs[H.Z]!=null),U=0;U<L;++U)Cs[H.Z](Q,pt,bt,W,Z,ft,w),Q=Z,pt=ft,ft+=w,W+=w;else for(U=0;U<L;++U)i(Z,ft,bt,W,w),Q=Z,pt=ft,ft+=w,W+=w;g.rc=Q,g.Vc=pt}else{if(t(H.mc!=null),w=k+L,t((U=H.mc)!=null),t(w<=U.i),U.C>=w)w=1;else if(H.ic||va(),H.ic){H=U.V,Q=U.Ba,pt=U.c;var It=U.i,wt=(bt=1,W=U.$/pt,Z=U.$%pt,ft=U.m,xt=U.s,U.$),Rt=pt*It,Pt=pt*w,jt=xt.wc,Bt=wt<Pt?Ii(xt,Z,W):null;t(wt<=Rt),t(w<=It),t(kn(xt));e:for(;;){for(;!ft.h&&wt<Pt;){if(Z&jt||(Bt=Ii(xt,Z,W)),t(Bt!=null),mt(ft),256>(It=Wn(Bt.G[0],Bt.H[0],ft)))H[Q+wt]=It,++wt,++Z>=pt&&(Z=0,++W<=w&&!(W%16)&&Qi(U,W));else{if(!(280>It)){bt=0;break e}It=_r(It-256,ft);var oe,te=Wn(Bt.G[4],Bt.H[4],ft);if(mt(ft),!(wt>=(te=kr(pt,te=_r(te,ft)))&&Rt-wt>=It)){bt=0;break e}for(oe=0;oe<It;++oe)H[Q+wt+oe]=H[Q+wt+oe-te];for(wt+=It,Z+=It;Z>=pt;)Z-=pt,++W<=w&&!(W%16)&&Qi(U,W);wt<Pt&&Z&jt&&(Bt=Ii(xt,Z,W))}t(ft.h==rt(ft))}Qi(U,W>w?w:W);break e}!bt||ft.h&&wt<Rt?(bt=0,U.a=ft.h?5:3):U.$=wt,w=bt}else w=Er(U,U.V,U.Ba,U.c,U.i,w,Fs);if(!w){L=0;break t}}k+L>=z&&(g.Cc=1),L=1}if(!L)return null;if(g.Cc&&((L=g.ga)!=null&&(L.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+k*O}function Ni(g,w,k,L,O,z){for(;0<O--;){var U,H=g,W=w+(k?1:0),Z=g,ft=w+(k?0:3);for(U=0;U<L;++U){var xt=Z[ft+4*U];xt!=255&&(xt*=32897,H[W+4*U+0]=H[W+4*U+0]*xt>>23,H[W+4*U+1]=H[W+4*U+1]*xt>>23,H[W+4*U+2]=H[W+4*U+2]*xt>>23)}w+=z}}function mi(g,w,k,L,O){for(;0<L--;){var z;for(z=0;z<k;++z){var U=g[w+2*z+0],H=15&(Z=g[w+2*z+1]),W=4369*H,Z=(240&Z|Z>>4)*W>>16;g[w+2*z+0]=(240&U|U>>4)*W>>16&240|(15&U|U<<4)*W>>16>>4&15,g[w+2*z+1]=240&Z|H}w+=O}}function zi(g,w,k,L,O,z,U,H){var W,Z,ft=255;for(Z=0;Z<O;++Z){for(W=0;W<L;++W){var xt=g[w+W];z[U+4*W]=xt,ft&=xt}w+=k,U+=H}return ft!=255}function hs(g,w,k,L,O){var z;for(z=0;z<O;++z)k[L+z]=g[w+z]>>8}function va(){ko=Ni,Vr=mi,du=zi,Mr=hs}function ds(g,w,k){F[g]=function(L,O,z,U,H,W,Z,ft,xt,Q,pt,bt,It,wt,Rt,Pt,jt){var Bt,oe=jt-1>>1,te=H[W+0]|Z[ft+0]<<16,Oe=xt[Q+0]|pt[bt+0]<<16;t(L!=null);var ie=3*te+Oe+131074>>2;for(w(L[O+0],255&ie,ie>>16,It,wt),z!=null&&(ie=3*Oe+te+131074>>2,w(z[U+0],255&ie,ie>>16,Rt,Pt)),Bt=1;Bt<=oe;++Bt){var nn=H[W+Bt]|Z[ft+Bt]<<16,$n=xt[Q+Bt]|pt[bt+Bt]<<16,je=te+nn+Oe+$n+524296,ee=je+2*(nn+Oe)>>3;ie=ee+te>>1,te=(je=je+2*(te+$n)>>3)+nn>>1,w(L[O+2*Bt-1],255&ie,ie>>16,It,wt+(2*Bt-1)*k),w(L[O+2*Bt-0],255&te,te>>16,It,wt+(2*Bt-0)*k),z!=null&&(ie=je+Oe>>1,te=ee+$n>>1,w(z[U+2*Bt-1],255&ie,ie>>16,Rt,Pt+(2*Bt-1)*k),w(z[U+2*Bt+0],255&te,te>>16,Rt,Pt+(2*Bt+0)*k)),te=nn,Oe=$n}1&jt||(ie=3*te+Oe+131074>>2,w(L[O+jt-1],255&ie,ie>>16,It,wt+(jt-1)*k),z!=null&&(ie=3*Oe+te+131074>>2,w(z[U+jt-1],255&ie,ie>>16,Rt,Pt+(jt-1)*k)))}}function uu(){Hi[hc]=Ro,Hi[tr]=vl,Hi[dc]=Af,Hi[Gr]=vc,Hi[yu]=Vs,Hi[ml]=Wa,Hi[Hs]=Gs,Hi[vu]=vl,Hi[pc]=vc,Hi[gl]=Vs,Hi[mc]=Wa}function ll(g){return g&-16384?0>g?0:255:g>>bc}function Fa(g,w){return ll((19077*g>>8)+(26149*w>>8)-14234)}function ba(g,w,k){return ll((19077*g>>8)-(6419*w>>8)-(13320*k>>8)+8708)}function Ao(g,w){return ll((19077*g>>8)+(33050*w>>8)-17685)}function ps(g,w,k,L,O){L[O+0]=Fa(g,k),L[O+1]=ba(g,w,k),L[O+2]=Ao(g,w)}function Di(g,w,k,L,O){L[O+0]=Ao(g,w),L[O+1]=ba(g,w,k),L[O+2]=Fa(g,k)}function Us(g,w,k,L,O){var z=ba(g,w,k);w=z<<3&224|Ao(g,w)>>3,L[O+0]=248&Fa(g,k)|z>>5,L[O+1]=w}function $s(g,w,k,L,O){var z=240&Ao(g,w)|15;L[O+0]=240&Fa(g,k)|ba(g,w,k)>>4,L[O+1]=z}function ul(g,w,k,L,O){L[O+0]=255,ps(g,w,k,L,O+1)}function Ba(g,w,k,L,O){Di(g,w,k,L,O),L[O+3]=255}function ur(g,w,k,L,O){ps(g,w,k,L,O),L[O+3]=255}function ms(g,w,k){F[g]=function(L,O,z,U,H,W,Z,ft,xt){for(var Q=ft+(-2&xt)*k;ft!=Q;)w(L[O+0],z[U+0],H[W+0],Z,ft),w(L[O+1],z[U+0],H[W+0],Z,ft+k),O+=2,++U,++W,ft+=2*k;1&xt&&w(L[O+0],z[U+0],H[W+0],Z,ft)}}function cl(g,w,k){return k==0?g==0?w==0?6:5:w==0?4:0:k}function cu(g,w,k,L,O){switch(g>>>30){case 3:xs(w,k,L,O,0);break;case 2:Zi(w,k,L,O);break;case 1:bn(w,k,L,O)}}function Dr(g,w){var k,L,O=w.M,z=w.Nb,U=g.oc,H=g.pc+40,W=g.oc,Z=g.pc+584,ft=g.oc,xt=g.pc+600;for(k=0;16>k;++k)U[H+32*k-1]=129;for(k=0;8>k;++k)W[Z+32*k-1]=129,ft[xt+32*k-1]=129;for(0<O?U[H-1-32]=W[Z-1-32]=ft[xt-1-32]=129:(a(U,H-32-1,127,21),a(W,Z-32-1,127,9),a(ft,xt-32-1,127,9)),L=0;L<g.za;++L){var Q=w.ya[w.aa+L];if(0<L){for(k=-1;16>k;++k)i(U,H+32*k-4,U,H+32*k+12,4);for(k=-1;8>k;++k)i(W,Z+32*k-4,W,Z+32*k+4,4),i(ft,xt+32*k-4,ft,xt+32*k+4,4)}var pt=g.Gd,bt=g.Hd+L,It=Q.ad,wt=Q.Hc;if(0<O&&(i(U,H-32,pt[bt].y,0,16),i(W,Z-32,pt[bt].f,0,8),i(ft,xt-32,pt[bt].ea,0,8)),Q.Za){var Rt=U,Pt=H-32+16;for(0<O&&(L>=g.za-1?a(Rt,Pt,pt[bt].y[15],4):i(Rt,Pt,pt[bt+1].y,0,4)),k=0;4>k;k++)Rt[Pt+128+k]=Rt[Pt+256+k]=Rt[Pt+384+k]=Rt[Pt+0+k];for(k=0;16>k;++k,wt<<=2)Rt=U,Pt=H+fi[k],Jn[Q.Ob[k]](Rt,Pt),cu(wt,It,16*+k,Rt,Pt)}else if(Rt=cl(L,O,Q.Ob[0]),fr[Rt](U,H),wt!=0)for(k=0;16>k;++k,wt<<=2)cu(wt,It,16*+k,U,H+fi[k]);for(k=Q.Gc,Rt=cl(L,O,Q.Dd),Ca[Rt](W,Z),Ca[Rt](ft,xt),wt=It,Rt=W,Pt=Z,255&(Q=0|k)&&(170&Q?Wr(wt,256,Rt,Pt):fn(wt,256,Rt,Pt)),Q=ft,wt=xt,255&(k>>=8)&&(170&k?Wr(It,320,Q,wt):fn(It,320,Q,wt)),O<g.Ub-1&&(i(pt[bt].y,0,U,H+480,16),i(pt[bt].f,0,W,Z+224,8),i(pt[bt].ea,0,ft,xt+224,8)),k=8*z*g.B,pt=g.sa,bt=g.ta+16*L+16*z*g.R,It=g.qa,Q=g.ra+8*L+k,wt=g.Ha,Rt=g.Ia+8*L+k,k=0;16>k;++k)i(pt,bt+k*g.R,U,H+32*k,16);for(k=0;8>k;++k)i(It,Q+k*g.B,W,Z+32*k,8),i(wt,Rt+k*g.B,ft,xt+32*k,8)}}function wa(g,w,k,L,O,z,U,H,W){var Z=[0],ft=[0],xt=0,Q=W!=null?W.kd:0,pt=W??new zt;if(g==null||12>k)return 7;pt.data=g,pt.w=w,pt.ha=k,w=[w],k=[k],pt.gb=[pt.gb];t:{var bt=w,It=k,wt=pt.gb;if(t(g!=null),t(It!=null),t(wt!=null),wt[0]=0,12<=It[0]&&!e(g,bt[0],"RIFF")){if(e(g,bt[0]+8,"WEBP")){wt=3;break t}var Rt=ue(g,bt[0]+4);if(12>Rt||4294967286<Rt){wt=3;break t}if(Q&&Rt>It[0]-8){wt=7;break t}wt[0]=Rt,bt[0]+=12,It[0]-=12}wt=0}if(wt!=0)return wt;for(Rt=0<pt.gb[0],k=k[0];;){t:{var Pt=g;It=w,wt=k;var jt=Z,Bt=ft,oe=bt=[0];if((ie=xt=[xt])[0]=0,8>wt[0])wt=7;else{if(!e(Pt,It[0],"VP8X")){if(ue(Pt,It[0]+4)!=10){wt=3;break t}if(18>wt[0]){wt=7;break t}var te=ue(Pt,It[0]+8),Oe=1+Qt(Pt,It[0]+12);if(2147483648<=Oe*(Pt=1+Qt(Pt,It[0]+15))){wt=3;break t}oe!=null&&(oe[0]=te),jt!=null&&(jt[0]=Oe),Bt!=null&&(Bt[0]=Pt),It[0]+=18,wt[0]-=18,ie[0]=1}wt=0}}if(xt=xt[0],bt=bt[0],wt!=0)return wt;if(It=!!(2&bt),!Rt&&xt)return 3;if(z!=null&&(z[0]=!!(16&bt)),U!=null&&(U[0]=It),H!=null&&(H[0]=0),U=Z[0],bt=ft[0],xt&&It&&W==null){wt=0;break}if(4>k){wt=7;break}if(Rt&&xt||!Rt&&!xt&&!e(g,w[0],"ALPH")){k=[k],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];t:{te=g,wt=w,Rt=k;var ie=pt.gb;jt=pt.na,Bt=pt.P,oe=pt.Sa,Oe=22,t(te!=null),t(Rt!=null),Pt=wt[0];var nn=Rt[0];for(t(jt!=null),t(oe!=null),jt[0]=null,Bt[0]=null,oe[0]=0;;){if(wt[0]=Pt,Rt[0]=nn,8>nn){wt=7;break t}var $n=ue(te,Pt+4);if(4294967286<$n){wt=3;break t}var je=8+$n+1&-2;if(Oe+=je,0<ie&&Oe>ie){wt=3;break t}if(!e(te,Pt,"VP8 ")||!e(te,Pt,"VP8L")){wt=0;break t}if(nn[0]<je){wt=7;break t}e(te,Pt,"ALPH")||(jt[0]=te,Bt[0]=Pt+8,oe[0]=$n),Pt+=je,nn-=je}}if(k=k[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],wt!=0)break}k=[k],pt.Ja=[pt.Ja],pt.xa=[pt.xa];t:if(ie=g,wt=w,Rt=k,jt=pt.gb[0],Bt=pt.Ja,oe=pt.xa,te=wt[0],Pt=!e(ie,te,"VP8 "),Oe=!e(ie,te,"VP8L"),t(ie!=null),t(Rt!=null),t(Bt!=null),t(oe!=null),8>Rt[0])wt=7;else{if(Pt||Oe){if(ie=ue(ie,te+4),12<=jt&&ie>jt-12){wt=3;break t}if(Q&&ie>Rt[0]-8){wt=7;break t}Bt[0]=ie,wt[0]+=8,Rt[0]-=8,oe[0]=Oe}else oe[0]=5<=Rt[0]&&ie[te+0]==47&&!(ie[te+4]>>5),Bt[0]=Rt[0];wt=0}if(k=k[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],w=w[0],wt!=0)break;if(4294967286<pt.Ja)return 3;if(H==null||It||(H[0]=pt.xa?2:1),U=[U],bt=[bt],pt.xa){if(5>k){wt=7;break}H=U,Q=bt,It=z,g==null||5>k?g=0:5<=k&&g[w+0]==47&&!(g[w+4]>>5)?(Rt=[0],ie=[0],jt=[0],vt(Bt=new j,g,w,k),Ta(Bt,Rt,ie,jt)?(H!=null&&(H[0]=Rt[0]),Q!=null&&(Q[0]=ie[0]),It!=null&&(It[0]=jt[0]),g=1):g=0):g=0}else{if(10>k){wt=7;break}H=bt,g==null||10>k||!Jl(g,w+3,k-3)?g=0:(Q=g[w+0]|g[w+1]<<8|g[w+2]<<16,It=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&Q||3<(Q>>1&7)||!(Q>>4&1)||Q>>5>=pt.Ja||!It||!g?g=0:(U&&(U[0]=It),H&&(H[0]=g),g=1))}if(!g||(U=U[0],bt=bt[0],xt&&(Z[0]!=U||ft[0]!=bt)))return 3;W!=null&&(W[0]=pt,W.offset=w-W.w,t(4294967286>w-W.w),t(W.offset==W.ha-k));break}return wt==0||wt==7&&xt&&W==null?(z!=null&&(z[0]|=pt.na!=null&&0<pt.na.length),L!=null&&(L[0]=U),O!=null&&(O[0]=bt),0):wt}function gs(g,w,k){var L=w.width,O=w.height,z=0,U=0,H=L,W=O;if(w.Da=g!=null&&0<g.Da,w.Da&&(H=g.cd,W=g.bd,z=g.v,U=g.j,11>k||(z&=-2,U&=-2),0>z||0>U||0>=H||0>=W||z+H>L||U+W>O))return 0;if(w.v=z,w.j=U,w.va=z+H,w.o=U+W,w.U=H,w.T=W,w.da=g!=null&&0<g.da,w.da){if(!Ce(H,W,k=[g.ib],z=[g.hb]))return 0;w.ib=k[0],w.hb=z[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*L/4&&w.hb<3*O/4,w.Kb=0),1}function fu(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function xa(g,w,k,L){if(L==null||0>=g||0>=w)return 2;if(k!=null){if(k.Da){var O=k.cd,z=k.bd,U=-2&k.v,H=-2&k.j;if(0>U||0>H||0>=O||0>=z||U+O>g||H+z>w)return 2;g=O,w=z}if(k.da){if(!Ce(g,w,O=[k.ib],z=[k.hb]))return 2;g=O[0],w=z[0]}}L.width=g,L.height=w;t:{var W=L.width,Z=L.height;if(g=L.S,0>=W||0>=Z||!(g>=hc&&13>g))g=2;else{if(0>=L.Rd&&L.sd==null){U=z=O=w=0;var ft=(H=W*xc[g])*Z;if(11>g||(z=(Z+1)/2*(w=(W+1)/2),g==12&&(U=(O=W)*Z)),(Z=o(ft+2*z+U))==null){g=1;break t}L.sd=Z,11>g?((W=L.f.RGBA).eb=Z,W.fb=0,W.A=H,W.size=ft):((W=L.f.kb).y=Z,W.O=0,W.fa=H,W.Fd=ft,W.f=Z,W.N=0+ft,W.Ab=w,W.Cd=z,W.ea=Z,W.W=0+ft+z,W.Db=w,W.Ed=z,g==12&&(W.F=Z,W.J=0+ft+2*z),W.Tc=U,W.lb=O)}if(w=1,O=L.S,z=L.width,U=L.height,O>=hc&&13>O)if(11>O)g=L.f.RGBA,w&=(H=Math.abs(g.A))*(U-1)+z<=g.size,w&=H>=z*xc[O],w&=g.eb!=null;else{g=L.f.kb,H=(z+1)/2,ft=(U+1)/2,W=Math.abs(g.fa),Z=Math.abs(g.Ab);var xt=Math.abs(g.Db),Q=Math.abs(g.lb),pt=Q*(U-1)+z;w&=W*(U-1)+z<=g.Fd,w&=Z*(ft-1)+H<=g.Cd,w=(w&=xt*(ft-1)+H<=g.Ed)&W>=z&Z>=H&xt>=H,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,O==12&&(w&=Q>=z,w&=pt<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||k!=null&&k.fd&&(g=fu(L)),g}var js=64,yr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cr=24,za=32,Ua=8,ys=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ne("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(g){return g},F.Predictor2=function(g,w,k){return w[k+0]},F.Predictor3=function(g,w,k){return w[k+1]},F.Predictor4=function(g,w,k){return w[k-1]},F.Predictor5=function(g,w,k){return ge(ge(g,w[k+1]),w[k+0])},F.Predictor6=function(g,w,k){return ge(g,w[k-1])},F.Predictor7=function(g,w,k){return ge(g,w[k+0])},F.Predictor8=function(g,w,k){return ge(w[k-1],w[k+0])},F.Predictor9=function(g,w,k){return ge(w[k+0],w[k+1])},F.Predictor10=function(g,w,k){return ge(ge(g,w[k-1]),ge(w[k+0],w[k+1]))},F.Predictor11=function(g,w,k){var L=w[k+0];return 0>=Be(L>>24&255,g>>24&255,(w=w[k-1])>>24&255)+Be(L>>16&255,g>>16&255,w>>16&255)+Be(L>>8&255,g>>8&255,w>>8&255)+Be(255&L,255&g,255&w)?L:g},F.Predictor12=function(g,w,k){var L=w[k+0];return(Ue((g>>24&255)+(L>>24&255)-((w=w[k-1])>>24&255))<<24|Ue((g>>16&255)+(L>>16&255)-(w>>16&255))<<16|Ue((g>>8&255)+(L>>8&255)-(w>>8&255))<<8|Ue((255&g)+(255&L)-(255&w)))>>>0},F.Predictor13=function(g,w,k){var L=w[k-1];return(Je((g=ge(g,w[k+0]))>>24&255,L>>24&255)<<24|Je(g>>16&255,L>>16&255)<<16|Je(g>>8&255,L>>8&255)<<8|Je(255&g,255&L))>>>0};var fl=F.PredictorAdd0;F.PredictorAdd1=tn,ne("Predictor2","PredictorAdd2"),ne("Predictor3","PredictorAdd3"),ne("Predictor4","PredictorAdd4"),ne("Predictor5","PredictorAdd5"),ne("Predictor6","PredictorAdd6"),ne("Predictor7","PredictorAdd7"),ne("Predictor8","PredictorAdd8"),ne("Predictor9","PredictorAdd9"),ne("Predictor10","PredictorAdd10"),ne("Predictor11","PredictorAdd11"),ne("Predictor12","PredictorAdd12"),ne("Predictor13","PredictorAdd13");var hl=F.PredictorAdd2;de("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),de("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var ui,uc=F.ColorIndexInverseTransform,$a=F.MapARGB,ja=F.VP8LColorIndexInverseTransformAlpha,Ui=F.MapAlpha,vs=F.VP8LPredictorsAdd=[];vs.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var dl,pl,bs,ws,Ha,No,Pr,xs,Zi,Wr,bn,fn,Mn,ci,qa,Sa,_o,hu,bf,Mh,Oh,Fh,wf,xf,ko,Vr,du,Mr,Eo=o(511),cc=o(2041),pu=o(225),mu=o(767),fc=0,Ss=cc,gu=pu,Ji=mu,$i=Eo,hc=0,tr=1,dc=2,Gr=3,yu=4,ml=5,Hs=6,vu=7,pc=8,gl=9,mc=10,Yr=[2,3,7],yl=[3,3,11],Lo=[280,256,256,256,40],gc=[0,1,1,1,0],bu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],qs=8,Qr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Or=null,Bh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Sf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ji=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Un=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fr=[],Jn=[],Ca=[],Ws=1,Cf=2,Cs=[],Hi=[];ds("UpsampleRgbLinePair",ps,3),ds("UpsampleBgrLinePair",Di,3),ds("UpsampleRgbaLinePair",ur,4),ds("UpsampleBgraLinePair",Ba,4),ds("UpsampleArgbLinePair",ul,4),ds("UpsampleRgba4444LinePair",$s,2),ds("UpsampleRgb565LinePair",Us,2);var Ro=F.UpsampleRgbLinePair,Af=F.UpsampleBgrLinePair,vl=F.UpsampleRgbaLinePair,vc=F.UpsampleBgraLinePair,Vs=F.UpsampleArgbLinePair,Wa=F.UpsampleRgba4444LinePair,Gs=F.UpsampleRgb565LinePair,Jr=16,bl=1<<Jr-1,Io=-227,Ys=482,bc=6,Xs=0,qi=o(256),wc=o(256),Uh=o(256),Lp=o(256),Rp=o(Ys-Io),Ip=o(Ys-Io);ms("YuvToRgbRow",ps,3),ms("YuvToBgrRow",Di,3),ms("YuvToRgbaRow",ur,4),ms("YuvToBgraRow",Ba,4),ms("YuvToArgbRow",ul,4),ms("YuvToRgba4444Row",$s,2),ms("YuvToRgb565Row",Us,2);var fi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wl=[0,2,8],wu=[8,7,6,4,4,2,2,2,1,1,1,1],xu=1;this.WebPDecodeRGBA=function(g,w,k,L,O){var z=tr,U=new Dt,H=new We;U.ba=H,H.S=z,H.width=[H.width],H.height=[H.height];var W=H.width,Z=H.height,ft=new pe;if(ft==null||g==null)var xt=2;else t(ft!=null),xt=wa(g,w,k,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(xt!=0?W=0:(W!=null&&(W[0]=ft.width[0]),Z!=null&&(Z[0]=ft.height[0]),W=1),W){H.width=H.width[0],H.height=H.height[0],L!=null&&(L[0]=H.width),O!=null&&(O[0]=H.height);t:{if(L=new rs,(O=new zt).data=g,O.w=w,O.ha=k,O.kd=1,w=[0],t(O!=null),((g=wa(O.data,O.w,O.ha,null,null,null,w,null,O))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(t(U!=null),L.data=O.data,L.w=O.w+O.offset,L.ha=O.ha-O.offset,L.put=ye,L.ac=$r,L.bc=ns,L.ma=U,O.xa){if((g=go())==null){U=1;break t}if((function(Q,pt){var bt=[0],It=[0],wt=[0];e:for(;;){if(Q==null)return 0;if(pt==null)return Q.a=2,0;if(Q.l=pt,Q.a=0,vt(Q.m,pt.data,pt.w,pt.ha),!Ta(Q.m,bt,It,wt)){Q.a=3;break e}if(Q.xb=Cf,pt.width=bt[0],pt.height=It[0],!ca(bt[0],It[0],1,Q,null))break e;return 1}return t(Q.a!=0),0})(g,L)){if(L=(w=xa(L.width,L.height,U.Oa,U.ba))==0){e:{L=g;n:for(;;){if(L==null){L=0;break e}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((k=L.l)!=null),t((O=k.ma)!=null),L.xb!=0){if(L.ca=O.ba,L.tb=O.tb,t(L.ca!=null),!gs(O.Oa,k,Gr)){L.a=2;break n}if(!fa(L,k.width)||k.da)break n;if((k.da||Ee(L.ca.S))&&va(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&va()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!K(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!Er(L,L.V,L.Ba,L.c,L.i,k.o,sr))break n;O.Dc=L.Ma,L=1;break e}t(L.a!=0),L=0}L=!L}L&&(w=g.a)}else w=g.a}else{if((g=new ma)==null){U=1;break t}if(g.Fa=O.na,g.P=O.P,g.qc=O.Sa,Pa(g,L)){if((w=xa(L.width,L.height,U.Oa,U.ba))==0){if(g.Aa=0,k=U.Oa,t((O=g)!=null),k!=null){if(0<(W=0>(W=k.Md)?0:100<W?255:255*W/100)){for(Z=ft=0;4>Z;++Z)12>(xt=O.pb[Z]).lc&&(xt.ia=W*wu[0>xt.lc?0:xt.lc]>>3),ft|=xt.ia;ft&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=k.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(Q,pt){if(Q==null)return 0;if(pt==null)return vn(Q,2,"NULL VP8Io parameter in VP8Decode().");if(!Q.cb&&!Pa(Q,pt))return 0;if(t(Q.cb),pt.ac==null||pt.ac(pt)){pt.ob&&(Q.L=0);var bt=wl[Q.L];if(Q.L==2?(Q.yb=0,Q.zb=0):(Q.yb=pt.v-bt>>4,Q.zb=pt.j-bt>>4,0>Q.yb&&(Q.yb=0),0>Q.zb&&(Q.zb=0)),Q.Va=pt.o+15+bt>>4,Q.Hb=pt.va+15+bt>>4,Q.Hb>Q.za&&(Q.Hb=Q.za),Q.Va>Q.Ub&&(Q.Va=Q.Ub),0<Q.L){var It=Q.ed;for(bt=0;4>bt;++bt){var wt;if(Q.Qa.Cb){var Rt=Q.Qa.Lb[bt];Q.Qa.Fb||(Rt+=It.Tb)}else Rt=It.Tb;for(wt=0;1>=wt;++wt){var Pt=Q.gd[bt][wt],jt=Rt;if(It.Pc&&(jt+=It.vd[0],wt&&(jt+=It.od[0])),0<(jt=0>jt?0:63<jt?63:jt)){var Bt=jt;0<It.wb&&(Bt=4<It.wb?Bt>>2:Bt>>1)>9-It.wb&&(Bt=9-It.wb),1>Bt&&(Bt=1),Pt.dd=Bt,Pt.tc=2*jt+Bt,Pt.ld=40<=jt?2:15<=jt?1:0}else Pt.tc=0;Pt.La=wt}}}bt=0}else vn(Q,6,"Frame setup failed"),bt=Q.a;if(bt=bt==0){if(bt){Q.$c=0,0<Q.Aa||(Q.Ic=xu);e:{bt=Q.Ic,It=4*(Bt=Q.za);var oe=32*Bt,te=Bt+1,Oe=0<Q.L?Bt*(0<Q.Aa?2:1):0,ie=(Q.Aa==2?2:1)*Bt;if((Pt=It+832+(wt=3*(16*bt+wl[Q.L])/2*oe)+(Rt=Q.Fa!=null&&0<Q.Fa.length?Q.Kc.c*Q.Kc.i:0))!=Pt)bt=0;else{if(Pt>Q.Vb){if(Q.Vb=0,Q.Ec=o(Pt),Q.Fc=0,Q.Ec==null){bt=vn(Q,1,"no memory during frame initialization.");break e}Q.Vb=Pt}Pt=Q.Ec,jt=Q.Fc,Q.Ac=Pt,Q.Bc=jt,jt+=It,Q.Gd=u(oe,Zl),Q.Hd=0,Q.rb=u(te+1,pa),Q.sb=1,Q.wa=Oe?u(Oe,Lr):null,Q.Y=0,Q.D.Nb=0,Q.D.wa=Q.wa,Q.D.Y=Q.Y,0<Q.Aa&&(Q.D.Y+=Bt),t(!0),Q.oc=Pt,Q.pc=jt,jt+=832,Q.ya=u(ie,Kl),Q.aa=0,Q.D.ya=Q.ya,Q.D.aa=Q.aa,Q.Aa==2&&(Q.D.aa+=Bt),Q.R=16*Bt,Q.B=8*Bt,Bt=(oe=wl[Q.L])*Q.R,oe=oe/2*Q.B,Q.sa=Pt,Q.ta=jt+Bt,Q.qa=Q.sa,Q.ra=Q.ta+16*bt*Q.R+oe,Q.Ha=Q.qa,Q.Ia=Q.ra+8*bt*Q.B+oe,Q.$c=0,jt+=wt,Q.mb=Rt?Pt:null,Q.nb=Rt?jt:null,t(jt+Rt<=Q.Fc+Q.Vb),tu(Q),a(Q.Ac,Q.Bc,0,It),bt=1}}if(bt){if(pt.ka=0,pt.y=Q.sa,pt.O=Q.ta,pt.f=Q.qa,pt.N=Q.ra,pt.ea=Q.Ha,pt.Vd=Q.Ia,pt.fa=Q.R,pt.Rc=Q.B,pt.F=null,pt.J=0,!fc){for(bt=-255;255>=bt;++bt)Eo[255+bt]=0>bt?-bt:bt;for(bt=-1020;1020>=bt;++bt)cc[1020+bt]=-128>bt?-128:127<bt?127:bt;for(bt=-112;112>=bt;++bt)pu[112+bt]=-16>bt?-16:15<bt?15:bt;for(bt=-255;510>=bt;++bt)mu[255+bt]=0>bt?0:255<bt?255:bt;fc=1}Pr=ga,xs=eu,Wr=lr,bn=nu,fn=iu,Zi=tc,Mn=oc,ci=fs,qa=P,Sa=J,_o=lc,hu=C,bf=ut,Mh=gt,Oh=os,Fh=ls,wf=Co,xf=lu,Jn[0]=ac,Jn[1]=ec,Jn[2]=rc,Jn[3]=su,Jn[4]=Ir,Jn[5]=ou,Jn[6]=Bi,Jn[7]=wo,Jn[8]=xo,Jn[9]=Tr,fr[0]=ya,fr[1]=ru,fr[2]=au,fr[3]=ic,fr[4]=as,fr[5]=bo,fr[6]=zs,Ca[0]=al,Ca[1]=nc,Ca[2]=Ma,Ca[3]=sc,Ca[4]=Ti,Ca[5]=sl,Ca[6]=Oa,bt=1}else bt=0}bt&&(bt=(function(nn,$n){for(nn.M=0;nn.M<nn.Va;++nn.M){var je,ee=nn.Jc[nn.M&nn.Xb],Gt=nn.m,Yn=nn;for(je=0;je<Yn.za;++je){var ke=Gt,Ve=Yn,Cn=Ve.Ac,_i=Ve.Bc+4*je,Wi=Ve.zc,On=Ve.ya[Ve.aa+je];if(Ve.Qa.Bb?On.$b=Mt(ke,Ve.Pa.jb[0])?2+Mt(ke,Ve.Pa.jb[2]):Mt(ke,Ve.Pa.jb[1]):On.$b=0,Ve.kc&&(On.Ad=Mt(ke,Ve.Bd)),On.Za=!Mt(ke,145)+0,On.Za){var gi=On.Ob,er=0;for(Ve=0;4>Ve;++Ve){var yi,Qe=Wi[0+Ve];for(yi=0;4>yi;++yi){Qe=ji[Cn[_i+yi]][Qe];for(var mn=yc[Mt(ke,Qe[0])];0<mn;)mn=yc[2*mn+Mt(ke,Qe[mn])];Qe=-mn,Cn[_i+yi]=Qe}i(gi,er,Cn,_i,4),er+=4,Wi[0+Ve]=Qe}}else Qe=Mt(ke,156)?Mt(ke,128)?1:3:Mt(ke,163)?2:0,On.Ob[0]=Qe,a(Cn,_i,Qe,4),a(Wi,0,Qe,4);On.Dd=Mt(ke,142)?Mt(ke,114)?Mt(ke,183)?1:3:2:0}if(Yn.m.Ka)return vn(nn,7,"Premature end-of-partition0 encountered.");for(;nn.ja<nn.za;++nn.ja){if(Yn=ee,ke=(Gt=nn).rb[Gt.sb-1],Cn=Gt.rb[Gt.sb+Gt.ja],je=Gt.ya[Gt.aa+Gt.ja],_i=Gt.kc?je.Ad:0)ke.la=Cn.la=0,je.Za||(ke.Na=Cn.Na=0),je.Hc=0,je.Gc=0,je.ia=0;else{var Xn,wn;if(ke=Cn,Cn=Yn,_i=Gt.Pa.Xc,Wi=Gt.ya[Gt.aa+Gt.ja],On=Gt.pb[Wi.$b],Ve=Wi.ad,gi=0,er=Gt.rb[Gt.sb-1],Qe=yi=0,a(Ve,gi,0,384),Wi.Za)var ki=0,Kn=_i[3];else{mn=o(16);var gn=ke.Na+er.Na;if(gn=Or(Cn,_i[1],gn,On.Eb,0,mn,0),ke.Na=er.Na=(0<gn)+0,1<gn)Pr(mn,0,Ve,gi);else{var hi=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)Ve[gi+mn]=hi}ki=1,Kn=_i[0]}var An=15&ke.la,vi=15&er.la;for(mn=0;4>mn;++mn){var bi=1&vi;for(hi=wn=0;4>hi;++hi)An=An>>1|(bi=(gn=Or(Cn,Kn,gn=bi+(1&An),On.Sc,ki,Ve,gi))>ki)<<7,wn=wn<<2|(3<gn?3:1<gn?2:Ve[gi+0]!=0),gi+=16;An>>=4,vi=vi>>1|bi<<7,yi=(yi<<8|wn)>>>0}for(Kn=An,ki=vi>>4,Xn=0;4>Xn;Xn+=2){for(wn=0,An=ke.la>>4+Xn,vi=er.la>>4+Xn,mn=0;2>mn;++mn){for(bi=1&vi,hi=0;2>hi;++hi)gn=bi+(1&An),An=An>>1|(bi=0<(gn=Or(Cn,_i[2],gn,On.Qc,0,Ve,gi)))<<3,wn=wn<<2|(3<gn?3:1<gn?2:Ve[gi+0]!=0),gi+=16;An>>=2,vi=vi>>1|bi<<5}Qe|=wn<<4*Xn,Kn|=An<<4<<Xn,ki|=(240&vi)<<Xn}ke.la=Kn,er.la=ki,Wi.Hc=yi,Wi.Gc=Qe,Wi.ia=43690&Qe?0:On.ia,_i=!(yi|Qe)}if(0<Gt.L&&(Gt.wa[Gt.Y+Gt.ja]=Gt.gd[je.$b][je.Za],Gt.wa[Gt.Y+Gt.ja].La|=!_i),Yn.Ka)return vn(nn,7,"Premature end-of-file encountered.")}if(tu(nn),Gt=$n,Yn=1,je=(ee=nn).D,ke=0<ee.L&&ee.M>=ee.zb&&ee.M<=ee.Va,ee.Aa==0)e:{if(je.M=ee.M,je.uc=ke,Dr(ee,je),Yn=1,je=(wn=ee.D).Nb,ke=(Qe=wl[ee.L])*ee.R,Cn=Qe/2*ee.B,mn=16*je*ee.R,hi=8*je*ee.B,_i=ee.sa,Wi=ee.ta-ke+mn,On=ee.qa,Ve=ee.ra-Cn+hi,gi=ee.Ha,er=ee.Ia-Cn+hi,vi=(An=wn.M)==0,yi=An>=ee.Va-1,ee.Aa==2&&Dr(ee,wn),wn.uc)for(bi=(gn=ee).D.M,t(gn.D.uc),wn=gn.yb;wn<gn.Hb;++wn){ki=wn,Kn=bi;var En=(hn=(wi=gn).D).Nb;Xn=wi.R;var hn=hn.wa[hn.Y+ki],nr=wi.sa,ti=wi.ta+16*En*Xn+16*ki,ve=hn.dd,xe=hn.tc;if(xe!=0)if(t(3<=xe),wi.L==1)0<ki&&Fh(nr,ti,Xn,xe+4),hn.La&&xf(nr,ti,Xn,xe),0<Kn&&Oh(nr,ti,Xn,xe+4),hn.La&&wf(nr,ti,Xn,xe);else{var yn=wi.B,vr=wi.qa,ta=wi.ra+8*En*yn+8*ki,hr=wi.Ha,wi=wi.Ia+8*En*yn+8*ki;En=hn.ld,0<ki&&(ci(nr,ti,Xn,xe+4,ve,En),Sa(vr,ta,hr,wi,yn,xe+4,ve,En)),hn.La&&(hu(nr,ti,Xn,xe,ve,En),Mh(vr,ta,hr,wi,yn,xe,ve,En)),0<Kn&&(Mn(nr,ti,Xn,xe+4,ve,En),qa(vr,ta,hr,wi,yn,xe+4,ve,En)),hn.La&&(_o(nr,ti,Xn,xe,ve,En),bf(vr,ta,hr,wi,yn,xe,ve,En))}}if(ee.ia&&alert("todo:DitherRow"),Gt.put!=null){if(wn=16*An,An=16*(An+1),vi?(Gt.y=ee.sa,Gt.O=ee.ta+mn,Gt.f=ee.qa,Gt.N=ee.ra+hi,Gt.ea=ee.Ha,Gt.W=ee.Ia+hi):(wn-=Qe,Gt.y=_i,Gt.O=Wi,Gt.f=On,Gt.N=Ve,Gt.ea=gi,Gt.W=er),yi||(An-=Qe),An>Gt.o&&(An=Gt.o),Gt.F=null,Gt.J=null,ee.Fa!=null&&0<ee.Fa.length&&wn<An&&(Gt.J=Pn(ee,Gt,wn,An-wn),Gt.F=ee.mb,Gt.F==null&&Gt.F.length==0)){Yn=vn(ee,3,"Could not decode alpha data.");break e}wn<Gt.j&&(Qe=Gt.j-wn,wn=Gt.j,t(!(1&Qe)),Gt.O+=ee.R*Qe,Gt.N+=ee.B*(Qe>>1),Gt.W+=ee.B*(Qe>>1),Gt.F!=null&&(Gt.J+=Gt.width*Qe)),wn<An&&(Gt.O+=Gt.v,Gt.N+=Gt.v>>1,Gt.W+=Gt.v>>1,Gt.F!=null&&(Gt.J+=Gt.v),Gt.ka=wn-Gt.j,Gt.U=Gt.va-Gt.v,Gt.T=An-wn,Yn=Gt.put(Gt))}je+1!=ee.Ic||yi||(i(ee.sa,ee.ta-ke,_i,Wi+16*ee.R,ke),i(ee.qa,ee.ra-Cn,On,Ve+8*ee.B,Cn),i(ee.Ha,ee.Ia-Cn,gi,er+8*ee.B,Cn))}if(!Yn)return vn(nn,6,"Output aborted.")}return 1})(Q,pt)),pt.bc!=null&&pt.bc(pt),bt&=1}return bt?(Q.cb=0,bt):0})(g,L)||(w=g.a)}}else w=g.a}w==0&&U.Oa!=null&&U.Oa.fd&&(w=fu(U.ba))}U=w}z=U!=0?null:11>z?H.f.RGBA.eb:H.f.kb.y}else z=null;return z};var xc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(F,G){for(var E="",B=0;B<4;B++)E+=String.fromCharCode(F[G++]);return E}function p(F,G){return F[G+0]|F[G+1]<<8}function m(F,G){return(F[G+0]|F[G+1]<<8|F[G+2]<<16)>>>0}function v(F,G){return(F[G+0]|F[G+1]<<8|F[G+2]<<16|F[G+3]<<24)>>>0}new f;var y=[0],S=[0],N=[],A=new f,_=n,I=(function(F,G){var E={},B=0,tt=!1,et=0,ht=0;if(E.frames=[],!(function(T,j){for(var V=0;V<4;V++)if(T[j+V]!="RIFF".charCodeAt(V))return!0;return!1})(F,G)){for(v(F,G+=4),G+=8;G<F.length;){var X=h(F,G),lt=v(F,G+=4);G+=4;var st=lt+(1&lt);switch(X){case"VP8 ":case"VP8L":E.frames[B]===void 0&&(E.frames[B]={}),(q=E.frames[B]).src_off=tt?ht:G-8,q.src_size=et+lt+8,B++,tt&&(tt=!1,et=0,ht=0);break;case"VP8X":(q=E.header={}).feature_flags=F[G];var vt=G+4;q.canvas_width=1+m(F,vt),vt+=3,q.canvas_height=1+m(F,vt),vt+=3;break;case"ALPH":tt=!0,et=st+8,ht=G-8;break;case"ANIM":(q=E.header).bgcolor=v(F,G),vt=G+4,q.loop_count=p(F,vt),vt+=2;break;case"ANMF":var Et,q;(q=E.frames[B]={}).offset_x=2*m(F,G),G+=3,q.offset_y=2*m(F,G),G+=3,q.width=1+m(F,G),G+=3,q.height=1+m(F,G),G+=3,q.duration=m(F,G),G+=3,Et=F[G++],q.dispose=1&Et,q.blend=Et>>1&1}X!="ANMF"&&(G+=st)}return E}})(_,0);I.response=_,I.rgbaoutput=!0,I.dataurl=!1;var D=I.header?I.header:null,M=I.frames?I.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],S=[D.canvas_width];for(var Y=0;Y<M.length&&M[Y].blend!=0;Y++);}var ct=M[0],it=A.WebPDecodeRGBA(_,ct.src_off,ct.src_size,S,y);ct.rgba=it,ct.imgwidth=S[0],ct.imgheight=y[0];for(var nt=0;nt<S[0]*y[0]*4;nt++)N[nt]=it[nt];return this.width=S,this.height=y,this.data=N,this}(function(n){var t,e,i,a,o,u,c,f,h,p=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new f,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new u,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new u,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,h=new p}]);var m=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=T;Object.defineProperty(this,"pdf",{get:function(){return j}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(K){V=!!K}});var rt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return rt},set:function(K){rt=!!K}});var ot=0;Object.defineProperty(this,"posX",{get:function(){return ot},set:function(K){isNaN(K)||(ot=K)}});var mt=0;Object.defineProperty(this,"posY",{get:function(){return mt},set:function(K){isNaN(K)||(mt=K)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(K){var Yt;typeof K=="number"?Yt=[K,K,K,K]:((Yt=new Array(4))[0]=K[0],Yt[1]=K.length>=2?K[1]:Yt[0],Yt[2]=K.length>=3?K[2]:Yt[0],Yt[3]=K.length>=4?K[3]:Yt[1]),h.margin=Yt}});var kt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return kt},set:function(K){kt=K}});var At=0;Object.defineProperty(this,"lastBreak",{get:function(){return At},set:function(K){At=K}});var Mt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Mt},set:function(K){Mt=K}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(K){K instanceof p&&(h=K)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(K){h.path=K}});var Ht=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ht},set:function(K){Ht=K}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(K){var Yt;Yt=v(K),this.ctx.fillStyle=Yt.style,this.ctx.isFillTransparent=Yt.a===0,this.ctx.fillOpacity=Yt.a,this.pdf.setFillColor(Yt.r,Yt.g,Yt.b,{a:Yt.a}),this.pdf.setTextColor(Yt.r,Yt.g,Yt.b,{a:Yt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(K){var Yt=v(K);this.ctx.strokeStyle=Yt.style,this.ctx.isStrokeTransparent=Yt.a===0,this.ctx.strokeOpacity=Yt.a,Yt.a===0?this.pdf.setDrawColor(255,255,255):(Yt.a,this.pdf.setDrawColor(Yt.r,Yt.g,Yt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(K){["butt","round","square"].indexOf(K)!==-1&&(this.ctx.lineCap=K,this.pdf.setLineCap(K))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(K){isNaN(K)||(this.ctx.lineWidth=K,this.pdf.setLineWidth(K))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(K){["bevel","round","miter"].indexOf(K)!==-1&&(this.ctx.lineJoin=K,this.pdf.setLineJoin(K))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(K){isNaN(K)||(this.ctx.miterLimit=K,this.pdf.setMiterLimit(K))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(K){this.ctx.textBaseline=K}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(K){["right","end","center","left","start"].indexOf(K)!==-1&&(this.ctx.textAlign=K)}});var Kt=null,Qt=null,ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return ue},set:function(K){Kt=null,Qt=null,ue=K}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(K){var Yt;if(this.ctx.font=K,(Yt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(K))!==null){var Ge=Yt[1];Yt[2];var Ce=Yt[3],$t=Yt[4];Yt[5];var be=Yt[6],ne=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($t)[2];$t=Math.floor(ne==="px"?parseFloat($t)*this.pdf.internal.scaleFactor:ne==="em"?parseFloat($t)*this.pdf.getFontSize():parseFloat($t)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($t);var Ae=(function(de){var si,Ze,Ne=[],Te=de.trim();if(Te==="")return S1;if(Te in s5)return[s5[Te]];for(;Te!=="";){switch(Ze=null,si=(Te=l5(Te)).charAt(0)){case'"':case"'":Ze=QB(Te.substring(1),si);break;default:Ze=ZB(Te)}if(Ze===null||(Ne.push(Ze[0]),(Te=l5(Ze[1]))!==""&&Te.charAt(0)!==","))return S1;Te=Te.replace(/^,/,"")}return Ne})(be);if(this.fontFaces){var ge=(function(de,si){var Ze=de.getFontList(),Ne=JSON.stringify(Ze);if(Kt===null||Qt!==Ne){var Te=(function(en){var we=[];return Object.keys(en).forEach(function(Dn){en[Dn].forEach(function(Ee){var De=null;switch(Ee){case"bold":De={family:Dn,weight:"bold"};break;case"italic":De={family:Dn,style:"italic"};break;case"bolditalic":De={family:Dn,weight:"bold",style:"italic"};break;case"":case"normal":De={family:Dn}}De!==null&&(De.ref={name:Dn,style:Ee},we.push(De))})}),we})(Ze);Kt=(function(en){for(var we={},Dn=0;Dn<en.length;++Dn){var Ee=x1(en[Dn]),De=Ee.family,_n=Ee.stretch,We=Ee.style,pe=Ee.weight;we[De]=we[De]||{},we[De][_n]=we[De][_n]||{},we[De][_n][We]=we[De][_n][We]||{},we[De][_n][We][pe]=Ee}return we})(Te.concat(si)),Qt=Ne}return Kt})(this.pdf,this.fontFaces),Ue=Ae.map(function(de){return{family:de,stretch:"normal",weight:Ce,style:Ge}}),Je=(function(de,si,Ze){for(var Ne=(Ze=Ze||{}).defaultFontFamily||"times",Te=Object.assign({},KB,Ze.genericFontFamilies||{}),en=null,we=null,Dn=0;Dn<si.length;++Dn)if(Te[(en=x1(si[Dn])).family]&&(en.family=Te[en.family]),de.hasOwnProperty(en.family)){we=de[en.family];break}if(!(we=we||de[Ne]))throw new Error("Could not find a font-family for the rule '"+o5(en)+"' and default family '"+Ne+"'.");if(we=(function(Ee,De){if(De[Ee])return De[Ee];var _n=sg[Ee],We=_n<=sg.normal?-1:1,pe=a5(De,hw,_n,We);if(!pe)throw new Error("Could not find a matching font-stretch value for "+Ee);return pe})(en.stretch,we),we=(function(Ee,De){if(De[Ee])return De[Ee];for(var _n=fw[Ee],We=0;We<_n.length;++We)if(De[_n[We]])return De[_n[We]];throw new Error("Could not find a matching font-style for "+Ee)})(en.style,we),!(we=(function(Ee,De){if(De[Ee])return De[Ee];if(Ee===400&&De[500])return De[500];if(Ee===500&&De[400])return De[400];var _n=XB[Ee],We=a5(De,dw,_n,Ee<400?-1:1);if(!We)throw new Error("Could not find a matching font-weight for value "+Ee);return We})(en.weight,we)))throw new Error("Failed to resolve a font for the rule '"+o5(en)+"'.");return we})(ge,Ue);this.pdf.setFont(Je.ref.name,Je.ref.style)}else{var Be="";(Ce==="bold"||parseInt(Ce,10)>=700||Ge==="bold")&&(Be="bold"),Ge==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var tn="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ce=0;ce<Ae.length;ce++){if(this.pdf.internal.getFont(Ae[ce],Be,{noFallback:!0,disableWarning:!0})!==void 0){tn=Ae[ce];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(Ae[ce],"bold",{noFallback:!0,disableWarning:!0})!==void 0)tn=Ae[ce],Be="bold";else if(this.pdf.internal.getFont(Ae[ce],"normal",{noFallback:!0,disableWarning:!0})!==void 0){tn=Ae[ce],Be="normal";break}}if(tn===""){for(var ze=0;ze<Ae.length;ze++)if(Xe[Ae[ze]]){tn=Xe[Ae[ze]];break}}tn=tn===""?"Times":tn,this.pdf.setFont(tn,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(K){this.ctx.globalCompositeOperation=K}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(K){this.ctx.globalAlpha=K}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(K){this.ctx.lineDashOffset=K,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(K){this.ctx.lineDash=K,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(K){this.ctx.ignoreClearRect=!!K}})};m.prototype.setLineDash=function(T){this.lineDash=T},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){M.call(this,"fill",!1)},m.prototype.stroke=function(){M.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(T,j){if(isNaN(T)||isNaN(j))throw Hn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new u(T,j));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new u(T,j)},m.prototype.closePath=function(){var T=new u(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Tn(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){T=new u(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(T.x,T.y)},m.prototype.lineTo=function(T,j){if(isNaN(T)||isNaN(j))throw Hn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new u(T,j));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new u(V.x,V.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},m.prototype.quadraticCurveTo=function(T,j,V,rt){if(isNaN(V)||isNaN(rt)||isNaN(T)||isNaN(j))throw Hn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ot=this.ctx.transform.applyToPoint(new u(V,rt)),mt=this.ctx.transform.applyToPoint(new u(T,j));this.path.push({type:"qct",x1:mt.x,y1:mt.y,x:ot.x,y:ot.y}),this.ctx.lastPoint=new u(ot.x,ot.y)},m.prototype.bezierCurveTo=function(T,j,V,rt,ot,mt){if(isNaN(ot)||isNaN(mt)||isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt))throw Hn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var kt=this.ctx.transform.applyToPoint(new u(ot,mt)),At=this.ctx.transform.applyToPoint(new u(T,j)),Mt=this.ctx.transform.applyToPoint(new u(V,rt));this.path.push({type:"bct",x1:At.x,y1:At.y,x2:Mt.x,y2:Mt.y,x:kt.x,y:kt.y}),this.ctx.lastPoint=new u(kt.x,kt.y)},m.prototype.arc=function(T,j,V,rt,ot,mt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt)||isNaN(ot))throw Hn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(mt=!!mt,!this.ctx.transform.isIdentity){var kt=this.ctx.transform.applyToPoint(new u(T,j));T=kt.x,j=kt.y;var At=this.ctx.transform.applyToPoint(new u(0,V)),Mt=this.ctx.transform.applyToPoint(new u(0,0));V=Math.sqrt(Math.pow(At.x-Mt.x,2)+Math.pow(At.y-Mt.y,2))}Math.abs(ot-rt)>=2*Math.PI&&(rt=0,ot=2*Math.PI),this.path.push({type:"arc",x:T,y:j,radius:V,startAngle:rt,endAngle:ot,counterclockwise:mt})},m.prototype.arcTo=function(T,j,V,rt,ot){throw new Error("arcTo not implemented.")},m.prototype.rect=function(T,j,V,rt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt))throw Hn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,j),this.lineTo(T+V,j),this.lineTo(T+V,j+rt),this.lineTo(T,j+rt),this.lineTo(T,j),this.lineTo(T+V,j),this.lineTo(T,j)},m.prototype.fillRect=function(T,j,V,rt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt))throw Hn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ot={};this.lineCap!=="butt"&&(ot.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ot.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,j,V,rt),this.fill(),ot.hasOwnProperty("lineCap")&&(this.lineCap=ot.lineCap),ot.hasOwnProperty("lineJoin")&&(this.lineJoin=ot.lineJoin)}},m.prototype.strokeRect=function(T,j,V,rt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt))throw Hn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(T,j,V,rt),this.stroke())},m.prototype.clearRect=function(T,j,V,rt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt))throw Hn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,j,V,rt))},m.prototype.save=function(T){T=typeof T!="boolean"||T;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var rt=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=rt}},m.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(j),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(T){var j,V,rt,ot;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))j=0,V=0,rt=0,ot=0;else{var mt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(mt!==null)j=parseInt(mt[1]),V=parseInt(mt[2]),rt=parseInt(mt[3]),ot=1;else if((mt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)j=parseInt(mt[1]),V=parseInt(mt[2]),rt=parseInt(mt[3]),ot=parseFloat(mt[4]);else{if(ot=1,typeof T=="string"&&T.charAt(0)!=="#"){var kt=new rw(T);T=kt.ok?kt.toHex():"#000000"}T.length===4?(j=T.substring(1,2),j+=j,V=T.substring(2,3),V+=V,rt=T.substring(3,4),rt+=rt):(j=T.substring(1,3),V=T.substring(3,5),rt=T.substring(5,7)),j=parseInt(j,16),V=parseInt(V,16),rt=parseInt(rt,16)}}return{r:j,g:V,b:rt,a:ot,style:T}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(T,j,V,rt){if(isNaN(j)||isNaN(V)||typeof T!="string")throw Hn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(rt=isNaN(rt)?void 0:rt,!y.call(this)){var ot=st(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;B.call(this,{text:T,x:j,y:V,scale:mt,angle:ot,align:this.textAlign,maxWidth:rt})}},m.prototype.strokeText=function(T,j,V,rt){if(isNaN(j)||isNaN(V)||typeof T!="string")throw Hn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){rt=isNaN(rt)?void 0:rt;var ot=st(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;B.call(this,{text:T,x:j,y:V,scale:mt,renderingMode:"stroke",angle:ot,align:this.textAlign,maxWidth:rt})}},m.prototype.measureText=function(T){if(typeof T!="string")throw Hn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,V=this.pdf.internal.scaleFactor,rt=j.internal.getFontSize(),ot=j.getStringUnitWidth(T)*rt/j.internal.scaleFactor;return new function(mt){var kt=(mt=mt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return kt}}),this}({width:ot*=Math.round(96*V/72*1e4)/1e4})},m.prototype.scale=function(T,j){if(isNaN(T)||isNaN(j))throw Hn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new f(T,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.rotate=function(T){if(isNaN(T))throw Hn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new f(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},m.prototype.translate=function(T,j){if(isNaN(T)||isNaN(j))throw Hn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new f(1,0,0,1,T,j);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.transform=function(T,j,V,rt,ot,mt){if(isNaN(T)||isNaN(j)||isNaN(V)||isNaN(rt)||isNaN(ot)||isNaN(mt))throw Hn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var kt=new f(T,j,V,rt,ot,mt);this.ctx.transform=this.ctx.transform.multiply(kt)},m.prototype.setTransform=function(T,j,V,rt,ot,mt){T=isNaN(T)?1:T,j=isNaN(j)?0:j,V=isNaN(V)?0:V,rt=isNaN(rt)?1:rt,ot=isNaN(ot)?0:ot,mt=isNaN(mt)?0:mt,this.ctx.transform=new f(T,j,V,rt,ot,mt)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(T,j,V,rt,ot,mt,kt,At,Mt){var Ht=this.pdf.getImageProperties(T),Kt=1,Qt=1,ue=1,K=1;rt!==void 0&&At!==void 0&&(ue=At/rt,K=Mt/ot,Kt=Ht.width/rt*At/rt,Qt=Ht.height/ot*Mt/ot),mt===void 0&&(mt=j,kt=V,j=0,V=0),rt!==void 0&&At===void 0&&(At=rt,Mt=ot),rt===void 0&&At===void 0&&(At=Ht.width,Mt=Ht.height);var Yt=this.ctx.transform.decompose(),Ge=st(Yt.rotate.shx),Ce=new f,$t=(Ce=(Ce=(Ce=Ce.multiply(Yt.translate)).multiply(Yt.skew)).multiply(Yt.scale)).applyToRectangle(new c(mt-j*ue,kt-V*K,rt*Kt,ot*Qt));if(this.autoPaging){for(var be,ne=A.call(this,$t),Ae=[],ge=0;ge<ne.length;ge+=1)Ae.indexOf(ne[ge])===-1&&Ae.push(ne[ge]);D(Ae);for(var Ue=Ae[0],Je=Ae[Ae.length-1],Be=Ue;Be<Je+1;Be++){this.pdf.setPage(Be);var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=Be===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],de=Be===1?0:ce+(Be-2)*ze;if(this.ctx.clip_path.length!==0){var si=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(be,this.posX+this.margin[3],-de+Xe+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=si}var Ze=JSON.parse(JSON.stringify($t));Ze=I([Ze],this.posX+this.margin[3],-de+Xe+this.ctx.prevPageLastElemOffset)[0];var Ne=(Be>Ue||Be<Je)&&N.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,ze,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,Ge),Ne&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(T,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,Ge)};var A=function(T,j,V){var rt=[];j=j||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ot=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":rt.push(Math.floor((T.y+ot)/V)+1);break;case"arc":rt.push(Math.floor((T.y+ot-T.radius)/V)+1),rt.push(Math.floor((T.y+ot+T.radius)/V)+1);break;case"qct":var mt=vt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);rt.push(Math.floor((mt.y+ot)/V)+1),rt.push(Math.floor((mt.y+mt.h+ot)/V)+1);break;case"bct":var kt=Et(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);rt.push(Math.floor((kt.y+ot)/V)+1),rt.push(Math.floor((kt.y+kt.h+ot)/V)+1);break;case"rect":rt.push(Math.floor((T.y+ot)/V)+1),rt.push(Math.floor((T.y+T.h+ot)/V)+1)}for(var At=0;At<rt.length;At+=1)for(;this.pdf.internal.getNumberOfPages()<rt[At];)_.call(this);return rt},_=function(){var T=this.fillStyle,j=this.strokeStyle,V=this.font,rt=this.lineCap,ot=this.lineWidth,mt=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=j,this.font=V,this.lineCap=rt,this.lineWidth=ot,this.lineJoin=mt},I=function(T,j,V){for(var rt=0;rt<T.length;rt++)switch(T[rt].type){case"bct":T[rt].x2+=j,T[rt].y2+=V;case"qct":T[rt].x1+=j,T[rt].y1+=V;default:T[rt].x+=j,T[rt].y+=V}return T},D=function(T){return T.sort(function(j,V){return j-V})},M=function(T,j){var V=this.fillStyle,rt=this.strokeStyle,ot=this.lineCap,mt=this.lineWidth,kt=Math.abs(mt*this.ctx.transform.scaleX),At=this.lineJoin;if(this.autoPaging){for(var Mt,Ht,Kt=JSON.parse(JSON.stringify(this.path)),Qt=JSON.parse(JSON.stringify(this.path)),ue=[],K=0;K<Qt.length;K++)if(Qt[K].x!==void 0)for(var Yt=A.call(this,Qt[K]),Ge=0;Ge<Yt.length;Ge+=1)ue.indexOf(Yt[Ge])===-1&&ue.push(Yt[Ge]);for(var Ce=0;Ce<ue.length;Ce++)for(;this.pdf.internal.getNumberOfPages()<ue[Ce];)_.call(this);D(ue);for(var $t=ue[0],be=ue[ue.length-1],ne=$t;ne<be+1;ne++){this.pdf.setPage(ne),this.fillStyle=V,this.strokeStyle=rt,this.lineCap=ot,this.lineWidth=kt,this.lineJoin=At;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ge=ne===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=ne===1?0:Ue+(ne-2)*Je;if(this.ctx.clip_path.length!==0){var tn=this.path;Mt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Mt,this.posX+this.margin[3],-Be+ge+this.ctx.prevPageLastElemOffset),Y.call(this,T,!0),this.path=tn}if(Ht=JSON.parse(JSON.stringify(Kt)),this.path=I(Ht,this.posX+this.margin[3],-Be+ge+this.ctx.prevPageLastElemOffset),j===!1||ne===0){var Xe=(ne>$t||ne<be)&&N.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Je,null).clip().discardPath()),Y.call(this,T,j),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}this.path=Kt}else this.lineWidth=kt,Y.call(this,T,j),this.lineWidth=mt},Y=function(T,j){if((T!=="stroke"||j||!S.call(this))&&(T==="stroke"||j||!y.call(this))){for(var V,rt,ot=[],mt=this.path,kt=0;kt<mt.length;kt++){var At=mt[kt];switch(At.type){case"begin":ot.push({begin:!0});break;case"close":ot.push({close:!0});break;case"mt":ot.push({start:At,deltas:[],abs:[]});break;case"lt":var Mt=ot.length;if(mt[kt-1]&&!isNaN(mt[kt-1].x)&&(V=[At.x-mt[kt-1].x,At.y-mt[kt-1].y],Mt>0)){for(;Mt>=0;Mt--)if(ot[Mt-1].close!==!0&&ot[Mt-1].begin!==!0){ot[Mt-1].deltas.push(V),ot[Mt-1].abs.push(At);break}}break;case"bct":V=[At.x1-mt[kt-1].x,At.y1-mt[kt-1].y,At.x2-mt[kt-1].x,At.y2-mt[kt-1].y,At.x-mt[kt-1].x,At.y-mt[kt-1].y],ot[ot.length-1].deltas.push(V);break;case"qct":var Ht=mt[kt-1].x+2/3*(At.x1-mt[kt-1].x),Kt=mt[kt-1].y+2/3*(At.y1-mt[kt-1].y),Qt=At.x+2/3*(At.x1-At.x),ue=At.y+2/3*(At.y1-At.y),K=At.x,Yt=At.y;V=[Ht-mt[kt-1].x,Kt-mt[kt-1].y,Qt-mt[kt-1].x,ue-mt[kt-1].y,K-mt[kt-1].x,Yt-mt[kt-1].y],ot[ot.length-1].deltas.push(V);break;case"arc":ot.push({deltas:[],abs:[],arc:!0}),Array.isArray(ot[ot.length-1].abs)&&ot[ot.length-1].abs.push(At)}}rt=j?null:T==="stroke"?"stroke":"fill";for(var Ge=!1,Ce=0;Ce<ot.length;Ce++)if(ot[Ce].arc)for(var $t=ot[Ce].abs,be=0;be<$t.length;be++){var ne=$t[be];ne.type==="arc"?nt.call(this,ne.x,ne.y,ne.radius,ne.startAngle,ne.endAngle,ne.counterclockwise,void 0,j,!Ge):tt.call(this,ne.x,ne.y),Ge=!0}else if(ot[Ce].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(ot[Ce].begin!==!0){var Ae=ot[Ce].start.x,ge=ot[Ce].start.y;et.call(this,ot[Ce].deltas,Ae,ge),Ge=!0}rt&&F.call(this,rt),j&&G.call(this)}},ct=function(T){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-V;case"top":return T+j-V;case"hanging":return T+j-2*V;case"middle":return T+j/2-V;default:return T}},it=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(j,V){this.colorStops.push([j,V])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var nt=function(T,j,V,rt,ot,mt,kt,At,Mt){for(var Ht=X.call(this,V,rt,ot,mt),Kt=0;Kt<Ht.length;Kt++){var Qt=Ht[Kt];Kt===0&&(Mt?E.call(this,Qt.x1+T,Qt.y1+j):tt.call(this,Qt.x1+T,Qt.y1+j)),ht.call(this,T,j,Qt.x2,Qt.y2,Qt.x3,Qt.y3,Qt.x4,Qt.y4)}At?G.call(this):F.call(this,kt)},F=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(T,j){this.pdf.internal.out(e(T)+" "+i(j)+" m")},B=function(T){var j;switch(T.align){case"right":case"end":j="right";break;case"center":j="center";break;default:j="left"}var V,rt,ot,mt=this.pdf.getTextDimensions(T.text),kt=ct.call(this,T.y),At=it.call(this,kt)-mt.h,Mt=this.ctx.transform.applyToPoint(new u(T.x,kt));if(this.autoPaging){var Ht=this.ctx.transform.decompose(),Kt=new f;Kt=(Kt=(Kt=Kt.multiply(Ht.translate)).multiply(Ht.skew)).multiply(Ht.scale);for(var Qt=this.ctx.transform.applyToRectangle(new c(T.x,kt,mt.w,mt.h)),ue=Kt.applyToRectangle(new c(T.x,At,mt.w,mt.h)),K=A.call(this,ue),Yt=[],Ge=0;Ge<K.length;Ge+=1)Yt.indexOf(K[Ge])===-1&&Yt.push(K[Ge]);D(Yt);for(var Ce=Yt[0],$t=Yt[Yt.length-1],be=Ce;be<$t+1;be++){this.pdf.setPage(be);var ne=be===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[2],Ue=ge-this.margin[0],Je=this.pdf.internal.pageSize.width-this.margin[1],Be=Je-this.margin[3],tn=be===1?0:Ae+(be-2)*Ue;if(this.ctx.clip_path.length!==0){var Xe=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(V,this.posX+this.margin[3],-1*tn+ne),Y.call(this,"fill",!0),this.path=Xe}var ce=I([JSON.parse(JSON.stringify(ue))],this.posX+this.margin[3],-tn+ne+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*T.scale),ot=this.lineWidth,this.lineWidth=ot*T.scale);var ze=this.autoPaging!=="text";if(ze||ce.y+ce.h<=ge){if(ze||ce.y>=ne&&ce.x<=Je){var de=ze?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Je-ce.x)[0],si=I([JSON.parse(JSON.stringify(Qt))],this.posX+this.margin[3],-tn+ne+this.ctx.prevPageLastElemOffset)[0],Ze=ze&&(be>Ce||be<$t)&&N.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,Ue,null).clip().discardPath()),this.pdf.text(de,si.x,si.y,{angle:T.angle,align:j,renderingMode:T.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else ce.y<ge&&(this.ctx.prevPageLastElemOffset+=ge-ce.y);T.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=ot)}}else T.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*T.scale),ot=this.lineWidth,this.lineWidth=ot*T.scale),this.pdf.text(T.text,Mt.x+this.posX,Mt.y+this.posY,{angle:T.angle,align:j,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=ot)},tt=function(T,j,V,rt){V=V||0,rt=rt||0,this.pdf.internal.out(e(T+V)+" "+i(j+rt)+" l")},et=function(T,j,V){return this.pdf.lines(T,j,V,null,null)},ht=function(T,j,V,rt,ot,mt,kt,At){this.pdf.internal.out([t(a(V+T)),t(o(rt+j)),t(a(ot+T)),t(o(mt+j)),t(a(kt+T)),t(o(At+j)),"c"].join(" "))},X=function(T,j,V,rt){for(var ot=2*Math.PI,mt=Math.PI/2;j>V;)j-=ot;var kt=Math.abs(V-j);kt<ot&&rt&&(kt=ot-kt);for(var At=[],Mt=rt?-1:1,Ht=j;kt>1e-5;){var Kt=Ht+Mt*Math.min(kt,mt);At.push(lt.call(this,T,Ht,Kt)),kt-=Math.abs(Kt-Ht),Ht=Kt}return At},lt=function(T,j,V){var rt=(V-j)/2,ot=T*Math.cos(rt),mt=T*Math.sin(rt),kt=ot,At=-mt,Mt=kt*kt+At*At,Ht=Mt+kt*ot+At*mt,Kt=4/3*(Math.sqrt(2*Mt*Ht)-Ht)/(kt*mt-At*ot),Qt=kt-Kt*At,ue=At+Kt*kt,K=Qt,Yt=-ue,Ge=rt+j,Ce=Math.cos(Ge),$t=Math.sin(Ge);return{x1:T*Math.cos(j),y1:T*Math.sin(j),x2:Qt*Ce-ue*$t,y2:Qt*$t+ue*Ce,x3:K*Ce-Yt*$t,y3:K*$t+Yt*Ce,x4:T*Math.cos(V),y4:T*Math.sin(V)}},st=function(T){return 180*T/Math.PI},vt=function(T,j,V,rt,ot,mt){var kt=T+.5*(V-T),At=j+.5*(rt-j),Mt=ot+.5*(V-ot),Ht=mt+.5*(rt-mt),Kt=Math.min(T,ot,kt,Mt),Qt=Math.max(T,ot,kt,Mt),ue=Math.min(j,mt,At,Ht),K=Math.max(j,mt,At,Ht);return new c(Kt,ue,Qt-Kt,K-ue)},Et=function(T,j,V,rt,ot,mt,kt,At){var Mt,Ht,Kt,Qt,ue,K,Yt,Ge,Ce,$t,be,ne,Ae,ge,Ue=V-T,Je=rt-j,Be=ot-V,tn=mt-rt,Xe=kt-ot,ce=At-mt;for(Ht=0;Ht<41;Ht++)Ce=(Yt=(Kt=T+(Mt=Ht/40)*Ue)+Mt*((ue=V+Mt*Be)-Kt))+Mt*(ue+Mt*(ot+Mt*Xe-ue)-Yt),$t=(Ge=(Qt=j+Mt*Je)+Mt*((K=rt+Mt*tn)-Qt))+Mt*(K+Mt*(mt+Mt*ce-K)-Ge),Ht==0?(be=Ce,ne=$t,Ae=Ce,ge=$t):(be=Math.min(be,Ce),ne=Math.min(ne,$t),Ae=Math.max(Ae,Ce),ge=Math.max(ge,$t));return new c(Math.round(be),Math.round(ne),Math.round(Ae-be),Math.round(ge-ne))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,j,V=(T=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:j}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(me.API),(function(n){var t=function(u){var c,f,h,p,m,v,y,S,N,A;for(f=[],h=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>h;h+=4)(m=(u.charCodeAt(h)<<24)+(u.charCodeAt(h+1)<<16)+(u.charCodeAt(h+2)<<8)+u.charCodeAt(h+3))!==0?(v=(m=((m=((m=((m=(m-(A=m%85))/85)-(N=m%85))/85)-(S=m%85))/85)-(y=m%85))/85)%85,f.push(v+33,y+33,S+33,N+33,A+33)):f.push(122);return(function(_,I){for(var D=I;D>0;D--)_.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},e=function(u){var c,f,h,p,m,v=String,y="length",S=255,N="charCodeAt",A="slice",_="replace";for(u[A](-2),u=u[A](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),h=[],p=0,m=(u+=c="uuuuu"[A](u[y]%5||5))[y];m>p;p+=5)f=52200625*(u[N](p)-33)+614125*(u[N](p+1)-33)+7225*(u[N](p+2)-33)+85*(u[N](p+3)-33)+(u[N](p+4)-33),h.push(S&f>>24,S&f>>16,S&f>>8,S&f);return(function(I,D){for(var M=D;M>0;M--)I.pop()})(h,c[y]),v.fromCharCode.apply(v,h)},i=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",h=0;h<u.length;h+=2)f+=String.fromCharCode("0x"+(u[h]+u[h+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=J1(c)).reduce(function(h,p){return h+String.fromCharCode(p)},"")};n.processDataByFilters=function(u,c){var f=0,h=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":h=e(h),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=a(h),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=i(h),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:h,reverseChain:p.reverse().join(" ")}}})(me.API),(function(n){n.loadFile=function(t,e,i){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,h,p){var m=new XMLHttpRequest,v=0,y=function(S){var N=S.length,A=[],_=String.fromCharCode;for(v=0;v<N;v+=1)A.push(_(255&S.charCodeAt(v)));return A.join("")};if(m.open("GET",f,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?p(y(this.responseText)):p(void 0)}),m.send(null),h&&m.status===200)return y(m.responseText)})(a,o,u)}catch{}return c})(t,e,i)},n.loadImageFile=n.loadFile})(me.API),(function(n){function t(){return(Fe.html2canvas?Promise.resolve(Fe.html2canvas):i1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function e(){return(Fe.DOMPurify?Promise.resolve(Fe.DOMPurify):i1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var i=function(c){var f=Tn(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var h=document.createElement(c);for(var p in f.className&&(h.className=f.className),f.innerHTML&&f.dompurify&&(h.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)h.style[p]=f.style[p];return h},o=function c(f,h){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),m=f.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(c(m,h));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p},u=function c(f){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),h);return(p=p.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(h){switch(i(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(e).then(function(h){return this.set({src:a("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(f){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,f(this.prop.container,h)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(f){var h=this.opt.jsPDF,p=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=p,p)for(var y=0;y<p.length;++y){var S=p[y],N=S.src.find(function(A){return A.format==="truetype"});N&&h.addFont(N.url,S.ref.name,S.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,h.context2d.save(!0),f(this.prop.container,v)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(i(c)!=="object")return this;var f=Object.keys(c||{}).map(function(h){if(h in u.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var h=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(h):h})},u.prototype.setMargin=function(c){return this.then(function(){switch(i(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(h,p){return Math.floor(h*p/72*96)}return this.then(function(){(c=c||me.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,h,p){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),h!=null&&(this.progress.n=h),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,h,p){return this.setProgress(c?this.progress.val+c:null,f||null,h?this.progress.n+h:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,f){var h=this;return this.thenCore(c,f,function(p,m){return h.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(v){return h.updateProgress(null,p),v}).then(p,m).then(function(v){return h.updateProgress(1),v})})},u.prototype.thenCore=function(c,f,h){h=h||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),f&&(f=f.bind(p));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),v=h.call(m,c,f);return u.convert(v,p.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(h){f=f.thenCore(h)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,me.getPageSize=function(c,f,h){if(Tn(c)==="object"){var p=c;c=p.orientation,f=p.unit||f,h=p.format||h}f=f||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var m,v=(""+h).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+f}var S,N=0,A=0;if(y.hasOwnProperty(v))N=y[v][1]/m,A=y[v][0]/m;else try{N=h[1],A=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",A>N&&(S=A,A=N,N=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>A&&(S=A,A=N,N=S)}return{width:A,height:N,unit:f,k:m,orientation:c}},n.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(x1):null;var h=new u(f);return f.worker?h:h.from(c).doCallback()}})(me.API),me.API.addJS=function(n){return c5=n,this.internal.events.subscribe("postPutResources",function(){Od=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Od+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+c5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Od!==void 0&&u5!==void 0&&this.internal.out("/Names <</JavaScript "+Od+" 0 R>>")}),this},(function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=i.exec(u);if(c!=null){var f=c[1];e.internal.newObjectDeferredBegin(f,!1)}e.internal.write(u)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(o=0;o<h;o++){var m=e.internal.newObject();p.push(m);var v=e.internal.getPageInfo(o+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var y=e.internal.newObject();for(e.internal.write("<< /Names [ "),o=0;o<p.length;o++)e.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+y+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,a,o){var u={title:a,options:o,children:[]};return i==null&&(i=this.root),i.children.push(u),u},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var u=i.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=e.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,a){for(var o=0;o<a.children.length;o++)i.count++,this.count_r(i,a.children[o]);return i.count}}])})(me.API),(function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,a,o,u,c){var f,h=this.decode.DCT_DECODE,p=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=u||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,f=(function(m){for(var v,y=256*m.charCodeAt(4)+m.charCodeAt(5),S=m.length,N={width:0,height:0,numcomponents:1},A=4;A<S;A+=2){if(A+=y,t.indexOf(m.charCodeAt(A+1))!==-1){v=256*m.charCodeAt(A+5)+m.charCodeAt(A+6),N={width:256*m.charCodeAt(A+7)+m.charCodeAt(A+8),height:v,numcomponents:m.charCodeAt(A+9)};break}y=256*m.charCodeAt(A+2)+m.charCodeAt(A+3)}return N})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:e,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:a}}return p}})(me.API),me.API.processPNG=function(n,t,e,i){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=MB(n,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,h=o.palette,p=o.depth;a=h&&f===1?(function(nt){for(var F=nt.width,G=nt.height,E=nt.data,B=nt.palette,tt=nt.depth,et=!1,ht=[],X=[],lt=void 0,st=!1,vt=0,Et=0;Et<B.length;Et++){var q=pv(B[Et],4),T=q[0],j=q[1],V=q[2],rt=q[3];ht.push(T,j,V),rt!=null&&(rt===0?(vt++,X.length<1&&X.push(Et)):rt<255&&(st=!0))}if(st||vt>1){et=!0,X=void 0;var ot=F*G;lt=new Uint8Array(ot);for(var mt=new DataView(E.buffer),kt=0;kt<ot;kt++){var At=C1(mt,kt,tt),Mt=pv(B[At],4)[3];lt[kt]=Mt}}else vt===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:et?8:void 0,colorBytes:E,alphaBytes:lt,needSMask:et,palette:ht,mask:X}})(o):f===2||f===4?(function(nt){for(var F=nt.data,G=nt.width,E=nt.height,B=nt.channels,tt=nt.depth,et=B===2?"DeviceGray":"DeviceRGB",ht=B-1,X=G*E,lt=ht,st=X*lt,vt=1*X,Et=Math.ceil(st*tt/8),q=Math.ceil(vt*tt/8),T=new Uint8Array(Et),j=new Uint8Array(q),V=new DataView(F.buffer),rt=new DataView(T.buffer),ot=new DataView(j.buffer),mt=!1,kt=0;kt<X;kt++){for(var At=kt*B,Mt=0;Mt<lt;Mt++)b5(rt,C1(V,At+Mt,tt),kt*lt+Mt,tt);var Ht=C1(V,At+lt,tt);Ht<(1<<tt)-1&&(mt=!0),b5(ot,Ht,1*kt,tt)}return{colorSpace:et,colorsPerPixel:ht,sMaskBitsPerComponent:mt?tt:void 0,colorBytes:T,alphaBytes:j,needSMask:mt}})(o):(function(nt){var F=nt.data,G=nt.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:F instanceof Uint16Array?(function(E){for(var B=E.length,tt=new Uint8Array(2*B),et=new DataView(tt.buffer,tt.byteOffset,tt.byteLength),ht=0;ht<B;ht++)et.setUint16(2*ht,E[ht],!1);return tt})(F):F,needSMask:!1}})(o);var m,v,y,S=a,N=S.colorSpace,A=S.colorsPerPixel,_=S.sMaskBitsPerComponent,I=S.colorBytes,D=S.alphaBytes,M=S.needSMask,Y=S.palette,ct=S.mask,it=null;return i!==me.API.image_compression.NONE&&typeof J1=="function"?(it=(function(nt){var F;switch(nt){case me.API.image_compression.FAST:F=11;break;case me.API.image_compression.MEDIUM:F=13;break;case me.API.image_compression.SLOW:F=14;break;default:F=12}return F})(i),m=this.decode.FLATE_DECODE,v="/Predictor ".concat(it," /Colors ").concat(A," /BitsPerComponent ").concat(p," /Columns ").concat(u),n=p5(I,Math.ceil(u*A*p/8),A,p,i),M&&(y=p5(D,Math.ceil(u*_/8),1,_,i))):(m=void 0,v=void 0,n=I,M&&(y=D)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:e,data:n,index:t,filter:m,decodeParameters:v,transparency:ct,palette:Y,sMask:y,predictor:it,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:_,colorSpace:N}}},(function(n){n.processGIF89A=function(t,e,i,a){var o=new nz(t),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var h={data:f,width:u,height:c},p=new A1(100).encode(h,100);return n.processJPEG.call(this,p,e,i,a)},n.processGIF87A=n.processGIF89A})(me.API),Rs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:e,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rs.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Hn.log("bit decode error:"+e)}},Rs.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<t;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}e!==0&&(this.pos+=4-e)}},Rs.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+2*a*4,c=o>>4,f=15&o,h=this.palette[c];if(this.data[u]=h.blue,this.data[u+1]=h.green,this.data[u+2]=h.red,this.data[u+3]=255,2*a+1>=this.width)break;h=this.palette[f],this.data[u+4]=h.blue,this.data[u+4+1]=h.green,this.data[u+4+2]=h.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},Rs.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*i;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Rs.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,c=(o>>5&t)/t*255|0,f=(o>>10&t)/t*255|0,h=o>>15?255:0,p=i*this.width*4+4*a;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=h}this.pos+=n}},Rs.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&t)/t*255|0,f=(u>>5&e)/e*255|0,h=(u>>11)/t*255|0,p=a*this.width*4+4*o;this.data[p]=h,this.data[p+1]=f,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},Rs.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*e;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=i,this.data[u+3]=255}this.pos+=this.width%4}},Rs.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*e;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=u}},Rs.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(t,e,i,a){var o=new Rs(t,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},h=new A1(100).encode(f,100);return n.processJPEG.call(this,h,e,i,a)}})(me.API),x5.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(t,e,i,a){var o=new x5(t),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},h=new A1(100).encode(f,100);return n.processJPEG.call(this,h,e,i,a)}})(me.API),me.API.processRGBA=function(n,t,e){for(var i=n.data,a=i.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,h=0;h<a;h+=4){var p=i[h],m=i[h+1],v=i[h+2],y=i[h+3];o[c++]=p,o[c++]=m,o[c++]=v,u[f++]=y}var S=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:S,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},me.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gc=me.API,Fd=Gc.getCharWidthsArray=function(n,t){var e,i,a=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,h=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=h.fof?h.fof:1,m=t.doKerning!==!1,v=0,y=n.length,S=0,N=c[0]||f,A=[];for(e=0;e<y;e++)i=n.charCodeAt(e),typeof a.metadata.widthOfString=="function"?A.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+u*(1e3/o)||0)/1e3):(v=m&&Tn(h[i])==="object"&&!isNaN(parseInt(h[i][S],10))?h[i][S]/p:0,A.push((c[i]||N)/f+v)),S=i;return A},f5=Gc.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Gc.processArabic&&(n=Gc.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,a)/e:Fd.apply(this,arguments).reduce(function(o,u){return o+u},0)},h5=function(n,t,e,i){for(var a=[],o=0,u=n.length,c=0;o!==u&&c+t[o]<e;)c+=t[o],o++;a.push(n.slice(0,o));var f=o;for(c=0;o!==u;)c+t[o]>i&&(a.push(n.slice(f,o)),c=0,f=o),c+=t[o],o++;return f!==o&&a.push(n.slice(f,o)),a},d5=function(n,t,e){e||(e={});var i,a,o,u,c,f,h,p=[],m=[p],v=e.textIndent||0,y=0,S=0,N=n.split(" "),A=Fd.apply(this,[" ",e])[0];if(f=e.lineIndent===-1?N[0].length+2:e.lineIndent||0){var _=Array(f).join(" "),I=[];N.map(function(M){(M=M.split(/\s*\n/)).length>1?I=I.concat(M.map(function(Y,ct){return(ct&&Y.length?`
`:"")+Y})):I.push(M[0])}),N=I,f=f5.apply(this,[_,e])}for(o=0,u=N.length;o<u;o++){var D=0;if(i=N[o],f&&i[0]==`
`&&(i=i.substr(1),D=1),v+y+(S=(a=Fd.apply(this,[i,e])).reduce(function(M,Y){return M+Y},0))>t||D){if(S>t){for(c=h5.apply(this,[i,a,t-(v+y),t]),p.push(c.shift()),p=[c.pop()];c.length;)m.push([c.shift()]);S=a.slice(i.length-(p[0]?p[0].length:0)).reduce(function(M,Y){return M+Y},0)}else p=[i];m.push(p),v=S+f,y=A}else p.push(i),v+=y+S,y=A}return h=f?function(M,Y){return(Y?_:"")+M.join(" ")}:function(M){return M.join(" ")},m.map(h)},Gc.splitTextToSize=function(n,t,e){var i,a=(e=e||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle),v="Unicode";return m.metadata[v]?{widths:m.metadata[v].widths||{0:1},kerning:m.metadata[v].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/a;o.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=e.lineIndent;var c,f,h=[];for(c=0,f=i.length;c<f;c++)h=h.concat(d5.apply(this,[i[c],u,o]));return h},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",i={},a={},o=0;o<16;o++)i[e[o]]=t[o],a[t[o]]=e[o];var u=function(v){return"0x"+parseInt(v,10).toString(16)},c=n.__fontmetrics__.compress=function(v){var y,S,N,A,_=["{"];for(var I in v){if(y=v[I],isNaN(parseInt(I,10))?S="'"+I+"'":(I=parseInt(I,10),S=(S=u(I).slice(2)).slice(0,-1)+a[S.slice(-1)]),typeof y=="number")y<0?(N=u(y).slice(3),A="-"):(N=u(y).slice(2),A=""),N=A+N.slice(0,-1)+a[N.slice(-1)];else{if(Tn(y)!=="object")throw new Error("Don't know what to do with value type "+Tn(y)+".");N=c(y)}_.push(S+N)}return _.push("}"),_.join("")},f=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,S,N,A,_={},I=1,D=_,M=[],Y="",ct="",it=v.length-1,nt=1;nt<it;nt+=1)(A=v[nt])=="'"?y?(N=y.join(""),y=void 0):y=[]:y?y.push(A):A=="{"?(M.push([D,N]),D={},N=void 0):A=="}"?((S=M.pop())[0][S[1]]=D,N=void 0,D=S[0]):A=="-"?I=-1:N===void 0?i.hasOwnProperty(A)?(Y+=i[A],N=parseInt(Y,16)*I,I=1,Y=""):Y+=A:i.hasOwnProperty(A)?(ct+=i[A],D[N]=parseInt(ct,16)*I,I=1,N=void 0,ct=""):ct+=A;return _},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},m={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var y=v.font,S=m.Unicode[y.postScriptName];S&&(y.metadata.Unicode={},y.metadata.Unicode.widths=S.widths,y.metadata.Unicode.kerning=S.kerning);var N=p.Unicode[y.postScriptName];N&&(y.metadata.Unicode.encoding=N,y.encoding=N.codePages[0])}])})(me.API),(function(n){var t=function(e){for(var i=e.length,a=new Uint8Array(i),o=0;o<i;o++)a[o]=e.charCodeAt(o);return a};n.API.events.push(["addFont",function(e){var i=void 0,a=e.font,o=e.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(qd(c)),u.metadata=n.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,i)}}])})(me),me.API.addSvgAsImage=function(n,t,e,i,a,o,u,c){if(isNaN(t)||isNaN(e))throw Hn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Hn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=a;var h=f.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Fe.canvg?Promise.resolve(Fe.canvg):i1(()=>import("./index.es-AlHY0AV_.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(h,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(p)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),t,e,i,a,u,c)})},me.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,e);return this},me.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],h=0,p=0,m=0;function v(S,N){var A,_=!1;for(A=0;A<S.length;A+=1)S[A]===N&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var y=c.length;for(m=0;m<y;m+=1)e[c[m]].value=e[c[m]].defaultValue,e[c[m]].explicitSet=!1}if(Tn(n)==="object"){for(a in n)if(o=n[a],v(c,a)&&o!==void 0){if(e[a].type==="boolean"&&typeof o=="boolean")e[a].value=o;else if(e[a].type==="name"&&v(e[a].valueSet,o))e[a].value=o;else if(e[a].type==="integer"&&Number.isInteger(o))e[a].value=o;else if(e[a].type==="array"){for(h=0;h<o.length;h+=1)if(i=!0,o[h].length===1&&typeof o[h][0]=="number")f.push(String(o[h]-1));else if(o[h].length>1){for(p=0;p<o[h].length;p+=1)typeof o[h][p]!="number"&&(i=!1);i===!0&&f.push([o[h][0]-1,o[h][1]-1].join(" "))}e[a].value="["+f.join(" ")+"]"}else e[a].value=e[a].defaultValue;e[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,N=[];for(S in e)e[S].explicitSet===!0&&(e[S].type==="name"?N.push("/"+S+" /"+e[S].value):N.push("/"+S+" "+e[S].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(me.API),(function(n){var t=n.API,e=t.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],m=0,v=o.length;m<v;++m){if(c=u.metadata.characterToGlyph(o.charCodeAt(m)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(m),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(h[4-c.length],c)}return p.join("")},i=function(o){var u,c,f,h,p,m,v;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],m=0,v=(c=Object.keys(o).sort(function(y,S){return y-S})).length;m<v;m++)u=c[m],f.length>=100&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(h=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+h+">"));return f.length&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,h=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var m=c.metadata.Unicode.widths,v=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),y="",S=0;S<v.length;S++)y+=String.fromCharCode(v[S]);var N=h();p({data:y,addLength1:!0,objectId:N}),f("endobj");var A=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:A}),f("endobj");var _=h();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Zc(c.fontName)),f("/FontFile2 "+N+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var I=h();f("<<"),f("/Type /Font"),f("/BaseFont /"+Zc(c.fontName)),f("/FontDescriptor "+_+" 0 R"),f("/W "+n.API.PDFObject.convert(m)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=h(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+A+" 0 R"),f("/BaseFont /"+Zc(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+I+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,h=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var m=c.metadata.rawData,v="",y=0;y<m.length;y++)v+=String.fromCharCode(m[y]);var S=h();p({data:v,addLength1:!0,objectId:S}),f("endobj");var N=h();p({data:i(c.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var A=h();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+S+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+Zc(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=h();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Zc(c.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,h=o.y,p=o.options||{},m=o.mutex||{},v=m.pdfEscape,y=m.activeFontKey,S=m.fonts,N=y,A="",_=0,I="",D=S[N].encoding;if(S[N].encoding!=="Identity-H")return{text:c,x:f,y:h,options:p,mutex:m};for(I=c,N=y,Array.isArray(c)&&(I=c[0]),_=0;_<I.length;_+=1)S[N].metadata.hasOwnProperty("cmap")&&(u=S[N].metadata.cmap.unicode.codeMap[I[_].charCodeAt(0)]),u||I[_].charCodeAt(0)<256&&S[N].metadata.hasOwnProperty("Unicode")?A+=I[_]:A+="";var M="";return parseInt(N.slice(1))<14||D==="WinAnsiEncoding"?M=v(A,N).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(M=e(A,S[N])),m.isHex=!0,{text:M,x:f,y:h,options:p,mutex:m}};t.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var h=0;for(h=0;h<u.length;h+=1)Array.isArray(u[h])&&u[h].length===3?c.push([a(Object.assign({},f,{text:u[h][0]})).text,u[h][1],u[h][2]]):c.push(a(Object.assign({},f,{text:u[h]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(me),(function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(me.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var a,o,u,c,f,h,p,m=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,D=0;this.__bidiEngine__={};var M=function(E){var B=E.charCodeAt(),tt=B>>8,et=N[tt];return et!==void 0?m[256*et+(255&B)]:tt===252||tt===253?"AL":_.test(tt)?"L":tt===8?"R":"N"},Y=function(E){for(var B,tt=0;tt<E.length;tt++){if((B=M(E.charAt(tt)))==="L")return!1;if(B==="R")return!0}return!1},ct=function(E,B,tt,et){var ht,X,lt,st,vt=B[et];switch(vt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(vt="AN");break;case"AL":I=!0,vt="R";break;case"WS":case"BN":vt="N";break;case"CS":et<1||et+1>=B.length||(ht=tt[et-1])!=="EN"&&ht!=="AN"||(X=B[et+1])!=="EN"&&X!=="AN"?vt="N":I&&(X="AN"),vt=X===ht?X:"N";break;case"ES":vt=(ht=et>0?tt[et-1]:"B")==="EN"&&et+1<B.length&&B[et+1]==="EN"?"EN":"N";break;case"ET":if(et>0&&tt[et-1]==="EN"){vt="EN";break}if(I){vt="N";break}for(lt=et+1,st=B.length;lt<st&&B[lt]==="ET";)lt++;vt=lt<st&&B[lt]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(st=B.length,lt=et+1;lt<st&&B[lt]==="NSM";)lt++;if(lt<st){var Et=E[et],q=Et>=1425&&Et<=2303||Et===64286;if(ht=B[lt],q&&(ht==="R"||ht==="AL")){vt="R";break}}}vt=et<1||(ht=B[et-1])==="B"?"N":tt[et-1];break;case"B":I=!1,a=!0,vt=D;break;case"S":o=!0,vt="N"}return vt},it=function(E,B,tt){var et=E.split("");return tt&&nt(et,tt,{hiLevel:D}),et.reverse(),B&&B.reverse(),et.join("")},nt=function(E,B,tt){var et,ht,X,lt,st,vt=-1,Et=E.length,q=0,T=[],j=D?y:v,V=[];for(I=!1,a=!1,o=!1,ht=0;ht<Et;ht++)V[ht]=M(E[ht]);for(X=0;X<Et;X++){if(st=q,T[X]=ct(E,V,T,X),et=240&(q=j[st][S[T[X]]]),q&=15,B[X]=lt=j[q][5],et>0)if(et===16){for(ht=vt;ht<X;ht++)B[ht]=1;vt=-1}else vt=-1;if(j[q][6])vt===-1&&(vt=X);else if(vt>-1){for(ht=vt;ht<X;ht++)B[ht]=lt;vt=-1}V[X]==="B"&&(B[X]=0),tt.hiLevel|=lt}o&&(function(rt,ot,mt){for(var kt=0;kt<mt;kt++)if(rt[kt]==="S"){ot[kt]=D;for(var At=kt-1;At>=0&&rt[At]==="WS";At--)ot[At]=D}})(V,B,Et)},F=function(E,B,tt,et,ht){if(!(ht.hiLevel<E)){if(E===1&&D===1&&!a)return B.reverse(),void(tt&&tt.reverse());for(var X,lt,st,vt,Et=B.length,q=0;q<Et;){if(et[q]>=E){for(st=q+1;st<Et&&et[st]>=E;)st++;for(vt=q,lt=st-1;vt<lt;vt++,lt--)X=B[vt],B[vt]=B[lt],B[lt]=X,tt&&(X=tt[vt],tt[vt]=tt[lt],tt[lt]=X);q=st}q++}}},G=function(E,B,tt){var et=E.split(""),ht={hiLevel:D};return tt||(tt=[]),nt(et,tt,ht),(function(X,lt,st){if(st.hiLevel!==0&&p)for(var vt,Et=0;Et<X.length;Et++)lt[Et]===1&&(vt=A.indexOf(X[Et]))>=0&&(X[Et]=A[vt+1])})(et,tt,ht),F(2,et,B,tt,ht),F(1,et,B,tt,ht),et.join("")};return this.__bidiEngine__.doBidiReorder=function(E,B,tt){if((function(ht,X){if(X)for(var lt=0;lt<ht.length;lt++)X[lt]=lt;c===void 0&&(c=Y(ht)),h===void 0&&(h=Y(ht))})(E,B),u||!f||h)if(u&&f&&c^h)D=c?1:0,E=it(E,B,tt);else if(!u&&f&&h)D=c?1:0,E=G(E,B,tt),E=it(E,B);else if(!u||c||f||h){if(u&&!f&&c^h)E=it(E,B),c?(D=0,E=G(E,B,tt)):(D=1,E=G(E,B,tt),E=it(E,B));else if(u&&c&&!f&&h)D=1,E=G(E,B,tt),E=it(E,B);else if(!u&&!f&&c^h){var et=p;c?(D=1,E=G(E,B,tt),D=0,p=!1,E=G(E,B,tt),p=et):(D=0,E=G(E,B,tt),E=it(E,B),D=1,p=!1,E=G(E,B,tt),p=et,E=it(E,B))}}else D=0,E=G(E,B,tt);else D=c?1:0,E=G(E,B,tt);return E},this.__bidiEngine__.setOptions=function(E){E&&(u=E.isInputVisual,f=E.isOutputVisual,c=E.isInputRtl,h=E.isOutputRtl,p=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var o=i.options||{};i.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,e.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([e.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([e.doBidiReorder(a[c])]);i.text=u}else i.text=e.doBidiReorder(a);e.setOptions({isInputVisual:!0})}])})(me),me.API.TTFFont=(function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Wl(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new yz(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new iz(this.contents),this.head=new az(this),this.name=new cz(this),this.cmap=new mw(this),this.toUnicode={},this.hhea=new sz(this),this.maxp=new fz(this),this.hmtx=new hz(this),this.post=new lz(this),this.os2=new oz(this),this.loca=new gz(this),this.glyf=new dz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,h;for(h=[],u=0,c=(f=this.bbox).length;u<c;u++)t=f[u],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(e=a>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var a,o,u,c;for(u=0,o=0,c=(t=""+t).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=t.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/e)||0;return u*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n})();var Ms,Wl=(function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,a;for(a=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)a.push(this.writeByte(t.charCodeAt(e)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,a,o,u,c,f;return t=this.readByte(),e=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*a+16777216*o+65536*u+256*c+f},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,a,o;for(o=[],i=0,a=t.length;i<a;i++)e=t[i],o.push(this.writeByte(e));return o},n})(),iz=(function(){var n;function t(e){var i,a,o;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,a,o,u,c,f,h,p,m,v,y,S,N;for(N in y=Object.keys(e).length,f=Math.log(2),m=16*Math.floor(Math.log(y)/f),u=Math.floor(m/f),p=16*y-m,(a=new Wl).writeInt(this.scalarType),a.writeShort(y),a.writeShort(m),a.writeShort(u),a.writeShort(p),o=16*y,h=a.pos+o,c=null,S=[],e)for(v=e[N],a.writeString(N),a.writeInt(n(v)),a.writeInt(h),a.writeInt(v.length),S=S.concat(v),N==="head"&&(c=h),h+=v.length;h%4;)S.push(0),h++;return a.write(S),i=2981146554-n(a.data),a.pos=c+8,a.writeUInt32(i),a.data},n=function(e){var i,a,o,u;for(e=gw.call(e);e.length%4;)e.push(0);for(o=new Wl(e),a=0,i=0,u=e.length;i<u;i=i+=4)a+=o.readUInt32();return 4294967295&a},t})(),rz={}.hasOwnProperty,mo=function(n,t){for(var e in t)rz.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};Ms=(function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var az=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var e;return(e=new Wl).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},n})(),S5=(function(){function n(t,e){var i,a,o,u,c,f,h,p,m,v,y,S,N,A,_,I,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(y=t.readUInt16(),v=y/2,t.pos+=6,o=(function(){var M,Y;for(Y=[],f=M=0;0<=v?M<v:M>v;f=0<=v?++M:--M)Y.push(t.readUInt16());return Y})(),t.pos+=2,N=(function(){var M,Y;for(Y=[],f=M=0;0<=v?M<v:M>v;f=0<=v?++M:--M)Y.push(t.readUInt16());return Y})(),h=(function(){var M,Y;for(Y=[],f=M=0;0<=v?M<v:M>v;f=0<=v?++M:--M)Y.push(t.readUInt16());return Y})(),p=(function(){var M,Y;for(Y=[],f=M=0;0<=v?M<v:M>v;f=0<=v?++M:--M)Y.push(t.readUInt16());return Y})(),a=(this.length-t.pos+this.offset)/2,c=(function(){var M,Y;for(Y=[],f=M=0;0<=a?M<a:M>a;f=0<=a?++M:--M)Y.push(t.readUInt16());return Y})(),f=_=0,D=o.length;_<D;f=++_)for(A=o[f],i=I=S=N[f];S<=A?I<=A:I>=A;i=S<=A?++I:--I)p[f]===0?u=i+h[f]:(u=c[p[f]/2+(i-S)-(v-f)]||0)!==0&&(u+=h[f]),this.codeMap[i]=65535&u}t.pos=m}return n.encode=function(t,e){var i,a,o,u,c,f,h,p,m,v,y,S,N,A,_,I,D,M,Y,ct,it,nt,F,G,E,B,tt,et,ht,X,lt,st,vt,Et,q,T,j,V,rt,ot,mt,kt,At,Mt,Ht,Kt;switch(et=new Wl,u=Object.keys(t).sort(function(Qt,ue){return Qt-ue}),e){case"macroman":for(N=0,A=(function(){var Qt=[];for(S=0;S<256;++S)Qt.push(0);return Qt})(),I={0:0},o={},ht=0,vt=u.length;ht<vt;ht++)I[At=t[a=u[ht]]]==null&&(I[At]=++N),o[a]={old:t[a],new:I[t[a]]},A[a]=I[t[a]];return et.writeUInt16(1),et.writeUInt16(0),et.writeUInt32(12),et.writeUInt16(0),et.writeUInt16(262),et.writeUInt16(0),et.write(A),{charMap:o,subtable:et.data,maxGlyphID:N+1};case"unicode":for(B=[],m=[],D=0,I={},i={},_=h=null,X=0,Et=u.length;X<Et;X++)I[Y=t[a=u[X]]]==null&&(I[Y]=++D),i[a]={old:Y,new:I[Y]},c=I[Y]-a,_!=null&&c===h||(_&&m.push(_),B.push(a),h=c),_=a;for(_&&m.push(_),m.push(65535),B.push(65535),G=2*(F=B.length),nt=2*Math.pow(Math.log(F)/Math.LN2,2),v=Math.log(nt/2)/Math.LN2,it=2*F-nt,f=[],ct=[],y=[],S=lt=0,q=B.length;lt<q;S=++lt){if(E=B[S],p=m[S],E===65535){f.push(0),ct.push(0);break}if(E-(tt=i[E].new)>=32768)for(f.push(0),ct.push(2*(y.length+F-S)),a=st=E;E<=p?st<=p:st>=p;a=E<=p?++st:--st)y.push(i[a].new);else f.push(tt-E),ct.push(0)}for(et.writeUInt16(3),et.writeUInt16(1),et.writeUInt32(12),et.writeUInt16(4),et.writeUInt16(16+8*F+2*y.length),et.writeUInt16(0),et.writeUInt16(G),et.writeUInt16(nt),et.writeUInt16(v),et.writeUInt16(it),mt=0,T=m.length;mt<T;mt++)a=m[mt],et.writeUInt16(a);for(et.writeUInt16(0),kt=0,j=B.length;kt<j;kt++)a=B[kt],et.writeUInt16(a);for(Mt=0,V=f.length;Mt<V;Mt++)c=f[Mt],et.writeUInt16(c);for(Ht=0,rt=ct.length;Ht<rt;Ht++)M=ct[Ht],et.writeUInt16(M);for(Kt=0,ot=y.length;Kt<ot;Kt++)N=y[Kt],et.writeUInt16(N);return{charMap:i,subtable:et.data,maxGlyphID:D+1}}},n})(),mw=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="cmap",n.prototype.parse=function(t){var e,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)e=new S5(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},n.encode=function(t,e){var i,a;return e==null&&(e="macroman"),i=S5.encode(t,e),(a=new Wl).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},n})(),sz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n})(),oz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,i;for(i=[],e=0;e<10;++e)i.push(t.readByte());return i})(),this.charRange=(function(){var e,i;for(i=[],e=0;e<4;++e)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,i;for(i=[],e=0;e<2;e=++e)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n})(),lz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="post",n.prototype.parse=function(t){var e,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)e=t.readByte(),a.push(this.names.push(t.readString(e)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(t.readUInt32());return f}).call(this)}},n})(),uz=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="name",n.prototype.parse=function(t){var e,i,a,o,u,c,f,h,p,m,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),c=t.readShort(),i=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(f={},o=p=0,m=i.length;p<m;o=++p)a=i[o],t.pos=a.offset,h=t.readString(a.length),u=new uz(h,a),f[v=a.nameID]==null&&(f[v]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),fz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n})(),hz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="hmtx",n.prototype.parse=function(t){var e,i,a,o,u,c,f;for(t.pos=this.offset,this.metrics=[],e=0,c=this.file.hhea.numberOfMetrics;0<=c?e<c:e>c;e=0<=c?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,p;for(p=[],e=h=0;0<=a?h<a:h>a;e=0<=a?++h:--h)p.push(t.readInt16());return p})(),this.widths=(function(){var h,p,m,v;for(v=[],h=0,p=(m=this.metrics).length;h<p;h++)o=m[h],v.push(o.advance);return v}).call(this),i=this.widths[this.widths.length-1],f=[],e=u=0;0<=a?u<a:u>a;e=0<=a?++u:--u)f.push(this.widths.push(i));return f},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n})(),gw=[].slice,dz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var e,i,a,o,u,c,f,h,p,m;return t in this.cache?this.cache[t]:(o=this.file.loca,e=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+i,u=(c=new Wl(e.read(a))).readShort(),h=c.readShort(),m=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[t]=u===-1?new mz(c,h,m,f,p):new pz(c,u,h,m,f,p),this.cache[t]))},n.prototype.encode=function(t,e,i){var a,o,u,c,f;for(u=[],o=[],c=0,f=e.length;c<f;c++)a=t[e[c]],o.push(u.length),a&&(u=u.concat(a.encode(i)));return o.push(u.length),{table:u,offsets:o}},n})(),pz=(function(){function n(t,e,i,a,o,u){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),mz=(function(){function n(t,e,i,a,o){var u,c;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new Wl(gw.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n})(),gz=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return mo(n,Ms),n.prototype.tag="loca",n.prototype.parse=function(t){var e,i;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,e){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<i.length;++u)if(i[u]=a,o<e.length&&e[o]==u){++o,i[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},n})(),yz=(function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,a,o;for(e in a=this.font.cmap.tables[0].codeMap,t={},o=this.subset)i=o[e],t[e]=a[i];return t},n.prototype.glyphsFor=function(t){var e,i,a,o,u,c,f;for(a={},u=0,c=t.length;u<c;u++)a[o=t[u]]=this.font.glyf.glyphFor(o);for(o in e=[],a)(i=a[o])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(o in f=this.glyphsFor(e))i=f[o],a[o]=i;return a},n.prototype.encode=function(t,e){var i,a,o,u,c,f,h,p,m,v,y,S,N,A,_;for(a in i=mw.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),y={0:0},_=i.charMap)y[(f=_[a]).old]=f.new;for(S in v=i.maxGlyphID,u)S in y||(y[S]=v++);return p=(function(I){var D,M;for(D in M={},I)M[I[D]]=D;return M})(y),m=Object.keys(p).sort(function(I,D){return I-D}),N=(function(){var I,D,M;for(M=[],I=0,D=m.length;I<D;I++)c=m[I],M.push(p[c]);return M})(),o=this.font.glyf.encode(u,N,y),h=this.font.loca.encode(o.offsets,N),A={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},n})();me.API.PDFObject=(function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,a,o,u;if(Array.isArray(e))return"["+(function(){var c,f,h;for(h=[],c=0,f=e.length;c<f;c++)i=e[c],h.push(t.convert(i));return h})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(a in o=["<<"],e)u=e[a],o.push("/"+a+" "+t.convert(u));return o.push(">>"),o.join(`
`)}return""+e},t})();function yw(n,t,e,i,a){i=i||{};var o=1.15,u=a.internal.scaleFactor,c=a.internal.getFontSize()/u,f=a.getLineHeightFactor?a.getLineHeightFactor():o,h=c*f,p=/\r\n|\r|\n/g,m="",v=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(m=typeof n=="string"?n.split(p):n,v=m.length||1),e+=c*(2-o),i.valign==="middle"?e-=v/2*h:i.valign==="bottom"&&(e-=v*h),i.halign==="center"||i.halign==="right"){var y=c;if(i.halign==="center"&&(y*=.5),m&&v>=1){for(var S=0;S<m.length;S++)a.text(m[S],t-a.getStringUnitWidth(m[S])*y,e),e+=h;return a}t-=a.getStringUnitWidth(n)*y}return i.halign==="justify"?a.text(n,t,e,{maxWidth:i.maxWidth||100,align:"justify"}):a.text(n,t,e),a}var C5={},of=(function(){function n(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:C5=t},n.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},n.prototype.applyStyles=function(t,e){var i,a,o;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var u=this.jsPDFDocument.internal.getFont(),c=u.fontStyle,f=u.fontName;if(t.font&&(f=t.font),t.fontStyle){c=t.fontStyle;var h=this.getFontList()[f];h&&h.indexOf(c)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),c=h[0])}if(this.jsPDFDocument.setFont(f,c),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var p=n.unifyColor(t.fillColor);p&&(i=this.jsPDFDocument).setFillColor.apply(i,p),p=n.unifyColor(t.textColor),p&&(a=this.jsPDFDocument).setTextColor.apply(a,p),p=n.unifyColor(t.lineColor),p&&(o=this.jsPDFDocument).setDrawColor.apply(o,p),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},n.prototype.splitTextToSize=function(t,e,i){return this.jsPDFDocument.splitTextToSize(t,e,i)},n.prototype.rect=function(t,e,i,a,o){return this.jsPDFDocument.rect(t,e,i,a,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return C5||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),og=function(n,t){return og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])},og(n,t)};function vw(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");og(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bw=(function(n){vw(t,n);function t(e){var i=n.call(this)||this;return i._element=e,i}return t})(Array);function vz(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function bz(n){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[n]}function fp(n,t,e){e.applyStyles(t,!0);var i=Array.isArray(n)?n:[n],a=i.map(function(o){return e.getTextWidth(o)}).reduce(function(o,u){return Math.max(o,u)},0);return a}function ww(n,t,e,i){var a=t.settings.tableLineWidth,o=t.settings.tableLineColor;n.applyStyles({lineWidth:a,lineColor:o});var u=xw(a,!1);u&&n.rect(e.x,e.y,t.getWidth(n.pageSize().width),i.y-e.y,u)}function xw(n,t){var e=n>0,i=t||t===0;return e&&i?"DF":e?"S":i?"F":null}function Ep(n,t){var e,i,a,o;if(n=n||t,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=t}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(e=n.left)!==null&&e!==void 0?e:t,top:(i=n.top)!==null&&i!==void 0?i:t,right:(a=n.right)!==null&&a!==void 0?a:t,bottom:(o=n.bottom)!==null&&o!==void 0?o:t}):(typeof n!="number"&&(n=t),{top:n,right:n,bottom:n,left:n})}function Sw(n,t){var e=Ep(t.settings.margin,0);return n.pageSize().width-(e.left+e.right)}function wz(n,t,e,i,a){var o={},u=1.3333333333333333,c=N1(t,function(D){return a.getComputedStyle(D).backgroundColor});c!=null&&(o.fillColor=c);var f=N1(t,function(D){return a.getComputedStyle(D).color});f!=null&&(o.textColor=f);var h=Sz(i,e);h&&(o.cellPadding=h);var p="borderTopColor",m=u*e,v=i.borderTopWidth;if(i.borderBottomWidth===v&&i.borderRightWidth===v&&i.borderLeftWidth===v){var y=(parseFloat(v)||0)/m;y&&(o.lineWidth=y)}else o.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/m,right:(parseFloat(i.borderRightWidth)||0)/m,bottom:(parseFloat(i.borderBottomWidth)||0)/m,left:(parseFloat(i.borderLeftWidth)||0)/m},o.lineWidth.top||(o.lineWidth.right?p="borderRightColor":o.lineWidth.bottom?p="borderBottomColor":o.lineWidth.left&&(p="borderLeftColor"));var S=N1(t,function(D){return a.getComputedStyle(D)[p]});S!=null&&(o.lineColor=S);var N=["left","right","center","justify"];N.indexOf(i.textAlign)!==-1&&(o.halign=i.textAlign),N=["middle","bottom","top"],N.indexOf(i.verticalAlign)!==-1&&(o.valign=i.verticalAlign);var A=parseInt(i.fontSize||"");isNaN(A)||(o.fontSize=A/u);var _=xz(i);_&&(o.fontStyle=_);var I=(i.fontFamily||"").toLowerCase();return n.indexOf(I)!==-1&&(o.font=I),o}function xz(n){var t="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(t="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(t+="italic"),t}function N1(n,t){var e=Cw(n,t);if(!e)return null;var i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var a=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],o=parseInt(i[4]);return o===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Cw(n,t){var e=t(n);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?n.parentElement==null?null:Cw(n.parentElement,t):e}function Sz(n,t){var e=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],i=96/(72/t),a=(parseInt(n.lineHeight)-parseInt(n.fontSize))/t/2,o=e.map(function(c){return parseInt(c||"0")/i}),u=Ep(o,0);return a>u.top&&(u.top=a),a>u.bottom&&(u.bottom=a),u}function Aw(n,t,e,i,a){var o,u;i===void 0&&(i=!1),a===void 0&&(a=!1);var c;typeof t=="string"?c=e.document.querySelector(t):c=t;var f=Object.keys(n.getFontList()),h=n.scaleFactor(),p=[],m=[],v=[];if(!c)return console.error("Html table could not be found with input: ",t),{head:p,body:m,foot:v};for(var y=0;y<c.rows.length;y++){var S=c.rows[y],N=(u=(o=S?.parentElement)===null||o===void 0?void 0:o.tagName)===null||u===void 0?void 0:u.toLowerCase(),A=Cz(f,h,e,S,i,a);A&&(N==="thead"?p.push(A):N==="tfoot"?v.push(A):m.push(A))}return{head:p,body:m,foot:v}}function Cz(n,t,e,i,a,o){for(var u=new bw(i),c=0;c<i.cells.length;c++){var f=i.cells[c],h=e.getComputedStyle(f);if(a||h.display!=="none"){var p=void 0;o&&(p=wz(n,f,t,h,e)),u.push({rowSpan:f.rowSpan,colSpan:f.colSpan,styles:p,_element:f,content:Az(f)})}}var m=e.getComputedStyle(i);if(u.length>0&&(a||m.display!=="none"))return u}function Az(n){var t=n.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function Nz(n,t,e){for(var i=0,a=[n,t,e];i<a.length;i++){var o=a[i];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Yo(n,t,e,i,a){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),u=1;u<arguments.length;u++){var c=arguments[u];if(c!=null)for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(o[f]=c[f])}return o}function Nw(n,t){var e=new of(n),i=e.getDocumentOptions(),a=e.getGlobalOptions();Nz(a,i,t);var o=Yo({},a,i,t),u;typeof window<"u"&&(u=window);var c=_z(a,i,t),f=kz(a,i,t),h=Ez(e,o),p=Rz(e,o,u);return{id:t.tableId,content:p,hooks:f,styles:c,settings:h}}function _z(n,t,e){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(f){if(f==="columnStyles"){var h=n[f],p=t[f],m=e[f];i.columnStyles=Yo({},h,p,m)}else{var v=[n,t,e],y=v.map(function(S){return S[f]||{}});i[f]=Yo({},y[0],y[1],y[2])}},o=0,u=Object.keys(i);o<u.length;o++){var c=u[o];a(c)}return i}function kz(n,t,e){for(var i=[n,t,e],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,u=i;o<u.length;o++){var c=u[o];c.didParseCell&&a.didParseCell.push(c.didParseCell),c.willDrawCell&&a.willDrawCell.push(c.willDrawCell),c.didDrawCell&&a.didDrawCell.push(c.didDrawCell),c.willDrawPage&&a.willDrawPage.push(c.willDrawPage),c.didDrawPage&&a.didDrawPage.push(c.didDrawPage)}return a}function Ez(n,t){var e,i,a,o,u,c,f,h,p,m,v,y,S=Ep(t.margin,40/n.scaleFactor()),N=(e=Lz(n,t.startY))!==null&&e!==void 0?e:S.top,A;t.showFoot===!0?A="everyPage":t.showFoot===!1?A="never":A=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var _;t.showHead===!0?_="everyPage":t.showHead===!1?_="never":_=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var I=(o=t.useCss)!==null&&o!==void 0?o:!1,D=t.theme||(I?"plain":"striped"),M=!!t.horizontalPageBreak,Y=(u=t.horizontalPageBreakRepeat)!==null&&u!==void 0?u:null;return{includeHiddenHtml:(c=t.includeHiddenHtml)!==null&&c!==void 0?c:!1,useCss:I,theme:D,startY:N,margin:S,pageBreak:(f=t.pageBreak)!==null&&f!==void 0?f:"auto",rowPageBreak:(h=t.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(p=t.tableWidth)!==null&&p!==void 0?p:"auto",showHead:_,showFoot:A,tableLineWidth:(m=t.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(v=t.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:M,horizontalPageBreakRepeat:Y,horizontalPageBreakBehaviour:(y=t.horizontalPageBreakBehaviour)!==null&&y!==void 0?y:"afterAllRows"}}function Lz(n,t){var e=n.getLastAutoTable(),i=n.scaleFactor(),a=n.pageNumber(),o=!1;if(e&&e.startPageNumber){var u=e.startPageNumber+e.pageNumber-1;o=u===a}return typeof t=="number"?t:(t==null||t===!1)&&o&&e?.finalY!=null?e.finalY+20/i:null}function Rz(n,t,e){var i=t.head||[],a=t.body||[],o=t.foot||[];if(t.html){var u=t.includeHiddenHtml;if(e){var c=Aw(n,t.html,e,u,t.useCss)||{};i=c.head||i,a=c.body||i,o=c.foot||i}else console.error("Cannot parse html in non browser environment")}var f=t.columns||Iz(i,a,o);return{columns:f,head:i,body:a,foot:o}}function Iz(n,t,e){var i=n[0]||t[0]||e[0]||[],a=[];return Object.keys(i).filter(function(o){return o!=="_element"}).forEach(function(o){var u=1,c;Array.isArray(i)?c=i[parseInt(o)]:c=i[o],typeof c=="object"&&!Array.isArray(c)&&(u=c?.colSpan||1);for(var f=0;f<u;f++){var h=void 0;Array.isArray(i)?h=a.length:h=o+(f>0?"_".concat(f):"");var p={dataKey:h};a.push(p)}}),a}var lg=(function(){function n(t,e,i){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=i,this.doc=t.getDocument()}return n})(),Tz=(function(n){vw(t,n);function t(e,i,a,o,u,c){var f=n.call(this,e,i,c)||this;return f.cell=a,f.row=o,f.column=u,f.section=o.section,f}return t})(lg),Dz=(function(){function n(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return n.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(t,e,i,a,o,u){for(var c=0,f=e;c<f.length;c++){var h=f[c],p=new Tz(t,this,i,a,o,u),m=h(p)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],m)return!1}return!0},n.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var i=0,a=this.hooks.didDrawPage;i<a.length;i++){var o=a[i];o(new lg(t,this,e))}},n.prototype.callWillDrawPageHooks=function(t,e){for(var i=0,a=this.hooks.willDrawPage;i<a.length;i++){var o=a[i];o(new lg(t,this,e))}},n.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(a,o){return a+o.wrappedWidth},0);return e}else{var i=this.settings.margin;return t-i.left-i.right}},n})(),_w=(function(){function n(t,e,i,a,o){o===void 0&&(o=!1),this.height=0,this.raw=t,t instanceof bw&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=i,this.cells=a,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(i,a){var o;return Math.max(i,((o=e.cells[a.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(i){var a=e.cells[i.index];return a?a.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},n.prototype.getMinimumRowHeight=function(t,e){var i=this;return t.reduce(function(a,o){var u=i.cells[o.index];if(!u)return 0;var c=e.getLineHeight(u.styles.fontSize),f=u.padding("vertical"),h=f+c;return h>a?h:a},0)},n})(),kw=(function(){function n(t,e,i){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=i,this.raw=t;var o=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,o=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var u=o!=null?""+o:"",c=/\r\n|\r|\n/g;this.text=u.split(c)}return n.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");i=this.x+a/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},n.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var i=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*e,o=i*a+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(t){var e=Ep(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},n})(),Pz=(function(){function n(t,e,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=i}return n.prototype.getMaxCustomCellWidth=function(t){for(var e=0,i=0,a=t.allRows();i<a.length;i++){var o=a[i],u=o.cells[this.index];u&&typeof u.styles.cellWidth=="number"&&(e=Math.max(e,u.styles.cellWidth))}return e},n})();function Mz(n,t){Oz(n,t);var e=[],i=0;t.columns.forEach(function(o){var u=o.getMaxCustomCellWidth(t);u?o.width=u:(o.width=o.wrappedWidth,e.push(o)),i+=o.width});var a=t.getWidth(n.pageSize().width)-i;a&&(a=ug(e,a,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),a&&(a=ug(e,a,function(o){return o.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/n.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Bz(t),zz(t,n),Fz(t)}function Oz(n,t){var e=n.scaleFactor(),i=t.settings.horizontalPageBreak,a=Sw(n,t);t.allRows().forEach(function(o){for(var u=0,c=t.columns;u<c.length;u++){var f=c[u],h=o.cells[f.index];if(h){var p=t.hooks.didParseCell;t.callCellHooks(n,p,h,o,f,null);var m=h.padding("horizontal");h.contentWidth=fp(h.text,h.styles,n)+m;var v=fp(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,n);if(h.minReadableWidth=v+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||i===!0)h.contentWidth>a?(h.minWidth=a,h.wrappedWidth=a):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var y=10/e;h.minWidth=h.styles.minCellWidth||y,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),t.allRows().forEach(function(o){for(var u=0,c=t.columns;u<c.length;u++){var f=c[u],h=o.cells[f.index];if(h&&h.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,h.wrappedWidth),f.minWidth=Math.max(f.minWidth,h.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,h.minReadableWidth);else{var p=t.styles.columnStyles[f.dataKey]||t.styles.columnStyles[f.index]||{},m=p.cellWidth||p.minCellWidth;m&&typeof m=="number"&&(f.minWidth=m,f.wrappedWidth=m)}h&&(h.colSpan>1&&!f.minWidth&&(f.minWidth=h.minWidth),h.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=h.minWidth))}})}function ug(n,t,e){for(var i=t,a=n.reduce(function(y,S){return y+S.wrappedWidth},0),o=0;o<n.length;o++){var u=n[o],c=u.wrappedWidth/a,f=i*c,h=u.width+f,p=e(u),m=h<p?p:h;t-=m-u.width,u.width=m}if(t=Math.round(t*1e10)/1e10,t){var v=n.filter(function(y){return t<0?y.width>e(y):!0});v.length&&(t=ug(v,t,e))}return t}function Fz(n){for(var t={},e=1,i=n.allRows(),a=0;a<i.length;a++)for(var o=i[a],u=0,c=n.columns;u<c.length;u++){var f=c[u],h=t[f.index];if(e>1)e--,delete o.cells[f.index];else if(h)h.cell.height+=o.height,e=h.cell.colSpan,delete o.cells[f.index],h.left--,h.left<=1&&delete t[f.index];else{var p=o.cells[f.index];if(!p)continue;if(p.height=o.height,p.rowSpan>1){var m=i.length-a,v=p.rowSpan>m?m:p.rowSpan;t[f.index]={cell:p,left:v,row:o}}}}}function Bz(n){for(var t=n.allRows(),e=0;e<t.length;e++)for(var i=t[e],a=null,o=0,u=0,c=0;c<n.columns.length;c++){var f=n.columns[c];if(u-=1,u>1&&n.columns[c+1])o+=f.width,delete i.cells[f.index];else if(a){var h=a;delete i.cells[f.index],a=null,h.width=f.width+o}else{var h=i.cells[f.index];if(!h)continue;if(u=h.colSpan,o=0,h.colSpan>1){a=h,o+=f.width;continue}h.width=f.width+o}}}function zz(n,t){for(var e={count:0,height:0},i=0,a=n.allRows();i<a.length;i++){for(var o=a[i],u=0,c=n.columns;u<c.length;u++){var f=c[u],h=o.cells[f.index];if(h){t.applyStyles(h.styles,!0);var p=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=t.splitTextToSize(h.text,p+1/t.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=A5(h.text,p,h.styles,t,"...");else if(h.styles.overflow==="hidden")h.text=A5(h.text,p,h.styles,t,"");else if(typeof h.styles.overflow=="function"){var m=h.styles.overflow(h.text,p);typeof m=="string"?h.text=[m]:h.text=m}h.contentHeight=h.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var v=h.contentHeight/h.rowSpan;h.rowSpan>1&&e.count*e.height<v*h.rowSpan?e={height:v,count:h.rowSpan}:e&&e.count>0&&e.height>v&&(v=e.height),v>o.height&&(o.height=v)}}e.count--}}function A5(n,t,e,i,a){return n.map(function(o){return Uz(o,t,e,i,a)})}function Uz(n,t,e,i,a){var o=1e4*i.scaleFactor();if(t=Math.ceil(t*o)/o,t>=fp(n,e,i))return n;for(;t<fp(n+a,e,i)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+a}function Ew(n,t){var e=new of(n),i=$z(t,e.scaleFactor()),a=new Dz(t,i);return Mz(e,a),e.applyStyles(e.userStyles),a}function $z(n,t){var e=n.content,i=Hz(e.columns);if(e.head.length===0){var a=N5(i,"head");a&&e.head.push(a)}if(e.foot.length===0){var a=N5(i,"foot");a&&e.foot.push(a)}var o=n.settings.theme,u=n.styles;return{columns:i,head:_1("head",e.head,i,u,o,t),body:_1("body",e.body,i,u,o,t),foot:_1("foot",e.foot,i,u,o,t)}}function _1(n,t,e,i,a,o){var u={},c=t.map(function(f,h){for(var p=0,m={},v=0,y=0,S=0,N=e;S<N.length;S++){var A=N[S];if(u[A.index]==null||u[A.index].left===0)if(y===0){var _=void 0;Array.isArray(f)?_=f[A.index-v-p]:_=f[A.dataKey];var I={};typeof _=="object"&&!Array.isArray(_)&&(I=_?.styles||{});var D=qz(n,A,h,a,i,o,I),M=new kw(_,D,n);m[A.dataKey]=M,m[A.index]=M,y=M.colSpan-1,u[A.index]={left:M.rowSpan-1,times:y}}else y--,v++;else u[A.index].left--,y=u[A.index].times,p++}return new _w(f,h,n,m)});return c}function N5(n,t){var e={};return n.forEach(function(i){if(i.raw!=null){var a=jz(t,i.raw);a!=null&&(e[i.dataKey]=a)}}),Object.keys(e).length>0?e:null}function jz(n,t){if(n==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(n==="foot"&&typeof t=="object")return t.footer;return null}function Hz(n){return n.map(function(t,e){var i,a;return typeof t=="object"?a=(i=t.dataKey)!==null&&i!==void 0?i:e:a=e,new Pz(a,t,e)})}function qz(n,t,e,i,a,o,u){var c=bz(i),f;n==="head"?f=a.headStyles:n==="body"?f=a.bodyStyles:n==="foot"&&(f=a.footStyles);var h=Yo({},c.table,c[n],a.styles,f),p=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},m=n==="body"?p:{},v=n==="body"&&e%2===0?Yo({},c.alternateRow,a.alternateRowStyles):{},y=vz(o),S=Yo({},y,h,v,m);return Yo(S,u)}function Wz(n,t,e){var i;e===void 0&&(e={});var a=Sw(n,t),o=new Map,u=[],c=[],f=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?f=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(f=[t.settings.horizontalPageBreakRepeat]),f.forEach(function(v){var y=t.columns.find(function(S){return S.dataKey===v||S.index===v});y&&!o.has(y.index)&&(o.set(y.index,!0),u.push(y.index),c.push(t.columns[y.index]),a-=y.wrappedWidth)});for(var h=!0,p=(i=e?.start)!==null&&i!==void 0?i:0;p<t.columns.length;){if(o.has(p)){p++;continue}var m=t.columns[p].wrappedWidth;if(h||a>=m)h=!1,u.push(p),c.push(t.columns[p]),a-=m;else break;p++}return{colIndexes:u,columns:c,lastIndex:p-1}}function Vz(n,t){for(var e=[],i=0;i<t.columns.length;i++){var a=Wz(n,t,{start:i});a.columns.length&&(e.push(a),i=a.lastIndex)}return e}function Lw(n,t){var e=t.settings,i=e.startY,a=e.margin,o={x:a.left,y:i},u=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),c=i+a.bottom+u;if(e.pageBreak==="avoid"){var f=t.body,h=f.reduce(function(v,y){return v+y.height},0);c+=h}var p=new of(n);(e.pageBreak==="always"||e.startY!=null&&c>p.pageSize().height)&&(Iw(p),o.y=a.top),t.callWillDrawPageHooks(p,o);var m=Yo({},o);t.startPageNumber=p.pageNumber(),e.horizontalPageBreak?Gz(p,t,m,o):(p.applyStyles(p.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(v){return Jo(p,t,v,o,t.columns)}),p.applyStyles(p.userStyles),t.body.forEach(function(v,y){var S=y===t.body.length-1;hp(p,t,v,S,m,o,t.columns)}),p.applyStyles(p.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(v){return Jo(p,t,v,o,t.columns)})),ww(p,t,m,o),t.callEndPageHooks(p,o),t.finalY=o.y,n.lastAutoTable=t,p.applyStyles(p.userStyles)}function Gz(n,t,e,i){var a=Vz(n,t),o=t.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(h,p){n.applyStyles(n.userStyles),p>0?gh(n,t,e,i,h.columns,!0):_5(n,t,i,h.columns),Yz(n,t,e,i,h.columns),k1(n,t,i,h.columns)});else for(var u=-1,c=a[0],f=function(){var h=u;if(c){n.applyStyles(n.userStyles);var p=c.columns;u>=0?gh(n,t,e,i,p,!0):_5(n,t,i,p),h=k5(n,t,u+1,i,p),k1(n,t,i,p)}var m=h-u;a.slice(1).forEach(function(v){n.applyStyles(n.userStyles),gh(n,t,e,i,v.columns,!0),k5(n,t,u+1,i,v.columns,m),k1(n,t,i,v.columns)}),u=h};u<t.body.length-1;)f()}function _5(n,t,e,i){var a=t.settings;n.applyStyles(n.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(o){return Jo(n,t,o,e,i)})}function Yz(n,t,e,i,a){n.applyStyles(n.userStyles),t.body.forEach(function(o,u){var c=u===t.body.length-1;hp(n,t,o,c,e,i,a)})}function k5(n,t,e,i,a,o){n.applyStyles(n.userStyles),o=o??t.body.length;var u=Math.min(e+o,t.body.length),c=-1;return t.body.slice(e,u).forEach(function(f,h){var p=e+h===t.body.length-1,m=Rw(n,t,p,i);f.canEntireRowFit(m,a)&&(Jo(n,t,f,i,a),c=e+h)}),c}function k1(n,t,e,i){var a=t.settings;n.applyStyles(n.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(o){return Jo(n,t,o,e,i)})}function Xz(n,t,e){var i=e.getLineHeight(n.styles.fontSize),a=n.padding("vertical"),o=Math.floor((t-a)/i);return Math.max(0,o)}function Kz(n,t,e,i){var a={};n.spansMultiplePages=!0,n.height=0;for(var o=0,u=0,c=e.columns;u<c.length;u++){var f=c[u],h=n.cells[f.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var p=new kw(h.raw,h.styles,h.section);p=Yo(p,h),p.text=[];var m=Xz(h,t,i);h.text.length>m&&(p.text=h.text.splice(m,h.text.length));var v=i.scaleFactor(),y=i.getLineHeightFactor();h.contentHeight=h.getContentHeight(v,y),h.contentHeight>=t&&(h.contentHeight=t,p.styles.minCellHeight-=t),h.contentHeight>n.height&&(n.height=h.contentHeight),p.contentHeight=p.getContentHeight(v,y),p.contentHeight>o&&(o=p.contentHeight),a[f.index]=p}}var S=new _w(n.raw,-1,n.section,a,!0);S.height=o;for(var N=0,A=e.columns;N<A.length;N++){var f=A[N],p=S.cells[f.index];p&&(p.height=S.height);var h=n.cells[f.index];h&&(h.height=n.height)}return S}function Qz(n,t,e,i){var a=n.pageSize().height,o=i.settings.margin,u=o.top+o.bottom,c=a-u;t.section==="body"&&(c-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var f=t.getMinimumRowHeight(i.columns,n),h=f<e;if(f>c)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var p=t.hasRowSpan(i.columns),m=t.getMaxCellHeight(i.columns)>c;return m?(p&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(p||i.settings.rowPageBreak==="avoid")}function hp(n,t,e,i,a,o,u){var c=Rw(n,t,i,o);if(e.canEntireRowFit(c,u))Jo(n,t,e,o,u);else if(Qz(n,e,c,t)){var f=Kz(e,c,t,n);Jo(n,t,e,o,u),gh(n,t,a,o,u),hp(n,t,f,i,a,o,u)}else gh(n,t,a,o,u),hp(n,t,e,i,a,o,u)}function Jo(n,t,e,i,a){i.x=t.settings.margin.left;for(var o=0,u=a;o<u.length;o++){var c=u[o],f=e.cells[c.index];if(!f){i.x+=c.width;continue}n.applyStyles(f.styles),f.x=i.x,f.y=i.y;var h=t.callCellHooks(n,t.hooks.willDrawCell,f,e,c,i);if(h===!1){i.x+=c.width;continue}Zz(n,f,i);var p=f.getTextPos();yw(f.text,p.x,p.y,{halign:f.styles.halign,valign:f.styles.valign,maxWidth:Math.ceil(f.width-f.padding("left")-f.padding("right"))},n.getDocument()),t.callCellHooks(n,t.hooks.didDrawCell,f,e,c,i),i.x+=c.width}i.y+=e.height}function Zz(n,t,e){var i=t.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof i.lineWidth=="number"){var a=xw(i.lineWidth,i.fillColor);a&&n.rect(t.x,e.y,t.width,t.height,a)}else typeof i.lineWidth=="object"&&(i.fillColor&&n.rect(t.x,e.y,t.width,t.height,"F"),Jz(n,t,e,i.lineWidth))}function Jz(n,t,e,i){var a,o,u,c;i.top&&(a=e.x,o=e.y,u=e.x+t.width,c=e.y,i.right&&(u+=.5*i.right),i.left&&(a-=.5*i.left),f(i.top,a,o,u,c)),i.bottom&&(a=e.x,o=e.y+t.height,u=e.x+t.width,c=e.y+t.height,i.right&&(u+=.5*i.right),i.left&&(a-=.5*i.left),f(i.bottom,a,o,u,c)),i.left&&(a=e.x,o=e.y,u=e.x,c=e.y+t.height,i.top&&(o-=.5*i.top),i.bottom&&(c+=.5*i.bottom),f(i.left,a,o,u,c)),i.right&&(a=e.x+t.width,o=e.y,u=e.x+t.width,c=e.y+t.height,i.top&&(o-=.5*i.top),i.bottom&&(c+=.5*i.bottom),f(i.right,a,o,u,c));function f(h,p,m,v,y){n.getDocument().setLineWidth(h),n.getDocument().line(p,m,v,y,"S")}}function Rw(n,t,e,i){var a=t.settings.margin.bottom,o=t.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&e)&&(a+=t.getFootHeight(t.columns)),n.pageSize().height-i.y-a}function gh(n,t,e,i,a,o){a===void 0&&(a=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),t.settings.showFoot==="everyPage"&&!o&&t.foot.forEach(function(c){return Jo(n,t,c,i,a)}),t.callEndPageHooks(n,i);var u=t.settings.margin;ww(n,t,e,i),Iw(n),t.pageNumber++,i.x=u.left,i.y=u.top,e.y=u.top,t.callWillDrawPageHooks(n,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(c){return Jo(n,t,c,i,a)}),n.applyStyles(n.userStyles))}function Iw(n){var t=n.pageNumber();n.setPage(t+1);var e=n.pageNumber();return e===t?(n.addPage(),!0):!1}function tU(n){n.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],a=Nw(this,i),o=Ew(this,a);return Lw(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(t,e,i,a){yw(t,e,i,a,this)},n.API.autoTableSetDefaults=function(t){return of.setDefaults(t,this),this},n.autoTableSetDefaults=function(t,e){of.setDefaults(t,e)},n.API.autoTableHtmlToJson=function(t,e){var i;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new of(this),o=Aw(a,t,window,e,!1),u=o.head,c=o.body,f=((i=u[0])===null||i===void 0?void 0:i.map(function(h){return h.content}))||[];return{columns:f,rows:c,data:c}}}var E1;function E5(n,t){var e=Nw(n,t),i=Ew(n,e);Lw(n,i)}try{if(typeof window<"u"&&window){var L5=window,R5=L5.jsPDF||((E1=L5.jspdf)===null||E1===void 0?void 0:E1.jsPDF);R5&&tU(R5)}}catch(n){console.error("Could not apply autoTable plugin",n)}const eU=n=>{try{console.log("Generating PDF with data:",n);const t=new me,{practitionerName:e,sessionStartTime:i,sessionEndTime:a,detectedPoses:o,metrics:u}=n;t.setFillColor(212,163,115),t.rect(0,0,210,40,"F"),t.setTextColor(255,255,255),t.setFont("times","bold"),t.setFontSize(24),t.text("A Y U R S U T R A",105,20,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),t.text("Yoga Pose Monitoring & Diagnostic Report",105,30,{align:"center"}),t.setTextColor(60,60,60),t.setFontSize(14),t.setFont("helvetica","bold"),t.text("I. Session Metrics",14,55);const c=((a-i)/1e3/60).toFixed(2),f=a.toLocaleDateString("en-US",{month:"long",day:"2-digit",year:"numeric"}),h=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),p=[["Name",e,"Date",f],["Total Duration",`${c} Minutes`,"Time",h],["Analyzed Frames",u.totalFrames,"Avg Confidence",`${(u.avgConfidence*100).toFixed(2)}%`]];E5(t,{startY:60,head:[],body:p,theme:"plain",styles:{fontSize:10,cellPadding:2},columnStyles:{0:{fontStyle:"bold",width:40},2:{fontStyle:"bold",width:40}}}),t.setFontSize(14),t.setFont("helvetica","bold"),t.text("II. Pose Duration Analysis",14,t.lastAutoTable.finalY+15);const m=u.poseDurations.map((S,N)=>[`${N+1}. ${S.name}`,S.frames,`${S.time.toFixed(1)} s`]);E5(t,{startY:t.lastAutoTable.finalY+20,head:[["Pose Name","Frames Detected","Total Time (Approx)"]],body:m,theme:"striped",headStyles:{fillColor:[212,163,115]}});let v=t.lastAutoTable.finalY+20;v>230&&(t.addPage(),v=20),t.setFontSize(14),t.setTextColor(60,60,60),t.setFont("helvetica","bold"),t.text("III. Ancient Wisdom & Improvement Plan",14,v),v+=10,t.setFontSize(10),t.setFont("helvetica","normal");const y=(S,N)=>{t.setFont("helvetica","bold"),t.text(S,20,v);const A=t.getTextWidth(S);t.setFont("helvetica","normal");const _=t.splitTextToSize(N,170-A);t.text(_,20+A,v),v+=_.length*5+5};t.text(" Ensure the light of the sun (or room) illuminates your form clearly.",14,v),v+=7,t.text(" ",14,v),y("Strength Observed: ",u.narrative.strength),t.text(" ",14,v),y("Area for Growth: ",u.narrative.growth),t.text(" ",14,v),y("General Advice: ",u.narrative.advice),t.setFont("times","italic"),t.setFontSize(10),t.setTextColor(150,150,150),t.text("--- Om Shanti Shanti Shanti ---",105,280,{align:"center"}),console.log("Saving PDF..."),t.save(`Ayursutra_Report_${e.replace(/\s+/g,"_")}.pdf`)}catch(t){console.error("PDF Generation Error:",t),alert(`Failed to generate PDF: ${t.message}`)}},nU=()=>{const{practitionerName:n,sessionStartTime:t,sessionEndTime:e,detectedPoses:i,frameCount:a}=bg(),o=Nh(),u=Nt.useMemo(()=>{if(!i.length)return null;const f=i.length,h=i.reduce((A,_)=>A+_.confidence,0)/f,p={};i.forEach(A=>{p[A.name]||(p[A.name]={count:0,confidenceSum:0,timestamps:[]}),p[A.name].count++,p[A.name].confidenceSum+=A.confidence,p[A.name].timestamps.push(A.timestamp)});const m=Object.entries(p).map(([A,_])=>({name:A,frames:_.count,time:_.count/30,avgConfidence:_.confidenceSum/_.count})).sort((A,_)=>_.time-A.time),v=m.filter(A=>A.name!=="Unknown").slice(0,3).map(A=>({...A,longestHold:A.time,feedback:"Focus on maintaining steady breathing and core engagement."})),y=v[0]||{name:"None",time:0,avgConfidence:0},S=m.filter(A=>A.name!=="Unknown").pop()||{name:"None"},N={strength:`You showed great endurance in ${y.name}, holding it for ${y.time.toFixed(1)}s with ${(y.avgConfidence*100).toFixed(0)}% confidence.`,growth:`${S.name} was fleeting. Practice holding it for 5 deep breaths.`,advice:"Listen to your body. Yoga is not about touching your toes, it is about what you learn on the way down."};return{totalFrames:f,avgConfidence:h,poseDurations:m,topPoses:v,narrative:N}},[i,a]);if(!u)return Ut.jsx("div",{className:"p-10 text-center",children:"No session data found."});const c=()=>{eU({practitionerName:n,sessionStartTime:t,sessionEndTime:e||new Date,detectedPoses:i,metrics:u})};return Ut.jsx("div",{className:"min-h-screen bg-stone-50 p-8 font-sans text-stone-800",children:Ut.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden",children:[Ut.jsxs("div",{className:"bg-ayur-primary p-8 text-center text-white",children:[Ut.jsx("h1",{className:"text-3xl font-serif font-bold",children:"Session Report"}),Ut.jsx("p",{className:"opacity-90",children:"Ayursutra Yoga Monitor"})]}),Ut.jsxs("div",{className:"p-8 space-y-8",children:[Ut.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ut.jsxs("div",{className:"bg-stone-100 p-4 rounded-xl text-center",children:[Ut.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Name"}),Ut.jsx("div",{className:"font-bold text-lg text-ayur-primary",children:n})]}),Ut.jsxs("div",{className:"bg-stone-100 p-4 rounded-xl text-center",children:[Ut.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Duration"}),Ut.jsxs("div",{className:"font-bold text-lg text-ayur-primary",children:[((e-t)/1e3/60).toFixed(2),"m"]})]}),Ut.jsxs("div",{className:"bg-stone-100 p-4 rounded-xl text-center",children:[Ut.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Avg Confidence"}),Ut.jsxs("div",{className:"font-bold text-lg text-ayur-primary",children:[(u.avgConfidence*100).toFixed(1),"%"]})]}),Ut.jsxs("div",{className:"bg-stone-100 p-4 rounded-xl text-center",children:[Ut.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Poses Detected"}),Ut.jsx("div",{className:"font-bold text-lg text-ayur-primary",children:u.poseDurations.length})]})]}),Ut.jsxs("div",{children:[Ut.jsx("h2",{className:"text-xl font-serif font-bold mb-4 text-stone-700",children:"Pose Analysis"}),Ut.jsx("div",{className:"overflow-x-auto",children:Ut.jsxs("table",{className:"w-full text-left border-collapse",children:[Ut.jsx("thead",{children:Ut.jsxs("tr",{className:"bg-stone-100 text-stone-600 text-sm",children:[Ut.jsx("th",{className:"p-3 rounded-l-lg",children:"Pose Name"}),Ut.jsx("th",{className:"p-3",children:"Frames"}),Ut.jsx("th",{className:"p-3",children:"Time (Approx)"}),Ut.jsx("th",{className:"p-3 rounded-r-lg",children:"Confidence"})]})}),Ut.jsx("tbody",{className:"text-sm",children:u.poseDurations.map((f,h)=>Ut.jsxs("tr",{className:"border-b border-stone-100 hover:bg-stone-50",children:[Ut.jsx("td",{className:"p-3 font-medium",children:f.name}),Ut.jsx("td",{className:"p-3",children:f.frames}),Ut.jsxs("td",{className:"p-3",children:[f.time.toFixed(1),"s"]}),Ut.jsxs("td",{className:"p-3",children:[(f.avgConfidence*100).toFixed(0),"%"]})]},h))})]})})]}),Ut.jsxs("div",{className:"flex gap-4 pt-4",children:[Ut.jsxs("button",{onClick:c,className:"flex-1 py-3 bg-ayur-primary hover:bg-[#c59665] text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-md",children:[Ut.jsx(B4,{size:20}),"Download PDF Report"]}),Ut.jsxs("button",{onClick:()=>o("/"),className:"px-6 py-3 bg-stone-200 hover:bg-stone-300 text-stone-600 rounded-xl font-bold flex items-center justify-center gap-2 transition-all",children:[Ut.jsx(U4,{size:20}),"Home"]})]})]})]})})};function iU(){return Ut.jsx(C4,{children:Ut.jsx(d4,{children:Ut.jsxs(qS,{children:[Ut.jsx(oh,{path:"/",element:Ut.jsx(G4,{})}),Ut.jsx(oh,{path:"/session",element:Ut.jsx(kO,{})}),Ut.jsx(oh,{path:"/report",element:Ut.jsx(nU,{})}),Ut.jsx(oh,{path:"*",element:Ut.jsx(jS,{to:"/",replace:!0})})]})})})}Qx.createRoot(document.getElementById("root")).render(Ut.jsx(Hx.StrictMode,{children:Ut.jsx(iU,{})}));export{Tn as _,rU as c,cg as g};
